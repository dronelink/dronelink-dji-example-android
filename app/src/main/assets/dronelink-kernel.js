/*! For license information please see dronelink-kernel.js.LICENSE.txt */
var Dronelink;Dronelink=(()=>{var e={9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,a=l(e),r=a[0],s=a[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,r,s)),u=0,m=s>0?r-4:r;for(n=0;n<m;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[u++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,i=e.length,o=i%3,a=[],r=16383,s=0,l=i-o;s<l;s+=r)a.push(c(e,s,s+r>l?l:s+r));return 1===o?(t=e[i-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[i-2]<<8)+e[i-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,s=a.length;r<s;++r)n[r]=a[r],i[a.charCodeAt(r)]=r;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,i){for(var o,a,r=[],s=t;s<i;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),r.push(n[(a=o)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return r.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},2941:(e,n,i)=>{"use strict";i.r(n),i.d(n,{Bezier:()=>D});const{abs:o,cos:a,sin:r,acos:s,atan2:l,sqrt:c,pow:u}=Math;function m(e){return e<0?-u(-e,1/3):u(e,1/3)}const d=Math.PI,p=2*d,h=d/2,f=Number.MAX_SAFE_INTEGER||9007199254740991,g=Number.MIN_SAFE_INTEGER||-9007199254740991,y={x:0,y:0,z:0},C={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){const n=t(e);let i=n.x*n.x+n.y*n.y;return void 0!==n.z&&(i+=n.z*n.z),c(i)},compute:function(e,t,n){if(0===e)return t[0].t=0,t[0];const i=t.length-1;if(1===e)return t[i].t=1,t[i];const o=1-e;let a=t;if(0===i)return t[0].t=e,t[0];if(1===i){const t={x:o*a[0].x+e*a[1].x,y:o*a[0].y+e*a[1].y,t:e};return n&&(t.z=o*a[0].z+e*a[1].z),t}if(i<4){let t,r,s,l=o*o,c=e*e,u=0;2===i?(a=[a[0],a[1],a[2],y],t=l,r=o*e*2,s=c):3===i&&(t=l*o,r=l*e*3,s=o*c*3,u=e*c);const m={x:t*a[0].x+r*a[1].x+s*a[2].x+u*a[3].x,y:t*a[0].y+r*a[1].y+s*a[2].y+u*a[3].y,t:e};return n&&(m.z=t*a[0].z+r*a[1].z+s*a[2].z+u*a[3].z),m}const r=JSON.parse(JSON.stringify(t));for(;r.length>1;){for(let t=0;t<r.length-1;t++)r[t]={x:r[t].x+(r[t+1].x-r[t].x)*e,y:r[t].y+(r[t+1].y-r[t].y)*e},void 0!==r[t].z&&(r[t]=r[t].z+(r[t+1].z-r[t].z)*e);r.splice(r.length-1,1)}return r[0].t=e,r[0]},computeWithRatios:function(e,t,n,i){const o=1-e,a=n,r=t;let s,l=a[0],c=a[1],u=a[2],m=a[3];return l*=o,c*=e,2===r.length?(s=l+c,{x:(l*r[0].x+c*r[1].x)/s,y:(l*r[0].y+c*r[1].y)/s,z:!!i&&(l*r[0].z+c*r[1].z)/s,t:e}):(l*=o,c*=2*o,u*=e*e,3===r.length?(s=l+c+u,{x:(l*r[0].x+c*r[1].x+u*r[2].x)/s,y:(l*r[0].y+c*r[1].y+u*r[2].y)/s,z:!!i&&(l*r[0].z+c*r[1].z+u*r[2].z)/s,t:e}):(l*=o,c*=1.5*o,u*=3*o,m*=e*e*e,4===r.length?(s=l+c+u+m,{x:(l*r[0].x+c*r[1].x+u*r[2].x+m*r[3].x)/s,y:(l*r[0].y+c*r[1].y+u*r[2].y+m*r[3].y)/s,z:!!i&&(l*r[0].z+c*r[1].z+u*r[2].z+m*r[3].z)/s,t:e}):void 0))},derive:function(e,t){const n=[];for(let i=e,o=i.length,a=o-1;o>1;o--,a--){const e=[];for(let n,o=0;o<a;o++)n={x:a*(i[o+1].x-i[o].x),y:a*(i[o+1].y-i[o].y)},t&&(n.z=a*(i[o+1].z-i[o].z)),e.push(n);n.push(e),i=e}return n},between:function(e,t,n){return t<=e&&e<=n||C.approximately(e,t)||C.approximately(e,n)},approximately:function(e,t,n){return o(e-t)<=(n||1e-6)},length:function(e){const t=C.Tvalues.length;let n=0;for(let i,o=0;o<t;o++)i=.5*C.Tvalues[o]+.5,n+=C.Cvalues[o]*C.arcfn(i,e);return.5*n},map:function(e,t,n,i,o){return i+(e-t)/(n-t)*(o-i)},lerp:function(e,t,n){const i={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return t.z&&n.z&&(i.z=t.z+e*(n.z-t.z)),i},pointToString:function(e){let t=e.x+"/"+e.y;return void 0!==e.z&&(t+="/"+e.z),t},pointsToString:function(e){return"["+e.map(C.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){const i=t.x-e.x,o=t.y-e.y,a=n.x-e.x,r=n.y-e.y;return l(i*r-o*a,i*a+o*r)},round:function(e,t){const n=""+e,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+t))},dist:function(e,t){const n=e.x-t.x,i=e.y-t.y;return c(n*n+i*i)},closest:function(e,t){let n,i,o=u(2,63);return e.forEach((function(e,a){i=C.dist(t,e),i<o&&(o=i,n=a)})),{mdist:o,mpos:n}},abcratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;const n=u(e,t)+u(1-e,t);return o((n-1)/n)},projectionratio:function(e,t){if(2!==t&&3!==t)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;const n=u(1-e,t);return n/(u(e,t)+n)},lli8:function(e,t,n,i,o,a,r,s){const l=(e-n)*(a-s)-(t-i)*(o-r);return 0!=l&&{x:((e*i-t*n)*(o-r)-(e-n)*(o*s-a*r))/l,y:((e*i-t*n)*(a-s)-(t-i)*(o*s-a*r))/l}},lli4:function(e,t,n,i){const o=e.x,a=e.y,r=t.x,s=t.y,l=n.x,c=n.y,u=i.x,m=i.y;return C.lli8(o,a,r,s,l,c,u,m)},lli:function(e,t){return C.lli4(e,e.c,t,t.c)},makeline:function(e,t){const n=e.x,i=e.y,o=t.x,a=t.y,r=(o-n)/3,s=(a-i)/3;return new D(n,i,n+r,i+s,n+2*r,i+2*s,o,a)},findbbox:function(e){let t=f,n=f,i=g,o=g;return e.forEach((function(e){const a=e.bbox();t>a.x.min&&(t=a.x.min),n>a.y.min&&(n=a.y.min),i<a.x.max&&(i=a.x.max),o<a.y.max&&(o=a.y.max)})),{x:{min:t,mid:(t+i)/2,max:i,size:i-t},y:{min:n,mid:(n+o)/2,max:o,size:o-n}}},shapeintersections:function(e,t,n,i,o){if(!C.bboxoverlap(t,i))return[];const a=[],r=[e.startcap,e.forward,e.back,e.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return r.forEach((function(t){t.virtual||s.forEach((function(i){if(i.virtual)return;const r=t.intersects(i,o);r.length>0&&(r.c1=t,r.c2=i,r.s1=e,r.s2=n,a.push(r))}))})),a},makeshape:function(e,t,n){const i=t.points.length,o=e.points.length,a=C.makeline(t.points[i-1],e.points[0]),r=C.makeline(e.points[o-1],t.points[0]),s={startcap:a,forward:e,back:t,endcap:r,bbox:C.findbbox([a,e,t,r]),intersections:function(e){return C.shapeintersections(s,s.bbox,e,e.bbox,n)}};return s},getminmax:function(e,t,n){if(!n)return{min:0,max:0};let i,o,a=f,r=g;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(let s=0,l=n.length;s<l;s++)i=n[s],o=e.get(i),o[t]<a&&(a=o[t]),o[t]>r&&(r=o[t]);return{min:a,mid:(a+r)/2,max:r,size:r-a}},align:function(e,t){const n=t.p1.x,i=t.p1.y,o=-l(t.p2.y-i,t.p2.x-n);return e.map((function(e){return{x:(e.x-n)*a(o)-(e.y-i)*r(o),y:(e.x-n)*r(o)+(e.y-i)*a(o)}}))},roots:function(e,t){t=t||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,i=C.align(e,t),o=function(e){return 0<=e&&e<=1};if(2===n){const e=i[0].y,t=i[1].y,n=i[2].y,a=e-2*t+n;if(0!==a){const i=-c(t*t-e*n),r=-e+t;return[-(i+r)/a,-(-i+r)/a].filter(o)}return t!==n&&0===a?[(2*t-n)/(2*t-2*n)].filter(o):[]}const r=i[0].y,l=i[1].y,u=i[2].y;let d=3*l-r-3*u+i[3].y,h=3*r-6*l+3*u,f=-3*r+3*l,g=r;if(C.approximately(d,0)){if(C.approximately(h,0))return C.approximately(f,0)?[]:[-g/f].filter(o);const e=c(f*f-4*h*g),t=2*h;return[(e-f)/t,(-f-e)/t].filter(o)}h/=d,f/=d,g/=d;const y=(3*f-h*h)/3,v=y/3,b=(2*h*h*h-9*h*f+27*g)/27,S=b/2,w=S*S+v*v*v;let M,x,O,P,T;if(w<0){const e=-y/3,t=c(e*e*e),n=-b/(2*t),i=s(n<-1?-1:n>1?1:n),r=2*m(t);return O=r*a(i/3)-h/3,P=r*a((i+p)/3)-h/3,T=r*a((i+2*p)/3)-h/3,[O,P,T].filter(o)}if(0===w)return M=S<0?m(-S):-m(S),O=2*M-h/3,P=-M-h/3,[O,P].filter(o);{const e=c(w);return M=m(-S+e),x=m(S+e),[M-x-h/3].filter(o)}},droots:function(e){if(3===e.length){const t=e[0],n=e[1],i=e[2],o=t-2*n+i;if(0!==o){const e=-c(n*n-t*i),a=-t+n;return[-(e+a)/o,-(-e+a)/o]}return n!==i&&0===o?[(2*n-i)/(2*(n-i))]:[]}if(2===e.length){const t=e[0],n=e[1];return t!==n?[t/(t-n)]:[]}return[]},curvature:function(e,t,n,i,a){let r,s,l,m,d=0,p=0;const h=C.compute(e,t),f=C.compute(e,n),g=h.x*h.x+h.y*h.y;if(i?(r=c(u(h.y*f.z-f.y*h.z,2)+u(h.z*f.x-f.z*h.x,2)+u(h.x*f.y-f.x*h.y,2)),s=u(g+h.z*h.z,1.5)):(r=h.x*f.y-h.y*f.x,s=u(g,1.5)),0===r||0===s)return{k:0,r:0};if(d=r/s,p=s/r,!a){const a=C.curvature(e-.001,t,n,i,!0).k,r=C.curvature(e+.001,t,n,i,!0).k;m=(r-d+(d-a))/2,l=(o(r-d)+o(d-a))/2}return{k:d,r:p,dk:m,adk:l}},inflections:function(e){if(e.length<4)return[];const t=C.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=t[2].x*t[1].y,i=t[3].x*t[1].y,o=t[1].x*t[2].y,a=18*(-3*n+2*i+3*o-t[3].x*t[2].y),r=18*(3*n-i-3*o),s=18*(o-n);if(C.approximately(a,0)){if(!C.approximately(r,0)){let e=-s/r;if(0<=e&&e<=1)return[e]}return[]}const l=r*r-4*a*s,c=Math.sqrt(l),u=2*a;return C.approximately(u,0)?[]:[(c-r)/u,-(r+c)/u].filter((function(e){return 0<=e&&e<=1}))},bboxoverlap:function(e,t){const n=["x","y"],i=n.length;for(let a,r,s,l,c=0;c<i;c++)if(a=n[c],r=e[a].mid,s=t[a].mid,l=(e[a].size+t[a].size)/2,o(r-s)>=l)return!1;return!0},expandbox:function(e,t){t.x.min<e.x.min&&(e.x.min=t.x.min),t.y.min<e.y.min&&(e.y.min=t.y.min),t.z&&t.z.min<e.z.min&&(e.z.min=t.z.min),t.x.max>e.x.max&&(e.x.max=t.x.max),t.y.max>e.y.max&&(e.y.max=t.y.max),t.z&&t.z.max>e.z.max&&(e.z.max=t.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,t,n){const i=e.bbox(),o=t.bbox(),a=1e5,r=n||.5;if(i.x.size+i.y.size<r&&o.x.size+o.y.size<r)return[(a*(e._t1+e._t2)/2|0)/a+"/"+(a*(t._t1+t._t2)/2|0)/a];let s=e.split(.5),l=t.split(.5),c=[{left:s.left,right:l.left},{left:s.left,right:l.right},{left:s.right,right:l.right},{left:s.right,right:l.left}];c=c.filter((function(e){return C.bboxoverlap(e.left.bbox(),e.right.bbox())}));let u=[];return 0===c.length||(c.forEach((function(e){u=u.concat(C.pairiteration(e.left,e.right,r))})),u=u.filter((function(e,t){return u.indexOf(e)===t}))),u},getccenter:function(e,t,n){const i=t.x-e.x,o=t.y-e.y,s=n.x-t.x,c=n.y-t.y,u=i*a(h)-o*r(h),m=i*r(h)+o*a(h),d=s*a(h)-c*r(h),f=s*r(h)+c*a(h),g=(e.x+t.x)/2,y=(e.y+t.y)/2,v=(t.x+n.x)/2,b=(t.y+n.y)/2,S=g+u,w=y+m,M=v+d,x=b+f,O=C.lli8(g,y,S,w,v,b,M,x),P=C.dist(O,e);let T,D=l(e.y-O.y,e.x-O.x),E=l(t.y-O.y,t.x-O.x),A=l(n.y-O.y,n.x-O.x);return D<A?((D>E||E>A)&&(D+=p),D>A&&(T=A,A=D,D=T)):A<E&&E<D?(T=A,A=D,D=T):A+=p,O.s=D,O.e=A,O.r=P,O},numberSort:function(e,t){return e-t}};class v{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(e){return C.pointsToString(e.points)})).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map((function(e){return e.length()})).reduce((function(e,t){return e+t}))}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var t=e[0].bbox(),n=1;n<e.length;n++)C.expandbox(t,e[n].bbox());return t}offset(e){const t=[];return this.curves.forEach((function(n){t.push(...n.offset(e))})),new v(t)}}const{abs:b,min:S,max:w,cos:M,sin:x,acos:O,sqrt:P}=Math,T=Math.PI;class D{constructor(e){let t=e&&e.forEach?e:Array.from(arguments).slice(),n=!1;if("object"==typeof t[0]){n=t.length;const e=[];t.forEach((function(t){["x","y","z"].forEach((function(n){void 0!==t[n]&&e.push(t[n])}))})),t=e}let i=!1;const o=t.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const a=this._3d=!i&&(9===o||12===o)||e&&e[0]&&void 0!==e[0].z,r=this.points=[];for(let e=0,n=a?3:2;e<o;e+=n){var s={x:t[e],y:t[e+1]};a&&(s.z=t[e+2]),r.push(s)}const l=this.order=r.length-1,c=this.dims=["x","y"];a&&c.push("z"),this.dimlen=c.length;const u=C.align(r,{p1:r[0],p2:r[l]});this._linear=!u.some((e=>b(e.y)>1e-4)),this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,t,n,i){if(void 0===i&&(i=.5),0===i)return new D(t,t,n);if(1===i)return new D(e,t,t);const o=D.getABC(2,e,t,n,i);return new D(e,o.A,n)}static cubicFromPoints(e,t,n,i,o){void 0===i&&(i=.5);const a=D.getABC(3,e,t,n,i);void 0===o&&(o=C.dist(t,a.C));const r=o*(1-i)/i,s=C.dist(e,n),l=(n.x-e.x)/s,c=(n.y-e.y)/s,u=o*l,m=o*c,d=r*l,p=r*c,h=t.x-u,f=t.y-m,g=t.x+d,y=t.y+p,v=a.A,b=v.x+(h-v.x)/(1-i),S=v.y+(f-v.y)/(1-i),w=v.x+(g-v.x)/i,M=v.y+(y-v.y)/i,x={x:e.x+(b-e.x)/i,y:e.y+(S-e.y)/i},O={x:n.x+(w-n.x)/(1-i),y:n.y+(M-n.y)/(1-i)};return new D(e,x,O,n)}static getUtils(){return C}getUtils(){return D.getUtils()}static get PolyBezier(){return v}valueOf(){return this.toString()}toString(){return C.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,t=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let n=1,i=e.length;n<i;n++)t.push(e[n].x),t.push(e[n].y);return t.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map((function(e,t){return""+t+e.x+e.y+(e.z?e.z:0)})).join("")}update(){this._lut=[],this.dpoints=C.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,t=C.angle(e[0],e[this.order],e[1]);this.clockwise=t>0}length(){return C.length(this.derivative.bind(this))}static getABC(e=2,t,n,i,o=.5){const a=C.projectionratio(o,e),r=1-a,s={x:a*t.x+r*i.x,y:a*t.y+r*i.y},l=C.abcratio(o,e);return{A:{x:n.x+(n.x-s.x)/l,y:n.y+(n.y-s.y)/l},B:n,C:s,S:t,E:i}}getABC(e,t){t=t||this.get(e);let n=this.points[0],i=this.points[this.order];return D.getABC(this.order,n,t,i,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e)return this._lut;this._lut=[],e--;for(let t,n,i=0;i<e;i++)n=i/(e-1),t=this.compute(n),t.t=n,this._lut.push(t);return this._lut}on(e,n){n=n||5;const i=this.getLUT(),o=[];for(let t,a=0,r=0;a<i.length;a++)t=i[a],C.dist(t,e)<n&&(o.push(t),r+=a/i.length);return!!o.length&&(t/=o.length)}project(e){const t=this.getLUT(),n=t.length-1,i=C.closest(t,e),o=i.mpos,a=(o-1)/n,r=(o+1)/n,s=.1/n;let l,c,u=i.mdist,m=a,d=m;for(u+=1;m<r+s;m+=s)l=this.compute(m),c=C.dist(e,l),c<u&&(u=c,d=m);return d=d<0?0:d>1?1:d,l=this.compute(d),l.t=d,l.d=u,l}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?C.computeWithRatios(e,this.points,this.ratios,this._3d):C.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,t=[e[0]],n=e.length;for(let i,o,a=1;a<n;a++)i=e[a],o=e[a-1],t[a]={x:(n-a)/n*i.x+a/n*o.x,y:(n-a)/n*i.y+a/n*o.y};return t[n]=e[n-1],new D(t)}derivative(e){return C.compute(e,this.dpoints[0])}dderivative(e){return C.compute(e,this.dpoints[1])}align(){let e=this.points;return new D(C.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return C.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return C.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const t=this.derivative(e),n=P(t.x*t.x+t.y*t.y);return{x:-t.y/n,y:t.x/n}}__normal3(e){const t=this.derivative(e),n=this.derivative(e+.01),i=P(t.x*t.x+t.y*t.y+t.z*t.z),o=P(n.x*n.x+n.y*n.y+n.z*n.z);t.x/=i,t.y/=i,t.z/=i,n.x/=o,n.y/=o,n.z/=o;const a={x:n.y*t.z-n.z*t.y,y:n.z*t.x-n.x*t.z,z:n.x*t.y-n.y*t.x},r=P(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=r,a.y/=r,a.z/=r;const s=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{x:s[0]*t.x+s[1]*t.y+s[2]*t.z,y:s[3]*t.x+s[4]*t.y+s[5]*t.z,z:s[6]*t.x+s[7]*t.y+s[8]*t.z}}hull(e){let t=this.points,n=[],i=[],o=0;for(i[o++]=t[0],i[o++]=t[1],i[o++]=t[2],3===this.order&&(i[o++]=t[3]);t.length>1;){n=[];for(let a,r=0,s=t.length-1;r<s;r++)a=C.lerp(e,t[r],t[r+1]),i[o++]=a,n.push(a);t=n}return i}split(e,t){if(0===e&&t)return this.split(t).left;if(1===t)return this.split(e).right;const n=this.hull(e),i={left:2===this.order?new D([n[0],n[3],n[5]]):new D([n[0],n[4],n[7],n[9]]),right:2===this.order?new D([n[5],n[4],n[2]]):new D([n[9],n[8],n[6],n[3]]),span:n};return i.left._t1=C.map(0,0,1,this._t1,this._t2),i.left._t2=C.map(e,0,1,this._t1,this._t2),i.right._t1=C.map(e,0,1,this._t1,this._t2),i.right._t2=C.map(1,0,1,this._t1,this._t2),t?(t=C.map(t,e,1,0,1),i.right.split(t).left):i}extrema(){const e={};let t=[];return this.dims.forEach(function(n){let i=function(e){return e[n]},o=this.dpoints[0].map(i);e[n]=C.droots(o),3===this.order&&(o=this.dpoints[1].map(i),e[n]=e[n].concat(C.droots(o))),e[n]=e[n].filter((function(e){return e>=0&&e<=1})),t=t.concat(e[n].sort(C.numberSort))}.bind(this)),e.values=t.sort(C.numberSort).filter((function(e,n){return t.indexOf(e)===n})),e}bbox(){const e=this.extrema(),t={};return this.dims.forEach(function(n){t[n]=C.getminmax(this,n,e[n])}.bind(this)),t}overlaps(e){const t=this.bbox(),n=e.bbox();return C.bboxoverlap(t,n)}offset(e,t){if(void 0!==t){const n=this.get(e),i=this.normal(e),o={c:n,n:i,x:n.x+i.x*t,y:n.y+i.y*t};return this._3d&&(o.z=n.z+i.z*t),o}if(this._linear){const t=this.normal(0),n=this.points.map((function(n){const i={x:n.x+e*t.x,y:n.y+e*t.y};return n.z&&t.z&&(i.z=n.z+e*t.z),i}));return[new D(n)]}return this.reduce().map((function(t){return t._linear?t.offset(e)[0]:t.scale(e)}))}simple(){if(3===this.order){const e=C.angle(this.points[0],this.points[3],this.points[1]),t=C.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&t<0||e<0&&t>0)return!1}const e=this.normal(0),t=this.normal(1);let n=e.x*t.x+e.y*t.y;return this._3d&&(n+=e.z*t.z),b(O(n))<T/3}reduce(){let e,t,n=0,i=0,o=.01,a=[],r=[],s=this.extrema().values;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),n=s[0],e=1;e<s.length;e++)i=s[e],t=this.split(n,i),t._t1=n,t._t2=i,a.push(t),n=i;return a.forEach((function(e){for(n=0,i=0;i<=1;)for(i=n+o;i<=1.01;i+=o)if(t=e.split(n,i),!t.simple()){if(i-=o,b(n-i)<o)return[];t=e.split(n,i),t._t1=C.map(n,0,1,e._t1,e._t2),t._t2=C.map(i,0,1,e._t1,e._t2),r.push(t),n=i;break}n<1&&(t=e.split(n,1),t._t1=C.map(n,0,1,e._t1,e._t2),t._t2=e._t2,r.push(t))})),r}scale(e){const t=this.order;let n=!1;if("function"==typeof e&&(n=e),n&&2===t)return this.raise().scale(n);const i=this.clockwise,o=n?n(0):e,a=n?n(1):e,r=[this.offset(0,10),this.offset(1,10)],s=this.points,l=[],c=C.lli4(r[0],r[0].c,r[1],r[1].c);if(!c)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(e){const n=l[e*t]=C.copy(s[e*t]);n.x+=(e?a:o)*r[e].n.x,n.y+=(e?a:o)*r[e].n.y})),n?([0,1].forEach((function(o){if(2!==t||!o){var a=s[o+1],r={x:a.x-c.x,y:a.y-c.y},u=n?n((o+1)/t):e;n&&!i&&(u=-u);var m=P(r.x*r.x+r.y*r.y);r.x/=m,r.y/=m,l[o+1]={x:a.x+u*r.x,y:a.y+u*r.y}}})),new D(l)):([0,1].forEach((e=>{if(2===t&&e)return;const n=l[e*t],i=this.derivative(e),o={x:n.x+i.x,y:n.y+i.y};l[e+1]=C.lli4(n,o,c,s[e+1])})),new D(l))}outline(e,t,n,i){t=void 0===t?e:t;const o=this.reduce(),a=o.length,r=[];let s,l=[],c=0,u=this.length();const m=void 0!==n&&void 0!==i;function d(e,t,n,i,o){return function(a){const r=i/n,s=(i+o)/n,l=t-e;return C.map(a,0,1,e+r*l,e+s*l)}}o.forEach((function(o){const a=o.length();m?(r.push(o.scale(d(e,n,u,c,a))),l.push(o.scale(d(-t,-i,u,c,a)))):(r.push(o.scale(e)),l.push(o.scale(-t))),c+=a})),l=l.map((function(e){return s=e.points,s[3]?e.points=[s[3],s[2],s[1],s[0]]:e.points=[s[2],s[1],s[0]],e})).reverse();const p=r[0].points[0],h=r[a-1].points[r[a-1].points.length-1],f=l[a-1].points[l[a-1].points.length-1],g=l[0].points[0],y=C.makeline(f,p),b=C.makeline(h,g),S=[y].concat(r).concat([b]).concat(l);return S.length,new v(S)}outlineshapes(e,t,n){t=t||e;const i=this.outline(e,t).curves,o=[];for(let e=1,t=i.length;e<t/2;e++){const a=C.makeshape(i[e],i[t-e],n);a.startcap.virtual=e>1,a.endcap.virtual=e<t/2-1,o.push(a)}return o}intersects(e,t){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof D&&(e=e.reduce()),this.curveintersects(this.reduce(),e,t)):this.selfintersects(t)}lineIntersects(e){const t=S(e.p1.x,e.p2.x),n=S(e.p1.y,e.p2.y),i=w(e.p1.x,e.p2.x),o=w(e.p1.y,e.p2.y);return C.roots(this.points,e).filter((e=>{var a=this.get(e);return C.between(a.x,t,i)&&C.between(a.y,n,o)}))}selfintersects(e){const t=this.reduce(),n=t.length-2,i=[];for(let o,a,r,s=0;s<n;s++)a=t.slice(s,s+1),r=t.slice(s+2),o=this.curveintersects(a,r,e),i.push(...o);return i}curveintersects(e,t,n){const i=[];e.forEach((function(e){t.forEach((function(t){e.overlaps(t)&&i.push({left:e,right:t})}))}));let o=[];return i.forEach((function(e){const t=C.pairiteration(e.left,e.right,n);t.length>0&&(o=o.concat(t))})),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,t,n,i){const o=(i-n)/4,a=this.get(n+o),r=this.get(i-o),s=C.dist(e,t),l=C.dist(e,a),c=C.dist(e,r);return b(l-s)+b(c-s)}_iterate(e,t){let n,i=0,o=1;do{n=0,o=1;let a,r,s,l,c,u=this.get(i),m=!1,d=!1,p=o,h=1,f=0;do{if(d=m,l=s,p=(i+o)/2,f++,a=this.get(p),r=this.get(o),s=C.getccenter(u,a,r),s.interval={start:i,end:o},m=this._error(s,u,i,o)<=e,c=d&&!m,c||(h=o),m){if(o>=1){if(s.interval.end=h=1,l=s,o>1){let e={x:s.x+s.r*M(s.e),y:s.y+s.r*x(s.e)};s.e+=C.angle({x:s.x,y:s.y},e,this.get(1))}break}o+=(o-i)/2}else o=p}while(!c&&n++<100);if(n>=100)break;l=l||s,t.push(l),i=h}while(o<1);return t}}},8764:(e,t,n)=>{"use strict";const i=n(9742),o=n(645),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const r=2147483647;function s(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return m(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|f(e,t);let i=s(n);const o=i.write(e,t);return o!==n&&(i=i.slice(0,o)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return l.from(i,t,n);const o=function(e){if(l.isBuffer(e)){const t=0|h(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||$(e.length)?s(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function m(e){return u(e),s(e<0?0:0|h(e))}function d(e){const t=e.length<0?0:0|h(e.length),n=s(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,l.prototype),i}function h(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(o)return i?-1:H(e).length;t=(""+t).toLowerCase(),o=!0}}function g(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return D(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function y(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function C(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),$(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,i,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,i,o){let a,r=1,s=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;r=2,s/=2,l/=2,n/=2}function c(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(o){let i=-1;for(a=n;a<s;a++)if(c(e,a)===c(t,-1===i?0:a-i)){if(-1===i&&(i=a),a-i+1===l)return i*r}else-1!==i&&(a-=a-i),i=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){let n=!0;for(let i=0;i<l;i++)if(c(e,a+i)!==c(t,i)){n=!1;break}if(n)return a}return-1}function b(e,t,n,i){n=Number(n)||0;const o=e.length-n;i?(i=Number(i))>o&&(i=o):i=o;const a=t.length;let r;for(i>a/2&&(i=a/2),r=0;r<i;++r){const i=parseInt(t.substr(2*r,2),16);if($(i))return r;e[n+r]=i}return r}function S(e,t,n,i){return Z(H(t,e.length-n),e,n,i)}function w(e,t,n,i){return Z(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function M(e,t,n,i){return Z(q(t),e,n,i)}function x(e,t,n,i){return Z(function(e,t){let n,i,o;const a=[];for(let r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),i=n>>8,o=n%256,a.push(o),a.push(i);return a}(t,e.length-n),e,n,i)}function O(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);const i=[];let o=t;for(;o<n;){const t=e[o];let a=null,r=t>239?4:t>223?3:t>191?2:1;if(o+r<=n){let n,i,s,l;switch(r){case 1:t<128&&(a=t);break;case 2:n=e[o+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(a=l));break;case 3:n=e[o+1],i=e[o+2],128==(192&n)&&128==(192&i)&&(l=(15&t)<<12|(63&n)<<6|63&i,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:n=e[o+1],i=e[o+2],s=e[o+3],128==(192&n)&&128==(192&i)&&128==(192&s)&&(l=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&s,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,r=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),o+=r}return function(e){const t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=T));return n}(i)}t.kMaxLength=r,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},l.allocUnsafe=function(e){return m(e)},l.allocUnsafeSlow=function(e){return m(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=l.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(K(t,Uint8Array))o+t.length>i.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(i,o)):Uint8Array.prototype.set.call(i,t,o);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,o)}o+=t.length}return i},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?P(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,n,i,o){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(o>>>=0)-(i>>>=0),r=(n>>>=0)-(t>>>=0);const s=Math.min(a,r),c=this.slice(i,o),u=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==u[e]){a=c[e],r=u[e];break}return a<r?-1:r<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return C(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return C(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return M(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function D(e,t,n){let i="";n=Math.min(e.length,n);for(let o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}function E(e,t,n){let i="";n=Math.min(e.length,n);for(let o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function A(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let o="";for(let i=t;i<n;++i)o+=X[e[i]];return o}function F(e,t,n){const i=e.slice(t,n);let o="";for(let e=0;e<i.length-1;e+=2)o+=String.fromCharCode(i[e]+256*i[e+1]);return o}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,i,o,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function _(e,t,n,i,o){G(t,i,o,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=r,r>>=8,e[n++]=r,r>>=8,e[n++]=r,r>>=8,e[n++]=r,n}function R(e,t,n,i,o){G(t,i,o,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let r=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=r,r>>=8,e[n+2]=r,r>>=8,e[n+1]=r,r>>=8,e[n]=r,n+8}function L(e,t,n,i,o,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(e,t,n,i,a){return t=+t,n>>>=0,a||L(e,0,n,4),o.write(e,t,n,i,23,4),n+4}function z(e,t,n,i,a){return t=+t,n>>>=0,a||L(e,0,n,8),o.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,l.prototype),i},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return i},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||J(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))})),l.prototype.readBigUInt64BE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||J(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(o)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let i=this[e],o=1,a=0;for(;++a<t&&(o*=256);)i+=this[e+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let i=t,o=1,a=this[e+--i];for(;i>0&&(o*=256);)a+=this[e+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||J(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||J(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||I(this,e,t,n,Math.pow(2,8*n)-1,0);let o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||I(this,e,t,n,Math.pow(2,8*n)-1,0);let o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Y((function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Y((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}let o=0,a=1,r=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===r&&0!==this[t+o-1]&&(r=1),this[t+o]=(e/a>>0)-r&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}let o=n-1,a=1,r=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===r&&0!==this[t+o+1]&&(r=1),this[t+o]=(e/a>>0)-r&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Y((function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Y((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return k(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return k(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const o=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o},l.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{const a=l.isBuffer(e)?e:l.from(e,i),r=a.length;if(0===r)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%r]}return this};const B={};function j(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function V(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function G(e,t,n,i,o,a){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let o;throw o=a>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(a+1)}${i}`:`>= -(2${i} ** ${8*(a+1)-1}${i}) and < 2 ** ${8*(a+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new B.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){U(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||J(t,e.length-(n+1))}(i,o,a)}function U(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function J(e,t,n){if(Math.floor(e)!==e)throw U(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,n){let i=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=V(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=V(o)),o+="n"),i+=` It must be ${t}. Received ${o}`,i}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function H(e,t){let n;t=t||1/0;const i=e.length;let o=null;const a=[];for(let r=0;r<i;++r){if(n=e.charCodeAt(r),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(r+1===i){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function q(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Z(e,t,n,i){let o;for(o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let o=0;o<16;++o)t[i+o]=e[n]+e[o]}return t}();function Y(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},5732:(e,t,n)=>{var i;!function(){"use strict";function o(e){e.sort((function(e,t){return e.x!=t.x?e.x-t.x:e.y-t.y}));for(var t,n,i,o,a,r=e.length,s=[],l=0;l<2*r;l++){for(var c=l<r?l:2*r-1-l;s.length>=2&&(t=s[s.length-2],n=s[s.length-1],i=e[c],void 0,void 0,o=(t.x-n.x)*(i.y-n.y)-(t.y-n.y)*(i.x-n.x),a=(t.x-n.x)*(i.x-n.x)+(t.y-n.y)*(i.y-n.y),o<0||0==o&&a<=0);)s.pop();s.push(e[c])}return s.pop(),s}void 0===(i=function(){return o}.call(t,n,t,e))||(e.exports=i)}()},7187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,i){function o(){void 0!==a&&e.removeListener("error",a),n([].slice.call(arguments))}var a;"error"!==t&&(a=function(n){e.removeListener(t,o),i(n)},e.once("error",a)),e.once(t,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var r=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function c(e,t,n,i){var o,a,r,c;if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),r=a[t]),void 0===r)r=a[t]=n,++e._eventsCount;else if("function"==typeof r?r=a[t]=i?[n,r]:[r,n]:i?r.unshift(n):r.push(n),(o=l(e))>0&&r.length>o&&!r.warned){r.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=r.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=u.bind(i);return o.listener=n,i.wrapFn=o,o}function d(e,t,n){var i=e._events;if(void 0===i)return[];var o=i[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):h(o,o.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");r=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var s=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw s.context=r,s}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)i(l,this,t);else{var c=l.length,u=h(l,c);for(n=0;n<c;++n)i(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return c(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return c(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,m(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,m(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,o,a,r;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){r=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,r||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(o=a[i])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},4868:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(n(420)),o=l(n(6594)),a=l(n(451)),r=l(n(7672)),s=n(4057);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,c=(0,i.default)(e),u=(0,o.default)(e),m=t/l,d=(0,a.default)(n),p=(0,a.default)(c),h=(0,a.default)(u),f=Math.asin(Math.sin(p)*Math.cos(m)+Math.cos(p)*Math.sin(m)*Math.cos(d)),g=h+Math.atan2(Math.sin(d)*Math.sin(m)*Math.cos(p),Math.cos(m)-Math.sin(p)*Math.sin(f)),y=(0,r.default)(g);return(y<s.MINLON||y>s.MAXLON)&&(g=(g+3*Math.PI)%(2*Math.PI)-Math.PI,y=(0,r.default)(g)),{latitude:(0,r.default)(f),longitude:y}}},4057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areaConversion=t.timeConversion=t.distanceConversion=t.altitudeKeys=t.latitudeKeys=t.longitudeKeys=t.MAXLON=t.MINLON=t.MAXLAT=t.MINLAT=t.earthRadius=t.sexagesimalPattern=void 0,t.sexagesimalPattern=/^([0-9]{1,3})\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)[']\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["]\s*)?([NEOSW]?)$/,t.earthRadius=6378137,t.MINLAT=-90,t.MAXLAT=90,t.MINLON=-180,t.MAXLON=180,t.longitudeKeys=["lng","lon","longitude",0],t.latitudeKeys=["lat","latitude",1],t.altitudeKeys=["alt","altitude","elevation","elev",2],t.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144},t.timeConversion={m:60,h:3600,d:86400};var n={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};t.areaConversion=n,n.sqm=n.m2,n.sqkm=n.km2,n.sqft=n.ft2,n.sqyd=n.yd2,n.sqin=n.in2},5241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(4057);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=i.areaConversion[t];if(n)return e*n;throw new Error("Invalid unit used for area conversion.")}},4638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(4057);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=i.distanceConversion[t];if(n)return e*n;throw new Error("Invalid unit used for distance conversion.")}},55:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(4057);t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh";switch(t){case"kmh":return e*i.timeConversion.h*i.distanceConversion.km;case"mph":return e*i.timeConversion.h*i.distanceConversion.mi;default:return e}}},8412:(e,t)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){var t=Math.pow(10,12);return Math.round(e*t)/t};t.default=function(e){var t,o,a=(t=e.toString().split("."),o=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n}}(t,o)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=a[0],s=a[1],l=Math.abs(Number(r)),c=i(60*Number("0."+(s||0))),u=Math.floor(c),m=i(60*(c%u||0));return l+" "+Number(u.toFixed(6)).toString().split(".").map((function(e,t){return 0===t?e.padStart(2,"0"):e})).join(".")+"' "+Number(m.toFixed(4)).toString().split(".").map((function(e,t){return 0===t?e.padStart(2,"0"):e})).join(".")+'"'}},6789:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(6620))&&i.__esModule?i:{default:i};t.default=function(e,t){return(0,o.default)(e,t)[0]}},8317:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(451)),o=s(n(420)),a=s(n(6594)),r=n(4057);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=0;if(e.length>2){for(var n,s,l,c=0;c<e.length;c++){c===e.length-2?(n=e.length-2,s=e.length-1,l=0):c===e.length-1?(n=e.length-1,s=0,l=1):(n=c,s=c+1,l=c+2);var u=(0,a.default)(e[n]),m=(0,o.default)(e[s]),d=(0,a.default)(e[l]);t+=((0,i.default)(d)-(0,i.default)(u))*Math.sin((0,i.default)(m))}t=t*r.earthRadius*r.earthRadius/2}return Math.abs(t)}},3954:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(420)),o=a(n(6594));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){if(!1===Array.isArray(e)||0===e.length)throw new Error("No points were given.");return e.reduce((function(e,t){var n=(0,i.default)(t),a=(0,o.default)(t);return{maxLat:Math.max(n,e.maxLat),minLat:Math.min(n,e.minLat),maxLng:Math.max(a,e.maxLng),minLng:Math.min(a,e.minLng)}}),{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}},6914:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(n(420)),o=l(n(6594)),a=l(n(451)),r=l(n(7672)),s=n(4057);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n,l,c=(0,i.default)(e),u=(0,o.default)(e),m=(0,a.default)(c),d=(0,a.default)(u),p=t/s.earthRadius,h=m-p,f=m+p,g=(0,a.default)(s.MAXLAT),y=(0,a.default)(s.MINLAT),C=(0,a.default)(s.MAXLON),v=(0,a.default)(s.MINLON);if(h>y&&f<g){var b=Math.asin(Math.sin(p)/Math.cos(m));(n=d-b)<v&&(n+=2*Math.PI),(l=d+b)>C&&(l-=2*Math.PI)}else h=Math.max(h,y),f=Math.min(f,g),n=v,l=C;return[{latitude:(0,r.default)(h),longitude:(0,r.default)(n)},{latitude:(0,r.default)(f),longitude:(0,r.default)(l)}]}},2219:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(420)),o=s(n(6594)),a=s(n(451)),r=s(n(7672));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){if(!1===Array.isArray(e)||0===e.length)return!1;var t=e.length,n=e.reduce((function(e,t){var n=(0,a.default)((0,i.default)(t)),r=(0,a.default)((0,o.default)(t));return{X:e.X+Math.cos(n)*Math.cos(r),Y:e.Y+Math.cos(n)*Math.sin(r),Z:e.Z+Math.sin(n)}}),{X:0,Y:0,Z:0}),s=n.X/t,l=n.Y/t,c=n.Z/t;return{longitude:(0,r.default)(Math.atan2(l,s)),latitude:(0,r.default)(Math.atan2(c,Math.sqrt(s*s+l*l)))}}},5146:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(3954))&&i.__esModule?i:{default:i};t.default=function(e){var t=(0,o.default)(e),n=t.minLat+(t.maxLat-t.minLat)/2,i=t.minLng+(t.maxLng-t.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(i.toFixed(6))}}},9816:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(2392))&&i.__esModule?i:{default:i};t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.default,i="function"==typeof n?n(e,t):(0,o.default)(e,t);if(isNaN(i))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(i/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}},4179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t){return t.reduce((function(t,n){if(null==e)throw new Error("'".concat(e,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==n&&void 0===t?(t=n,n):t}),void 0)}},5456:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=n(4057),a=(i=n(4179))&&i.__esModule?i:{default:i};function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:o.longitudeKeys,latitude:o.latitudeKeys,altitude:o.altitudeKeys},n=(0,a.default)(e,t.longitude),i=(0,a.default)(e,t.latitude),r=(0,a.default)(e,t.altitude);return s({latitude:i,longitude:n},r?{altitude:r}:{})}},691:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(n(420)),o=l(n(6594)),a=l(n(451)),r=l(n(6533)),s=n(4057);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n=void 0===n||isNaN(n)?1:n;var l=(0,i.default)(e),c=(0,o.default)(e),u=(0,i.default)(t),m=(0,o.default)(t),d=Math.acos((0,r.default)(Math.sin((0,a.default)(u))*Math.sin((0,a.default)(l))+Math.cos((0,a.default)(u))*Math.cos((0,a.default)(l))*Math.cos((0,a.default)(c)-(0,a.default)(m))))*s.earthRadius;return Math.round(d/n)*n}},6947:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(691)),o=a(n(6533));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){var a=(0,i.default)(t,e),r=(0,i.default)(e,n),s=(0,i.default)(t,n),l=Math.acos((0,o.default)((a*a+s*s-r*r)/(2*a*s))),c=Math.acos((0,o.default)((r*r+s*s-a*a)/(2*r*s)));return l>Math.PI/2?a:c>Math.PI/2?r:Math.sin(l)*a}},5043:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(420)),o=s(n(6594)),a=s(n(451)),r=s(n(7672));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n=(0,i.default)(t),s=(0,o.default)(t),l=(0,i.default)(e),c=(0,o.default)(e);return((0,r.default)(Math.atan2(Math.sin((0,a.default)(s)-(0,a.default)(c))*Math.cos((0,a.default)(n)),Math.cos((0,a.default)(l))*Math.sin((0,a.default)(n))-Math.sin((0,a.default)(l))*Math.cos((0,a.default)(n))*Math.cos((0,a.default)(s)-(0,a.default)(c))))+360)%360}},420:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(4057),o=r(n(4179)),a=r(n(8290));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n=(0,o.default)(e,i.latitudeKeys);if(null!=n){var r=e[n];return!0===t?r:(0,a.default)(r)}}},6594:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(4057),o=r(n(4179)),a=r(n(8290));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n=(0,o.default)(e,i.longitudeKeys);if(null!=n){var r=e[n];return!0===t?r:(0,a.default)(r)}}},6037:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(691))&&i.__esModule?i:{default:i};function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return e.reduce((function(e,n){return"object"===a(e)&&null!==e.last&&(e.distance+=t(n,e.last)),e.last=n,e}),{last:null,distance:0}).distance}},4288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(420)),o=s(n(6594)),a=s(n(451)),r=n(4057);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n=void 0===n||isNaN(n)?1:n;var s,l,c,u,m,d,p,h=(0,i.default)(e),f=(0,o.default)(e),g=(0,i.default)(t),y=(0,o.default)(t),C=6356752.314245,v=1/298.257223563,b=(0,a.default)(y-f),S=Math.atan((1-v)*Math.tan((0,a.default)(parseFloat(h)))),w=Math.atan((1-v)*Math.tan((0,a.default)(parseFloat(g)))),M=Math.sin(S),x=Math.cos(S),O=Math.sin(w),P=Math.cos(w),T=b,D=100;do{var E=Math.sin(T),A=Math.cos(T);if(0===(d=Math.sqrt(P*E*(P*E)+(x*O-M*P*A)*(x*O-M*P*A))))return 0;s=M*O+x*P*A,l=Math.atan2(d,s),m=s-2*M*O/(u=1-(c=x*P*E/d)*c),isNaN(m)&&(m=0);var F=v/16*u*(4+v*(4-3*u));p=T,T=b+(1-F)*v*c*(l+F*d*(m+F*s*(2*m*m-1)))}while(Math.abs(T-p)>1e-12&&--D>0);if(0===D)return NaN;var N=u*(r.earthRadius*r.earthRadius-C*C)/(C*C),I=1+N/16384*(4096+N*(N*(320-175*N)-768)),_=N/1024*(256+N*(N*(74-47*N)-128)),R=_*d*(m+_/4*(s*(2*m*m-1)-_/6*m*(4*d*d-3)*(4*m*m-3))),L=C*I*(l-R);return Math.round(L/n)*n}},2392:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(420)),o=s(n(6594)),a=s(n(451)),r=s(n(7672));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n=(0,a.default)((0,o.default)(t))-(0,a.default)((0,o.default)(e)),s=Math.log(Math.tan((0,a.default)((0,i.default)(t))/2+Math.PI/4)/Math.tan((0,a.default)((0,i.default)(e))/2+Math.PI/4));return Math.abs(n)>Math.PI&&(n=n>0?-1*(2*Math.PI-n):2*Math.PI+n),((0,r.default)(Math.atan2(n,s))+360)%360}},4866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return/^NNE|NE|NNW|N$/.test(e)?"N":/^ENE|E|ESE|SE$/.test(e)?"E":/^SSE|S|SSW|SW$/.test(e)?"S":/^WSW|W|WNW|NW$/.test(e)?"W":void 0}},6587:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(691))&&i.__esModule?i:{default:i};t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.default,i=n(e,t),a=Number(t.time)-Number(e.time),r=i/a*1e3;return r}},7698:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(t,"computeDestinationPoint",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"convertArea",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"convertDistance",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"convertSpeed",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"decimalToSexagesimal",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"findNearest",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getAreaOfPolygon",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"getBounds",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"getBoundsOfDistance",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"getCenter",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"getCenterOfBounds",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"getCompassDirection",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"getCoordinateKey",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"getCoordinateKeys",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"getDistance",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"getDistanceFromLine",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"getGreatCircleBearing",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"getLatitude",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"getLongitude",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"getPathLength",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"getPreciseDistance",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"getRhumbLineBearing",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"getRoughCompassDirection",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"getSpeed",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"isDecimal",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(t,"isPointInLine",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"isPointNearLine",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(t,"isPointWithinRadius",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(t,"isSexagesimal",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"isValidCoordinate",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"isValidLatitude",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(t,"isValidLongitude",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(t,"orderByDistance",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"sexagesimalToDecimal",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(t,"toDecimal",{enumerable:!0,get:function(){return B.default}}),Object.defineProperty(t,"toRad",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(t,"toDeg",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(t,"wktToPolygon",{enumerable:!0,get:function(){return G.default}});var o=J(n(4868)),a=J(n(5241)),r=J(n(4638)),s=J(n(55)),l=J(n(8412)),c=J(n(6789)),u=J(n(8317)),m=J(n(3954)),d=J(n(6914)),p=J(n(2219)),h=J(n(5146)),f=J(n(9816)),g=J(n(4179)),y=J(n(5456)),C=J(n(691)),v=J(n(6947)),b=J(n(5043)),S=J(n(420)),w=J(n(6594)),M=J(n(6037)),x=J(n(4288)),O=J(n(2392)),P=J(n(4866)),T=J(n(6587)),D=J(n(7182)),E=J(n(1521)),A=J(n(813)),F=J(n(8e3)),N=J(n(3741)),I=J(n(1496)),_=J(n(43)),R=J(n(2807)),L=J(n(6749)),k=J(n(6620)),z=J(n(6160)),B=J(n(8290)),j=J(n(451)),V=J(n(7672)),G=J(n(9553)),U=n(4057);function J(e){return e&&e.__esModule?e:{default:e}}Object.keys(U).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return U[e]}}))}))},7182:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){var t=e.toString().trim();return!isNaN(parseFloat(t))&&parseFloat(t)===Number(t)}},1521:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(691))&&i.__esModule?i:{default:i};t.default=function(e,t,n){return(0,o.default)(t,e)+(0,o.default)(e,n)===(0,o.default)(t,n)}},813:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(420)),o=a(n(6594));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){for(var n=!1,a=t.length,r=-1,s=a-1;++r<a;s=r)((0,o.default)(t[r])<=(0,o.default)(e)&&(0,o.default)(e)<(0,o.default)(t[s])||(0,o.default)(t[s])<=(0,o.default)(e)&&(0,o.default)(e)<(0,o.default)(t[r]))&&(0,i.default)(e)<((0,i.default)(t[s])-(0,i.default)(t[r]))*((0,o.default)(e)-(0,o.default)(t[r]))/((0,o.default)(t[s])-(0,o.default)(t[r]))+(0,i.default)(t[r])&&(n=!n);return n}},8e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(6947))&&i.__esModule?i:{default:i};t.default=function(e,t,n,i){return(0,o.default)(e,t,n)<i}},3741:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(691))&&i.__esModule?i:{default:i};t.default=function(e,t,n){return(0,o.default)(e,t)<n}},1496:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(4057);t.default=function(e){return i.sexagesimalPattern.test(e.toString().trim())}},43:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(5456)),o=r(n(2807)),a=r(n(6749));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=(0,i.default)(e),n=t.latitude,r=t.longitude;if(Array.isArray(e)&&e.length>=2)return(0,a.default)(e[0])&&(0,o.default)(e[1]);if(void 0===n||void 0===r)return!1;var s=e[r],l=e[n];return void 0!==l&&void 0!==s&&!1!==(0,o.default)(l)&&!1!==(0,a.default)(s)}},2807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(7182)),o=s(n(1496)),a=s(n(6160)),r=n(4057);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t){return(0,i.default)(t)?!(parseFloat(t)>r.MAXLAT||t<r.MINLAT):!!(0,o.default)(t)&&e((0,a.default)(t))}},6749:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n(7182)),o=s(n(1496)),a=s(n(6160)),r=n(4057);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t){return(0,i.default)(t)?!(parseFloat(t)>r.MAXLON||t<r.MINLON):!!(0,o.default)(t)&&e((0,a.default)(t))}},6620:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,o=(i=n(691))&&i.__esModule?i:{default:i};t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.default;return n="function"==typeof n?n:o.default,t.slice().sort((function(t,i){return n(e,t)-n(e,i)}))}},6533:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return e>1?1:e<-1?-1:e}},6160:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(4057);t.default=function(e){var t=new RegExp(i.sexagesimalPattern).exec(e);if(null==t)throw new Error("Given value is not in sexagesimal format");var n=Number(t[2])/60||0,o=Number(t[4])/3600||0,a=parseFloat(t[1])+n+o;return["S","W"].includes(t[7])?-a:a}},8290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(n(7182)),o=l(n(1496)),a=l(n(6160)),r=l(n(43)),s=l(n(5456));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function e(t){if((0,i.default)(t))return Number(t);if((0,o.default)(t))return(0,a.default)(t);if((0,r.default)(t)){var n=(0,s.default)(t);return Array.isArray(t)?t.map((function(t,n){return[0,1].includes(n)?e(t):t})):u(u(u({},t),n.latitude&&m({},n.latitude,e(t[n.latitude]))),n.longitude&&m({},n.longitude,e(t[n.longitude])))}return Array.isArray(t)?t.map((function(t){return(0,r.default)(t)?e(t):t})):t}},7672:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return 180*e/Math.PI}},451:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return e*Math.PI/180}},9553:(e,t)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if(!e.startsWith("POLYGON"))throw new Error("Invalid wkt.");return e.slice(e.indexOf("(")+2,e.indexOf(")")).split(", ").map((function(e){var t,i,o=(t=e.split(" "),i=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n}}(t,i)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],r=o[1];return{longitude:parseFloat(a),latitude:parseFloat(r)}}))}},4485:(e,t,n)=>{e.exports=n(2894)},2894:function(e,t,n){e=n.nmd(e),function(){var t,n,i,o,a,r,s,l,c,u,m,d,p,h,f;i=Math.floor,u=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},c=function(e,t,o,a,r){var s;if(null==o&&(o=0),null==r&&(r=n),o<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);o<a;)r(t,e[s=i((o+a)/2)])<0?a=s:o=s+1;return[].splice.apply(e,[o,o-o].concat(t)),t},r=function(e,t,i){return null==i&&(i=n),e.push(t),h(e,0,e.length-1,i)},a=function(e,t){var i,o;return null==t&&(t=n),i=e.pop(),e.length?(o=e[0],e[0]=i,f(e,0,t)):o=i,o},l=function(e,t,i){var o;return null==i&&(i=n),o=e[0],e[0]=t,f(e,0,i),o},s=function(e,t,i){var o;return null==i&&(i=n),e.length&&i(e[0],t)<0&&(t=(o=[e[0],t])[0],e[0]=o[1],f(e,0,i)),t},o=function(e,t){var o,a,r,s,l,c;for(null==t&&(t=n),l=[],a=0,r=(s=function(){c=[];for(var t=0,n=i(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)c.push(t);return c}.apply(this).reverse()).length;a<r;a++)o=s[a],l.push(f(e,o,t));return l},p=function(e,t,i){var o;if(null==i&&(i=n),-1!==(o=e.indexOf(t)))return h(e,0,o,i),f(e,o,i)},m=function(e,t,i){var a,r,l,c,u;if(null==i&&(i=n),!(r=e.slice(0,t)).length)return r;for(o(r,i),l=0,c=(u=e.slice(t)).length;l<c;l++)a=u[l],s(r,a,i);return r.sort(i).reverse()},d=function(e,t,i){var r,s,l,m,d,p,h,f,g;if(null==i&&(i=n),10*t<=e.length){if(!(l=e.slice(0,t).sort(i)).length)return l;for(s=l[l.length-1],m=0,p=(h=e.slice(t)).length;m<p;m++)i(r=h[m],s)<0&&(c(l,r,0,null,i),l.pop(),s=l[l.length-1]);return l}for(o(e,i),g=[],d=0,f=u(t,e.length);0<=f?d<f:d>f;0<=f?++d:--d)g.push(a(e,i));return g},h=function(e,t,i,o){var a,r,s;for(null==o&&(o=n),a=e[i];i>t&&o(a,r=e[s=i-1>>1])<0;)e[i]=r,i=s;return e[i]=a},f=function(e,t,i){var o,a,r,s,l;for(null==i&&(i=n),a=e.length,l=t,r=e[t],o=2*t+1;o<a;)(s=o+1)<a&&!(i(e[o],e[s])<0)&&(o=s),e[t]=e[o],o=2*(t=o)+1;return e[t]=r,h(e,l,t,i)},t=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=r,e.pop=a,e.replace=l,e.pushpop=s,e.heapify=o,e.updateItem=p,e.nlargest=m,e.nsmallest=d,e.prototype.push=function(e){return r(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return s(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return o(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),(null!==e?e.exports:void 0)?e.exports=t:window.Heap=t}.call(this)},645:(e,t)=>{t.read=function(e,t,n,i,o){var a,r,s=8*o-i-1,l=(1<<s)-1,c=l>>1,u=-7,m=n?o-1:0,d=n?-1:1,p=e[t+m];for(m+=d,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+e[t+m],m+=d,u-=8);for(r=a&(1<<-u)-1,a>>=-u,u+=i;u>0;r=256*r+e[t+m],m+=d,u-=8);if(0===a)a=1-c;else{if(a===l)return r?NaN:1/0*(p?-1:1);r+=Math.pow(2,i),a-=c}return(p?-1:1)*r*Math.pow(2,a-i)},t.write=function(e,t,n,i,o,a){var r,s,l,c=8*a-o-1,u=(1<<c)-1,m=u>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,h=i?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=u):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),(t+=r+m>=1?d/l:d*Math.pow(2,1-m))*l>=2&&(r++,l/=2),r+m>=u?(s=0,r=u):r+m>=1?(s=(t*l-1)*Math.pow(2,o),r+=m):(s=t*Math.pow(2,m-1)*Math.pow(2,o),r=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(r=r<<o|s,c+=o;c>0;e[n+p]=255&r,p+=h,r/=256,c-=8);e[n+p-h]|=128*f}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},3913:e=>{"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.R,o=void 0===i?1:i,a=n.Q,r=void 0===a?1:a,s=n.A,l=void 0===s?1:s,c=n.B,u=void 0===c?0:c,m=n.C,d=void 0===m?1:m;t(this,e),this.R=o,this.Q=r,this.A=l,this.C=d,this.B=u,this.cov=NaN,this.x=NaN}var i,o;return i=e,(o=[{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(isNaN(this.x))this.x=1/this.C*e,this.cov=1/this.C*this.Q*(1/this.C);else{var n=this.predict(t),i=this.uncertainty(),o=i*this.C*(1/(this.C*i*this.C+this.Q));this.x=n+o*(e-this.C*n),this.cov=i-o*this.C*i}return this.x}},{key:"predict",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.A*this.x+this.B*e}},{key:"uncertainty",value:function(){return this.A*this.cov*this.A+this.R}},{key:"lastMeasurement",value:function(){return this.x}},{key:"setMeasurementNoise",value:function(e){this.Q=e}},{key:"setProcessNoise",value:function(e){this.R=e}}])&&n(i.prototype,o),e}();e.exports=i},9870:(e,t,n)=>{"use strict";function i(e,t,n,a,r,s){if(r-a<=n)return;const l=a+r>>1;o(e,t,l,a,r,s%2),i(e,t,n,a,l-1,s+1),i(e,t,n,l+1,r,s+1)}function o(e,t,n,i,r,s){for(;r>i;){if(r-i>600){const a=r-i+1,l=n-i+1,c=Math.log(a),u=.5*Math.exp(2*c/3),m=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1);o(e,t,n,Math.max(i,Math.floor(n-l*u/a+m)),Math.min(r,Math.floor(n+(a-l)*u/a+m)),s)}const l=t[2*n+s];let c=i,u=r;for(a(e,t,i,n),t[2*r+s]>l&&a(e,t,i,r);c<u;){for(a(e,t,c,u),c++,u--;t[2*c+s]<l;)c++;for(;t[2*u+s]>l;)u--}t[2*i+s]===l?a(e,t,i,u):(u++,a(e,t,u,r)),u<=n&&(i=u+1),n<=u&&(r=u-1)}}function a(e,t,n,i){r(e,n,i),r(t,2*n,2*i),r(t,2*n+1,2*i+1)}function r(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function s(e,t,n,i){const o=e-n,a=t-i;return o*o+a*a}n.r(t),n.d(t,{default:()=>u});const l=e=>e[0],c=e=>e[1];class u{constructor(e,t=l,n=c,o=64,a=Float64Array){this.nodeSize=o,this.points=e;const r=e.length<65536?Uint16Array:Uint32Array,s=this.ids=new r(e.length),u=this.coords=new a(2*e.length);for(let i=0;i<e.length;i++)s[i]=i,u[2*i]=t(e[i]),u[2*i+1]=n(e[i]);i(s,u,o,0,s.length-1,0)}range(e,t,n,i){return function(e,t,n,i,o,a,r){const s=[0,e.length-1,0],l=[];let c,u;for(;s.length;){const m=s.pop(),d=s.pop(),p=s.pop();if(d-p<=r){for(let r=p;r<=d;r++)c=t[2*r],u=t[2*r+1],c>=n&&c<=o&&u>=i&&u<=a&&l.push(e[r]);continue}const h=Math.floor((p+d)/2);c=t[2*h],u=t[2*h+1],c>=n&&c<=o&&u>=i&&u<=a&&l.push(e[h]);const f=(m+1)%2;(0===m?n<=c:i<=u)&&(s.push(p),s.push(h-1),s.push(f)),(0===m?o>=c:a>=u)&&(s.push(h+1),s.push(d),s.push(f))}return l}(this.ids,this.coords,e,t,n,i,this.nodeSize)}within(e,t,n){return function(e,t,n,i,o,a){const r=[0,e.length-1,0],l=[],c=o*o;for(;r.length;){const u=r.pop(),m=r.pop(),d=r.pop();if(m-d<=a){for(let o=d;o<=m;o++)s(t[2*o],t[2*o+1],n,i)<=c&&l.push(e[o]);continue}const p=Math.floor((d+m)/2),h=t[2*p],f=t[2*p+1];s(h,f,n,i)<=c&&l.push(e[p]);const g=(u+1)%2;(0===u?n-o<=h:i-o<=f)&&(r.push(d),r.push(p-1),r.push(g)),(0===u?n+o>=h:i+o>=f)&&(r.push(p+1),r.push(m),r.push(g))}return l}(this.ids,this.coords,e,t,n,this.nodeSize)}}},2694:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(8273)),s=/(\{[\d|\w]+\})/,l=/(\$ref\{[\w|.]+\})/,c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"function"==typeof n&&(n={customLanguageInterface:n}),this._opts=o({},{customLanguageInterface:r.getInterfaceLanguage,pseudo:!1,pseudoMultipleLanguages:!1,logsEnabled:!0},n),this._interfaceLanguage=this._opts.customLanguageInterface(),this._language=this._interfaceLanguage,this.setContent(t)}return a(e,[{key:"setContent",value:function(e){var t=this,n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(i=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(Object.keys(e),1)[0];this._defaultLanguage=n,this._defaultLanguageFirstLevelKeys=[],this._props=e,r.validateTranslationKeys(Object.keys(e[this._defaultLanguage])),Object.keys(this._props[this._defaultLanguage]).forEach((function(e){"string"==typeof t._props[t._defaultLanguage][e]&&t._defaultLanguageFirstLevelKeys.push(e)})),this.setLanguage(this._interfaceLanguage),this._opts.pseudo&&this._pseudoAllValues(this._props)}},{key:"_pseudoAllValues",value:function(e){var t=this;Object.keys(e).forEach((function(n){if("object"===i(e[n]))t._pseudoAllValues(e[n]);else if("string"==typeof e[n]){if(0===e[n].indexOf("[")&&e[n].lastIndexOf("]")===e[n].length-1)return;for(var o=e[n].split(" "),a=0;a<o.length;a+=1)if(o[a].match(s));else if(o[a].match(l));else{var c=o[a].length;t._opts.pseudoMultipleLanguages&&(c=parseInt(1.4*c,10)),o[a]=r.randomPseudo(c)}e[n]="["+o.join(" ")+"]"}}))}},{key:"setLanguage",value:function(e){var t=this,n=r.getBestMatchingLanguage(e,this._props),i=Object.keys(this._props)[0];if(this._language=n,this._props[n]){for(var a=0;a<this._defaultLanguageFirstLevelKeys.length;a+=1)delete this[this._defaultLanguageFirstLevelKeys[a]];var s=o({},this._props[this._language]);Object.keys(s).forEach((function(e){t[e]=s[e]})),i!==this._language&&(s=this._props[i],this._fallbackValues(s,this))}}},{key:"_fallbackValues",value:function(e,t){var n=this;Object.keys(e).forEach((function(i){Object.prototype.hasOwnProperty.call(e,i)&&!t[i]&&""!==t[i]?(t[i]=e[i],n._opts.logsEnabled&&console.log("  key '"+i+"' not found in localizedStrings for language "+n._language+" ")):"string"!=typeof t[i]&&n._fallbackValues(e[i],t[i])}))}},{key:"getLanguage",value:function(){return this._language}},{key:"getInterfaceLanguage",value:function(){return this._interfaceLanguage}},{key:"getAvailableLanguages",value:function(){var e=this;return this._availableLanguages||(this._availableLanguages=[],Object.keys(this._props).forEach((function(t){e._availableLanguages.push(t)}))),this._availableLanguages}},{key:"formatString",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=e||"";"string"==typeof a&&(a=this.getString(e,null,!0)||a);var r=a.split(l).filter((function(e){return!!e})).map((function(n){if(n.match(l)){var i=n.slice(5,-1);return t.getString(i)||(t._opts.logsEnabled&&console.log("No Localization ref found for '"+n+"' in string '"+e+"'"),"$ref(id:"+i+")")}return n})).join("");return r.split(s).filter((function(e){return!!e})).map((function(e){if(e.match(s)){var t=e.slice(1,-1),n=i[t];if(void 0===n){var o=i[0][t];if(void 0===o)return n;n=o}return n}return e})).join("")}},{key:"getString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var i=this._props[t||this._language],o=e.split("."),a=0;a<o.length;a+=1){if(void 0===i[o[a]])throw Error(o[a]);i=i[o[a]]}return i}catch(i){!n&&this._opts.logsEnabled&&console.log("No localization found for key '"+e+"' and language '"+t+"', failed on "+i.message)}return null}},{key:"getContent",value:function(){return this._props}}]),e}();t.default=c},8273:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterfaceLanguage=function(){var e="en-US";if("undefined"==typeof navigator)return e;var t=navigator;if(t){if(t.language)return t.language;if(t.languages&&t.languages[0])return t.languages[0];if(t.userLanguage)return t.userLanguage;if(t.browserLanguage)return t.browserLanguage}return e},t.getBestMatchingLanguage=function(e,t){if(t[e])return e;var n=e.indexOf("-"),i=n>=0?e.substring(0,n):e;return t[i]?i:Object.keys(t)[0]},t.validateTranslationKeys=function(e){var t=["_interfaceLanguage","_language","_defaultLanguage","_defaultLanguageFirstLevelKeys","_props"];e.forEach((function(e){if(-1!==t.indexOf(e))throw new Error(e+" cannot be used as a key. It is a reserved word.")}))},t.randomPseudo=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<e;i+=1)t+=n.charAt(Math.floor(Math.random()*n.length));return t}},4037:(e,t,n)=>{var i,o;e=n.nmd(e),function(t){t.runningInNodeJS=function(){return"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node},t.runningInMainNodeJSModule=function(){return t.runningInNodeJS()&&n.c[n.s]===e},t.commonJSAvailable=function(){return"object"==typeof e.exports},t.runningInWebWorker=function(){return"undefined"==typeof window&&"object"==typeof self&&"function"==typeof self.addEventListener&&"function"==typeof self.close},t.runningInNodeChildProcess=function(){return t.runningInNodeJS()&&"function"==typeof process.send},t.runningInNullOrigin=function(){return"object"==typeof window&&"object"==typeof window.location&&"object"==typeof document&&"http:"!==document.location.protocol&&"https:"!==document.location.protocol},t.webWorkersAvailable=function(){return!("function"!=typeof Worker||t.runningInNullOrigin()||t.runningInNodeJS()||navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0)},t.log=function(e,t){void 0===t&&(t=!1),"object"==typeof console&&(console.log(e),t&&"object"==typeof document&&(document.body.innerHTML+=e+"<br/>"))},t.createErrorMessage=function(e,n){if(void 0===n&&(n="Unhandled exception"),null==e)return n;if(n+=": ","object"==typeof e.content){if(t.runningInNodeJS())return n+e.content.stack;var i=JSON.stringify(e.content);return"{}"!==i?n+i:n+e.content}return"string"==typeof e.content?n+e.content:n+e},t.printExceptionAndStackTraceToConsole=function(e,n){void 0===n&&(n="Unhandled exception"),t.log(t.createErrorMessage(e,n))},t.getGlobalObject=function(){return"object"==typeof n.g?n.g:"object"==typeof window?window:"object"==typeof self?self:{}},t.toString=Object.prototype.toString,t.commonJSAvailable()&&(e.exports=t)}(o||(o={})),function(e){if("function"==typeof Uint8Array&&0!==new Uint8Array(1).subarray(1).byteLength){var t=function(e,t){var n=function(e,t,n){return e<t?t:e>n?n:e};e|=0,t|=0,arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=n(e,0,this.length);var i=(t=n(t,0,this.length))-e;return i<0&&(i=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,i)},n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],i=void 0;if("object"==typeof window?i=window:"object"==typeof self&&(i=self),void 0!==i)for(var o=0;o<n.length;o++)i[n[o]]&&(i[n[o]].prototype.subarray=t)}}(i||(i={})),function(e){var t=function(){function t(){}return t.compressAsync=function(t,n,i){var o=new e.Timer,a=new e.Compressor;if(!i)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof t)t=e.encodeUTF8(t);else if(null==t||!(t instanceof Uint8Array))return void i(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));var r=e.ArrayTools.splitByteArray(t,n.blockSize),s=[],l=function(t){if(t<r.length){var c=void 0;try{c=a.compressBlock(r[t])}catch(e){return void i(void 0,e)}s.push(c),o.getElapsedTime()<=20?l(t+1):(e.enqueueImmediate((function(){return l(t+1)})),o.restart())}else{var u=e.ArrayTools.concatUint8Arrays(s);e.enqueueImmediate((function(){var t;try{t=e.CompressionCommon.encodeCompressedBytes(u,n.outputEncoding)}catch(e){return void i(void 0,e)}e.enqueueImmediate((function(){return i(t)}))}))}};e.enqueueImmediate((function(){return l(0)}))},t.createCompressionStream=function(){var t=new e.Compressor,i=new(n(931).Transform)({decodeStrings:!0,highWaterMark:65536});return i._transform=function(n,o,a){var r;try{r=e.BufferTools.uint8ArrayToBuffer(t.compressBlock(e.BufferTools.bufferToUint8Array(n)))}catch(e){return void i.emit("error",e)}i.push(r),a()},i},t}();e.AsyncCompressor=t}(o||(o={})),function(e){var t=function(){function t(){}return t.decompressAsync=function(t,n,i){if(!i)throw new TypeError("decompressAsync: No callback argument given");var o=new e.Timer;try{t=e.CompressionCommon.decodeCompressedBytes(t,n.inputEncoding)}catch(e){return void i(void 0,e)}var a=new e.Decompressor,r=e.ArrayTools.splitByteArray(t,n.blockSize),s=[],l=function(t){if(t<r.length){var c=void 0;try{c=a.decompressBlock(r[t])}catch(e){return void i(void 0,e)}s.push(c),o.getElapsedTime()<=20?l(t+1):(e.enqueueImmediate((function(){return l(t+1)})),o.restart())}else{var u=e.ArrayTools.concatUint8Arrays(s);e.enqueueImmediate((function(){var t;try{t=e.CompressionCommon.encodeDecompressedBytes(u,n.outputEncoding)}catch(e){return void i(void 0,e)}e.enqueueImmediate((function(){return i(t)}))}))}};e.enqueueImmediate((function(){return l(0)}))},t.createDecompressionStream=function(){var t=new e.Decompressor,i=new(n(931).Transform)({decodeStrings:!0,highWaterMark:65536});return i._transform=function(n,o,a){var r;try{r=e.BufferTools.uint8ArrayToBuffer(t.decompressBlock(e.BufferTools.bufferToUint8Array(n)))}catch(e){return void i.emit("error",e)}i.push(r),a()},i},t}();e.AsyncDecompressor=t}(o||(o={})),function(e){var t;!function(t){t.compressAsync=function(e,n,i){if("ByteArray"!=n.inputEncoding||e instanceof Uint8Array){var o={token:Math.random().toString(),type:"compress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},a=function(e){var n=e.data;n&&n.token==o.token&&(t.globalWorker.removeEventListener("message",a),"error"==n.type?i(void 0,new Error(n.error)):i(n.data))};t.globalWorker.addEventListener("message",a),t.globalWorker.postMessage(o,[])}else i(void 0,new TypeError("compressAsync: input is not a Uint8Array"))},t.decompressAsync=function(e,n,i){var o={token:Math.random().toString(),type:"decompress",data:e,inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding},a=function(e){var n=e.data;n&&n.token==o.token&&(t.globalWorker.removeEventListener("message",a),"error"==n.type?i(void 0,new Error(n.error)):i(n.data))};t.globalWorker.addEventListener("message",a),t.globalWorker.postMessage(o,[])},t.installWebWorkerIfNeeded=function(){"object"==typeof self&&void 0===self.document&&null!=self.addEventListener&&(self.addEventListener("message",(function(t){var n=t.data;if("compress"==n.type){var i=void 0;try{i=e.compress(n.data,{outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(o={token:n.token,type:"compressionResult",data:i,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}else if("decompress"==n.type){var o,a=void 0;try{a=e.decompress(n.data,{inputEncoding:n.inputEncoding,outputEncoding:n.outputEncoding})}catch(t){return void self.postMessage({token:n.token,type:"error",error:e.createErrorMessage(t)},[])}(o={token:n.token,type:"decompressionResult",data:a,encoding:n.outputEncoding}).data instanceof Uint8Array&&-1===navigator.appVersion.indexOf("MSIE 10")?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}})),self.addEventListener("error",(function(t){e.log(e.createErrorMessage(t.error,"Unexpected LZUTF8 WebWorker exception"))})))},t.createGlobalWorkerIfNeeded=function(){if(t.globalWorker)return!0;if(!e.webWorkersAvailable())return!1;if(!t.scriptURI&&"object"==typeof document){var n=document.getElementById("lzutf8");null!=n&&(t.scriptURI=n.getAttribute("src")||void 0)}return!!t.scriptURI&&(t.globalWorker=new Worker(t.scriptURI),!0)},t.terminate=function(){t.globalWorker&&(t.globalWorker.terminate(),t.globalWorker=void 0)}}(t=e.WebWorker||(e.WebWorker={})),t.installWebWorkerIfNeeded()}(o||(o={})),function(e){var t=function(){function e(e,t,n){this.container=e,this.startPosition=t,this.length=n}return e.prototype.get=function(e){return this.container[this.startPosition+e]},e.prototype.getInReversedOrder=function(e){return this.container[this.startPosition+this.length-1-e]},e.prototype.set=function(e,t){this.container[this.startPosition+e]=t},e}();e.ArraySegment=t}(o||(o={})),function(e){var t;(t=e.ArrayTools||(e.ArrayTools={})).copyElements=function(e,t,n,i,o){for(;o--;)n[i++]=e[t++]},t.zeroElements=function(e,t,n){for(;n--;)e[t++]=0},t.countNonzeroValuesInArray=function(e){for(var t=0,n=0;n<e.length;n++)e[n]&&t++;return t},t.truncateStartingElements=function(e,t){if(e.length<=t)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var n=e.length-t,i=0;i<t;i++)e[i]=e[n+i];e.length=t},t.doubleByteArrayCapacity=function(e){var t=new Uint8Array(2*e.length);return t.set(e),t},t.concatUint8Arrays=function(e){for(var t=0,n=0,i=e;n<i.length;n++)t+=(l=i[n]).length;for(var o=new Uint8Array(t),a=0,r=0,s=e;r<s.length;r++){var l=s[r];o.set(l,a),a+=l.length}return o},t.splitByteArray=function(e,t){for(var n=[],i=0;i<e.length;){var o=Math.min(t,e.length-i);n.push(e.subarray(i,i+o)),i+=o}return n}}(o||(o={})),function(e){var t;(t=e.BufferTools||(e.BufferTools={})).convertToUint8ArrayIfNeeded=function(e){return"function"==typeof Buffer&&Buffer.isBuffer(e)?t.bufferToUint8Array(e):e},t.uint8ArrayToBuffer=function(e){if(Buffer.prototype instanceof Uint8Array){var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Object.setPrototypeOf(t,Buffer.prototype),t}for(var n=e.length,i=new Buffer(n),o=0;o<n;o++)i[o]=e[o];return i},t.bufferToUint8Array=function(e){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(var t=e.length,n=new Uint8Array(t),i=0;i<t;i++)n[i]=e[i];return n}}(o||(o={})),function(e){var t;(t=e.CompressionCommon||(e.CompressionCommon={})).getCroppedBuffer=function(e,t,n,i){void 0===i&&(i=0);var o=new Uint8Array(n+i);return o.set(e.subarray(t,t+n)),o},t.getCroppedAndAppendedByteArray=function(t,n,i,o){return e.ArrayTools.concatUint8Arrays([t.subarray(n,n+i),o])},t.detectCompressionSourceEncoding=function(e){if(null==e)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if("string"==typeof e)return"String";if(e instanceof Uint8Array||"function"==typeof Buffer&&Buffer.isBuffer(e))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},t.encodeCompressedBytes=function(t,n){switch(n){case"ByteArray":return t;case"Buffer":return e.BufferTools.uint8ArrayToBuffer(t);case"Base64":return e.encodeBase64(t);case"BinaryString":return e.encodeBinaryString(t);case"StorageBinaryString":return e.encodeStorageBinaryString(t);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},t.decodeCompressedBytes=function(t,n){if(null==n)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(n){case"ByteArray":case"Buffer":var i=e.BufferTools.convertToUint8ArrayIfNeeded(t);if(!(i instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return i;case"Base64":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return e.decodeBase64(t);case"BinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return e.decodeBinaryString(t);case"StorageBinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return e.decodeStorageBinaryString(t);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '"+n+"'")}},t.encodeDecompressedBytes=function(t,n){switch(n){case"String":return e.decodeUTF8(t);case"ByteArray":return t;case"Buffer":if("function"!=typeof Buffer)throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return e.BufferTools.uint8ArrayToBuffer(t);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}}(o||(o={})),function(e){var t;!function(t){var n,i=[];t.enqueueImmediate=function(e){i.push(e),1===i.length&&n()},t.initializeScheduler=function(){var t=function(){for(var t=0,n=i;t<n.length;t++){var o=n[t];try{o.call(void 0)}catch(t){e.printExceptionAndStackTraceToConsole(t,"enqueueImmediate exception")}}i.length=0};if(e.runningInNodeJS()&&(n=function(){return setImmediate((function(){return t()}))}),"object"==typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.postMessage){var o,a="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",(function(e){e.data===a&&t()})),o=e.runningInNullOrigin()?"*":window.location.href,n=function(){return window.postMessage(a,o)}}else if("function"==typeof MessageChannel&&"function"==typeof MessagePort){var r=new MessageChannel;r.port1.onmessage=function(){return t()},n=function(){return r.port2.postMessage(0)}}else n=function(){return setTimeout((function(){return t()}),0)}},t.initializeScheduler()}(t=e.EventLoop||(e.EventLoop={})),e.enqueueImmediate=function(e){return t.enqueueImmediate(e)}}(o||(o={})),function(e){var t;(t=e.ObjectTools||(e.ObjectTools={})).override=function(e,n){return t.extend(e,n)},t.extend=function(e,t){if(null==e)throw new TypeError("obj is null or undefined");if("object"!=typeof e)throw new TypeError("obj is not an object");if(null==t&&(t={}),"object"!=typeof t)throw new TypeError("newProperties is not an object");if(null!=t)for(var n in t)e[n]=t[n];return e}}(o||(o={})),function(e){e.getRandomIntegerInRange=function(e,t){return e+Math.floor(Math.random()*(t-e))},e.getRandomUTF16StringOfLength=function(t){for(var n="",i=0;i<t;i++){var o=void 0;do{o=e.getRandomIntegerInRange(0,1114112)}while(o>=55296&&o<=57343);n+=e.Encoding.CodePoint.decodeToString(o)}return n}}(o||(o={})),function(e){var t=function(){function e(e){void 0===e&&(e=1024),this.outputBufferCapacity=e,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return e.prototype.appendCharCode=function(e){this.outputBuffer[this.outputPosition++]=e,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},e.prototype.appendCharCodes=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e[t])},e.prototype.appendString=function(e){for(var t=0,n=e.length;t<n;t++)this.appendCharCode(e.charCodeAt(t))},e.prototype.appendCodePoint=function(e){if(e<=65535)this.appendCharCode(e);else{if(!(e<=1114111))throw new Error("appendCodePoint: A code point of "+e+" cannot be encoded in UTF-16");this.appendCharCode(55296+(e-65536>>>10)),this.appendCharCode(56320+(e-65536&1023))}},e.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},e.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},e}();e.StringBuilder=t}(o||(o={})),function(e){var t=function(){function t(){this.restart()}return t.prototype.restart=function(){this.startTime=t.getTimestamp()},t.prototype.getElapsedTime=function(){return t.getTimestamp()-this.startTime},t.prototype.getElapsedTimeAndRestart=function(){var e=this.getElapsedTime();return this.restart(),e},t.prototype.logAndRestart=function(t,n){void 0===n&&(n=!0);var i=this.getElapsedTime(),o=t+": "+i.toFixed(3)+"ms";return e.log(o,n),this.restart(),i},t.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},t.getMicrosecondTimestamp=function(){return Math.floor(1e3*t.getTimestamp())},t.createGlobalTimestampFunction=function(){if("object"==typeof process&&"function"==typeof process.hrtime){var e=0;this.timestampFunc=function(){var t=process.hrtime(),n=1e3*t[0]+t[1]/1e6;return e+n},e=Date.now()-this.timestampFunc()}else if("object"==typeof chrome&&chrome.Interval){var t=Date.now(),n=new chrome.Interval;n.start(),this.timestampFunc=function(){return t+n.microseconds()/1e3}}else if("object"==typeof performance&&performance.now){var i=Date.now()-performance.now();this.timestampFunc=function(){return i+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return(new Date).getTime()}},t}();e.Timer=t}(o||(o={})),function(e){var t=function(){function t(t){void 0===t&&(t=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,t&&"function"==typeof Uint32Array?this.prefixHashTable=new e.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new e.CompressorSimpleHashTable(this.PrefixHashTableSize)}return t.prototype.compressBlock=function(t){if(null==t)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof t&&(t=e.encodeUTF8(t)),t=e.BufferTools.convertToUint8ArrayIfNeeded(t),this.compressUtf8Block(t)},t.prototype.compressUtf8Block=function(e){if(!e||0==e.length)return new Uint8Array(0);var t=this.cropAndAddNewBytesToInputBuffer(e),n=this.inputBuffer,i=this.inputBuffer.length;this.outputBuffer=new Uint8Array(e.length),this.outputBufferPosition=0;for(var o=0,a=t;a<i;a++){var r=n[a],s=a<o;if(a>i-this.MinimumSequenceLength)s||this.outputRawByte(r);else{var l=this.getBucketIndexForPrefix(a);if(!s){var c=this.findLongestMatch(a,l);null!=c&&(this.outputPointerBytes(c.length,c.distance),o=a+c.length,s=!0)}s||this.outputRawByte(r);var u=this.inputBufferStreamOffset+a;this.prefixHashTable.addValueToBucket(l,u)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},t.prototype.findLongestMatch=function(e,t){var n=this.prefixHashTable.getArraySegmentForBucketIndex(t,this.reusableArraySegmentObject);if(null==n)return null;for(var i,o=this.inputBuffer,a=0,r=0;r<n.length;r++){var s,l=n.getInReversedOrder(r)-this.inputBufferStreamOffset,c=e-l;if(s=void 0===i?this.MinimumSequenceLength-1:i<128&&c>=128?a+(a>>>1):a,c>this.MaximumMatchDistance||s>=this.MaximumSequenceLength||e+s>=o.length)break;if(o[l+s]===o[e+s])for(var u=0;;u++){if(e+u===o.length||o[l+u]!==o[e+u]){u>s&&(i=c,a=u);break}if(u===this.MaximumSequenceLength)return{distance:c,length:this.MaximumSequenceLength}}}return void 0!==i?{distance:i,length:a}:null},t.prototype.getBucketIndexForPrefix=function(e){return(7880599*this.inputBuffer[e]+39601*this.inputBuffer[e+1]+199*this.inputBuffer[e+2]+this.inputBuffer[e+3])%this.PrefixHashTableSize},t.prototype.outputPointerBytes=function(e,t){t<128?(this.outputRawByte(192|e),this.outputRawByte(t)):(this.outputRawByte(224|e),this.outputRawByte(t>>>8),this.outputRawByte(255&t))},t.prototype.outputRawByte=function(e){this.outputBuffer[this.outputBufferPosition++]=e},t.prototype.cropAndAddNewBytesToInputBuffer=function(t){if(void 0===this.inputBuffer)return this.inputBuffer=t,0;var n=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),i=this.inputBuffer.length-n;return this.inputBuffer=e.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,i,n,t),this.inputBufferStreamOffset+=i,n},t}();e.Compressor=t}(o||(o={})),function(e){var t=function(){function t(e){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*e),this.storage=new Uint32Array(2*e),this.storageIndex=1}return t.prototype.addValueToBucket=function(t,n){t<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var i,o=this.bucketLocators[t];if(0===o)o=this.storageIndex,i=1,this.storage[this.storageIndex]=n,this.storageIndex+=this.minimumBucketCapacity;else{(i=this.bucketLocators[t+1])===this.maximumBucketCapacity-1&&(i=this.truncateBucketToNewerElements(o,i,this.maximumBucketCapacity/2));var a=o+i;0===this.storage[a]?(this.storage[a]=n,a===this.storageIndex&&(this.storageIndex+=i)):(e.ArrayTools.copyElements(this.storage,o,this.storage,this.storageIndex,i),o=this.storageIndex,this.storageIndex+=i,this.storage[this.storageIndex++]=n,this.storageIndex+=i),i++}this.bucketLocators[t]=o,this.bucketLocators[t+1]=i},t.prototype.truncateBucketToNewerElements=function(t,n,i){var o=t+n-i;return e.ArrayTools.copyElements(this.storage,o,this.storage,t,i),e.ArrayTools.zeroElements(this.storage,t+i,n-i),i},t.prototype.compact=function(){var t=this.bucketLocators,n=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var i=0;i<t.length;i+=2){var o=t[i+1];0!==o&&(this.bucketLocators[i]=this.storageIndex,this.bucketLocators[i+1]=o,this.storageIndex+=Math.max(Math.min(2*o,this.maximumBucketCapacity),this.minimumBucketCapacity))}for(this.storage=new Uint32Array(8*this.storageIndex),i=0;i<t.length;i+=2){var a=t[i];if(0!==a){var r=this.bucketLocators[i],s=this.bucketLocators[i+1];e.ArrayTools.copyElements(n,a,this.storage,r,s)}}},t.prototype.getArraySegmentForBucketIndex=function(t,n){t<<=1;var i=this.bucketLocators[t];return 0===i?null:(void 0===n&&(n=new e.ArraySegment(this.storage,i,this.bucketLocators[t+1])),n)},t.prototype.getUsedBucketCount=function(){return Math.floor(e.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.bucketLocators.length;t+=2)e+=this.bucketLocators[t+1];return e},t}();e.CompressorCustomHashTable=t}(o||(o={})),function(e){var t=function(){function t(e){this.maximumBucketCapacity=64,this.buckets=new Array(e)}return t.prototype.addValueToBucket=function(t,n){var i=this.buckets[t];void 0===i?this.buckets[t]=[n]:(i.length===this.maximumBucketCapacity-1&&e.ArrayTools.truncateStartingElements(i,this.maximumBucketCapacity/2),i.push(n))},t.prototype.getArraySegmentForBucketIndex=function(t,n){var i=this.buckets[t];return void 0===i?null:(void 0===n&&(n=new e.ArraySegment(i,0,i.length)),n)},t.prototype.getUsedBucketCount=function(){return e.ArrayTools.countNonzeroValuesInArray(this.buckets)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.buckets.length;t++)void 0!==this.buckets[t]&&(e+=this.buckets[t].length);return e},t}();e.CompressorSimpleHashTable=t}(o||(o={})),function(e){var t=function(){function t(){this.MaximumMatchDistance=32767,this.outputPosition=0}return t.prototype.decompressBlockToString=function(t){return t=e.BufferTools.convertToUint8ArrayIfNeeded(t),e.decodeUTF8(this.decompressBlock(t))},t.prototype.decompressBlock=function(t){this.inputBufferRemainder&&(t=e.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,t]),this.inputBufferRemainder=void 0);for(var n=this.cropOutputBufferToWindowAndInitialize(Math.max(4*t.length,1024)),i=0,o=t.length;i<o;i++){var a=t[i];if(a>>>6==3){var r=a>>>5;if(i==o-1||i==o-2&&7==r){this.inputBufferRemainder=t.subarray(i);break}if(t[i+1]>>>7==1)this.outputByte(a);else{var s=31&a,l=void 0;6==r?(l=t[i+1],i+=1):(l=t[i+1]<<8|t[i+2],i+=2);for(var c=this.outputPosition-l,u=0;u<s;u++)this.outputByte(this.outputBuffer[c+u])}}else this.outputByte(a)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),e.CompressionCommon.getCroppedBuffer(this.outputBuffer,n,this.outputPosition-n)},t.prototype.outputByte=function(t){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=e.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=t},t.prototype.cropOutputBufferToWindowAndInitialize=function(t){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(t),0;var n=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=e.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-n,n,t),this.outputPosition=n,this.outputBufferRemainder){for(var i=0;i<this.outputBufferRemainder.length;i++)this.outputByte(this.outputBufferRemainder[i]);this.outputBufferRemainder=void 0}return n},t.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var e=1;e<=4&&this.outputPosition-e>=0;e++){var t=this.outputBuffer[this.outputPosition-e];if(e<4&&t>>>3==30||e<3&&t>>>4==14||e<2&&t>>>5==6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-e,this.outputPosition),void(this.outputPosition-=e)}},t}();e.Decompressor=t}(o||(o={})),function(e){var t,n,i,o;t=e.Encoding||(e.Encoding={}),n=t.Base64||(t.Base64={}),i=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),o=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),n.encode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(t).toString("base64"):n.encodeWithJS(t):""},n.decode=function(t){return t?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(Buffer.from(t,"base64")):n.decodeWithJS(t):new Uint8Array(0)},n.encodeWithJS=function(t,n){if(void 0===n&&(n=!0),!t||0==t.length)return"";for(var o,a=i,r=new e.StringBuilder,s=0,l=t.length;s<l;s+=3)s<=l-3?(o=t[s]<<16|t[s+1]<<8|t[s+2],r.appendCharCode(a[o>>>18&63]),r.appendCharCode(a[o>>>12&63]),r.appendCharCode(a[o>>>6&63]),r.appendCharCode(a[63&o]),o=0):s===l-2?(o=t[s]<<16|t[s+1]<<8,r.appendCharCode(a[o>>>18&63]),r.appendCharCode(a[o>>>12&63]),r.appendCharCode(a[o>>>6&63]),n&&r.appendCharCode(61)):s===l-1&&(o=t[s]<<16,r.appendCharCode(a[o>>>18&63]),r.appendCharCode(a[o>>>12&63]),n&&(r.appendCharCode(61),r.appendCharCode(61)));return r.getOutputString()},n.decodeWithJS=function(e,t){if(!e||0==e.length)return new Uint8Array(0);var n=e.length%4;if(1===n)throw new Error("Invalid Base64 string: length % 4 == 1");2===n?e+="==":3===n&&(e+="="),t||(t=new Uint8Array(e.length));for(var i=0,a=e.length,r=0;r<a;r+=4){var s=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)];t[i++]=s>>>16&255,t[i++]=s>>>8&255,t[i++]=255&s}return 61==e.charCodeAt(a-1)&&i--,61==e.charCodeAt(a-2)&&i--,t.subarray(0,i)}}(o||(o={})),function(e){var t,n;t=e.Encoding||(e.Encoding={}),(n=t.BinaryString||(t.BinaryString={})).encode=function(t){if(null==t)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===t.length)return"";for(var n=t.length,i=new e.StringBuilder,o=0,a=1,r=0;r<n;r+=2){var s;s=r==n-1?t[r]<<8:t[r]<<8|t[r+1],i.appendCharCode(o<<16-a|s>>>a),o=s&(1<<a)-1,15===a?(i.appendCharCode(o),o=0,a=1):a+=1,r>=n-2&&i.appendCharCode(o<<16-a)}return i.appendCharCode(32768|n%2),i.getOutputString()},n.decode=function(e){if("string"!=typeof e)throw new TypeError("BinaryString.decode: invalid input type");if(""==e)return new Uint8Array(0);for(var t=new Uint8Array(3*e.length),n=0,i=function(e){t[n++]=e>>>8,t[n++]=255&e},o=0,a=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);s>=32768?(32769==s&&n--,a=0):(0==a?o=s:(i(o<<a|s>>>15-a),o=s&(1<<15-a)-1),15==a?a=0:a+=1)}return t.subarray(0,n)}}(o||(o={})),function(e){var t,n;t=e.Encoding||(e.Encoding={}),(n=t.CodePoint||(t.CodePoint={})).encodeFromString=function(e,t){var n=e.charCodeAt(t);if(n<55296||n>56319)return n;var i=e.charCodeAt(t+1);if(i>=56320&&i<=57343)return i-56320+(n-55296<<10)+65536;throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code "+n+", followed by "+i+", which is not a trailing surrogate character code.")},n.decodeToString=function(e){if(e<=65535)return String.fromCharCode(e);if(e<=1114111)return String.fromCharCode(55296+(e-65536>>>10),56320+(e-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of "+e+" cannot be encoded in UTF-16")}}(o||(o={})),function(e){var t,n,i;t=e.Encoding||(e.Encoding={}),n=t.DecimalString||(t.DecimalString={}),i=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"],n.encode=function(e){for(var t=[],n=0;n<e.length;n++)t.push(i[e[n]]);return t.join(" ")}}(o||(o={})),function(e){var t,n;t=e.Encoding||(e.Encoding={}),(n=t.StorageBinaryString||(t.StorageBinaryString={})).encode=function(e){return t.BinaryString.encode(e).replace(/\0/g,"")},n.decode=function(e){return t.BinaryString.decode(e.replace(/\u8002/g,"\0"))}}(o||(o={})),function(e){var t,n,i,o;t=e.Encoding||(e.Encoding={}),(n=t.UTF8||(t.UTF8={})).encode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(Buffer.from(t,"utf8")):n.createNativeTextEncoderAndDecoderIfAvailable()?i.encode(t):n.encodeWithJS(t):new Uint8Array(0)},n.decode=function(t){return t&&0!=t.length?e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(t).toString("utf8"):n.createNativeTextEncoderAndDecoderIfAvailable()?o.decode(t):n.decodeWithJS(t):""},n.encodeWithJS=function(e,n){if(!e||0==e.length)return new Uint8Array(0);n||(n=new Uint8Array(4*e.length));for(var i=0,o=0;o<e.length;o++){var a=t.CodePoint.encodeFromString(e,o);if(a<=127)n[i++]=a;else if(a<=2047)n[i++]=192|a>>>6,n[i++]=128|63&a;else if(a<=65535)n[i++]=224|a>>>12,n[i++]=128|a>>>6&63,n[i++]=128|63&a;else{if(!(a<=1114111))throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");n[i++]=240|a>>>18,n[i++]=128|a>>>12&63,n[i++]=128|a>>>6&63,n[i++]=128|63&a,o++}}return n.subarray(0,i)},n.decodeWithJS=function(t,n,i){if(void 0===n&&(n=0),!t||0==t.length)return"";void 0===i&&(i=t.length);for(var o,a,r=new e.StringBuilder,s=n,l=i;s<l;){if((a=t[s])>>>7==0)o=a,s+=1;else if(a>>>5==6){if(s+1>=i)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(31&a)<<6|63&t[s+1],s+=2}else if(a>>>4==14){if(s+2>=i)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(15&a)<<12|(63&t[s+1])<<6|63&t[s+2],s+=3}else{if(a>>>3!=30)throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+s);if(s+3>=i)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+s);o=(7&a)<<18|(63&t[s+1])<<12|(63&t[s+2])<<6|63&t[s+3],s+=4}r.appendCodePoint(o)}return r.getOutputString()},n.createNativeTextEncoderAndDecoderIfAvailable=function(){return!!i||"function"==typeof TextEncoder&&(i=new TextEncoder("utf-8"),o=new TextDecoder("utf-8"),!0)}}(o||(o={})),function(e){e.compress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("compress: undefined or null input received");var i=e.CompressionCommon.detectCompressionSourceEncoding(t);n=e.ObjectTools.override({inputEncoding:i,outputEncoding:"ByteArray"},n);var o=(new e.Compressor).compressBlock(t);return e.CompressionCommon.encodeCompressedBytes(o,n.outputEncoding)},e.decompress=function(t,n){if(void 0===n&&(n={}),null==t)throw new TypeError("decompress: undefined or null input received");n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},n);var i=e.CompressionCommon.decodeCompressedBytes(t,n.inputEncoding),o=(new e.Decompressor).decompressBlock(i);return e.CompressionCommon.encodeDecompressedBytes(o,n.outputEncoding)},e.compressAsync=function(t,n,i){var o;null==i&&(i=function(){});try{o=e.CompressionCommon.detectCompressionSourceEncoding(t)}catch(e){return void i(void 0,e)}n=e.ObjectTools.override({inputEncoding:o,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},n),e.enqueueImmediate((function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.compressAsync(t,n,i):e.AsyncCompressor.compressAsync(t,n,i)}))},e.decompressAsync=function(t,n,i){if(null==i&&(i=function(){}),null!=t){n=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},n);var o=e.BufferTools.convertToUint8ArrayIfNeeded(t);e.EventLoop.enqueueImmediate((function(){n.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.decompressAsync(o,n,i):e.AsyncDecompressor.decompressAsync(t,n,i)}))}else i(void 0,new TypeError("decompressAsync: undefined or null input received"))},e.createCompressionStream=function(){return e.AsyncCompressor.createCompressionStream()},e.createDecompressionStream=function(){return e.AsyncDecompressor.createDecompressionStream()},e.encodeUTF8=function(t){return e.Encoding.UTF8.encode(t)},e.decodeUTF8=function(t){return e.Encoding.UTF8.decode(t)},e.encodeBase64=function(t){return e.Encoding.Base64.encode(t)},e.decodeBase64=function(t){return e.Encoding.Base64.decode(t)},e.encodeBinaryString=function(t){return e.Encoding.BinaryString.encode(t)},e.decodeBinaryString=function(t){return e.Encoding.BinaryString.decode(t)},e.encodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.encode(t)},e.decodeStorageBinaryString=function(t){return e.Encoding.StorageBinaryString.decode(t)}}(o||(o={}))},1491:e=>{"use strict";var t={};function n(e,n,i){i||(i=Error);var o=function(e){var t,i;function o(t,i,o){return e.call(this,function(e,t,i){return"string"==typeof n?n:n(e,t,i)}(t,i,o))||this}return i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,o}(i);o.prototype.name=i.name,o.prototype.code=e,t[e]=o}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var o,a,r,s,l;if("string"==typeof t&&(a="not ",t.substr(0,a.length)===a)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))r="The ".concat(e," ").concat(o," ").concat(i(t,"type"));else{var c=("number"!=typeof l&&(l=0),l+".".length>(s=e).length||-1===s.indexOf(".",l)?"argument":"property");r='The "'.concat(e,'" ').concat(c," ").concat(o," ").concat(i(t,"type"))}return r+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},4931:(e,t,n)=>{"use strict";var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var o=n(8856),a=n(1288);n(5717)(c,o);for(var r=i(a.prototype),s=0;s<r.length;s++){var l=r[s];c.prototype[l]||(c.prototype[l]=a.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(m,this)}function m(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},9082:(e,t,n)=>{"use strict";e.exports=o;var i=n(1513);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}n(5717)(o,i),o.prototype._transform=function(e,t,n){n(null,e)}},8856:(e,t,n)=>{"use strict";var i;e.exports=x,x.ReadableState=M,n(7187).EventEmitter;var o,a=function(e,t){return e.listeners(t).length},r=n(5157),s=n(8764).Buffer,l=n.g.Uint8Array||function(){},c=n(1758);o=c&&c.debuglog?c.debuglog("stream"):function(){};var u,m,d,p=n(6173),h=n(7587),f=n(3177).getHighWaterMark,g=n(1491).q,y=g.ERR_INVALID_ARG_TYPE,C=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,b=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(5717)(x,r);var S=h.errorOrDestroy,w=["error","close","destroy","pause","resume"];function M(e,t,o){i=i||n(4931),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=f(this,e,"readableHighWaterMark",o),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=n(2553).s),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function x(e){if(i=i||n(4931),!(this instanceof x))return new x(e);var t=this instanceof i;this._readableState=new M(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),r.call(this)}function O(e,t,n,i,a){o("readableAddChunk",t);var r,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?E(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}}(e,c);else if(a||(r=function(e,t){var n,i;return i=t,s.isBuffer(i)||i instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(c,t)),r)S(e,r);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),i)c.endEmitted?S(e,new b):P(e,c,t,!0);else if(c.ended)S(e,new C);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(t=c.decoder.write(t),c.objectMode||0!==t.length?P(e,c,t,!1):F(e,c)):P(e,c,t,!1)}else i||(c.reading=!1,F(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function P(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&E(e)),F(e,t)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=h.destroy,x.prototype._undestroy=h.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=s.from(e,t),t=""),n=!0),O(this,e,t,!1,n)},x.prototype.unshift=function(e){return O(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(e){u||(u=n(2553).s);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,o="";null!==i;)o+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};var T=1073741824;function D(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(A,e))}function A(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function F(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function _(e){o("readable nexttick read 0"),e.read(0)}function R(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function k(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function z(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(B,t,e))}function B(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function j(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}x.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):E(this),null;if(0===(e=D(e,t))&&t.ended)return 0===t.length&&z(this),null;var i,a=t.needReadable;return o("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",a=!0),t.ended||t.reading?o("reading or ended",a=!1):a&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=D(n,t))),null===(i=e>0?k(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==i&&this.emit("data",i),i},x.prototype._read=function(e){S(this,new v("_read()"))},x.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,o("pipe count=%d opts=%j",i.pipesCount,t);var r=t&&!1===t.end||e===process.stdout||e===process.stderr?h:s;function s(){o("onend"),e.end()}i.endEmitted?process.nextTick(r):n.once("end",r),e.on("unpipe",(function t(a,r){o("onunpipe"),a===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,o("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",m),e.removeListener("unpipe",t),n.removeListener("end",s),n.removeListener("end",h),n.removeListener("data",u),c=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",l);var c=!1;function u(t){o("ondata");var a=e.write(t);o("dest.write",a),!1===a&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==j(i.pipes,e))&&!c&&(o("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function m(t){o("onerror",t),h(),e.removeListener("error",m),0===a(e,"error")&&S(e,t)}function d(){e.removeListener("finish",p),h()}function p(){o("onfinish"),e.removeListener("close",d),h()}function h(){o("unpipe"),n.unpipe(e)}return n.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",m),e.once("close",d),e.once("finish",p),e.emit("pipe",n),i.flowing||(o("pipe resume"),n.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<o;a++)i[a].emit("unpipe",this,{hasUnpiped:!1});return this}var r=j(t.pipes,e);return-1===r||(t.pipes.splice(r,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},x.prototype.on=function(e,t){var n=r.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,o("on readable",i.length,i.reading),i.length?E(this):i.reading||process.nextTick(_,this))),n},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(e,t){var n=r.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(I,this),n},x.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(I,this),t},x.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(R,e,t))}(this,e)),e.paused=!1,this},x.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var a in e.on("end",(function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){o("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a||(n.objectMode||a&&a.length)&&(t.push(a)||(i=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var r=0;r<w.length;r++)e.on(w[r],this.emit.bind(this,w[r]));return this._read=function(t){o("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===m&&(m=n(9629)),m(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),x._fromList=k,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(e,t){return void 0===d&&(d=n(4957)),d(x,e,t)})},1513:(e,t,n)=>{"use strict";e.exports=u;var i=n(1491).q,o=i.ERR_METHOD_NOT_IMPLEMENTED,a=i.ERR_MULTIPLE_CALLBACK,r=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=i.ERR_TRANSFORM_WITH_LENGTH_0,l=n(4931);function c(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new a);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",m)}function m(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,n){d(e,t,n)}))}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new r;return e.push(null)}n(5717)(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new o("_transform()"))},u.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var o=this._readableState;(i.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},1288:(e,t,n)=>{"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var o=i.callback;t.pendingcb--,o(undefined),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=x,x.WritableState=M;var a,r={deprecate:n(4927)},s=n(5157),l=n(8764).Buffer,c=n.g.Uint8Array||function(){},u=n(7587),m=n(3177).getHighWaterMark,d=n(1491).q,p=d.ERR_INVALID_ARG_TYPE,h=d.ERR_METHOD_NOT_IMPLEMENTED,f=d.ERR_MULTIPLE_CALLBACK,g=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,C=d.ERR_STREAM_NULL_VALUES,v=d.ERR_STREAM_WRITE_AFTER_END,b=d.ERR_UNKNOWN_ENCODING,S=u.errorOrDestroy;function w(){}function M(e,t,a){o=o||n(4931),e=e||{},"boolean"!=typeof a&&(a=t instanceof o),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=m(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=!1===e.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new f;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(process.nextTick(o,i),process.nextTick(A,e,t),e._writableState.errorEmitted=!0,S(e,i)):(o(i),e._writableState.errorEmitted=!0,S(e,i),A(e,t))}(e,n,i,t,o);else{var a=D(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),i?process.nextTick(P,e,n,a,o):P(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function x(e){var t=this instanceof(o=o||n(4931));if(!t&&!a.call(x,this))return new x(e);this._writableState=new M(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function O(e,t,n,i,o,a,r){t.writelen=i,t.writecb=r,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(o,t.onwrite):e._write(o,a,t.onwrite),t.sync=!1}function P(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),A(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var o=t.bufferedRequestCount,a=new Array(o),r=t.corkedRequestsFree;r.entry=n;for(var s=0,l=!0;n;)a[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;a.allBuffers=l,O(e,t,!0,t.length,a,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,m=n.callback;if(O(e,t,!1,t.objectMode?1:c.length,c,u,m),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function D(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final((function(n){t.pendingcb--,n&&S(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var n=D(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(E,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(5717)(x,s),M.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(M.prototype,"buffer",{get:r.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===x&&e&&e._writableState instanceof M}})):a=function(e){return e instanceof this},x.prototype.pipe=function(){S(this,new g)},x.prototype.write=function(e,t,n){var i,o=this._writableState,a=!1,r=!o.objectMode&&(i=e,l.isBuffer(i)||i instanceof c);return r&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),r?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=w),o.ending?function(e,t){var n=new v;S(e,n),process.nextTick(t,n)}(this,n):(r||function(e,t,n,i){var o;return null===n?o=new C:"string"==typeof n||t.objectMode||(o=new p("chunk",["string","Buffer"],n)),!o||(S(e,o),process.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,i,o,a){if(!n){var r=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}(t,i,o);i!==r&&(n=!0,o="buffer",i=r)}var s=t.objectMode?1:i.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:o,isBuf:n,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else O(e,t,!1,s,i,o,a);return c}(this,o,r,e,t,n)),a},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new h("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=u.destroy,x.prototype._undestroy=u.undestroy,x.prototype._destroy=function(e,t){t(e)}},9629:(e,t,n)=>{"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(439),r=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),m=Symbol("handlePromise"),d=Symbol("stream");function p(e,t){return{value:e,done:t}}function h(e){var t=e[r];if(null!==t){var n=e[d].read();null!==n&&(e[u]=null,e[r]=null,e[s]=null,t(p(n,!1)))}}function f(e){process.nextTick(h,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(i={get stream(){return this[d]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[l]?n(e[l]):t(p(void 0,!0))}))}));var n,i=this[u];if(i)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[c]?n(p(void 0,!0)):t[m](n,i)}),i)}}(i,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[m])}return this[u]=n,n}},Symbol.asyncIterator,(function(){return this})),o(i,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),i),g);e.exports=function(e){var t,n=Object.create(y,(o(t={},d,{value:e,writable:!0}),o(t,r,{value:null,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,c,{value:e._readableState.endEmitted,writable:!0}),o(t,m,{value:function(e,t){var i=n[d].read();i?(n[u]=null,n[r]=null,n[s]=null,e(p(i,!1))):(n[r]=e,n[s]=t)},writable:!0}),t));return n[u]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[s];return null!==t&&(n[u]=null,n[r]=null,n[s]=null,t(e)),void(n[l]=e)}var i=n[r];null!==i&&(n[u]=null,n[r]=null,n[s]=null,i(p(void 0,!0))),n[c]=!0})),e.on("readable",f.bind(null,n)),n}},6173:(e,t,n)=>{"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=n(8764).Buffer,s=n(1758).inspect,l=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return r.alloc(0);for(var t,n,i,o=r.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=o,i=s,r.prototype.copy.call(t,n,i),s+=a.data.length,a=a.next;return o}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var o=t.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0==(e-=a)){a===o.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(a));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=r.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,a),0==(e-=a)){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,t}},{key:l,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&a(t.prototype,n),e}()},7587:e=>{"use strict";function t(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var a=this,r=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return r||s?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(i,this,e)):process.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!o&&e?a._writableState?a._writableState.errorEmitted?process.nextTick(n,a):(a._writableState.errorEmitted=!0,process.nextTick(t,a,e)):process.nextTick(t,a,e):o?(process.nextTick(n,a),o(e)):process.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},439:(e,t,n)=>{"use strict";var i=n(1491).q.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,n,a){if("function"==typeof n)return e(t,null,n);n||(n={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];e.apply(this,i)}}}(a||o);var r=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){s=!1,c=!0,r||a.call(t)},m=t._readableState&&t._readableState.endEmitted,d=function(){r=!1,m=!0,s||a.call(t)},p=function(e){a.call(t,e)},h=function(){var e;return r&&!m?(t._readableState&&t._readableState.ended||(e=new i),a.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new i),a.call(t,e)):void 0},f=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",h),t.req?f():t.on("request",f)):s&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",d),t.on("finish",u),!1!==n.error&&t.on("error",p),t.on("close",h),function(){t.removeListener("complete",u),t.removeListener("abort",h),t.removeListener("request",f),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",d),t.removeListener("error",p),t.removeListener("close",h)}}},4957:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},5324:(e,t,n)=>{"use strict";var i,o=n(1491).q,a=o.ERR_MISSING_ARGS,r=o.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function l(e,t,o,a){a=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(a);var s=!1;e.on("close",(function(){s=!0})),void 0===i&&(i=n(439)),i(e,{readable:t,writable:o},(function(e){if(e)return a(e);s=!0,a()}));var l=!1;return function(t){if(!s&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void a(t||new r("pipe"))}}function c(e){e()}function u(e,t){return e.pipe(t)}function m(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,o=m(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var r=t.map((function(e,n){var a=n<t.length-1;return l(e,a,n>0,(function(e){i||(i=e),e&&r.forEach(c),a||(r.forEach(c),o(i))}))}));return t.reduce(u)}},3177:(e,t,n)=>{"use strict";var i=n(1491).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,o){var a=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,o,n);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new i(o?n:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}}},5157:(e,t,n)=>{e.exports=n(7187).EventEmitter},931:(e,t,n)=>{(t=e.exports=n(8856)).Stream=t,t.Readable=t,t.Writable=n(1288),t.Duplex=n(4931),t.Transform=n(1513),t.PassThrough=n(9082),t.finished=n(439),t.pipeline=n(5324)},2077:function(e,t,n){var i,o;void 0===(o="function"==typeof(i=function(){var e,t,n,i,o,a={},r={},s={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},l={currentLocale:s.currentLocale,zeroFormat:s.zeroFormat,nullFormat:s.nullFormat,defaultFormat:s.defaultFormat,scalePercentBy100:s.scalePercentBy100};function c(e,t){this._input=e,this._value=t}return(e=function(n){var i,o,r,s;if(e.isNumeral(n))i=n.value();else if(0===n||void 0===n)i=0;else if(null===n||t.isNaN(n))i=null;else if("string"==typeof n)if(l.zeroFormat&&n===l.zeroFormat)i=0;else if(l.nullFormat&&n===l.nullFormat||!n.replace(/[^0-9]+/g,"").length)i=null;else{for(o in a)if((s="function"==typeof a[o].regexps.unformat?a[o].regexps.unformat():a[o].regexps.unformat)&&n.match(s)){r=a[o].unformat;break}i=(r=r||e._.stringToNumber)(n)}else i=Number(n)||null;return new c(n,i)}).version="2.0.6",e.isNumeral=function(e){return e instanceof c},e._=t={numberToFormat:function(t,n,i){var o,a,s,l,c,u,m,d,p=r[e.options.currentLocale],h=!1,f=!1,g="",y=1e12,C=1e9,v=1e6,b="",S=!1;if(t=t||0,a=Math.abs(t),e._.includes(n,"(")?(h=!0,n=n.replace(/[\(|\)]/g,"")):(e._.includes(n,"+")||e._.includes(n,"-"))&&(c=e._.includes(n,"+")?n.indexOf("+"):t<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),e._.includes(n,"a")&&(o=!!(o=n.match(/a(k|m|b|t)?/))&&o[1],e._.includes(n," a")&&(g=" "),n=n.replace(new RegExp(g+"a[kmbt]?"),""),a>=y&&!o||"t"===o?(g+=p.abbreviations.trillion,t/=y):a<y&&a>=C&&!o||"b"===o?(g+=p.abbreviations.billion,t/=C):a<C&&a>=v&&!o||"m"===o?(g+=p.abbreviations.million,t/=v):(a<v&&a>=1e3&&!o||"k"===o)&&(g+=p.abbreviations.thousand,t/=1e3)),e._.includes(n,"[.]")&&(f=!0,n=n.replace("[.]",".")),s=t.toString().split(".")[0],l=n.split(".")[1],u=n.indexOf(","),d=(n.split(".")[0].split(",")[0].match(/0/g)||[]).length,l?(e._.includes(l,"[")?(l=(l=l.replace("]","")).split("["),b=e._.toFixed(t,l[0].length+l[1].length,i,l[1].length)):b=e._.toFixed(t,l.length,i),s=b.split(".")[0],b=e._.includes(b,".")?p.delimiters.decimal+b.split(".")[1]:"",f&&0===Number(b.slice(1))&&(b="")):s=e._.toFixed(t,0,i),g&&!o&&Number(s)>=1e3&&g!==p.abbreviations.trillion)switch(s=String(Number(s)/1e3),g){case p.abbreviations.thousand:g=p.abbreviations.million;break;case p.abbreviations.million:g=p.abbreviations.billion;break;case p.abbreviations.billion:g=p.abbreviations.trillion}if(e._.includes(s,"-")&&(s=s.slice(1),S=!0),s.length<d)for(var w=d-s.length;w>0;w--)s="0"+s;return u>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p.delimiters.thousands)),0===n.indexOf(".")&&(s=""),m=s+b+(g||""),h?m=(h&&S?"(":"")+m+(h&&S?")":""):c>=0?m=0===c?(S?"-":"+")+m:m+(S?"-":"+"):S&&(m="-"+m),m},stringToNumber:function(e){var t,n,i,o=r[l.currentLocale],a=e,s={thousand:3,million:6,billion:9,trillion:12};if(l.zeroFormat&&e===l.zeroFormat)n=0;else if(l.nullFormat&&e===l.nullFormat||!e.replace(/[^0-9]+/g,"").length)n=null;else{for(t in n=1,"."!==o.delimiters.decimal&&(e=e.replace(/\./g,"").replace(o.delimiters.decimal,".")),s)if(i=new RegExp("[^a-zA-Z]"+o.abbreviations[t]+"(?:\\)|(\\"+o.currency.symbol+")?(?:\\))?)?$"),a.match(i)){n*=Math.pow(10,s[t]);break}n*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1,e=e.replace(/[^0-9\.]+/g,""),n*=Number(e)}return n},isNaN:function(e){return"number"==typeof e&&isNaN(e)},includes:function(e,t){return-1!==e.indexOf(t)},insert:function(e,t,n){return e.slice(0,n)+t+e.slice(n)},reduce:function(e,t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,i=Object(e),o=i.length>>>0,a=0;if(3===arguments.length)n=arguments[2];else{for(;a<o&&!(a in i);)a++;if(a>=o)throw new TypeError("Reduce of empty array with no initial value");n=i[a++]}for(;a<o;a++)a in i&&(n=t(n,i[a],a,i));return n},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce((function(e,n){var i=t.multiplier(n);return e>i?e:i}),1)},toFixed:function(e,t,n,i){var o,a,r,s,l=e.toString().split("."),c=t-(i||0);return o=2===l.length?Math.min(Math.max(l[1].length,c),t):c,r=Math.pow(10,o),s=(n(e+"e+"+o)/r).toFixed(o),i>t-o&&(a=new RegExp("\\.?0{1,"+(i-(t-o))+"}$"),s=s.replace(a,"")),s}},e.options=l,e.formats=a,e.locales=r,e.locale=function(e){return e&&(l.currentLocale=e.toLowerCase()),l.currentLocale},e.localeData=function(e){if(!e)return r[l.currentLocale];if(e=e.toLowerCase(),!r[e])throw new Error("Unknown locale : "+e);return r[e]},e.reset=function(){for(var e in s)l[e]=s[e]},e.zeroFormat=function(e){l.zeroFormat="string"==typeof e?e:null},e.nullFormat=function(e){l.nullFormat="string"==typeof e?e:null},e.defaultFormat=function(e){l.defaultFormat="string"==typeof e?e:"0.0"},e.register=function(e,t,n){if(t=t.toLowerCase(),this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=n,n},e.validate=function(t,n){var i,o,a,r,s,l,c,u;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),(t=t.trim()).match(/^\d+$/))return!0;if(""===t)return!1;try{c=e.localeData(n)}catch(t){c=e.localeData(e.locale())}return a=c.currency.symbol,s=c.abbreviations,i=c.delimiters.decimal,o="."===c.delimiters.thousands?"\\.":c.delimiters.thousands,!(null!==(u=t.match(/^[^\d]+/))&&(t=t.substr(1),u[0]!==a)||null!==(u=t.match(/[^\d]+$/))&&(t=t.slice(0,-1),u[0]!==s.thousand&&u[0]!==s.million&&u[0]!==s.billion&&u[0]!==s.trillion)||(l=new RegExp(o+"{2}"),t.match(/[^\d.,]/g)||(r=t.split(i)).length>2||(r.length<2?!r[0].match(/^\d+.*\d$/)||r[0].match(l):1===r[0].length?!r[0].match(/^\d+$/)||r[0].match(l)||!r[1].match(/^\d+$/):!r[0].match(/^\d+.*\d$/)||r[0].match(l)||!r[1].match(/^\d+$/))))},e.fn=c.prototype={clone:function(){return e(this)},format:function(t,n){var i,o,r,s=this._value,c=t||l.defaultFormat;if(n=n||Math.round,0===s&&null!==l.zeroFormat)o=l.zeroFormat;else if(null===s&&null!==l.nullFormat)o=l.nullFormat;else{for(i in a)if(c.match(a[i].regexps.format)){r=a[i].format;break}o=(r=r||e._.numberToFormat)(s,c,n)}return o},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){var n=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([this._value,e],(function(e,t,i,o){return e+Math.round(n*t)}),0)/n,this},subtract:function(e){var n=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([e],(function(e,t,i,o){return e-Math.round(n*t)}),Math.round(this._value*n))/n,this},multiply:function(e){return this._value=t.reduce([this._value,e],(function(e,n,i,o){var a=t.correctionFactor(e,n);return Math.round(e*a)*Math.round(n*a)/Math.round(a*a)}),1),this},divide:function(e){return this._value=t.reduce([this._value,e],(function(e,n,i,o){var a=t.correctionFactor(e,n);return Math.round(e*a)/Math.round(n*a)})),this},difference:function(t){return Math.abs(e(this._value).subtract(t).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,n,i){var o,a=e._.includes(n," BPS")?" ":"";return t*=1e4,n=n.replace(/\s?BPS/,""),o=e._.numberToFormat(t,n,i),e._.includes(o,")")?((o=o.split("")).splice(-1,0,a+"BPS"),o=o.join("")):o=o+a+"BPS",o},unformat:function(t){return+(1e-4*e._.stringToNumber(t)).toFixed(15)}}),i={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},o="("+(o=(n={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat(i.suffixes.filter((function(e){return n.suffixes.indexOf(e)<0}))).join("|")).replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(t,o,a){var r,s,l,c=e._.includes(o,"ib")?i:n,u=e._.includes(o," b")||e._.includes(o," ib")?" ":"";for(o=o.replace(/\s?i?b/,""),r=0;r<=c.suffixes.length;r++)if(s=Math.pow(c.base,r),l=Math.pow(c.base,r+1),null===t||0===t||t>=s&&t<l){u+=c.suffixes[r],s>0&&(t/=s);break}return e._.numberToFormat(t,o,a)+u},unformat:function(t){var o,a,r=e._.stringToNumber(t);if(r){for(o=n.suffixes.length-1;o>=0;o--){if(e._.includes(t,n.suffixes[o])){a=Math.pow(n.base,o);break}if(e._.includes(t,i.suffixes[o])){a=Math.pow(i.base,o);break}}r*=a||1}return r}}),e.register("format","currency",{regexps:{format:/(\$)/},format:function(t,n,i){var o,a,r=e.locales[e.options.currentLocale],s={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),o=e._.numberToFormat(t,n,i),t>=0?(s.before=s.before.replace(/[\-\(]/,""),s.after=s.after.replace(/[\-\)]/,"")):t<0&&!e._.includes(s.before,"-")&&!e._.includes(s.before,"(")&&(s.before="-"+s.before),a=0;a<s.before.length;a++)switch(s.before[a]){case"$":o=e._.insert(o,r.currency.symbol,a);break;case" ":o=e._.insert(o," ",a+r.currency.symbol.length-1)}for(a=s.after.length-1;a>=0;a--)switch(s.after[a]){case"$":o=a===s.after.length-1?o+r.currency.symbol:e._.insert(o,r.currency.symbol,-(s.after.length-(1+a)));break;case" ":o=a===s.after.length-1?o+" ":e._.insert(o," ",-(s.after.length-(1+a)+r.currency.symbol.length-1))}return o}}),e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,n,i){var o=("number"!=typeof t||e._.isNaN(t)?"0e+0":t.toExponential()).split("e");return n=n.replace(/e[\+|\-]{1}0/,""),e._.numberToFormat(Number(o[0]),n,i)+"e"+o[1]},unformat:function(t){var n=e._.includes(t,"e+")?t.split("e+"):t.split("e-"),i=Number(n[0]),o=Number(n[1]);return o=e._.includes(t,"e-")?o*=-1:o,e._.reduce([i,Math.pow(10,o)],(function(t,n,i,o){var a=e._.correctionFactor(t,n);return t*a*(n*a)/(a*a)}),1)}}),e.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,n,i){var o=e.locales[e.options.currentLocale],a=e._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),a+=o.ordinal(t),e._.numberToFormat(t,n,i)+a}}),e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,n,i){var o,a=e._.includes(n," %")?" ":"";return e.options.scalePercentBy100&&(t*=100),n=n.replace(/\s?\%/,""),o=e._.numberToFormat(t,n,i),e._.includes(o,")")?((o=o.split("")).splice(-1,0,a+"%"),o=o.join("")):o=o+a+"%",o},unformat:function(t){var n=e._.stringToNumber(t);return e.options.scalePercentBy100?.01*n:n}}),e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,n){var i=Math.floor(e/60/60),o=Math.floor((e-60*i*60)/60),a=Math.round(e-60*i*60-60*o);return i+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)},unformat:function(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}}),e})?i.call(t,n,t,e):i)||(e.exports=o)},9657:(e,t,n)=>{e.exports=n(9558)},9558:(e,t,n)=>{e.exports={Heap:n(4485),Node:n(1289),Grid:n(8809),Util:n(8408),DiagonalMovement:n(3506),Heuristic:n(9430),AStarFinder:n(2131),BestFirstFinder:n(3644),BreadthFirstFinder:n(7904),DijkstraFinder:n(600),BiAStarFinder:n(713),BiBestFirstFinder:n(6325),BiBreadthFirstFinder:n(2513),BiDijkstraFinder:n(6511),IDAStarFinder:n(9191),JumpPointFinder:n(8717)}},3506:e=>{e.exports={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4}},8809:(e,t,n)=>{var i=n(1289),o=n(3506);function a(e,t,n){var i;"object"!=typeof e?i=e:(t=e.length,i=e[0].length,n=e),this.width=i,this.height=t,this.nodes=this._buildNodes(i,t,n)}a.prototype._buildNodes=function(e,t,n){var o,a,r=new Array(t);for(o=0;o<t;++o)for(r[o]=new Array(e),a=0;a<e;++a)r[o][a]=new i(a,o);if(void 0===n)return r;if(n.length!==t||n[0].length!==e)throw new Error("Matrix size does not fit");for(o=0;o<t;++o)for(a=0;a<e;++a)n[o][a]&&(r[o][a].walkable=!1);return r},a.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},a.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},a.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},a.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n},a.prototype.getNeighbors=function(e,t){var n=e.x,i=e.y,a=[],r=!1,s=!1,l=!1,c=!1,u=!1,m=!1,d=!1,p=!1,h=this.nodes;if(this.isWalkableAt(n,i-1)&&(a.push(h[i-1][n]),r=!0),this.isWalkableAt(n+1,i)&&(a.push(h[i][n+1]),l=!0),this.isWalkableAt(n,i+1)&&(a.push(h[i+1][n]),u=!0),this.isWalkableAt(n-1,i)&&(a.push(h[i][n-1]),d=!0),t===o.Never)return a;if(t===o.OnlyWhenNoObstacles)s=d&&r,c=r&&l,m=l&&u,p=u&&d;else if(t===o.IfAtMostOneObstacle)s=d||r,c=r||l,m=l||u,p=u||d;else{if(t!==o.Always)throw new Error("Incorrect value of diagonalMovement");s=!0,c=!0,m=!0,p=!0}return s&&this.isWalkableAt(n-1,i-1)&&a.push(h[i-1][n-1]),c&&this.isWalkableAt(n+1,i-1)&&a.push(h[i-1][n+1]),m&&this.isWalkableAt(n+1,i+1)&&a.push(h[i+1][n+1]),p&&this.isWalkableAt(n-1,i+1)&&a.push(h[i+1][n-1]),a},a.prototype.clone=function(){var e,t,n=this.width,o=this.height,r=this.nodes,s=new a(n,o),l=new Array(o);for(e=0;e<o;++e)for(l[e]=new Array(n),t=0;t<n;++t)l[e][t]=new i(t,e,r[e][t].walkable);return s.nodes=l,s},e.exports=a},9430:e=>{e.exports={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var n=Math.SQRT2-1;return e<t?n*e+t:n*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},1289:e=>{e.exports=function(e,t,n){this.x=e,this.y=t,this.walkable=void 0===n||n}},8408:(e,t)=>{function n(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}function i(e,t,n,i){var o,a,r,s,l,c,u=Math.abs,m=[];for(o=e<n?1:-1,a=t<i?1:-1,l=(r=u(n-e))-(s=u(i-t));m.push([e,t]),e!==n||t!==i;)(c=2*l)>-s&&(l-=s,e+=o),c<r&&(l+=r,t+=a);return m}t.backtrace=n,t.biBacktrace=function(e,t){var i=n(e),o=n(t);return i.concat(o.reverse())},t.pathLength=function(e){var t,n,i,o,a,r=0;for(t=1;t<e.length;++t)n=e[t-1],i=e[t],o=n[0]-i[0],a=n[1]-i[1],r+=Math.sqrt(o*o+a*a);return r},t.interpolate=i,t.expandPath=function(e){var t,n,o,a,r,s,l=[],c=e.length;if(c<2)return l;for(r=0;r<c-1;++r)for(t=e[r],n=e[r+1],a=(o=i(t[0],t[1],n[0],n[1])).length,s=0;s<a-1;++s)l.push(o[s]);return l.push(e[c-1]),l},t.smoothenPath=function(e,t){var n,o,a,r,s,l,c,u,m,d=t.length,p=t[0][0],h=t[0][1],f=t[d-1][0],g=t[d-1][1];for(a=[[n=p,o=h]],r=2;r<d;++r){for(c=i(n,o,(l=t[r])[0],l[1]),m=!1,s=1;s<c.length;++s)if(u=c[s],!e.isWalkableAt(u[0],u[1])){m=!0;break}m&&(lastValidCoord=t[r-1],a.push(lastValidCoord),n=lastValidCoord[0],o=lastValidCoord[1])}return a.push([f,g]),a},t.compressPath=function(e){if(e.length<3)return e;var t,n,i,o,a,r,s=[],l=e[0][0],c=e[0][1],u=e[1][0],m=e[1][1],d=u-l,p=m-c;for(d/=a=Math.sqrt(d*d+p*p),p/=a,s.push([l,c]),r=2;r<e.length;r++)t=u,n=m,i=d,o=p,d=(u=e[r][0])-t,p=(m=e[r][1])-n,p/=a=Math.sqrt(d*d+p*p),(d/=a)===i&&p===o||s.push([t,n]);return s.push([u,m]),s}},2131:(e,t,n)=>{var i=n(4485),o=n(8408),a=n(9430),r=n(3506);function s(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=r.OnlyWhenNoObstacles:this.diagonalMovement=r.IfAtMostOneObstacle:this.diagonalMovement=r.Never),this.diagonalMovement===r.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}s.prototype.findPath=function(e,t,n,a,r){var s,l,c,u,m,d,p,h,f=new i((function(e,t){return e.f-t.f})),g=r.getNodeAt(e,t),y=r.getNodeAt(n,a),C=this.heuristic,v=this.diagonalMovement,b=this.weight,S=Math.abs,w=Math.SQRT2;for(g.g=0,g.f=0,f.push(g),g.opened=!0;!f.empty();){if((s=f.pop()).closed=!0,s===y)return o.backtrace(y);for(u=0,m=(l=r.getNeighbors(s,v)).length;u<m;++u)(c=l[u]).closed||(d=c.x,p=c.y,h=s.g+(d-s.x==0||p-s.y==0?1:w),(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||b*C(S(d-n),S(p-a)),c.f=c.g+c.h,c.parent=s,c.opened?f.updateItem(c):(f.push(c),c.opened=!0)))}return[]},e.exports=s},3644:(e,t,n)=>{var i=n(2131);function o(e){i.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}o.prototype=new i,o.prototype.constructor=o,e.exports=o},713:(e,t,n)=>{var i=n(4485),o=n(8408),a=n(9430),r=n(3506);function s(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=r.OnlyWhenNoObstacles:this.diagonalMovement=r.IfAtMostOneObstacle:this.diagonalMovement=r.Never),this.diagonalMovement===r.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}s.prototype.findPath=function(e,t,n,a,r){var s,l,c,u,m,d,p,h,f=function(e,t){return e.f-t.f},g=new i(f),y=new i(f),C=r.getNodeAt(e,t),v=r.getNodeAt(n,a),b=this.heuristic,S=this.diagonalMovement,w=this.weight,M=Math.abs,x=Math.SQRT2;for(C.g=0,C.f=0,g.push(C),C.opened=1,v.g=0,v.f=0,y.push(v),v.opened=2;!g.empty()&&!y.empty();){for((s=g.pop()).closed=!0,u=0,m=(l=r.getNeighbors(s,S)).length;u<m;++u)if(!(c=l[u]).closed){if(2===c.opened)return o.biBacktrace(s,c);d=c.x,p=c.y,h=s.g+(d-s.x==0||p-s.y==0?1:x),(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||w*b(M(d-n),M(p-a)),c.f=c.g+c.h,c.parent=s,c.opened?g.updateItem(c):(g.push(c),c.opened=1))}for((s=y.pop()).closed=!0,u=0,m=(l=r.getNeighbors(s,S)).length;u<m;++u)if(!(c=l[u]).closed){if(1===c.opened)return o.biBacktrace(c,s);d=c.x,p=c.y,h=s.g+(d-s.x==0||p-s.y==0?1:x),(!c.opened||h<c.g)&&(c.g=h,c.h=c.h||w*b(M(d-e),M(p-t)),c.f=c.g+c.h,c.parent=s,c.opened?y.updateItem(c):(y.push(c),c.opened=2))}}return[]},e.exports=s},6325:(e,t,n)=>{var i=n(713);function o(e){i.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}o.prototype=new i,o.prototype.constructor=o,e.exports=o},2513:(e,t,n)=>{var i=n(8408),o=n(3506);function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}a.prototype.findPath=function(e,t,n,o,a){var r,s,l,c,u,m=a.getNodeAt(e,t),d=a.getNodeAt(n,o),p=[],h=[],f=this.diagonalMovement;for(p.push(m),m.opened=!0,m.by=0,h.push(d),d.opened=!0,d.by=1;p.length&&h.length;){for((l=p.shift()).closed=!0,c=0,u=(r=a.getNeighbors(l,f)).length;c<u;++c)if(!(s=r[c]).closed)if(s.opened){if(1===s.by)return i.biBacktrace(l,s)}else p.push(s),s.parent=l,s.opened=!0,s.by=0;for((l=h.shift()).closed=!0,c=0,u=(r=a.getNeighbors(l,f)).length;c<u;++c)if(!(s=r[c]).closed)if(s.opened){if(0===s.by)return i.biBacktrace(s,l)}else h.push(s),s.parent=l,s.opened=!0,s.by=1}return[]},e.exports=a},6511:(e,t,n)=>{var i=n(713);function o(e){i.call(this,e),this.heuristic=function(e,t){return 0}}o.prototype=new i,o.prototype.constructor=o,e.exports=o},7904:(e,t,n)=>{var i=n(8408),o=n(3506);function a(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}a.prototype.findPath=function(e,t,n,o,a){var r,s,l,c,u,m=[],d=this.diagonalMovement,p=a.getNodeAt(e,t),h=a.getNodeAt(n,o);for(m.push(p),p.opened=!0;m.length;){if((l=m.shift()).closed=!0,l===h)return i.backtrace(h);for(c=0,u=(r=a.getNeighbors(l,d)).length;c<u;++c)(s=r[c]).closed||s.opened||(m.push(s),s.opened=!0,s.parent=l)}return[]},e.exports=a},600:(e,t,n)=>{var i=n(2131);function o(e){i.call(this,e),this.heuristic=function(e,t){return 0}}o.prototype=new i,o.prototype.constructor=o,e.exports=o},9191:(e,t,n)=>{n(8408);var i=n(9430),o=n(1289),a=n(3506);function r(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||i.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=e.heuristic||i.manhattan:this.heuristic=e.heuristic||i.octile}r.prototype.findPath=function(e,t,n,i,a){var r,s,l,c=(new Date).getTime(),u=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),m=function(e,t,n,i,r){if(this.timeLimit>0&&(new Date).getTime()-c>1e3*this.timeLimit)return 1/0;var s,l,d,h,f=t+u(e,p)*this.weight;if(f>n)return f;if(e==p)return i[r]=[e.x,e.y],e;var g,y,C=a.getNeighbors(e,this.diagonalMovement);for(d=0,s=1/0;h=C[d];++d){if(this.trackRecursion&&(h.retainCount=h.retainCount+1||1,!0!==h.tested&&(h.tested=!0)),(l=m(h,t+(y=h,(g=e).x===y.x||g.y===y.y?1:Math.SQRT2),n,i,r+1))instanceof o)return i[r]=[e.x,e.y],l;this.trackRecursion&&0==--h.retainCount&&(h.tested=!1),l<s&&(s=l)}return s}.bind(this),d=a.getNodeAt(e,t),p=a.getNodeAt(n,i),h=u(d,p);for(r=0;;++r){if((l=m(d,0,h,s=[],0))===1/0)return[];if(l instanceof o)return s;h=l}return[]},e.exports=r},4524:(e,t,n)=>{var i=n(1010),o=n(3506);function a(e){i.call(this,e)}a.prototype=new i,a.prototype.constructor=a,a.prototype._jump=function(e,t,n,i){var o=this.grid,a=e-n,r=t-i;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==a&&0!==r){if(o.isWalkableAt(e-a,t+r)&&!o.isWalkableAt(e-a,t)||o.isWalkableAt(e+a,t-r)&&!o.isWalkableAt(e,t-r))return[e,t];if(this._jump(e+a,t,e,t)||this._jump(e,t+r,e,t))return[e,t]}else if(0!==a){if(o.isWalkableAt(e+a,t+1)&&!o.isWalkableAt(e,t+1)||o.isWalkableAt(e+a,t-1)&&!o.isWalkableAt(e,t-1))return[e,t]}else if(o.isWalkableAt(e+1,t+r)&&!o.isWalkableAt(e+1,t)||o.isWalkableAt(e-1,t+r)&&!o.isWalkableAt(e-1,t))return[e,t];return this._jump(e+a,t+r,e,t)},a.prototype._findNeighbors=function(e){var t,n,i,a,r,s,l,c,u=e.parent,m=e.x,d=e.y,p=this.grid,h=[];if(u)t=u.x,n=u.y,i=(m-t)/Math.max(Math.abs(m-t),1),a=(d-n)/Math.max(Math.abs(d-n),1),0!==i&&0!==a?(p.isWalkableAt(m,d+a)&&h.push([m,d+a]),p.isWalkableAt(m+i,d)&&h.push([m+i,d]),p.isWalkableAt(m+i,d+a)&&h.push([m+i,d+a]),p.isWalkableAt(m-i,d)||h.push([m-i,d+a]),p.isWalkableAt(m,d-a)||h.push([m+i,d-a])):0===i?(p.isWalkableAt(m,d+a)&&h.push([m,d+a]),p.isWalkableAt(m+1,d)||h.push([m+1,d+a]),p.isWalkableAt(m-1,d)||h.push([m-1,d+a])):(p.isWalkableAt(m+i,d)&&h.push([m+i,d]),p.isWalkableAt(m,d+1)||h.push([m+i,d+1]),p.isWalkableAt(m,d-1)||h.push([m+i,d-1]));else for(l=0,c=(r=p.getNeighbors(e,o.Always)).length;l<c;++l)s=r[l],h.push([s.x,s.y]);return h},e.exports=a},1405:(e,t,n)=>{var i=n(1010),o=n(3506);function a(e){i.call(this,e)}a.prototype=new i,a.prototype.constructor=a,a.prototype._jump=function(e,t,n,i){var o=this.grid,a=e-n,r=t-i;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==a&&0!==r){if(o.isWalkableAt(e-a,t+r)&&!o.isWalkableAt(e-a,t)||o.isWalkableAt(e+a,t-r)&&!o.isWalkableAt(e,t-r))return[e,t];if(this._jump(e+a,t,e,t)||this._jump(e,t+r,e,t))return[e,t]}else if(0!==a){if(o.isWalkableAt(e+a,t+1)&&!o.isWalkableAt(e,t+1)||o.isWalkableAt(e+a,t-1)&&!o.isWalkableAt(e,t-1))return[e,t]}else if(o.isWalkableAt(e+1,t+r)&&!o.isWalkableAt(e+1,t)||o.isWalkableAt(e-1,t+r)&&!o.isWalkableAt(e-1,t))return[e,t];return o.isWalkableAt(e+a,t)||o.isWalkableAt(e,t+r)?this._jump(e+a,t+r,e,t):null},a.prototype._findNeighbors=function(e){var t,n,i,a,r,s,l,c,u=e.parent,m=e.x,d=e.y,p=this.grid,h=[];if(u)t=u.x,n=u.y,i=(m-t)/Math.max(Math.abs(m-t),1),a=(d-n)/Math.max(Math.abs(d-n),1),0!==i&&0!==a?(p.isWalkableAt(m,d+a)&&h.push([m,d+a]),p.isWalkableAt(m+i,d)&&h.push([m+i,d]),(p.isWalkableAt(m,d+a)||p.isWalkableAt(m+i,d))&&h.push([m+i,d+a]),!p.isWalkableAt(m-i,d)&&p.isWalkableAt(m,d+a)&&h.push([m-i,d+a]),!p.isWalkableAt(m,d-a)&&p.isWalkableAt(m+i,d)&&h.push([m+i,d-a])):0===i?p.isWalkableAt(m,d+a)&&(h.push([m,d+a]),p.isWalkableAt(m+1,d)||h.push([m+1,d+a]),p.isWalkableAt(m-1,d)||h.push([m-1,d+a])):p.isWalkableAt(m+i,d)&&(h.push([m+i,d]),p.isWalkableAt(m,d+1)||h.push([m+i,d+1]),p.isWalkableAt(m,d-1)||h.push([m+i,d-1]));else for(l=0,c=(r=p.getNeighbors(e,o.IfAtMostOneObstacle)).length;l<c;++l)s=r[l],h.push([s.x,s.y]);return h},e.exports=a},5368:(e,t,n)=>{var i=n(1010),o=n(3506);function a(e){i.call(this,e)}a.prototype=new i,a.prototype.constructor=a,a.prototype._jump=function(e,t,n,i){var o=this.grid,a=e-n,r=t-i;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==a&&0!==r){if(this._jump(e+a,t,e,t)||this._jump(e,t+r,e,t))return[e,t]}else if(0!==a){if(o.isWalkableAt(e,t-1)&&!o.isWalkableAt(e-a,t-1)||o.isWalkableAt(e,t+1)&&!o.isWalkableAt(e-a,t+1))return[e,t]}else if(0!==r&&(o.isWalkableAt(e-1,t)&&!o.isWalkableAt(e-1,t-r)||o.isWalkableAt(e+1,t)&&!o.isWalkableAt(e+1,t-r)))return[e,t];return o.isWalkableAt(e+a,t)&&o.isWalkableAt(e,t+r)?this._jump(e+a,t+r,e,t):null},a.prototype._findNeighbors=function(e){var t,n,i,a,r,s,l,c,u,m=e.parent,d=e.x,p=e.y,h=this.grid,f=[];if(m){if(t=m.x,n=m.y,i=(d-t)/Math.max(Math.abs(d-t),1),a=(p-n)/Math.max(Math.abs(p-n),1),0!==i&&0!==a)h.isWalkableAt(d,p+a)&&f.push([d,p+a]),h.isWalkableAt(d+i,p)&&f.push([d+i,p]),h.isWalkableAt(d,p+a)&&h.isWalkableAt(d+i,p)&&f.push([d+i,p+a]);else if(0!==i){u=h.isWalkableAt(d+i,p);var g=h.isWalkableAt(d,p+1),y=h.isWalkableAt(d,p-1);u&&(f.push([d+i,p]),g&&f.push([d+i,p+1]),y&&f.push([d+i,p-1])),g&&f.push([d,p+1]),y&&f.push([d,p-1])}else if(0!==a){u=h.isWalkableAt(d,p+a);var C=h.isWalkableAt(d+1,p),v=h.isWalkableAt(d-1,p);u&&(f.push([d,p+a]),C&&f.push([d+1,p+a]),v&&f.push([d-1,p+a])),C&&f.push([d+1,p]),v&&f.push([d-1,p])}}else for(l=0,c=(r=h.getNeighbors(e,o.OnlyWhenNoObstacles)).length;l<c;++l)s=r[l],f.push([s.x,s.y]);return f},e.exports=a},2403:(e,t,n)=>{var i=n(1010),o=n(3506);function a(e){i.call(this,e)}a.prototype=new i,a.prototype.constructor=a,a.prototype._jump=function(e,t,n,i){var o=this.grid,a=e-n,r=t-i;if(!o.isWalkableAt(e,t))return null;if(!0===this.trackJumpRecursion&&(o.getNodeAt(e,t).tested=!0),o.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==a){if(o.isWalkableAt(e,t-1)&&!o.isWalkableAt(e-a,t-1)||o.isWalkableAt(e,t+1)&&!o.isWalkableAt(e-a,t+1))return[e,t]}else{if(0===r)throw new Error("Only horizontal and vertical movements are allowed");if(o.isWalkableAt(e-1,t)&&!o.isWalkableAt(e-1,t-r)||o.isWalkableAt(e+1,t)&&!o.isWalkableAt(e+1,t-r))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}return this._jump(e+a,t+r,e,t)},a.prototype._findNeighbors=function(e){var t,n,i,a,r,s,l,c,u=e.parent,m=e.x,d=e.y,p=this.grid,h=[];if(u)t=u.x,n=u.y,i=(m-t)/Math.max(Math.abs(m-t),1),a=(d-n)/Math.max(Math.abs(d-n),1),0!==i?(p.isWalkableAt(m,d-1)&&h.push([m,d-1]),p.isWalkableAt(m,d+1)&&h.push([m,d+1]),p.isWalkableAt(m+i,d)&&h.push([m+i,d])):0!==a&&(p.isWalkableAt(m-1,d)&&h.push([m-1,d]),p.isWalkableAt(m+1,d)&&h.push([m+1,d]),p.isWalkableAt(m,d+a)&&h.push([m,d+a]));else for(l=0,c=(r=p.getNeighbors(e,o.Never)).length;l<c;++l)s=r[l],h.push([s.x,s.y]);return h},e.exports=a},8717:(e,t,n)=>{var i=n(3506),o=n(2403),a=n(4524),r=n(5368),s=n(1405);e.exports=function(e){return(e=e||{}).diagonalMovement===i.Never?new o(e):e.diagonalMovement===i.Always?new a(e):e.diagonalMovement===i.OnlyWhenNoObstacles?new r(e):new s(e)}},1010:(e,t,n)=>{var i=n(4485),o=n(8408),a=n(9430);function r(e){e=e||{},this.heuristic=e.heuristic||a.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}n(3506),r.prototype.findPath=function(e,t,n,a,r){var s,l=this.openList=new i((function(e,t){return e.f-t.f})),c=this.startNode=r.getNodeAt(e,t),u=this.endNode=r.getNodeAt(n,a);for(this.grid=r,c.g=0,c.f=0,l.push(c),c.opened=!0;!l.empty();){if((s=l.pop()).closed=!0,s===u)return o.expandPath(o.backtrace(u));this._identifySuccessors(s)}return[]},r.prototype._identifySuccessors=function(e){var t,n,i,o,r,s,l,c,u,m,d=this.grid,p=this.heuristic,h=this.openList,f=this.endNode.x,g=this.endNode.y,y=e.x,C=e.y,v=Math.abs;for(Math.max,o=0,r=(t=this._findNeighbors(e)).length;o<r;++o)if(n=t[o],i=this._jump(n[0],n[1],y,C)){if(s=i[0],l=i[1],(m=d.getNodeAt(s,l)).closed)continue;c=a.octile(v(s-y),v(l-C)),u=e.g+c,(!m.opened||u<m.g)&&(m.g=u,m.h=m.h||p(v(s-f),v(l-g)),m.f=m.g+m.h,m.parent=e,m.opened?h.updateItem(m):(h.push(m),m.opened=!0))}},e.exports=r},9509:(e,t,n)=>{var i=n(8764),o=i.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function r(e,t,n){return o(e,t,n)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=r),a(o,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=o(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},6099:(e,t,n)=>{!function(e){e.parser=function(e,t){return new o(e,t)},e.SAXParser=o,e.SAXStream=r,e.createStream=function(e,t){return new r(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(t,n){if(!(this instanceof o))return new o(t,n);var a=this;!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(a),a.q=a.c="",a.bufferCheckPosition=e.MAX_BUFFER_LENGTH,a.opt=n||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!t,a.noscript=!(!t&&!a.opt.noscript),a.state=w.BEGIN,a.strictEntities=a.opt.strictEntities,a.ENTITIES=a.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(c)),a.trackPosition=!1!==a.opt.position,a.trackPosition&&(a.position=a.line=a.column=0),x(a,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),o.prototype={end:function(){E(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return D(n,"Cannot write after close. Assign an onready handler.");if(null===t)return E(n);"object"==typeof t&&(t=t.toString());for(var o=0,a="";a=z(t,o++),n.c=a,a;)switch(n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++),n.state){case w.BEGIN:if(n.state=w.BEGIN_WHITESPACE,"\ufeff"===a)continue;k(n,a);continue;case w.BEGIN_WHITESPACE:k(n,a);continue;case w.TEXT:if(n.sawRoot&&!n.closedRoot){for(var r=o-1;a&&"<"!==a&&"&"!==a;)(a=z(t,o++))&&n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(r,o-1)}"<"!==a||n.sawRoot&&n.closedRoot&&!n.strict?(h(a)||n.sawRoot&&!n.closedRoot||A(n,"Text data outside of root node."),"&"===a?n.state=w.TEXT_ENTITY:n.textNode+=a):(n.state=w.OPEN_WAKA,n.startTagPosition=n.position);continue;case w.SCRIPT:"<"===a?n.state=w.SCRIPT_ENDING:n.script+=a;continue;case w.SCRIPT_ENDING:"/"===a?n.state=w.CLOSE_TAG:(n.script+="<"+a,n.state=w.SCRIPT);continue;case w.OPEN_WAKA:if("!"===a)n.state=w.SGML_DECL,n.sgmlDecl="";else if(h(a));else if(y(u,a))n.state=w.OPEN_TAG,n.tagName=a;else if("/"===a)n.state=w.CLOSE_TAG,n.tagName="";else if("?"===a)n.state=w.PROC_INST,n.procInstName=n.procInstBody="";else{if(A(n,"Unencoded <"),n.startTagPosition+1<n.position){var s=n.position-n.startTagPosition;a=new Array(s).join(" ")+a}n.textNode+="<"+a,n.state=w.TEXT}continue;case w.SGML_DECL:"[CDATA["===(n.sgmlDecl+a).toUpperCase()?(O(n,"onopencdata"),n.state=w.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+a==="--"?(n.state=w.COMMENT,n.comment="",n.sgmlDecl=""):"DOCTYPE"===(n.sgmlDecl+a).toUpperCase()?(n.state=w.DOCTYPE,(n.doctype||n.sawRoot)&&A(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===a?(O(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=w.TEXT):f(a)?(n.state=w.SGML_DECL_QUOTED,n.sgmlDecl+=a):n.sgmlDecl+=a;continue;case w.SGML_DECL_QUOTED:a===n.q&&(n.state=w.SGML_DECL,n.q=""),n.sgmlDecl+=a;continue;case w.DOCTYPE:">"===a?(n.state=w.TEXT,O(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=a,"["===a?n.state=w.DOCTYPE_DTD:f(a)&&(n.state=w.DOCTYPE_QUOTED,n.q=a));continue;case w.DOCTYPE_QUOTED:n.doctype+=a,a===n.q&&(n.q="",n.state=w.DOCTYPE);continue;case w.DOCTYPE_DTD:n.doctype+=a,"]"===a?n.state=w.DOCTYPE:f(a)&&(n.state=w.DOCTYPE_DTD_QUOTED,n.q=a);continue;case w.DOCTYPE_DTD_QUOTED:n.doctype+=a,a===n.q&&(n.state=w.DOCTYPE_DTD,n.q="");continue;case w.COMMENT:"-"===a?n.state=w.COMMENT_ENDING:n.comment+=a;continue;case w.COMMENT_ENDING:"-"===a?(n.state=w.COMMENT_ENDED,n.comment=T(n.opt,n.comment),n.comment&&O(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+a,n.state=w.COMMENT);continue;case w.COMMENT_ENDED:">"!==a?(A(n,"Malformed comment"),n.comment+="--"+a,n.state=w.COMMENT):n.state=w.TEXT;continue;case w.CDATA:"]"===a?n.state=w.CDATA_ENDING:n.cdata+=a;continue;case w.CDATA_ENDING:"]"===a?n.state=w.CDATA_ENDING_2:(n.cdata+="]"+a,n.state=w.CDATA);continue;case w.CDATA_ENDING_2:">"===a?(n.cdata&&O(n,"oncdata",n.cdata),O(n,"onclosecdata"),n.cdata="",n.state=w.TEXT):"]"===a?n.cdata+="]":(n.cdata+="]]"+a,n.state=w.CDATA);continue;case w.PROC_INST:"?"===a?n.state=w.PROC_INST_ENDING:h(a)?n.state=w.PROC_INST_BODY:n.procInstName+=a;continue;case w.PROC_INST_BODY:if(!n.procInstBody&&h(a))continue;"?"===a?n.state=w.PROC_INST_ENDING:n.procInstBody+=a;continue;case w.PROC_INST_ENDING:">"===a?(O(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=w.TEXT):(n.procInstBody+="?"+a,n.state=w.PROC_INST_BODY);continue;case w.OPEN_TAG:y(m,a)?n.tagName+=a:(F(n),">"===a?_(n):"/"===a?n.state=w.OPEN_TAG_SLASH:(h(a)||A(n,"Invalid character in tag name"),n.state=w.ATTRIB));continue;case w.OPEN_TAG_SLASH:">"===a?(_(n,!0),R(n)):(A(n,"Forward-slash in opening tag not followed by >"),n.state=w.ATTRIB);continue;case w.ATTRIB:if(h(a))continue;">"===a?_(n):"/"===a?n.state=w.OPEN_TAG_SLASH:y(u,a)?(n.attribName=a,n.attribValue="",n.state=w.ATTRIB_NAME):A(n,"Invalid attribute name");continue;case w.ATTRIB_NAME:"="===a?n.state=w.ATTRIB_VALUE:">"===a?(A(n,"Attribute without value"),n.attribValue=n.attribName,I(n),_(n)):h(a)?n.state=w.ATTRIB_NAME_SAW_WHITE:y(m,a)?n.attribName+=a:A(n,"Invalid attribute name");continue;case w.ATTRIB_NAME_SAW_WHITE:if("="===a)n.state=w.ATTRIB_VALUE;else{if(h(a))continue;A(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",O(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===a?_(n):y(u,a)?(n.attribName=a,n.state=w.ATTRIB_NAME):(A(n,"Invalid attribute name"),n.state=w.ATTRIB)}continue;case w.ATTRIB_VALUE:if(h(a))continue;f(a)?(n.q=a,n.state=w.ATTRIB_VALUE_QUOTED):(A(n,"Unquoted attribute value"),n.state=w.ATTRIB_VALUE_UNQUOTED,n.attribValue=a);continue;case w.ATTRIB_VALUE_QUOTED:if(a!==n.q){"&"===a?n.state=w.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=a;continue}I(n),n.q="",n.state=w.ATTRIB_VALUE_CLOSED;continue;case w.ATTRIB_VALUE_CLOSED:h(a)?n.state=w.ATTRIB:">"===a?_(n):"/"===a?n.state=w.OPEN_TAG_SLASH:y(u,a)?(A(n,"No whitespace between attributes"),n.attribName=a,n.attribValue="",n.state=w.ATTRIB_NAME):A(n,"Invalid attribute name");continue;case w.ATTRIB_VALUE_UNQUOTED:if(!g(a)){"&"===a?n.state=w.ATTRIB_VALUE_ENTITY_U:n.attribValue+=a;continue}I(n),">"===a?_(n):n.state=w.ATTRIB;continue;case w.CLOSE_TAG:if(n.tagName)">"===a?R(n):y(m,a)?n.tagName+=a:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=w.SCRIPT):(h(a)||A(n,"Invalid tagname in closing tag"),n.state=w.CLOSE_TAG_SAW_WHITE);else{if(h(a))continue;C(u,a)?n.script?(n.script+="</"+a,n.state=w.SCRIPT):A(n,"Invalid tagname in closing tag."):n.tagName=a}continue;case w.CLOSE_TAG_SAW_WHITE:if(h(a))continue;">"===a?R(n):A(n,"Invalid characters in closing tag");continue;case w.TEXT_ENTITY:case w.ATTRIB_VALUE_ENTITY_Q:case w.ATTRIB_VALUE_ENTITY_U:var l,c;switch(n.state){case w.TEXT_ENTITY:l=w.TEXT,c="textNode";break;case w.ATTRIB_VALUE_ENTITY_Q:l=w.ATTRIB_VALUE_QUOTED,c="attribValue";break;case w.ATTRIB_VALUE_ENTITY_U:l=w.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===a?(n[c]+=L(n),n.entity="",n.state=l):y(n.entity.length?p:d,a)?n.entity+=a:(A(n,"Invalid character in entity name"),n[c]+="&"+n.entity+a,n.entity="",n.state=l);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),o=0,a=0,r=i.length;a<r;a++){var s=t[i[a]].length;if(s>n)switch(i[a]){case"textNode":P(t);break;case"cdata":O(t,"oncdata",t.cdata),t.cdata="";break;case"script":O(t,"onscript",t.script),t.script="";break;default:D(t,"Max buffer length exceeded: "+i[a])}o=Math.max(o,s)}var l=e.MAX_BUFFER_LENGTH-o;t.bufferCheckPosition=l+t.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;P(e=this),""!==e.cdata&&(O(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(O(e,"onscript",e.script),e.script="")}};try{t=Object(function(){var e=new Error("Cannot find module 'stream'");throw e.code="MODULE_NOT_FOUND",e}()).Stream}catch(e){t=function(){}}var a=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function r(e,n){if(!(this instanceof r))return new r(e,n);t.apply(this),this._parser=new o(e,n),this.writable=!0,this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")},this._parser.onerror=function(e){i.emit("error",e),i._parser.error=null},this._decoder=null,a.forEach((function(e){Object.defineProperty(i,"on"+e,{get:function(){return i._parser["on"+e]},set:function(t){if(!t)return i.removeAllListeners(e),i._parser["on"+e]=t,t;i.on(e,t)},enumerable:!0,configurable:!1})}))}r.prototype=Object.create(t.prototype,{constructor:{value:r}}),r.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n(2553).s;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},r.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},r.prototype.on=function(e,n){var i=this;return i._parser["on"+e]||-1===a.indexOf(e)||(i._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),i.emit.apply(i,t)}),t.prototype.on.call(i,e,n)};var s="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/2000/xmlns/",c={xml:s,xmlns:l},u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function h(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function f(e){return'"'===e||"'"===e}function g(e){return">"===e||h(e)}function y(e,t){return e.test(t)}function C(e,t){return!y(e,t)}var v,b,S,w=0;for(var M in e.STATE={BEGIN:w++,BEGIN_WHITESPACE:w++,TEXT:w++,TEXT_ENTITY:w++,OPEN_WAKA:w++,SGML_DECL:w++,SGML_DECL_QUOTED:w++,DOCTYPE:w++,DOCTYPE_QUOTED:w++,DOCTYPE_DTD:w++,DOCTYPE_DTD_QUOTED:w++,COMMENT_STARTING:w++,COMMENT:w++,COMMENT_ENDING:w++,COMMENT_ENDED:w++,CDATA:w++,CDATA_ENDING:w++,CDATA_ENDING_2:w++,PROC_INST:w++,PROC_INST_BODY:w++,PROC_INST_ENDING:w++,OPEN_TAG:w++,OPEN_TAG_SLASH:w++,ATTRIB:w++,ATTRIB_NAME:w++,ATTRIB_NAME_SAW_WHITE:w++,ATTRIB_VALUE:w++,ATTRIB_VALUE_QUOTED:w++,ATTRIB_VALUE_CLOSED:w++,ATTRIB_VALUE_UNQUOTED:w++,ATTRIB_VALUE_ENTITY_Q:w++,ATTRIB_VALUE_ENTITY_U:w++,CLOSE_TAG:w++,CLOSE_TAG_SAW_WHITE:w++,SCRIPT:w++,SCRIPT_ENDING:w++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var n=e.ENTITIES[t],i="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=i})),e.STATE)e.STATE[e.STATE[M]]=M;function x(e,t,n){e[t]&&e[t](n)}function O(e,t,n){e.textNode&&P(e),x(e,t,n)}function P(e){e.textNode=T(e.opt,e.textNode),e.textNode&&x(e,"ontext",e.textNode),e.textNode=""}function T(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function D(e,t){return P(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,x(e,"onerror",t),e}function E(e){return e.sawRoot&&!e.closedRoot&&A(e,"Unclosed root tag"),e.state!==w.BEGIN&&e.state!==w.BEGIN_WHITESPACE&&e.state!==w.TEXT&&D(e,"Unexpected end"),P(e),e.c="",e.closed=!0,x(e,"onend"),o.call(e,e.strict,e.opt),e}function A(e,t){if("object"!=typeof e||!(e instanceof o))throw new Error("bad call to strictFail");e.strict&&D(e,t)}function F(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,O(e,"onopentagstart",n)}function N(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),i=n[0],o=n[1];return t&&"xmlns"===e&&(i="xmlns",o=""),{prefix:i,local:o}}function I(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=N(e.attribName,!0),n=t.prefix,i=t.local;if("xmlns"===n)if("xml"===i&&e.attribValue!==s)A(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue);else if("xmlns"===i&&e.attribValue!==l)A(e,"xmlns: prefix must be bound to "+l+"\nActual: "+e.attribValue);else{var o=e.tag,a=e.tags[e.tags.length-1]||e;o.ns===a.ns&&(o.ns=Object.create(a.ns)),o.ns[i]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,O(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function _(e,t){if(e.opt.xmlns){var n=e.tag,i=N(e.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(A(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=i.prefix);var o=e.tags[e.tags.length-1]||e;n.ns&&o.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){O(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,r=e.attribList.length;a<r;a++){var s=e.attribList[a],l=s[0],c=s[1],u=N(l,!0),m=u.prefix,d=u.local,p=""===m?"":n.ns[m]||"",h={name:l,value:c,prefix:m,local:d,uri:p};m&&"xmlns"!==m&&!p&&(A(e,"Unbound namespace prefix: "+JSON.stringify(m)),h.uri=m),e.tag.attributes[l]=h,O(e,"onattribute",h)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),O(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=w.TEXT:e.state=w.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function R(e){if(!e.tagName)return A(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=w.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=w.SCRIPT);O(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var i=n;t--&&e.tags[t].name!==i;)A(e,"Unexpected close tag");if(t<0)return A(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=w.TEXT);e.tagName=n;for(var o=e.tags.length;o-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,O(e,"onclosetag",e.tagName);var r={};for(var s in a.ns)r[s]=a.ns[s];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];O(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=w.TEXT}function L(e){var t,n=e.entity,i=n.toLowerCase(),o="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[i]?e.ENTITIES[i]:("#"===(n=i).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),o=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),o=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),isNaN(t)||o.toLowerCase()!==n?(A(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function k(e,t){"<"===t?(e.state=w.OPEN_WAKA,e.startTagPosition=e.position):h(t)||(A(e,"Non-whitespace before first tag."),e.textNode=t,e.state=w.TEXT)}function z(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}w=e.STATE,String.fromCodePoint||(v=String.fromCharCode,b=Math.floor,S=function(){var e,t,n=16384,i=[],o=-1,a=arguments.length;if(!a)return"";for(var r="";++o<a;){var s=Number(arguments[o]);if(!isFinite(s)||s<0||s>1114111||b(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?i.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,i.push(e,t)),(o+1===a||i.length>n)&&(r+=v.apply(null,i),i.length=0)}return r},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:S,configurable:!0,writable:!0}):String.fromCodePoint=S)}(t)},2553:(e,t,n)=>{"use strict";var i=n(9509).Buffer,o=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=m,t=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function r(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var o=r(t[i]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--i<n||-2===o?0:(o=r(t[i]))>=0?(o>0&&(e.lastNeed=o-2),o):--i<n||-2===o?0:(o=r(t[i]))>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},9645:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Command=void 0;const i=n(7722),o=n(5974),a=n(750);class r extends i.Identifiable{get title(){return o.Serialization.typeDisplay(this)}get subtitle(){return""}get estimatedTime(){return.3}get verifiable(){return!0}get reengagementTiming(){return a.CommandReengagementTiming.Never}get reengagementReplaceable(){return!0}}t.Command=r},3405:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandExecutionState=void 0;const i=n(750),o=n(7722),a=n(1985),r=n(5088),s=n(5974);class l extends o.Identifiable{constructor(e=null){super(e),this.type=i.TypeName.CommandExecutionState,this.status=i.CommandExecutionStatus.Pending,this.started=null,this.finished=null,this.error=null}applyJSON(e){return super.applyJSON(e),s.Serialization.validateType(e,this.type),this.status=r.Common.parseString(e.status,this.status),this.started=s.Serialization.deserialize(e.started,a.Datetime),this.finished=s.Serialization.deserialize(e.finished,a.Datetime),this.error=r.Common.parseString(e.error),!0}update(e,t=null,n=null){switch(e){case i.CommandExecutionStatus.Pending:break;case i.CommandExecutionStatus.Queued:this.status===i.CommandExecutionStatus.Pending&&(this.status=e);break;case i.CommandExecutionStatus.Executing:this.status!==i.CommandExecutionStatus.Pending&&this.status!==i.CommandExecutionStatus.Queued||(this.status=e,this.started=n||new a.Datetime);break;case i.CommandExecutionStatus.Succeeded:case i.CommandExecutionStatus.Failed:this.status!==i.CommandExecutionStatus.Queued&&this.status!==i.CommandExecutionStatus.Executing||(this.status=e,this.finished=n||new a.Datetime,this.error=t)}return this}}t.CommandExecutionState=l},5251:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCommand=void 0;const i=n(9645);class o extends i.Command{}t.DefaultCommand=o},5311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PayloadCommand=void 0;const i=n(9645),o=n(5088);class a extends i.Command{constructor(){super(...arguments),this.channel=0}applyJSON(e){super.applyJSON(e),this.channel=o.Common.parseInt(e.channel,this.channel)}}t.PayloadCommand=a},5967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AEBCountCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.AEBCountCameraCommand,this.aebCount=o.CameraAEBCount._3}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.aebCount=r.Common.parseString(e.aebCount,this.aebCount)}get subtitle(){return a.Format.enum("CameraAEBCount",this.aebCount)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.AEBCountCameraCommand=l},1639:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApertureCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.ApertureCameraCommand,this.aperture=o.CameraAperture.F5dot6}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.aperture=r.Common.parseString(e.aperture,this.aperture)}get subtitle(){return a.Format.enum("CameraAperture",this.aperture)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ApertureCameraCommand=l},5094:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoExposureLockCameraCommand=void 0;const i=n(8179),o=n(750),a=n(4147),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.AutoExposureLockCameraCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=r.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?a.Strings.Common.enabled:a.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.AutoExposureLockCameraCommand=l},245:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoLockGimbalCameraCommand=void 0;const i=n(8179),o=n(750),a=n(4147),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.AutoLockGimbalCameraCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=r.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?a.Strings.Common.enabled:a.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.AutoLockGimbalCameraCommand=l},8179:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraCommand=void 0;const i=n(5311);class o extends i.PayloadCommand{get requiredMode(){return null}get requiredCapturing(){return null}}t.CameraCommand=o},1044:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.ColorCameraCommand,this.color=o.CameraColor.None}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.color=r.Common.parseString(e.color,this.color)}get subtitle(){return a.Format.enum("CameraColor",this.color)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ColorCameraCommand=l},6382:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContrastCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.ContrastCameraCommand,this.contrast=0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.contrast=r.Common.parseInt(e.contrast,this.contrast)}get subtitle(){return a.Format.integer(this.contrast)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ContrastCameraCommand=l},3014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExposureCompensationCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.ExposureCompensationCameraCommand,this.exposureCompensation=o.CameraExposureCompensation.N00}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.exposureCompensation=r.Common.parseString(e.exposureCompensation,this.exposureCompensation)}get subtitle(){return a.Format.enum("CameraExposureCompensation",this.exposureCompensation)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ExposureCompensationCameraCommand=l},9935:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExposureCompensationStepCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(4147),l=n(5974);class c extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.ExposureCompensationStepCameraCommand,this.exposureCompensationSteps=1}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.exposureCompensationSteps=r.Common.parseInt(e.exposureCompensationSteps,this.exposureCompensationSteps)}get subtitle(){return a.Format.integer(this.exposureCompensationSteps,{singular:s.Strings.ExposureCompensationStepCameraCommand.values.exposureCompensationStep,plural:s.Strings.ExposureCompensationStepCameraCommand.values.exposureCompensationSteps})}get reengagementTiming(){return o.CommandReengagementTiming.Never}}t.ExposureCompensationStepCameraCommand=c},6802:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExposureModeCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.ExposureModeCameraCommand,this.exposureMode=o.CameraExposureMode.Program}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.exposureMode=s.Common.parseString(e.exposureMode,this.exposureMode)}get subtitle(){return a.Format.enum("CameraExposureMode",this.exposureMode)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get reengagementReplaceable(){return!1}}t.ExposureModeCameraCommand=l},3999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileIndexModeCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.FileIndexModeCameraCommand,this.fileIndexMode=o.CameraFileIndexMode.Sequence}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.fileIndexMode=s.Common.parseString(e.fileIndexMode,this.fileIndexMode)}get subtitle(){return a.Format.enum("CameraFileIndexMode",this.fileIndexMode)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.FileIndexModeCameraCommand=l},5630:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FocusCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(6875),s=n(5088),l=n(5974);class c extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.FocusCameraCommand,this.focusTarget=new r.Point2(.5,.5)}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.focusTarget.applyJSON(e.focusTarget)}get subtitle(){return s.Common.joinNotEmpty([a.Format.percent(this.focusTarget.x).toString(),a.Format.percent(this.focusTarget.y).toString()])}get reengagementTiming(){return o.CommandReengagementTiming.Destination}}t.FocusCameraCommand=c},5694:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FocusModeCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.FocusModeCameraCommand,this.focusMode=o.CameraFocusMode.Auto}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.focusMode=r.Common.parseString(e.focusMode,this.focusMode)}get subtitle(){return a.Format.enum("CameraFocusMode",this.focusMode)}get reengagementTiming(){return o.CommandReengagementTiming.Destination}}t.FocusModeCameraCommand=l},5739:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ISOCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.ISOCameraCommand,this.iso=o.CameraISO.Auto}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.iso=s.Common.parseString(e.iso,this.iso)}get subtitle(){return a.Format.enum("CameraISO",this.iso)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ISOCameraCommand=l},7416:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MechanicalShutterCameraCommand=void 0;const i=n(8179),o=n(750),a=n(4147),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.MechanicalShutterCameraCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=r.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?a.Strings.Common.enabled:a.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.MechanicalShutterCameraCommand=l},6953:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeteringModeCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.MeteringModeCameraCommand,this.meteringMode=o.CameraMeteringMode.Center}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.meteringMode=s.Common.parseString(e.meteringMode,this.meteringMode)}get subtitle(){return a.Format.enum("CameraMeteringMode",this.meteringMode)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.MeteringModeCameraCommand=l},9983:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModeCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.ModeCameraCommand,this.mode=o.CameraMode.Photo}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.mode=s.Common.parseString(e.mode,this.mode)}get subtitle(){return a.Format.enum("CameraMode",this.mode)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get reengagementReplaceable(){return!1}get requiredCapturing(){return!1}}t.ModeCameraCommand=l},9185:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoAspectRatioCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.PhotoAspectRatioCameraCommand,this.photoAspectRatio=o.CameraPhotoAspectRatio._4_3}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.photoAspectRatio=s.Common.parseString(e.photoAspectRatio,this.photoAspectRatio)}get subtitle(){return a.Format.enum("CameraPhotoAspectRatio",this.photoAspectRatio)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredMode(){return o.CameraMode.Photo}get requiredCapturing(){return!1}}t.PhotoAspectRatioCameraCommand=l},2e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoFileFormatCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.PhotoFileFormatCameraCommand,this.photoFileFormat=o.CameraPhotoFileFormat.JPEG}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.photoFileFormat=s.Common.parseString(e.photoFileFormat,this.photoFileFormat)}get subtitle(){return a.Format.enum("CameraPhotoFileFormat",this.photoFileFormat)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredMode(){return o.CameraMode.Photo}get requiredCapturing(){return!1}}t.PhotoFileFormatCameraCommand=l},3957:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoIntervalCameraCommand=void 0;const i=n(8179),o=n(750),a=n(7247),r=n(5088),s=n(4147),l=n(5974);class c extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.PhotoIntervalCameraCommand,this.photoInterval=a.Constants.PhotoIntervalCommandValue}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.photoInterval=r.Common.parseInt(e.photoInterval,this.photoInterval)}get subtitle(){return`${this.photoInterval} ${s.Strings.Unit.values.seconds.name}`}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredMode(){return o.CameraMode.Photo}get requiredCapturing(){return!1}}t.PhotoIntervalCameraCommand=c},908:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoModeCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.PhotoModeCameraCommand,this.photoMode=o.CameraPhotoMode.Single}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.photoMode=s.Common.parseString(e.photoMode,this.photoMode)}get subtitle(){return a.Format.enum("CameraPhotoMode",this.photoMode)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredMode(){return o.CameraMode.Photo}get requiredCapturing(){return!1}get reengagementReplaceable(){return!1}}t.PhotoModeCameraCommand=l},7754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaturationCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.SaturationCameraCommand,this.saturation=0}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.saturation=s.Common.parseInt(e.saturation,this.saturation)}get subtitle(){return a.Format.integer(this.saturation)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.SaturationCameraCommand=l},9986:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharpnessCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.SharpnessCameraCommand,this.sharpness=0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.sharpness=r.Common.parseInt(e.sharpness,this.sharpness)}get subtitle(){return a.Format.integer(this.sharpness)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.SharpnessCameraCommand=l},4065:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShutterSpeedCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.ShutterSpeedCameraCommand,this.shutterSpeed=o.CameraShutterSpeed._1_800}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.shutterSpeed=s.Common.parseString(e.shutterSpeed,this.shutterSpeed)}get subtitle(){return a.Format.enum("CameraShutterSpeed",this.shutterSpeed)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ShutterSpeedCameraCommand=l},5327:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpotMeteringTargetCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(6875),s=n(5088),l=n(5974);class c extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.SpotMeteringTargetCameraCommand,this.spotMeteringTarget=new r.Point2(.5,.5)}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.spotMeteringTarget.applyJSON(e.spotMeteringTarget)}get subtitle(){return s.Common.joinNotEmpty([a.Format.percent(this.spotMeteringTarget.x).toString(),a.Format.percent(this.spotMeteringTarget.y).toString()])}get reengagementTiming(){return o.CommandReengagementTiming.Destination}}t.SpotMeteringTargetCameraCommand=c},8283:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StartCaptureCameraCommand=void 0;const i=n(8179),o=n(750),a=n(5974);class r extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.StartCaptureCameraCommand}applyJSON(e){super.applyJSON(e),a.Serialization.validateType(e,this.type)}static possible(e){return e===o.CameraMode.Photo||e===o.CameraMode.Video}static continuous(e,t){return e===o.CameraMode.Video||e===o.CameraMode.Photo&&t===o.CameraPhotoMode.Interval}get estimatedTime(){return.5}get verifiable(){return!1}}t.StartCaptureCameraCommand=r},9271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopCaptureCameraCommand=void 0;const i=n(8179),o=n(750),a=n(5974);class r extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.StopCaptureCameraCommand}applyJSON(e){super.applyJSON(e),a.Serialization.validateType(e,this.type)}get estimatedTime(){return.5}get verifiable(){return!1}}t.StopCaptureCameraCommand=r},1445:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageLocationCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.StorageLocationCameraCommand,this.storageLocation=o.CameraStorageLocation.SDCard}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.storageLocation=r.Common.parseString(e.storageLocation,this.storageLocation)}get subtitle(){return a.Format.enum("CameraStorageLocation",this.storageLocation)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredCapturing(){return!1}}t.StorageLocationCameraCommand=l},7152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoCaptionCameraCommand=void 0;const i=n(8179),o=n(750),a=n(4147),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.VideoCaptionCameraCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=r.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?a.Strings.Common.enabled:a.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.VideoCaptionCameraCommand=l},8218:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoFileCompressionStandardCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.VideoFileCompressionStandardCameraCommand,this.videoFileCompressionStandard=o.CameraVideoFileCompressionStandard.H264}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.videoFileCompressionStandard=s.Common.parseString(e.videoFileCompressionStandard,this.videoFileCompressionStandard)}get subtitle(){return a.Format.enum("CameraVideoFileCompressionStandard",this.videoFileCompressionStandard)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredMode(){return o.CameraMode.Video}get requiredCapturing(){return!1}}t.VideoFileCompressionStandardCameraCommand=l},1041:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoFileFormatCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.VideoFileFormatCameraCommand,this.videoFileFormat=o.CameraVideoFileFormat.MP4}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.videoFileFormat=s.Common.parseString(e.videoFileFormat,this.videoFileFormat)}get subtitle(){return a.Format.enum("CameraVideoFileFormat",this.videoFileFormat)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredMode(){return o.CameraMode.Video}get requiredCapturing(){return!1}}t.VideoFileFormatCameraCommand=l},9343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoModeCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.VideoModeCameraCommand,this.videoMode=o.CameraVideoMode.Normal}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.videoMode=s.Common.parseString(e.videoMode,this.videoMode)}get subtitle(){return a.Format.enum("CameraVideoMode",this.videoMode)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredMode(){return o.CameraMode.Video}get requiredCapturing(){return!1}get reengagementReplaceable(){return!1}}t.VideoModeCameraCommand=l},4107:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoResolutionFrameRateCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5088),s=n(5974);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.VideoResolutionFrameRateCameraCommand,this.videoResolution=o.CameraVideoResolution._3840x2160,this.videoFrameRate=o.CameraVideoFrameRate._29dot970,this.videoFieldOfView=o.CameraVideoFieldOfView.Default}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.videoResolution=r.Common.parseString(e.videoResolution,this.videoResolution),this.videoFrameRate=r.Common.parseString(e.videoFrameRate,this.videoFrameRate),this.videoFieldOfView=r.Common.parseString(e.videoFieldOfView,this.videoFieldOfView)}get subtitle(){const e=`${a.Format.enum("CameraVideoResolution",this.videoResolution)}@${a.Format.enum("CameraVideoFrameRate",this.videoFrameRate)}`;return this.videoFieldOfView!==o.CameraVideoFieldOfView.Default?r.Common.joinNotEmpty([e,a.Format.enum("CameraVideoFieldOfView",this.videoFieldOfView)]):e}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredMode(){return o.CameraMode.Video}get requiredCapturing(){return!1}}t.VideoResolutionFrameRateCameraCommand=l},4153:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoStandardCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.VideoStandardCameraCommand,this.videoStandard=o.CameraVideoStandard.NTSC}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.videoStandard=s.Common.parseString(e.videoStandard,this.videoStandard)}get subtitle(){return a.Format.enum("CameraVideoStandard",this.videoStandard)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}get requiredMode(){return o.CameraMode.Video}get requiredCapturing(){return!1}}t.VideoStandardCameraCommand=l},8354:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WhiteBalanceCustomCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.WhiteBalanceCustomCameraCommand,this.whiteBalanceCustom=5600}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.whiteBalanceCustom=s.Common.parseInt(e.whiteBalanceCustom,this.whiteBalanceCustom)}get subtitle(){return a.Format.absoluteTemperature(this.whiteBalanceCustom)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.WhiteBalanceCustomCameraCommand=l},466:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WhiteBalancePresetCameraCommand=void 0;const i=n(8179),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.CameraCommand{constructor(){super(...arguments),this.type=o.TypeName.WhiteBalancePresetCameraCommand,this.whiteBalancePreset=o.CameraWhiteBalancePreset.Auto}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.whiteBalancePreset=s.Common.parseString(e.whiteBalancePreset,this.whiteBalancePreset)}get subtitle(){return a.Format.enum("CameraWhiteBalancePreset",this.whiteBalancePreset)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.WhiteBalancePresetCameraCommand=l},2154:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollisionAvoidanceDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.CollisionAvoidanceDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.CollisionAvoidanceDroneCommand=l},7278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionFailSafeBehaviorDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.ConnectionFailSafeBehaviorDroneCommand,this.connectionFailSafeBehavior=o.DroneConnectionFailSafeBehavior.Hover}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.connectionFailSafeBehavior=s.Common.parseString(e.connectionFailSafeBehavior,this.connectionFailSafeBehavior)}get subtitle(){return a.Format.enum("DroneConnectionFailSafeBehavior",this.connectionFailSafeBehavior)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ConnectionFailSafeBehaviorDroneCommand=l},2681:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DroneCommand=void 0;const i=n(9645);class o extends i.Command{}t.DroneCommand=o},3215:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HomeLocationDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5974),r=n(5226);class s extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.HomeLocationDroneCommand,this.coordinate=new r.GeoCoordinate}applyJSON(e){super.applyJSON(e),a.Serialization.validateType(e,this.type),this.coordinate.applyJSON(e.coordinate)}get subtitle(){return this.coordinate.toString()}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.HomeLocationDroneCommand=s},7432:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LandingGearAutomaticMovementDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.LandingGearAutomaticMovementDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.LandingGearAutomaticMovementDroneCommand=l},6275:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LandingGearDeployDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5974);class r extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.LandingGearDeployDroneCommand}applyJSON(e){super.applyJSON(e),a.Serialization.validateType(e,this.type)}get reengagementTiming(){return o.CommandReengagementTiming.Destination}}t.LandingGearDeployDroneCommand=r},1791:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LandingGearRetractDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5974);class r extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.LandingGearRetractDroneCommand}applyJSON(e){super.applyJSON(e),a.Serialization.validateType(e,this.type)}get reengagementTiming(){return o.CommandReengagementTiming.Destination}}t.LandingGearRetractDroneCommand=r},4682:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LandingProtectionDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.LandingProtectionDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.LandingProtectionDroneCommand=l},7212:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LightbridgeChannelDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.LightbridgeChannelDroneCommand,this.lightbridgeChannel=0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.lightbridgeChannel=a.Common.parseInt(e.lightbridgeChannel,this.lightbridgeChannel)}get subtitle(){return`${r.Strings.LightbridgeChannelDroneCommand.values.lightbridgeChannel} ${this.lightbridgeChannel}`}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.LightbridgeChannelDroneCommand=l},9626:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LightbridgeChannelSelectionModeDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.LightbridgeChannelSelectionModeDroneCommand,this.lightbridgeChannelSelectionMode=o.DroneLightbridgeChannelSelectionMode.Auto}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.lightbridgeChannelSelectionMode=s.Common.parseString(e.lightbridgeChannelSelectionMode,this.lightbridgeChannelSelectionMode)}get subtitle(){return a.Format.enum("DroneLightbridgeChannelSelectionMode",this.lightbridgeChannelSelectionMode)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.LightbridgeChannelSelectionModeDroneCommand=l},4976:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LightbridgeFrequencyBandDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.LightbridgeFrequencyBandDroneCommand,this.lightbridgeFrequencyBand=o.DroneLightbridgeFrequencyBand._2dot4ghz}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.lightbridgeFrequencyBand=s.Common.parseString(e.lightbridgeFrequencyBand,this.lightbridgeFrequencyBand)}get subtitle(){return a.Format.enum("DroneLightbridgeFrequencyBand",this.lightbridgeFrequencyBand)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.LightbridgeFrequencyBandDroneCommand=l},7658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LowBatteryWarningThresholdDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5088),s=n(7247),l=n(5974);class c extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.LowBatteryWarningThresholdDroneCommand,this.lowBatteryWarningThreshold=s.Constants.LowBatteryWarningThresholdDroneCommandValue}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.lowBatteryWarningThreshold=r.Common.parseFloat(e.lowBatteryWarningThreshold,this.lowBatteryWarningThreshold)}get subtitle(){return a.Format.percent(this.lowBatteryWarningThreshold).toString()}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.LowBatteryWarningThresholdDroneCommand=c},6091:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaxAltitudeDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5088),s=n(7247),l=n(5974);class c extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.MaxAltitudeDroneCommand,this.maxAltitude=s.Constants.MaxAltitudeDroneCommandValue}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.maxAltitude=r.Common.parseFloat(e.maxAltitude,this.maxAltitude)}get subtitle(){return a.Format.altitude(this.maxAltitude).toString()}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.MaxAltitudeDroneCommand=c},609:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaxDistanceDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5088),s=n(7247),l=n(5974);class c extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.MaxDistanceDroneCommand,this.maxDistance=s.Constants.MaxDistanceDroneCommandValue}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.maxDistance=r.Common.parseFloat(e.maxDistance,this.maxDistance)}get subtitle(){return a.Format.altitude(this.maxDistance).toString()}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.MaxDistanceDroneCommand=c},3893:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaxDistanceLimitationDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.MaxDistanceLimitationDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.MaxDistanceLimitationDroneCommand=l},6589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OcuSyncChannelDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.OcuSyncChannelDroneCommand,this.ocuSyncChannel=0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.ocuSyncChannel=a.Common.parseInt(e.ocuSyncChannel,this.ocuSyncChannel)}get subtitle(){return`${r.Strings.OcuSyncChannelDroneCommand.values.ocuSyncChannel} ${this.ocuSyncChannel}`}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.OcuSyncChannelDroneCommand=l},5850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OcuSyncChannelSelectionModeDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.OcuSyncChannelSelectionModeDroneCommand,this.ocuSyncChannelSelectionMode=o.DroneOcuSyncChannelSelectionMode.Auto}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.ocuSyncChannelSelectionMode=s.Common.parseString(e.ocuSyncChannelSelectionMode,this.ocuSyncChannelSelectionMode)}get subtitle(){return a.Format.enum("DroneOcuSyncChannelSelectionMode",this.ocuSyncChannelSelectionMode)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.OcuSyncChannelSelectionModeDroneCommand=l},6207:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OcuSyncFrequencyBandDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.OcuSyncFrequencyBandDroneCommand,this.ocuSyncFrequencyBand=o.DroneOcuSyncFrequencyBand.Dual}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.ocuSyncFrequencyBand=s.Common.parseString(e.ocuSyncFrequencyBand,this.ocuSyncFrequencyBand)}get subtitle(){return a.Format.enum("DroneOcuSyncFrequencyBand",this.ocuSyncFrequencyBand)}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.OcuSyncFrequencyBandDroneCommand=l},499:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrecisionLandingDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.PrecisionLandingDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.PrecisionLandingDroneCommand=l},948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteControllerSticksDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(5974),s=n(7470),l=n(7787),c=n(4147),u=n(2838);class m extends i.DroneCommand{constructor(e=0){super(),this.type=o.TypeName.RemoteControllerSticksDroneCommand,this.channel=0,this.leftStick=new s.RemoteControllerStick,this.rightStick=new s.RemoteControllerStick,this.heading=null,this.channel=e}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.channel=a.Common.parseInt(e.channel,this.channel),this.leftStick.applyJSON(e.leftStick),this.rightStick.applyJSON(e.rightStick),this.heading=a.Common.parseFloat(e.heading,null)}get verifiable(){return!1}toMessage(){return new l.Message(c.Strings.VelocityDroneCommand.messages.controls.title,a.Common.joinNotEmpty([Math.abs(this.rightStick.y)>0?c.Strings.formatString(c.Strings.RemoteControllerSticksDroneCommand.messages.controls.details.pitch,u.Format.percent(this.rightStick.y).toString()):"",Math.abs(this.rightStick.x)>0?c.Strings.formatString(c.Strings.RemoteControllerSticksDroneCommand.messages.controls.details.roll,u.Format.percent(this.rightStick.x).toString()):"",Math.abs(this.leftStick.y)>0?c.Strings.formatString(c.Strings.RemoteControllerSticksDroneCommand.messages.controls.details.vertical,u.Format.percent(this.leftStick.y).toString()):"",null==this.heading?Math.abs(this.leftStick.x)>0?c.Strings.formatString(c.Strings.RemoteControllerSticksDroneCommand.messages.controls.details.yaw,u.Format.percent(this.leftStick.x).toString()):"":c.Strings.formatString(c.Strings.RemoteControllerSticksDroneCommand.messages.controls.details.heading,u.Format.angle(this.heading).toString())]))}}t.RemoteControllerSticksDroneCommand=m},709:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReturnHomeAltitudeDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5088),s=n(7247),l=n(5974);class c extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.ReturnHomeAltitudeDroneCommand,this.returnHomeAltitude=s.Constants.ReturnHomeAltitudeDroneCommandValue}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.returnHomeAltitude=r.Common.parseFloat(e.returnHomeAltitude,this.returnHomeAltitude)}get subtitle(){return a.Format.altitude(this.returnHomeAltitude).toString()}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ReturnHomeAltitudeDroneCommand=c},2322:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReturnHomeObstacleAvoidanceDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.ReturnHomeObstacleAvoidanceDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ReturnHomeObstacleAvoidanceDroneCommand=l},9226:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReturnHomeRemoteObstacleAvoidanceDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.ReturnHomeRemoteObstacleAvoidanceDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.ReturnHomeRemoteObstacleAvoidanceDroneCommand=l},1612:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SeriousLowBatteryWarningThresholdDroneCommand=void 0;const i=n(2681),o=n(750),a=n(2838),r=n(5088),s=n(7247),l=n(5974);class c extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.SeriousLowBatteryWarningThresholdDroneCommand,this.seriousLowBatteryWarningThreshold=s.Constants.SeriousLowBatteryWarningThresholdDroneCommand}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.seriousLowBatteryWarningThreshold=r.Common.parseFloat(e.seriousLowBatteryWarningThreshold,this.seriousLowBatteryWarningThreshold)}get subtitle(){return a.Format.percent(this.seriousLowBatteryWarningThreshold).toString()}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.SeriousLowBatteryWarningThresholdDroneCommand=c},7885:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartReturnHomeDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.SmartReturnHomeDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.SmartReturnHomeDroneCommand=l},3795:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpwardsAvoidanceDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.UpwardsAvoidanceDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.UpwardsAvoidanceDroneCommand=l},5437:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VelocityDroneCommand=void 0;const i=n(4147),o=n(7787),a=n(2838),r=n(2681),s=n(9123),l=n(750),c=n(5088),u=n(5974);class m extends r.DroneCommand{constructor(){super(l.TypeName.VelocityDroneCommand),this.type=l.TypeName.VelocityDroneCommand,this.velocity=new s.Velocity6,this.heading=null}applyJSON(e){super.applyJSON(e),u.Serialization.validateType(e,this.type),this.velocity.applyJSON(e.velocity),this.heading=c.Common.parseFloat(e.heading,null)}get verifiable(){return!1}toMessage(){return new o.Message(i.Strings.VelocityDroneCommand.messages.controls.title,c.Common.joinNotEmpty([this.velocity.horizontal.magnitude<.1?"":i.Strings.formatString(i.Strings.VelocityDroneCommand.messages.controls.details.horizontal,a.Format.velocityHorizontal(this.velocity.horizontal.magnitude).toString(),a.Format.angle(this.velocity.horizontal.direction).toString()),Math.abs(this.velocity.vertical)<.1?"":i.Strings.formatString(i.Strings.VelocityDroneCommand.messages.controls.details.vertical,a.Format.velocityVertical(this.velocity.vertical).toString()),null===this.heading?Math.abs(this.velocity.rotational)<.01?"":i.Strings.formatString(i.Strings.VelocityDroneCommand.messages.controls.details.rotational,a.Format.velocityRotational(this.velocity.rotational).toString()):i.Strings.formatString(i.Strings.VelocityDroneCommand.messages.controls.details.heading,a.Format.angle(this.heading).toString())]))}}t.VelocityDroneCommand=m},9866:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VisionAssistedPositioningDroneCommand=void 0;const i=n(2681),o=n(750),a=n(5088),r=n(4147),s=n(5974);class l extends i.DroneCommand{constructor(){super(...arguments),this.type=o.TypeName.VisionAssistedPositioningDroneCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=a.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?r.Strings.Common.enabled:r.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.VisionAssistedPositioningDroneCommand=l},7553:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GimbalCommand=void 0;const i=n(5311);class o extends i.PayloadCommand{}t.GimbalCommand=o},5861:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModeGimbalCommand=void 0;const i=n(7553),o=n(750),a=n(2838),r=n(5974),s=n(5088);class l extends i.GimbalCommand{constructor(){super(...arguments),this.type=o.TypeName.ModeGimbalCommand,this.mode=o.GimbalMode.YawFollow}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.mode=s.Common.parseString(e.mode,this.mode)}get subtitle(){return a.Format.enum("GimbalMode",this.mode)}get reengagementTiming(){return o.CommandReengagementTiming.Destination}}t.ModeGimbalCommand=l},946:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrientationGimbalCommand=void 0;const i=n(7553),o=n(750),a=n(4612),r=n(5974);class s extends i.GimbalCommand{constructor(){super(...arguments),this.type=o.TypeName.OrientationGimbalCommand,this.orientation=new a.Orientation3Optional}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.orientation.applyJSON(e.orientation)}get subtitle(){return this.orientation.toString()}get verifiable(){return!1}}t.OrientationGimbalCommand=s},1906:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VelocityGimbalCommand=void 0;const i=n(4147),o=n(7787),a=n(2838),r=n(750),s=n(7553),l=n(5589),c=n(5088),u=n(5974);class m extends s.GimbalCommand{constructor(){super(r.TypeName.VelocityGimbalCommand),this.type=r.TypeName.VelocityGimbalCommand,this.velocity=new l.Velocity3}applyJSON(e){super.applyJSON(e),u.Serialization.validateType(e,this.type),this.velocity.applyJSON(e.velocity)}get verifiable(){return!1}toMessage(){return new o.Message(i.Strings.VelocityGimbalCommand.messages.controls.title,c.Common.joinNotEmpty([Math.abs(this.velocity.x)<.01?"":i.Strings.formatString(i.Strings.VelocityGimbalCommand.messages.controls.details.pitch,a.Format.velocityRotational(this.velocity.x).toString()),Math.abs(this.velocity.y)<.01?"":i.Strings.formatString(i.Strings.VelocityGimbalCommand.messages.controls.details.roll,a.Format.velocityRotational(this.velocity.y).toString()),Math.abs(this.velocity.z)<.01?"":i.Strings.formatString(i.Strings.VelocityGimbalCommand.messages.controls.details.yaw,a.Format.velocityRotational(this.velocity.z).toString())]))}static boundedVelocity(e,t,n,i){const o=new l.Velocity3;return o.x=i.x.currentVelocityLimits(e.x,n).bound(t.x),o.y=i.y.currentVelocityLimits(e.y,n).bound(t.y),o.z=i.z.currentVelocityLimits(e.z,n).bound(t.z),o}}t.VelocityGimbalCommand=m},1201:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.YawSimultaneousFollowGimbalCommand=void 0;const i=n(7553),o=n(750),a=n(4147),r=n(5088),s=n(5974);class l extends i.GimbalCommand{constructor(){super(...arguments),this.type=o.TypeName.YawSimultaneousFollowGimbalCommand,this.enabled=!0}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.enabled=r.Common.parseBoolean(e.enabled,this.enabled)}get subtitle(){return this.enabled?a.Strings.Common.enabled:a.Strings.Common.disabled}get reengagementTiming(){return o.CommandReengagementTiming.Approach}}t.YawSimultaneousFollowGimbalCommand=l},4032:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AchievableDroneMotionComponent=void 0;const i=n(750),o=n(5293),a=n(4147),r=n(5974),s=n(5718);class l extends s.DroneMotionComponent{constructor(){super(...arguments),this.immediateComponent=null,this.achievedComponent=null}applyJSON(e){super.applyJSON(e),this.immediateComponent=r.Serialization.deserialize(e.immediateComponent,o.SubComponent),this.achievedComponent=r.Serialization.deserialize(e.achievedComponent,o.SubComponent)}verification(e){const t=r.Serialization.clone(this,!0);return t.pointsOfInterest=[],t.immediateComponent=this.immediateComponent?this.immediateComponent.verification(e):null,t.achievedComponent=this.achievedComponent?this.achievedComponent.verification(e):null,t}node(e=null){const t=super.node(e);if(t.emptyChildrenNavigationEnabled=!0,this.immediateComponent){const e=t.addChild(this.immediateComponent);e.label=a.Strings.AchievableDroneMotionComponent.values.immediateComponent,e.remove=()=>{this.immediateComponent=null}}else t.inserts.push({title:`${a.Strings.Common.set} ${a.Strings.AchievableDroneMotionComponent.values.immediateComponent} ${a.Strings.Component.name}`,tooltip:a.Strings.AchievableDroneMotionComponent.values.immediateComponentTooltip,execute:e=>{e instanceof o.SubComponent&&(this.immediateComponent=e)}});if(this.achievedComponent){const e=t.addChild(this.achievedComponent);e.label=a.Strings.AchievableDroneMotionComponent.values.achievedComponent,e.remove=()=>{this.achievedComponent=null}}else t.appends.push({title:`${a.Strings.Common.set} ${a.Strings.AchievableDroneMotionComponent.values.achievedComponent} ${a.Strings.Component.name}`,tooltip:a.Strings.AchievableDroneMotionComponent.values.achievedComponentTooltip,execute:e=>{e instanceof o.SubComponent&&(this.achievedComponent=e)}});return t}achieved(e){return!1}estimate(e,t){const n=super.estimate(e,t);if(this.immediateComponent){const i=this.immediateComponent.estimate(e,t);i.timeConcurrent=!0,n.children.push(i)}return n}execute(e){const t=super.execute(e);if(t.status!==i.ComponentExecutionStatus.Executing)return t;let n=!0;if(this.immediateComponent){const t=this.immediateComponent.execute(e);switch(t.status){case i.ComponentExecutionStatus.Pending:case i.ComponentExecutionStatus.Executing:n=!1;break;case i.ComponentExecutionStatus.Failed:if(this.immediateComponent.required)return this.failed(e,t.error);break;case i.ComponentExecutionStatus.Succeeded:}}if(n&&this.achieved(e)){if(!this.achievedComponent)return this.succeeded(e);if(n){const t=this.achievedComponent.execute(e);switch(t.status){case i.ComponentExecutionStatus.Pending:case i.ComponentExecutionStatus.Executing:break;case i.ComponentExecutionStatus.Failed:if(this.achievedComponent.required)return this.failed(e,t.error);break;case i.ComponentExecutionStatus.Succeeded:return this.succeeded(e)}}}return t}}t.AchievableDroneMotionComponent=l},9411:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApproachableComponent=void 0;const i=n(2962),o=n(5974),a=n(750),r=n(4147),s=n(5718),l=n(8731),c=n(946),u=n(8210),m=n(7787),d=n(3447),p=n(4259);class h extends s.DroneMotionComponent{constructor(){super(...arguments),this.approachComponent=new i.DestinationComponent}applyJSON(e){super.applyJSON(e),this.approachComponent=o.Serialization.deserialize(e.approachComponent,i.DestinationComponent,!1)}get subtitle(){return this.approachComponent.subtitle}verification(e){const t=this.approachComponent.verification(e);if(!t)return null;const n=o.Serialization.clone(this,!0);return n.pointsOfInterest=[],n.approachComponent=t,n}cameraCaptureConfigurationsEnabled(e=null){return!(!super.cameraCaptureConfigurationsEnabled(e)||e&&e.execution.getComponentState(this.approachComponent).status!==a.ComponentExecutionStatus.Succeeded)}approachCoordinate(e){return this.approachComponent.destinationCoordinate(e)}alignment(e){return null}node(e=null){const t=super.node(e);t.emptyChildrenNavigationEnabled=!0,t.ordinal=t.nextOrdinal();const n=t.addChild(this.approachComponent,!0);return n.ordinal=t.ordinal,n.label=r.Strings.ApproachableComponent.values.approachComponent,t}estimate(e,t){const n=super.estimate(e,t);n.children.push(this.approachComponent.estimate(e,t));let i=0;const a=o.Serialization.clone(n.lastDroneSpatial||t),r=this.alignment(e);if(r){if(r.droneOrientation){const t=new l.HeadingComponent;t.heading=r.droneOrientation.yaw||0;const n=t.estimate(e,a);a.orientation.apply(r.droneOrientation),i=Math.max(i,n.totalTime)}r.gimbalOrientations&&(i=Math.max(i,(new c.OrientationGimbalCommand).estimatedTime))}return i&&(n.time+=i,a.updated.increment(i),n.droneSpatials.push(a)),n}aligned(e){const t=e.execution.getComponentState(this).cachedData(a.TypeName.ApproachableComponent);if(t&&t.alignmentComponent)switch(e.execution.getComponentState(t.alignmentComponent).status){case a.ComponentExecutionStatus.Pending:case a.ComponentExecutionStatus.Executing:return!1}return!0}execute(e){const t=super.execute(e);if(t.status!==a.ComponentExecutionStatus.Executing)return t;const n=this.approachComponent.execute(e);switch(n.status){case a.ComponentExecutionStatus.Pending:case a.ComponentExecutionStatus.Executing:return t.cachedData(a.TypeName.ApproachableComponent,(()=>{let t=null,n=null;const i=this.alignment(e);if(i&&(i.droneOrientation&&null!==i.droneOrientation.yaw&&(n=new l.HeadingComponent,n.heading=i.droneOrientation.yaw,t=n),i.gimbalOrientations)){const e=new d.ListComponent;Object.keys(i.gimbalOrientations).forEach((t=>{if(i.gimbalOrientations){const n=new c.OrientationGimbalCommand;n.channel=parseInt(t),n.orientation=i.gimbalOrientations[t],e.childComponents.push(new u.CommandComponent(n))}})),e.childComponents.length>0&&(e.childComponents.push((()=>{const e=new p.WaitComponent;return e.time=.5,e})()),n?n.immediateComponent=e:t=e)}return new f(t)})),t;case a.ComponentExecutionStatus.Failed:return this.failed(e,n.error);case a.ComponentExecutionStatus.Succeeded:const i=t.cachedData(a.TypeName.ApproachableComponent);i&&i.alignmentComponent&&i.alignmentComponent.execute(e).status===a.ComponentExecutionStatus.Executing&&t.messages.push(new m.Message(r.Strings.ApproachableComponent.messages.aligning.title))}return t}}t.ApproachableComponent=h;class f{constructor(e=null){this.alignmentComponent=e}}},8210:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommandComponent=void 0;const i=n(5293),o=n(750),a=n(9645),r=n(5974),s=n(5251),l=n(7787),c=n(2838),u=n(5088),m=n(8283),d=n(9983),p=n(9271),h=n(3957),f=n(908),g=n(8179);class y extends i.SubComponent{constructor(e=new s.DefaultCommand){super(),this.type=o.TypeName.CommandComponent,this.command=e}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.command=r.Serialization.deserialize(e.command,a.Command,!1)}get title(){return this.command.title}get subtitle(){return this.command.subtitle}verification(e){return this.command.verifiable?r.Serialization.clone(this,!0):null}cameraCaptureConfigurationsEnabled(e=null){return!1}estimate(e,t){const n=super.estimate(e,t);if(e.timeRequired&&(n.time=this.command.estimatedTime),this.command instanceof g.CameraCommand){const i=e.camera(this.command.channel);if(this.command instanceof d.ModeCameraCommand)i.settings.mode=this.command.mode;else if(this.command instanceof f.PhotoModeCameraCommand)i.settings.photoMode=this.command.photoMode;else if(this.command instanceof h.PhotoIntervalCameraCommand)i.settings.photoInterval=this.command.photoInterval;else if(this.command instanceof m.StartCaptureCameraCommand){if(!i.capturing)switch(i.settings.mode){case o.CameraMode.Photo:i.updated=t.updated,i.settings.photoMode===o.CameraPhotoMode.Interval?i.capturing=!0:n.cameraCapture(this.command.channel).photos+=1;break;case o.CameraMode.Video:i.updated=t.updated,i.capturing=!0}}else if(this.command instanceof p.StopCaptureCameraCommand&&i.capturing){i.capturing=!1;const e=n.cameraCapture(this.command.channel);switch(i.settings.mode){case o.CameraMode.Photo:i.settings.photoMode===o.CameraPhotoMode.Interval&&(e.photos+=Math.floor(t.updated.elapsedTime(i.updated)/i.settings.photoInterval));break;case o.CameraMode.Video:e.videos+=1}}}return n}execute(e){const t=super.execute(e);if(t.status!==o.ComponentExecutionStatus.Executing)return t;const{drone:n}=e,i=n.commandExecutionState(this.command.id);if(i)switch(i.status){case o.CommandExecutionStatus.Pending:case o.CommandExecutionStatus.Queued:case o.CommandExecutionStatus.Executing:return t.messages.push(new l.Message(c.Format.enum("CommandExecutionStatus",i.status))),t;case o.CommandExecutionStatus.Failed:return n.removeStatefulCommand(this.command),this.failed(e,i.error?u.Common.joinNotEmpty([this.command.title,this.command.subtitle,i.error]):null);case o.CommandExecutionStatus.Succeeded:return n.removeStatefulCommand(this.command),this.succeeded(e)}else n.addStatefulCommand(this.command);return t}}t.CommandComponent=y},737:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;const i=n(9620),o=n(1159),a=n(5664),r=n(5226),s=n(7722),l=n(5974),c=n(5088),u=n(5589),m=n(1906),d=n(8111),p=n(750),h=n(4321),f=n(4110),g=n(6241),y=n(7247),C=n(1678);class v extends s.Identifiable{constructor(){super(...arguments),this.coordinate=new r.GeoCoordinate,this.descriptors=new a.Descriptors,this.cameraCaptureConfigurations=null,this.source=null,this.assetSource=null,this.elevations=null,this.script=null,this.toString=()=>this.title}applyJSON(e){if(super.applyJSON(e),this.descriptors.applyJSON(e.descriptors),this.coordinate.applyJSON(e.coordinate),this.source=l.Serialization.deserialize(e.source,h.ComponentSource),this.assetSource=l.Serialization.deserialize(e.assetSource,f.AssetSource),Array.isArray(e.elevations)){this.elevations=[];for(let t of e.elevations)this.elevations.push(l.Serialization.deserialize(t,g.GeoLocation,!1))}else this.elevations=null;if(this.script=c.Common.parseString(e.script,null),Array.isArray(e.cameraCaptureConfigurations)){this.cameraCaptureConfigurations=[];for(let t of e.cameraCaptureConfigurations)this.cameraCaptureConfigurations.push(l.Serialization.deserialize(t,C.CameraCaptureConfiguration,!1))}else this.cameraCaptureConfigurations=null}get title(){return this.descriptors.name||l.Serialization.typeDisplay(this)}get subtitle(){return this.descriptors.name?c.Common.joinNotEmpty([l.Serialization.typeDisplay(this),this.descriptors.description]):this.descriptors.description}verification(e){return null}get exclusiveReadonly(){return!0}get exclusiveExecution(){return!1}cameraCaptureConfigurationsEnabled(e=null){return!0}get referenceOffsets(){return[]}referenceOffsetsHandleCoordinate(e){return null}elevationCoordinates(e){return[]}elevationsPending(e){const t=this.elevationCoordinates(e);return 0!==t.length&&(!this.elevations||this.elevations.length!==t.length||t.filter(((e,t)=>!this.elevations||e.distance(this.elevations[t].coordinate)>y.Constants.ComponentElevationTolerance)).length>0)}referencedAltitude(e,t,n,i=y.Constants.ComponentElevationTolerance){return e.referencedAltitude(t,this.elevation(n,i),i)}elevation(e,t=y.Constants.ComponentElevationTolerance){let n=null;return this.elevations&&this.elevations.forEach((i=>{const o=i.coordinate.distance(e);(null===t||o<=t)&&(!n||n.coordinate.distance(e)>o)&&(n=i)})),n}node(e=null){return new o.ComponentNode(e,this)}descendantAllowed(e){return!0}endSpatial(e){return null}estimate(e,t){return new i.ComponentEstimate(this)}engaging(e,t){}execute(e){const t=e.execution.getComponentState(this);if(t.status!==p.ComponentExecutionStatus.Pending&&t.status!==p.ComponentExecutionStatus.Executing)return t;const n=t.cachedData(p.TypeName.Component,(()=>{const e=new b;return t.status===p.ComponentExecutionStatus.Pending&&(e.cameraStartCaptureComponents=[]),e}));if(!n)return t;if(this.executing(e),n.cameraStartCaptureComponents&&0===n.cameraStartCaptureComponents.length&&this.cameraCaptureConfigurationsEnabled(e)&&this.cameraCaptureConfigurations&&this.cameraCaptureConfigurations.forEach((e=>{n.cameraStartCaptureComponents.push(...e.startComponents)})),n.cameraStartCaptureComponents)for(const t of n.cameraStartCaptureComponents){const n=t.execute(e);if(n.status===p.ComponentExecutionStatus.Failed&&t.required)return this.failed(e,n.error)}if(n.cameraStopCaptureComponents)for(const t of n.cameraStopCaptureComponents){const n=t.execute(e);if(n.status===p.ComponentExecutionStatus.Failed&&t.required)return this.failed(e,n.error)}return t}executing(e){return e.execution.getComponentState(this).update(p.ComponentExecutionStatus.Executing,null,e.engagement.currentDatetime,e.engagement.timeSinceLastExecution)}succeeded(e){const t=e.execution.getComponentState(this);return this.finished(e)?t.update(p.ComponentExecutionStatus.Succeeded,null,e.engagement.currentDatetime):t}failed(e,t=null){const n=e.execution.getComponentState(this);return this.finished(e)?n.update(p.ComponentExecutionStatus.Failed,t,e.engagement.currentDatetime):n}finished(e){if(!this.cameraCaptureConfigurationsEnabled(e)||!this.cameraCaptureConfigurations)return!0;const t=e.execution.getComponentState(this).cachedData(p.TypeName.Component);if(!t)return!0;if(t.cameraStopCaptureComponents){let n=!0;for(const i of t.cameraStopCaptureComponents)switch(e.execution.getComponentState(i).status){case p.ComponentExecutionStatus.Pending:case p.ComponentExecutionStatus.Executing:n=!1}return n}return t.cameraStopCaptureComponents=[],this.cameraCaptureConfigurations.forEach((e=>{t.cameraStopCaptureComponents.push(...e.stopComponents)})),!1}addGimbalVelocityCommand(e,t,n,i,o){const a=new m.VelocityGimbalCommand;a.channel=t;const r=e.drone.projectGimbalOrientation(t,e.engagement.currentDatetime),s=o?l.Serialization.clone(o):new u.Velocity3;null!==n.x&&(s.x+=d.Geometry.angleDifferenceSigned(n.x,r.x)),s.x=y.Constants.GimbalMotionLimits.x.velocity.bound(s.x),null!==n.y&&(s.y+=d.Geometry.angleDifferenceSigned(n.y,r.y)),s.y=y.Constants.GimbalMotionLimits.y.velocity.bound(s.y),n.convertReferences(e.drone.referenceSources(i)),null!==n.z&&e.drone.gimbal(t).settings.mode===p.GimbalMode.Free&&(s.z+=d.Geometry.angleDifferenceSigned(n.z,r.z)),s.z=y.Constants.GimbalMotionLimits.z.velocity.bound(s.z),a.velocity=s,e.drone.addStatelessCommand(a);const c=a.toMessage();return c.details&&e.execution.getComponentState(this).messages.push(c),a}activeRestrictionZones(e){const t=this.type;return t?e.plan.restrictionZones.filter((e=>!e.zone.excludedComponentTypes.includes(t))):e.plan.restrictionZones}}t.Component=v;class b{constructor(){this.cameraStartCaptureComponents=null,this.cameraStopCaptureComponents=null}}},3310:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentContext=void 0;const i=n(7247),o=n(3593),a=n(4754),r=n(8658);class s extends o.Context{constructor(e){super(),this.plan=e,this.device.spatial.coordinate=this.plan.takeoffCoordinate,this.drone.takeoffCoordinate=this.plan.takeoffCoordinate,this.drone.spatial.coordinate=this.plan.takeoffCoordinate}get spatialSources(){return new a.GeoSpatialSources(this.plan.coordinate.toGeoSpatial(),this.drone.spatial,this.device.spatial)}referencedAltitude(e,t=null,n=i.Constants.ComponentElevationTolerance){return new r.ReferencedAltitude(e,this.drone.takeoffLocation||this.plan.elevation(this.plan.takeoffCoordinate,n),t)}}t.ComponentContext=s},9620:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentEstimate=t.ComponentEstimateCameraCaptures=t.ComponentEstimateCameraCapture=void 0;const i=n(7722),o=n(3854),a=n(5088),r=n(750);class s{constructor(e=0,t=0,n=0){this.channel=e,this.photos=t,this.videos=t}}t.ComponentEstimateCameraCapture=s,t.ComponentEstimateCameraCaptures=class{constructor(){this.channels={}}add(e,t,n){switch(this.channels[e]||(this.channels[e]=new s(e)),t){case r.CameraMode.Photo:this.channels[e].photos+=n;break;case r.CameraMode.Video:this.channels[e].videos+=n}}};class l extends i.Identifiable{constructor(e,t=[],n=0){super(e.id),this.timeConcurrent=!1,this.cameraCaptures={},this.level=0,this.children=[],this.component=e,this.droneSpatials=t,this.time=n}get list(){const e=[];return this.children.forEach((t=>{e.push(...t.list)})),e.push(this),e}get firstDroneSpatial(){for(let e of this.children){let t=e.firstDroneSpatial;if(t)return t}return this.droneSpatials.length>0?this.droneSpatials[0]:null}get lastDroneSpatial(){if(this.droneSpatials.length>0)return a.Common.lastSafe(this.droneSpatials);for(var e=this.children.length-1;e>=0;e--){const t=this.children[e].lastDroneSpatial;if(t)return t}return null}get allDroneSpatials(){const e=[];return this.list.forEach((t=>{e.push(...t.droneSpatials)})),e}segments(e){return this.list.filter((t=>t.droneSpatials.length>0&&(!e||e(t))))}segmentSpatials(e=null){return this.segments((t=>null==e||t.level===e)).map((e=>e.droneSpatials))}segmentCoordinates(e=null){return this.segments((t=>null==e||t.level===e)).map((e=>e.droneSpatials.map((e=>e.coordinate))))}cameraCapture(e=0){return this.cameraCaptures[e]||(this.cameraCaptures[e]=new s(e)),this.cameraCaptures[e]}updateWithCameraCaptureConfigurations(e,t,n=null){t&&t.forEach((t=>{switch(t.captureType){case r.CameraCaptureType.Photos:this.cameraCapture(t.channel).photos+=Math.floor(Math.max(0,n||this.time)/e.camera(t.channel).settings.photoInterval);break;case r.CameraCaptureType.Video:this.cameraCapture(t.channel).videos+=1}}))}get totalTime(){let e=this.time;return this.children.forEach((t=>{t.timeConcurrent||(e+=t.totalTime)})),e}get totalPhotos(){let e=0;for(let t of Object.keys(this.cameraCaptures))e+=this.cameraCaptures[t].photos;return this.children.forEach((t=>{e+=t.totalPhotos})),e}get totalVideos(){let e=0;for(let t of Object.keys(this.cameraCaptures))e+=this.cameraCaptures[t].videos;return this.children.forEach((t=>{e+=t.totalVideos})),e}get summary(){const e={time:this.totalTime,distance:0,altitude:new o.Limits,horizontalVelocityMax:0,verticalVelocity:new o.Limits,photos:this.totalPhotos,videos:this.totalVideos};let t;return this.allDroneSpatials.forEach((n=>{t&&(e.distance+=n.coordinate.distance(t.coordinate)),e.altitude.max=Math.max(e.altitude.max,n.altitude.value),e.altitude.min=Math.min(e.altitude.min,n.altitude.value),e.horizontalVelocityMax=Math.max(e.horizontalVelocityMax,n.velocity.horizontal.magnitude),e.verticalVelocity.max=Math.max(e.verticalVelocity.max,n.velocity.vertical),e.verticalVelocity.min=Math.min(e.verticalVelocity.min,n.velocity.vertical),t=n})),e}findDescendant(e){if(this.id===e)return this;for(let t=0;t<this.children.length;t++){const n=this.children[t].findDescendant(e);if(n)return n}return null}}t.ComponentEstimate=l},8368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentEstimateContext=void 0;const i=n(1111),o=n(3310);class a extends o.ComponentContext{constructor(){super(...arguments),this.pathRequired=!0,this.altitudeRequired=!1,this.timeRequired=!1,this.cameras={}}camera(e=0){return this.cameras[e]||(this.cameras[e]=new i.Camera(e)),this.cameras[e]}}t.ComponentEstimateContext=a},1412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentExecuteContext=void 0;const i=n(3310);class o extends i.ComponentContext{constructor(e,t,n){super(e),this.execution=t,this.engagement=n}elapsedTime(e){return this.engagement.currentDatetime.elapsedTime(e)}}t.ComponentExecuteContext=o},8002:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentExecutionState=void 0;const i=n(750),o=n(1985),a=n(7787),r=n(7722),s=n(5088),l=n(5974);class c extends r.Identifiable{constructor(e=null){super(e),this.type=i.TypeName.ComponentExecutionState,this.status=i.ComponentExecutionStatus.Pending,this.progress=0,this.duration=0,this.started=null,this.finished=null,this.error=null,this.messages=[],this.cache={}}toJSON(){return{id:this.id,type:this.type,status:this.status,progress:this.progress,duration:this.duration,started:this.started,finished:this.finished,error:this.error,messages:this.messages}}applyJSON(e){if(super.applyJSON(e),l.Serialization.validateType(e,this.type),this.status=s.Common.parseString(e.status,this.status),this.progress=s.Common.parseFloat(e.progress,this.progress),this.duration=s.Common.parseFloat(e.duration,this.duration),this.started=l.Serialization.deserialize(e.started,o.Datetime),this.finished=l.Serialization.deserialize(e.finished,o.Datetime),this.error=s.Common.parseString(e.error),this.messages=[],Array.isArray(e.messages))for(let t of e.messages)this.messages.push(l.Serialization.deserialize(t,a.Message,!1));this.cache={}}get complete(){switch(this.status){case i.ComponentExecutionStatus.Pending:case i.ComponentExecutionStatus.Executing:return!1;case i.ComponentExecutionStatus.Succeeded:case i.ComponentExecutionStatus.Failed:return!0;default:return!1}}cachedData(e,t=null){const n=this.cache[e];if(!n&&t){const n=t();if(n)return this.cache[e]=n,n}return n}clearCachedData(e){delete this.cache[e]}update(e,t=null,n=null,a=0){switch(this.messages=[],e){case i.ComponentExecutionStatus.Pending:break;case i.ComponentExecutionStatus.Executing:this.status===i.ComponentExecutionStatus.Pending&&(this.status=e,this.progress=0,this.duration=0,this.started=n||new o.Datetime),this.status===i.ComponentExecutionStatus.Executing&&(this.duration+=a);break;case i.ComponentExecutionStatus.Succeeded:case i.ComponentExecutionStatus.Failed:this.status===i.ComponentExecutionStatus.Executing&&(this.status=e,this.progress=1,this.duration+=a,this.cache={},this.finished=n||new o.Datetime,this.error=t)}return this}}t.ComponentExecutionState=c},1159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentNode=void 0;const i=n(9674),o=n(737),a=n(5088),r=n(5293),s=n(8179),l=n(2838),c=n(9983),u=n(908),m=n(750),d=n(7787),p=n(8283),h=n(9271),f=n(4147),g=n(8210),y=n(3957),C=n(2e3),v=n(3310);class b extends i.Node{constructor(e,t){super(t.id,e),this.label="",this.component=t}get name(){return a.Common.joinNotEmpty([this.component.title]," - ")}get title(){return this.label||this.name}get subtitle(){return this.label?a.Common.joinNotEmpty([this.ordinalDisplay?this.name:this.component.title,this.component.subtitle]):this.component.subtitle}get subComponentCount(){return this.descendantComponentCount((e=>e instanceof r.SubComponent))}descendantComponentCount(e){return this.descendants.filter((t=>t instanceof b&&e(t.component))).length}descendantAllowed(e){return!(e instanceof o.Component&&!this.component.descendantAllowed(e))&&super.descendantAllowed(e)}elevationsRequired(e){for(const t of this.descendants)if(t instanceof b&&t.component.elevationCoordinates(e).length>0)return!0;return!1}addChild(e,t=!1){const n=e.node(this);return t?this.children.splice(0,0,n):this.children.push(n),n}get referenceOffsets(){const e=[];return this.children.forEach((t=>{t instanceof b&&e.push(...t.referenceOffsets)})),e.push(...this.component.referenceOffsets),e}get issues(){const e=[],t=this.descendants,n=this.component;if(n.hasOwnProperty("takeoffOffset")&&null===n.takeoffOffset){const t=new v.ComponentContext(n);this.elevationsRequired(t)&&e.push({message:new d.Message(f.Strings.MissionIssue.messages.elevation.requiredTakeoff.title,f.Strings.MissionIssue.messages.elevation.requiredTakeoff.details,m.MessageLevel.Danger),node:this})}const i=new Set;return t.forEach((e=>{e instanceof b&&e.component instanceof g.CommandComponent&&e.component.command instanceof s.CameraCommand&&i.add(e.component.command.channel)})),i.forEach((n=>{let i=null,o=null,a=null,r=null,v=null,S=null;t.filter((e=>e instanceof b)).forEach((t=>{if(t.component.type===m.TypeName.MapComponent&&0===n)switch(t.component.cameraMode){case m.CameraMode.Photo:i=t.component.cameraMode,o=m.CameraPhotoMode.Interval,v=!1;break;case m.CameraMode.Video:i=t.component.cameraMode,v=!1}else if(t.component.type===m.TypeName.FacadeComponent){if(t.component.gimbalOrientations[n])switch(t.component.cameraMode){case m.CameraMode.Photo:i=t.component.cameraMode,o=t.component.capturePriority===m.FacadeCapturePriority.Distance?t.component.cameraPhotoMode:m.CameraPhotoMode.Interval,v=!1;break;case m.CameraMode.Video:i=t.component.cameraMode,v=!1}}else if(t.component.type===m.TypeName.InspectionComponent){if(t.component.captureChannels.includes(n))switch(t.component.cameraMode){case m.CameraMode.Photo:i=t.component.cameraMode,o=t.component.cameraPhotoMode,v=!1;break;case m.CameraMode.Video:i=t.component.cameraMode,v=!1}}else if(t.component instanceof g.CommandComponent&&t.component.command instanceof s.CameraCommand&&t.component.command.channel===n){const n=t.component.command,g=[];n instanceof s.CameraCommand&&(null===n.requiredCapturing||n.requiredCapturing||(null===v?g.push(new d.Message(f.Strings.formatString(f.Strings.MissionIssue.messages.cameraCommand.requiredNotCapturingUnknown.title,n.title),f.Strings.MissionIssue.messages.cameraCommand.requiredNotCapturingUnknown.details,m.MessageLevel.Warning)):v&&g.push(new d.Message(f.Strings.formatString(f.Strings.MissionIssue.messages.cameraCommand.requiredNotCapturingInvalid.title,n.title),f.Strings.MissionIssue.messages.cameraCommand.requiredNotCapturingInvalid.details,m.MessageLevel.Error))),n.requiredMode&&(null===i?g.push(new d.Message(f.Strings.formatString(f.Strings.MissionIssue.messages.cameraCommand.requiredModeUnknown.title,n.title),f.Strings.MissionIssue.messages.cameraCommand.requiredModeUnknown.details,m.MessageLevel.Warning)):n.requiredMode!==i&&g.push(new d.Message(f.Strings.formatString(f.Strings.MissionIssue.messages.cameraCommand.requiredModeInvalid.title,n.title,l.Format.enum("CameraMode",i)),f.Strings.MissionIssue.messages.cameraCommand.requiredModeInvalid.details,m.MessageLevel.Warning)))),n instanceof h.StopCaptureCameraCommand&&(v=!1),n instanceof p.StartCaptureCameraCommand&&(S=t,i&&!p.StartCaptureCameraCommand.possible(i)&&g.push(new d.Message(f.Strings.formatString(f.Strings.MissionIssue.messages.startCaptureCameraCommand.invalidMode.title,l.Format.enum("CameraMode",i)),f.Strings.MissionIssue.messages.startCaptureCameraCommand.invalidMode.details,m.MessageLevel.Error)),null===i?g.push(new d.Message(f.Strings.MissionIssue.messages.startCaptureCameraCommand.beforeMode.title,f.Strings.MissionIssue.messages.startCaptureCameraCommand.beforeMode.details,m.MessageLevel.Warning)):i===m.CameraMode.Photo&&(null===o?g.push(new d.Message(f.Strings.formatString(f.Strings.MissionIssue.messages.startCaptureCameraCommand.beforePhotoMode.title,l.Format.enum("CameraMode",i)),f.Strings.MissionIssue.messages.startCaptureCameraCommand.beforePhotoMode.details,m.MessageLevel.Info)):o===m.CameraPhotoMode.Interval&&null===r&&g.push(new d.Message(f.Strings.formatString(f.Strings.MissionIssue.messages.startCaptureCameraCommand.beforePhotoInterval.title,l.Format.enum("CameraMode",i),l.Format.enum("CameraPhotoMode",o)),f.Strings.MissionIssue.messages.startCaptureCameraCommand.beforePhotoInterval.details,m.MessageLevel.Warning))),null===v?g.push(new d.Message(f.Strings.MissionIssue.messages.startCaptureCameraCommand.beforeStopped.title,f.Strings.MissionIssue.messages.startCaptureCameraCommand.beforeStopped.details,m.MessageLevel.Info)):v&&g.push(new d.Message(f.Strings.MissionIssue.messages.startCaptureCameraCommand.startedAlready.title,f.Strings.MissionIssue.messages.startCaptureCameraCommand.startedAlready.details,m.MessageLevel.Info)),v=p.StartCaptureCameraCommand.continuous(i||m.CameraMode.Photo,o||m.CameraPhotoMode.Single)),n instanceof c.ModeCameraCommand&&(i=n.mode),n instanceof u.PhotoModeCameraCommand&&(o=n.photoMode),n instanceof C.PhotoFileFormatCameraCommand&&(a=n.photoFileFormat),n instanceof y.PhotoIntervalCameraCommand&&(r=n.photoInterval,r<=2&&(null===a?g.push(new d.Message(f.Strings.MissionIssue.messages.photoIntervalCommand.beforePhotoFileFormat.title,f.Strings.MissionIssue.messages.photoIntervalCommand.beforePhotoFileFormat.details,m.MessageLevel.Warning)):a!==m.CameraPhotoFileFormat.JPEG&&g.push(new d.Message(f.Strings.MissionIssue.messages.photoIntervalCommand.fastPhotoInterval.title,f.Strings.MissionIssue.messages.photoIntervalCommand.fastPhotoInterval.details,m.MessageLevel.Warning)))),g.forEach((n=>{e.push({message:n,node:t})}))}})),v&&S&&i===m.CameraMode.Video&&e.push({message:new d.Message(f.Strings.formatString(f.Strings.MissionIssue.messages.startCaptureCameraCommand.videoNotStopped.title,l.Format.enum("CameraMode",i)),f.Strings.MissionIssue.messages.startCaptureCameraCommand.videoNotStopped.details,m.MessageLevel.Warning),node:S})})),e}}t.ComponentNode=b},8952:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentNodeExecutionState=void 0,t.ComponentNodeExecutionState=class{constructor(e,t){this.node=e,this.state=t}}},4321:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentSource=void 0;const i=n(750),o=n(1985),a=n(5088),r=n(5974);t.ComponentSource=class{constructor(e="",t=new o.Datetime){this.type=i.TypeName.ComponentSource,this.path=e,this.updated=t}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.updated.applyJSON(e.updated),this.path=a.Common.parseString(e.path,this.path)}}},4200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CourseComponent=void 0;const i=n(750),o=n(7247),a=n(4147),r=n(7787),s=n(2838),l=n(9123),c=n(5088),u=n(4032),m=n(5807),d=n(5974),p=n(1154);class h extends u.AchievableDroneMotionComponent{constructor(){super(...arguments),this.type=i.TypeName.CourseComponent,this.course=0,this.distance=o.Constants.CourseComponentAchievementDistance}applyJSON(e){super.applyJSON(e),d.Serialization.validateType(e,this.type),this.course=c.Common.parseFloat(e.course,this.course),this.distance=c.Common.parseFloat(e.achievementDistance,this.distance)}get subtitle(){return a.Strings.formatString(a.Strings.CourseComponent.subtitle,s.Format.angle(this.course).toString(),s.Format.distance(this.distance).toString()).toString()}achieved(e){return 1===e.execution.getComponentState(this).progress}estimate(e,t){const n=super.estimate(e,t),i=this.resolveDroneMotionLimits(e),o=t.coordinate.geoCoordinate(new m.Vector2(this.course,this.distance)).toGeoSpatial();o.altitude=d.Serialization.clone(t.altitude);let a=0;if(e.timeRequired){a=i.timeLineHorizontal(this.distance);const e=n.children.find((e=>e.component===this.immediateComponent));e&&e.totalTime>n.time&&(n.time+=e.totalTime-n.time,a=e.totalTime)}if(this.achievedComponent){const i=d.Serialization.clone(o);i.updated.value=new Date(t.updated.value.getTime()+1e3*a);const r=this.achievedComponent.estimate(e,i);n.children.push(r)}return n.droneSpatials.push(o),n.updateWithCameraCaptureConfigurations(e,this.cameraCaptureConfigurations),n}execute(e){const t=super.execute(e);if(t.status!==i.ComponentExecutionStatus.Executing)return t;const n=t.cachedData(i.TypeName.CourseComponent,(()=>new f));t.progress+=p.Kinematic.d1(n.velocityPrevious,e.engagement.timeSinceLastExecution)/this.distance,t.progress>.999&&(t.progress=1),t.progress=Math.min(1,t.progress),t.messages.push(new r.Message(s.Format.distance(this.distance*(1-t.progress)).toString()));const o=new l.Velocity6;return o.horizontal=new m.Vector2(this.course,this.resolveDroneMotionLimits(e).horizontal.velocity.max),n.velocityPrevious=this.addDroneVelocityCommand(e,o).velocity.horizontal.magnitude,t}}t.CourseComponent=h;class f{constructor(){this.velocityPrevious=0}}},2962:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DestinationComponentModelSample=t.DestinationComponent=void 0;const i=n(750),o=n(5807),a=n(8111),r=n(6776),s=n(3854),l=n(7247),c=n(4545),u=n(4147),m=n(7787),d=n(2838),p=n(9123),h=n(5088),f=n(4032),g=n(9871),y=n(5718),C=n(5718),v=n(4830),b=n(5974),S=n(6875),w=n(8368),M=n(141),x=n(4612),O=n(4457),P=n(8569),T=n(2778),D=n(8656),E=n(1747),A=n(6750),F=n(2573),N=n(8210),I=n(946);class _ extends f.AchievableDroneMotionComponent{constructor(){super(...arguments),this.type=i.TypeName.DestinationComponent,this.destinationOffset=new o.Vector2,this.altitudeRange=new r.AltitudeRange(new g.Altitude(l.Constants.DestinationComponentAltitude),new s.Limits(l.Constants.DestinationComponentAltitudeRange)),this.achievementTime=l.Constants.DestinationComponentAchievementTime,this.achievementDistance=new c.DistanceTolerance(l.Constants.DestinationComponentAchievementDistanceHorizontal,l.Constants.DestinationComponentAchievementDistanceVertical),this.droneOrientation=null,this.gimbalOrientations=null}applyJSON(e){if(super.applyJSON(e),b.Serialization.validateType(e,this.type),this.achievementTime=h.Common.parseFloat(e.achievementTime,this.achievementTime),this.destinationOffset.applyJSON(e.destinationOffset),this.altitudeRange.applyJSON(e.altitudeRange),this.achievementDistance.applyJSON(e.achievementDistance),this.droneOrientation=b.Serialization.deserialize(e.droneOrientation,x.Orientation3Optional),e.gimbalOrientations){this.gimbalOrientations={};for(let t of Object.keys(e.gimbalOrientations)){const n=new x.Orientation3Optional;n.applyJSON(e.gimbalOrientations[t]),this.gimbalOrientations[t]=n}}else this.gimbalOrientations=null}get subtitle(){return h.Common.joinNotEmpty([super.subtitle,this.altitudeRange.toString()])}get referenceOffsets(){return[this.destinationOffset].concat(super.referenceOffsets)}verification(e){const t=super.verification(e);if(!t)return null;const n=t;return n.gimbalOrientations=null,n.droneOrientation=new x.Orientation3Optional,n.droneOrientation.z=0,n.droneOrientation.zReference=i.OrientationZReference.Path,t}get pointsOfInterestEnabled(){return!0}node(e=null){const t=super.node(e);return null===t.ordinal&&0===t.ancestors.filter((e=>e.component instanceof y.DroneMotionComponent)).length&&(t.ordinal=t.nextOrdinal()),t}elevationCoordinates(e){const t=super.elevationCoordinates(e);return this.altitudeRange.altitude.system===i.AltitudeSystem.AGL&&t.push(this.destinationCoordinate(e)),t}destinationCoordinate(e){return this.referenceCoordinate(e,this.destinationOffset)}destinationReferencedAltitude(e){return this.referencedAltitude(e,this.altitudeRange.altitude,this.destinationCoordinate(e))}destinationSpatial(e){const t=this.destinationCoordinate(e).toGeoSpatial(),n=this.destinationReferencedAltitude(e).toSystem(i.AltitudeSystem.ATL);return t.altitude.value=null===n?0:n.value,t}orientationSpatial(e){if(this.pointsOfInterest.length>0){const t=this.pointOfInterestCoordinateByID(e,this.pointsOfInterest[0].id),n=this.pointOfInterestReferencedAltitudeByID(e,this.pointsOfInterest[0].id),o=n?n.toSystem(i.AltitudeSystem.ATL):null;if(t&&o){const e=new v.GeoSpatial;return e.coordinate=t,e.altitude=o,e}}return this.destinationSpatial(e)}endSpatial(e){return this.destinationSpatial(e)}estimate(e,t){const n=super.estimate(e,t);n.level=1,n.droneSpatials.push(t);const i=this.destinationSpatial(e);i.updated=b.Serialization.clone(t.updated);let o=0;if(e.pathRequired||e.timeRequired){const r=this.model(e,t);if(r){r.addToEstimate(n);const e=r.firstSample.last;let t=e;for(;t;){if(this.achievementDistance.horizontal>=e.current.distance-t.current.distance){o=t.current.time;break}t=t.previous}}else{const r=t.coordinate.bearing(i.coordinate);if(this.droneOrientation){const e=new F.Orientation3;e.apply(this.droneOrientation),e.convertReferences(A.OrientationReferenceSources.fromZ(r)),i.orientation.yaw=e.yaw}else i.orientation.yaw=i.coordinate.bearing(this.orientationSpatial(e).coordinate);if(e.altitudeRequired||e.timeRequired){const r=i.altitude.value-t.altitude.value;if(e.altitudeRequired&&!this.altitudeRange.range.valid(-r)){const e=b.Serialization.clone(t);e.altitude.value=i.altitude.value+this.altitudeRange.range.bound(-r),n.droneSpatials.push(e)}if(e.timeRequired){const s=this.resolveDroneMotionLimits(e),c=t.coordinate.distance(i.coordinate),u=c-this.achievementDistance.horizontal>0?s.timeLineHorizontal(c,c-this.achievementDistance.horizontal):0,m=a.Geometry.angleDifferenceSigned(i.orientation.yaw,t.orientation.yaw),d=s.timeLineRotational(m),p=m-l.Constants.DestinationComponentHeadingAchievement>0?s.timeLineRotational(m,m-l.Constants.DestinationComponentHeadingAchievement):0,h=Math.abs(r)-this.achievementDistance.vertical>0?s.timeLineVertical(r,Math.abs(r)-this.achievementDistance.vertical):0,f=this.altitudeRange.range.valid(-r)?0:s.timeLineVertical(r,Math.abs(r)-Math.abs(this.altitudeRange.range.bound(-r))),g=u+Math.max(f,p),y=n.time;n.time+=Math.max(d,h,g)+this.achievementTime,o=n.time-y;const C=n.children.find((e=>e.component===this.immediateComponent));C&&C.totalTime>n.time&&(n.time+=C.totalTime-n.time,o=C.totalTime),i.updated.increment(n.time-y)}}n.droneSpatials.push(i)}}else n.droneSpatials.push(i);if(this.achievedComponent){const a=b.Serialization.clone(i);a.updated.value=new Date(t.updated.value.getTime()+1e3*o);const r=this.achievedComponent.estimate(e,a);n.children.push(r)}return n.updateWithCameraCaptureConfigurations(e,this.cameraCaptureConfigurations),n}achieved(e){const t=this.cachedData(e);if(t&&t.achievementDistanceValidSince){const{drone:n}=e,i=n.projectSpatial(e.engagement.currentDatetime),o=this.destinationSpatial(e),a=i.coordinate.distance(o.coordinate),r=o.altitude.value-i.altitude.value;if(this.achievementDistance.valid(a,r)&&e.elapsedTime(t.achievementDistanceValidSince)>=this.achievementTime)return!0}return!1}cachedData(e,t=null){const n=e.execution.getComponentState(this);return n.complete?null:n.cachedData(i.TypeName.DestinationComponent,(()=>{const n=this.destinationCoordinate(e),i=(t||e.drone.spatial).coordinate.geoCoordinate(),o=new R(i,i.distance(n)),a=this.model(e,t||e.drone.spatial);return a&&(o.model=new C.DroneMotionComponentModelData(a.firstSample)),o}))}engaging(e,t){super.engaging(e,t),e.execution.getComponentState(this).clearCachedData(i.TypeName.DestinationComponent),this.cachedData(e,t)}execute(e){const t=super.execute(e);if(t.status!==i.ComponentExecutionStatus.Executing)return t;const{drone:n}=e,o=this.referenceSpatial(e),r=n.projectSpatial(e.engagement.currentDatetime),s=this.destinationSpatial(e),c=r.coordinate.distance(s.coordinate),f=s.altitude.value-r.altitude.value,g=this.cachedData(e);if(!g)return t;if(g.model&&(g.modelExecuted||!this.achievementDistance.valid(c,f))){g.modelExecuted=!0;const{engagement:n}=e;g.model.incrementTime(n.timeSinceLastExecution);const i=this.achievementDistance.valid(c,f);if(g.model.sampleLinked.next&&this.addVelocityCommandsFromModel(e,g.model,!i||null),i){g.achievementDistanceValidSince||(g.achievementDistanceValidSince=e.engagement.currentDatetime);const n=e.elapsedTime(g.achievementDistanceValidSince);n<this.achievementTime&&t.messages.push(new m.Message(u.Strings.AchievableDroneMotionComponent.messages.waiting.title,d.Format.number(this.achievementTime-n)))}else g.achievementDistanceValidSince=null;return t.progress=g.model.progress,t}const y=new p.Velocity6,C=r.coordinate.bearing(s.coordinate),v=this.orientationSpatial(e);let w=r.coordinate.bearing(v.coordinate);if(this.droneOrientation){const e=new F.Orientation3;e.apply(this.droneOrientation),e.convertReferences(A.OrientationReferenceSources.fromZ(C)),w=e.yaw}const x=this.achievementDistance.validHorizontal(c)?0:a.Geometry.angleDifferenceSigned(w,r.orientation.yaw),P=this.resolveDroneMotionLimits(e);if(this.altitudeRange.range.valid(-f)&&(this.achievementDistance.validHorizontal(c)||Math.abs(x)<l.Constants.DestinationComponentHeadingAchievement)){P.updateBoundedVelocityHorizontal(y,C,c,o.velocity.horizontal);const e=g.startCoordinate,t=e.geoCoordinate(a.Geometry.lineClosestPoint(new M.Line2(new S.Point2,e.offset(s.coordinate).toPoint2()),e.offset(r.coordinate).toPoint2()).toVector2()),n=r.coordinate.offset(t),i=new p.Velocity6;P.updateBoundedVelocityHorizontal(i,n.direction,n.magnitude),y.horizontal=y.horizontal.add(i.horizontal)}if(P.updateBoundedVelocityVertical(y,f,o.velocity.vertical),this.achievementDistance.valid(c,f)){g.achievementDistanceValidSince||(g.achievementDistanceValidSince=e.engagement.currentDatetime);const n=e.elapsedTime(g.achievementDistanceValidSince);n<this.achievementTime&&t.messages.push(new m.Message(u.Strings.AchievableDroneMotionComponent.messages.waiting.title,d.Format.number(this.achievementTime-n)))}else{g.achievementDistanceValidSince=null;const n=new m.Message(u.Strings.DestinationComponent.messages.moving.title,h.Common.joinNotEmpty([c<.1?"":u.Strings.formatString(u.Strings.DestinationComponent.messages.moving.details.distance,d.Format.distance(c).toString()),Math.abs(f)<.1?"":u.Strings.formatString(u.Strings.DestinationComponent.messages.moving.details.altitude,d.Format.altitude(f).toString()),Math.abs(x)<.01?"":u.Strings.formatString(u.Strings.DestinationComponent.messages.moving.details.heading,d.Format.angle(x,!1).toString())]));if(n.details&&t.messages.push(n),this.gimbalOrientations){const t=Object.keys(this.gimbalOrientations);if(t.length>0){if(0===g.gimbalOrientationComponents.length)for(const e of t)g.gimbalOrientationComponents.push(new N.CommandComponent((()=>{const t=new I.OrientationGimbalCommand;return t.orientation=b.Serialization.clone(this.gimbalOrientations[e]),t})()));g.gimbalOrientationComponents.forEach((t=>{t.execute(e)}))}}else{const t=b.Serialization.clone(l.Constants.DroneMotionComponentGimbalOrientation),n=v.altitude.value,i=r.coordinate.distance(v.coordinate),o=r.altitude.value-n;t.pitch=this.achievementDistance.valid(i,o)?0:Math.min(E.Convert.degreesToRadians(0),O.Gimbal.pitch(Math.max(this.achievementDistance.horizontal,i),o)),this.addGimbalVelocityCommand(e,0,t,{x:0,z:w||0})}}return this.addDroneVelocityCommand(e,y,0===x?null:w),t.progress=g.progress(r.coordinate.distance(s.coordinate)),t}reengagementDroneSpatial(e){const t=this.destinationSpatial(e);return t.orientation.yaw=e.drone.spatial.coordinate.bearing(t.coordinate),t}model(e,t){const n=this.restrictionZonePath(e,t);if(!n)return null;const r=this.referenceCoordinate(e),s=n.segments.map((e=>new D.Path(a.Geometry.roundedCorners(e.points.map((e=>r.offset(e.coordinate).toPoint2())),l.Constants.DestinationComponentRestrictionZoneCornerRadius).map((e=>e.map((e=>r.geoCoordinate(e.toVector2())))))))),c={};this.activeRestrictionZones(e).forEach((e=>{c[e.zone.id]=e}));const u=this.orientationSpatial(e),m=this.resolveDroneMotionLimits(e);let d=0,p=null;return s.forEach(((e,t)=>{const a=e.samplesForMaxDistance(l.Constants.DestinationComponentSampleDistance);if(!a||0===a.length)return;if(1===a.length&&s.length>t+1){const e=s[t+1];if(e.coordinates.length>0&&e.coordinates[0].distance(a[0].coordinate)<.1)return}const r=n.segments[t],h=r.points.map((t=>({distance:e.nearestDistance(t.coordinate),zone:t.zone})));d=a[0].direction;for(const e of a){for(;h.length>1&&e.distance>=h[1].distance;)h.shift();const t=0===h.length||e.distance<h[0].distance?null:h[0].zone,n=t?c[t.id]:null,a=n?m.resolve(n.droneMotionLimits):m,s=n?n.droneMotionErrorTolerance:null,l=new v.GeoSpatial;l.coordinate=e.coordinate,l.altitude.value=r.altitude.value,l.velocity.horizontal=new o.Vector2(e.direction,a.horizontal.velocity.max);const d=A.OrientationReferenceSources.fromZ(e.direction);this.droneOrientation?(l.orientation.apply(this.droneOrientation),l.orientation.convertReferences(d)):(l.orientation.yaw=l.coordinate.bearing(u.coordinate),l.orientation.yawReference=i.OrientationZReference.North);const f={};if(this.gimbalOrientations)for(const e of Object.keys(this.gimbalOrientations))f[e]=b.Serialization.clone(this.gimbalOrientations[e]),f[e].convertReferences(d);else{const e=u.altitude.value,t=l.coordinate.distance(u.coordinate),n=l.altitude.value-e;f[0]=new x.Orientation3Optional,f[0].pitch=this.achievementDistance.valid(t,n)?0:Math.min(E.Convert.degreesToRadians(0),O.Gimbal.pitch(Math.max(this.achievementDistance.horizontal,t),n))}p=new T.LinkedValue(new L(l,b.Serialization.clone(a),f,e.distance),p),p.current.droneMotionErrorTolerance=s}})),p=p?p.first:null,p?(e instanceof w.ComponentEstimateContext&&!e.timeRequired||(this.insertSamplesAltitudeChanges(p,t.altitude.value,l.Constants.DestinationComponentSampleDistance,u,A.OrientationReferenceSources.fromZ(d)),y.DroneMotionComponentModel.updateSamplesContrainVelocities(p,l.Constants.DestinationComponentSampleDistance,!1)),new y.DroneMotionComponentModel(p)):null}insertSamplesAltitudeChanges(e,t,n,i,o){let a=e.first;for(;a.next;){const e=a.next.current.droneSpatial.altitude.value-a.current.droneSpatial.altitude.value;if(Math.abs(e)>n){const t=Math.ceil(Math.abs(e)/n),i=a,o=a.next;for(let e=1;e<t;e++)a=a.insertAfter(i.current.interpolate(o.current,e/t));a=o}else a=a.next}a=e.first;const r=(a.current.droneSpatial.altitude.value<t?1:-1)*n;for(;Math.abs(a.current.droneSpatial.altitude.value-t)>n;){const e=b.Serialization.clone(a.current.droneSpatial);e.altitude.value+=r;const t={};if(this.gimbalOrientations)for(const e of Object.keys(this.gimbalOrientations))t[e]=b.Serialization.clone(this.gimbalOrientations[e]),t[e].convertReferences(o);else{const n=i.altitude.value,o=e.coordinate.distance(i.coordinate),a=e.altitude.value-n;t[0]=new x.Orientation3Optional,t[0].pitch=this.achievementDistance.valid(o,a)?0:Math.min(E.Convert.degreesToRadians(0),O.Gimbal.pitch(Math.max(this.achievementDistance.horizontal,o),a))}a=a.insertBefore(new L(e,b.Serialization.clone(a.current.droneMotionLimits),t,0))}}restrictionZonePath(e,t){const n=this.activeRestrictionZones(e);if(0===n.length)return null;const i=this.destinationSpatial(e);return P.Zone.path(n.filter((e=>{const n=t.coordinate.distance(i.coordinate),o=t.altitude.value-i.altitude.value;return!e.minApplicableProximity.valid(n,o)})).map((e=>e.zone)),e,t,i)}}t.DestinationComponent=_;class R{constructor(e,t){this.achievementDistanceValidSince=null,this.model=null,this.modelExecuted=!1,this.gimbalOrientationComponents=[],this.startCoordinate=e,this.totalDistance=t}progress(e){return e>this.totalDistance?0:(this.totalDistance-e)/this.totalDistance}}class L extends y.DroneMotionComponentModelSample{constructor(e,t,n,i){super(e,t,n,{}),this.distance=i}}t.DestinationComponentModelSample=L},3750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisengageComponent=void 0;const i=n(5293),o=n(750),a=n(7787),r=n(5974),s=n(4147);class l extends i.SubComponent{constructor(){super(...arguments),this.type=o.TypeName.DisengageComponent,this.reason=new a.Message}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.reason.applyJSON(e.reason)}get subtitle(){return this.reason.toString()}get exclusiveReadonly(){return!0}get exclusiveExecution(){return!0}execute(e){const t=super.execute(e);if(t.status!==o.ComponentExecutionStatus.Executing)return t;const{engagement:n}=e;if(!e.preview){const t=r.Serialization.clone(this.reason);t.title||t.details||(t.title=s.Strings.DisengageComponent.messages.default),n.disengage(e.drone,t)}return this.succeeded(e),t}}t.DisengageComponent=l},5718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DroneMotionComponentModelSample=t.DroneMotionComponentModelSampleLinked=t.DroneMotionComponentModel=t.DroneMotionComponentModelData=t.DroneMotionComponent=void 0;const i=n(5293),o=n(5437),a=n(750),r=n(9477),s=n(9123),l=n(4830),c=n(4612),u=n(2778),m=n(2545),d=n(5974),p=n(5589),h=n(5088),f=n(5807),g=n(1154),y=n(6875),C=n(7247),v=n(1159),b=n(6750),S=n(6524),w=n(4147),M=n(7787),x=n(2838),O=n(8111),P=n(4545),T=n(3913);class D extends i.SubComponent{constructor(){super(...arguments),this.droneMotionLimits=new r.MotionLimits6Optional,this.droneMotionErrorTolerance=null,this.droneMotionErrorLimits=null,this.restrictionZonesEnabled=!0}applyJSON(e){super.applyJSON(e),this.droneMotionErrorTolerance=d.Serialization.deserialize(e.droneMotionErrorTolerance,P.DistanceTolerance),this.droneMotionErrorLimits=d.Serialization.deserialize(e.droneMotionErrorLimits,r.MotionLimits6Optional),this.restrictionZonesEnabled=h.Common.parseBoolean(e.restrictionZonesEnabled,this.restrictionZonesEnabled),this.droneMotionLimits.applyJSON(e.droneMotionLimits)}get exclusiveReadonly(){return!0}get exclusiveExecution(){return!0}get repositionIfIncluded(){return!0}descendantAllowed(e){return!(!super.descendantAllowed(e)||e instanceof D||0!==e.node().descendants.filter((e=>e instanceof v.ComponentNode&&e.component instanceof D)).length)}resolveDroneMotionLimits(e,t=null){return e.plan.droneMotionLimits.resolve(t||this.droneMotionLimits)}resolveDroneMotionErrorTolerance(e,t=null){return t||e.plan.droneMotionErrorTolerance}resolveDroneMotionErrorLimits(e,t){return this.droneMotionErrorLimits?t.resolve(this.droneMotionErrorLimits):e.plan.droneMotionErrorLimits?t.resolve(e.plan.droneMotionErrorLimits):t}addVelocityCommandsFromModel(e,t,n){const i=t.sampleInterpolated,{drone:a,execution:r}=e,l=this.referenceSpatial(e),c=a.projectSpatial(e.engagement.currentDatetime),u=d.Serialization.clone(i.droneSpatial.velocity),m=new s.Velocity6,p=this.resolveDroneMotionErrorLimits(e,i.droneMotionLimits),f=c.coordinate.offset(i.droneSpatial.coordinate);p.updateBoundedVelocityHorizontal(m,f.direction,f.magnitude,l.velocity.horizontal);const g=i.droneSpatial.altitude.value-c.altitude.value;p.updateBoundedVelocityVertical(m,g,l.velocity.vertical);const y=[],C=this.resolveDroneMotionErrorTolerance(e,i.droneMotionErrorTolerance||this.droneMotionErrorTolerance);if(C.validHorizontal(f.magnitude)||y.push(w.Strings.formatString(w.Strings.DroneMotionComponent.messages.disengageErrorTolerance.details.distance,x.Format.distance(f.magnitude).toString())),C.validVertical(g)||y.push(w.Strings.formatString(w.Strings.DroneMotionComponent.messages.disengageErrorTolerance.details.altitude,x.Format.altitude(g).toString())),y.length>0)return void e.engagement.disengage(e.drone,new M.Message(w.Strings.DroneMotionComponent.messages.disengageErrorTolerance.title,h.Common.joinNotEmpty(y)));const v=O.Geometry.angleDifferenceSigned(i.droneSpatial.orientation.yaw,c.orientation.yaw);p.updateBoundedVelocityRotational(m,v,l.velocity.rotational),u.horizontal=u.horizontal.add(m.horizontal),u.vertical+=m.vertical,u.rotational+=m.rotational,t.filters.rotationalVelocity&&(u.rotational=t.filters.rotationalVelocity.filter(u.rotational));const b=new o.VelocityDroneCommand;b.velocity=u,n?(b.velocity.rotational=0,b.heading=i.droneSpatial.orientation.yaw):null===n&&(b.velocity.rotational=0);const S=r.getComponentState(this);i.message&&S.messages.push(i.message);const P=b.toMessage();P.details&&S.messages.push(P),a.addStatelessCommand(b);for(const t of Object.keys(i.gimbalOrientations))this.addGimbalVelocityCommand(e,parseInt(t),i.gimbalOrientations[t],{x:0,z:0},i.gimbalVelocities[t])}addDroneVelocityCommand(e,t,n=null){const i=e.execution.getComponentState(this),r=i.cachedData(a.TypeName.DroneMotionComponent,(()=>new E)),s=this.resolveDroneMotionLimits(e),l=new o.VelocityDroneCommand;return l.velocity=s.boundedVelocity(r.previousVelocity,t,e.engagement.timeSinceLastExecution),l.heading=n,l.toMessage().details&&i.messages.push(l.toMessage()),e.drone.addStatelessCommand(l),r.previousVelocity=l.velocity,l}reengagementDroneSpatial(e){return null}engaging(e,t){super.engaging(e,t),e.execution.getComponentState(this).clearCachedData(a.TypeName.DroneMotionComponent)}activeRestrictionZones(e){return this.restrictionZonesEnabled?super.activeRestrictionZones(e):[]}}t.DroneMotionComponent=D;class E{constructor(){this.previousVelocity=new s.Velocity6}}t.DroneMotionComponentModelData=class{constructor(e){this.currentTime=0,this.filters={rotationalVelocity:null,heading:null},this._sample=e.first,this.totalTime=e.last.current.time}updateProgress(e){this.updateTime(Math.max(0,Math.min(1,e))*this.totalTime)}updateTime(e){for(e<this.currentTime&&(this._sample=this._sample.first),this.currentTime=e;this._sample.next&&this._sample.next.current.time<this.currentTime;)this._sample=this._sample.next}incrementTime(e){this.updateTime(this.currentTime+e)}get sampleLinked(){return this._sample}get sampleInterpolated(){if(!this._sample.next)return this._sample.current;const e=this._sample.next.current.time-this._sample.current.time;if(0===e)return this._sample.current.interpolate(this._sample.next.current,0);const t=(this.currentTime-this._sample.current.time)/e;return this._sample.current.interpolate(this._sample.next.current,t)}get progress(){return Math.min(1,this.currentTime/this.totalTime)}};class A{constructor(e){this.firstSample=e.first,this.samples=this.firstSample.list}addToEstimate(e){var t;if(this.samples.length>0){let n=(null===(t=e.lastDroneSpatial)||void 0===t?void 0:t.updated.value)||new Date;this.samples.forEach((t=>{const i=t.current.droneSpatial;i.updated.value=new Date(n.getTime()+1e3*t.current.time),e.droneSpatials.push(i)})),e.time+=h.Common.last(this.samples).current.time}}static insertSamplesAltitudeChanges(e,t,n,i){let o=t.first;for(Math.abs(o.current.droneSpatial.altitude.value-i)>n&&(o=o.insertBefore(o.current.interpolate(o.current,0)),o.current.droneSpatial.altitude.value=i,o.current.droneSpatial.velocity.horizontal=new f.Vector2),o=t.first;o.next;){const e=o.next.current.droneSpatial.altitude.value-o.current.droneSpatial.altitude.value;if(Math.abs(e)>n){const t=Math.ceil(Math.abs(e)/n),i=o,a=o.next;for(let e=1;e<t;e++)o=o.insertAfter(i.current.interpolate(a.current,e/t));o=a}else o=o.next}}static updateSamplesContrainVelocities(e,t,n){A.updateSamplesContrainHorizontalVelocitiesByAcceleration(e),A.updateSamplesContrainVerticalVelocitiesByAcceleration(e,t),A.updateSamplesTime(e),A.updateSamplesContrainHorizontalVelocitiesByTime(e),A.updateSamplesContrainHorizontalVelocitiesByAcceleration(e),A.updateSamplesTime(e),A.updateSamplesContrainVerticalVelocitiesByTime(e),A.updateSamplesContrainVerticalVelocitiesByAcceleration(e,t),A.updateSamplesTime(e),A.updateSamplesContrainVerticalVelocitiesByTime(e),A.updateSamplesContrainHorizontalVelocitiesByTime(e),n&&A.updateSamplesSmooth(e),A.updateSamplesTime(e),A.updateSamplesOrientationVelocities(e)}static updateSamplesSmooth(e){const t=new T({R:.1,Q:3}),n=new T({R:.1,Q:3});t.filter(0),n.filter(0);let i=e.first;for(;i.next;)if(i=i.next,i.next&&i.previous){const e=i.current.droneSpatial.velocity.horizontal;e.magnitude=t.filter(e.magnitude),i.current.droneSpatial.velocity.horizontal=e,i.current.droneSpatial.velocity.vertical=n.filter(i.current.droneSpatial.velocity.vertical)}}static updateSamplesContrainHorizontalVelocitiesByAcceleration(e){const t=(e,t,n)=>{const i=t.droneSpatial.coordinate.offset(e.droneSpatial.coordinate);if(0===i.magnitude)return void(e.droneSpatial.velocity.horizontal=new f.Vector2);const o=e.droneSpatial.velocity.horizontal,a=t.droneSpatial.velocity.horizontal,r=0===a.magnitude?o.direction:a.direction;if(o.direction-=r,a.direction=0,o.x<=0)return void(e.droneSpatial.velocity.horizontal=new f.Vector2);const s=new f.Vector2(o.direction,i.magnitude),l=new y.Point2(Math.min(o.x,g.Kinematic.v3(a.x,n,s.x)),g.Kinematic.v3(0,n,Math.abs(s.y)));o.x>l.x&&(o.magnitude*=l.x/o.x),Math.abs(o.y)>l.y&&(o.magnitude*=l.y/Math.abs(o.y)),o.direction+=r,e.droneSpatial.velocity.horizontal=o};let n=e.first;for(n.current.droneSpatial.velocity.horizontal=new f.Vector2;n.next;)n=n.next,n.next&&n.previous&&t(n.current,n.previous.current,n.current.droneMotionLimits.horizontal.acceleration.max);for(n=e.last,n.current.droneSpatial.velocity.horizontal=new f.Vector2;n.previous;)n=n.previous,n.next&&n.previous&&t(n.current,n.next.current,-n.current.droneMotionLimits.horizontal.acceleration.min)}static updateSamplesContrainVerticalVelocitiesByAcceleration(e,t){let n=e.first;for(;n.next;)if(n=n.next,n.next&&n.previous){let e=0;const i=n.current.droneSpatial.altitude.value-n.previous.current.droneSpatial.altitude.value;if(Math.abs(i)>.01*t){const t=n.previous.current.droneSpatial.velocity.vertical;i>0&&t>0?e=t:i<0&&t<0&&(e=Math.abs(t)),e=g.Kinematic.v3(e,n.current.droneMotionLimits.vertical.acceleration.max,Math.abs(i))}n.current.droneSpatial.velocity.vertical=n.current.droneMotionLimits.vertical.velocity.bound((i<0?-1:1)*e)}for(n=e.last,n.current.droneSpatial.velocity.vertical=0;n.previous;)if(n=n.previous,n.next&&n.previous&&0!==n.current.droneSpatial.velocity.vertical){let e=0;n.current.droneSpatial.velocity.vertical>0&&n.next.current.droneSpatial.velocity.vertical>0?e=n.next.current.droneSpatial.velocity.vertical:n.current.droneSpatial.velocity.vertical<0&&n.next.current.droneSpatial.velocity.vertical<0&&(e=Math.abs(n.next.current.droneSpatial.velocity.vertical));const t=n.current.droneSpatial.altitude.value-n.next.current.droneSpatial.altitude.value;e=g.Kinematic.v3(e,-n.current.droneMotionLimits.vertical.acceleration.min,Math.abs(t)),n.current.droneSpatial.velocity.vertical<0?(e=-e,n.current.droneSpatial.velocity.vertical<e&&(n.current.droneSpatial.velocity.vertical=e)):n.current.droneSpatial.velocity.vertical>e&&(n.current.droneSpatial.velocity.vertical=e)}}static updateSamplesContrainHorizontalVelocitiesByTime(e){let t=e.first;for(;t.next;)if(t=t.next,t.next&&t.previous){const e=t.current.droneSpatial.velocity.horizontal;e.magnitude=Math.min(e.magnitude,g.Kinematic.v4(t.current.droneSpatial.coordinate.distance(t.previous.current.droneSpatial.coordinate),t.current.time-t.previous.current.time)),t.current.droneSpatial.velocity.horizontal=e}}static updateSamplesContrainVerticalVelocitiesByTime(e){let t=e.first;for(;t.next;)if(t=t.next,t.next&&t.previous){const e=g.Kinematic.v4(Math.abs(t.current.droneSpatial.altitude.value-t.previous.current.droneSpatial.altitude.value),t.current.time-t.previous.current.time);t.current.droneSpatial.velocity.vertical=(t.current.droneSpatial.velocity.vertical<0?-1:1)*Math.min(Math.abs(t.current.droneSpatial.velocity.vertical),e)}}static updateSamplesTime(e){let t=e.first;for(;t.next;)if(t=t.next,t.previous){let e=0;const n=(null===t.next?t.previous:t).current.droneSpatial.velocity.horizontal.magnitude,i=Math.abs((null===t.next?t.previous:t).current.droneSpatial.velocity.vertical);if(n>0){const i=t.previous.current.droneSpatial.coordinate.distance(t.current.droneSpatial.coordinate);e=g.Kinematic.t1(n,i)}if(i>0&&(0===n||i>.1*n)){const n=Math.abs(t.current.droneSpatial.altitude.value-t.previous.current.droneSpatial.altitude.value);e=Math.max(g.Kinematic.t1(i,n),e)}e=Math.min(C.Constants.DroneMotionComponentModelSampleTimeMax,e),t.current.time=t.previous.current.time+e}}static updateSamplesOrientationVelocities(e){const t=new T({R:.1,Q:3});t.filter(0);let n=e.first;for(;n.next;){const e=n.next.current.time-n.current.time,i=O.Geometry.angleDifferenceSigned(n.next.current.droneSpatial.orientation.yaw,n.current.droneSpatial.orientation.yaw);n.current.droneSpatial.velocity.rotational=t.filter(n.current.droneMotionLimits.rotational.velocity.bound(g.Kinematic.v4(i,e)));for(const t of Object.keys(n.current.gimbalOrientations)){const i=n.current.gimbalOrientations[t],o=n.next.current.gimbalOrientations[t];o&&(n.current.gimbalVelocities[t]=o.velocity(i,e))}n=n.next}}}t.DroneMotionComponentModel=A;class F extends u.LinkedValue{}t.DroneMotionComponentModelSampleLinked=F;class N{constructor(e,t,n,i,o=null){this.time=0,this.droneSpatial=new l.GeoSpatial,this.droneMotionErrorTolerance=null,this.message=null,this.droneSpatial=e,this.droneMotionLimits=t,this.gimbalOrientations=n,this.gimbalVelocities=i,this.message=o}applyJSON(e){if(this.time=h.Common.parseFloat(e.time,this.time),this.droneSpatial.applyJSON(e.droneSpatial),this.droneMotionLimits.applyJSON(e.droneMotionLimits),this.gimbalOrientations={},e.gimbalOrientations)for(let t of Object.keys(e.gimbalOrientations)){const n=new c.Orientation3Optional;n.applyJSON(e.gimbalOrientations[t]),this.gimbalOrientations[t]=n}if(this.gimbalVelocities={},e.gimbalVelocities)for(let t of Object.keys(e.gimbalVelocities)){const n=new p.Velocity3;n.applyJSON(e.gimbalVelocities[t]),this.gimbalVelocities[t]=n}}interpolate(e,t,n=new b.OrientationReferenceSources){const i=(e,n)=>m.Interpolation.linear(e,n,t),o={};for(const t of Object.keys(this.gimbalOrientations))e.gimbalOrientations[t]?o[t]=this.gimbalOrientations[t].interpolate(e.gimbalOrientations[t],n,new S.OrientationReferenceTargets,i):o[t]=d.Serialization.clone(this.gimbalOrientations[t]);const a={};for(const t of Object.keys(this.gimbalVelocities))e.gimbalVelocities[t]?a[t]=this.gimbalVelocities[t].interpolate(e.gimbalVelocities[t],i):a[t]=d.Serialization.clone(this.gimbalVelocities[t]);const r=new N(this.droneSpatial.interpolate(e.droneSpatial,n,new S.OrientationReferenceTargets,i),this.droneMotionLimits.interpolate(e.droneMotionLimits,i),o,a,d.Serialization.clone(this.message));return r.time=i(this.time,e.time),r}}t.DroneMotionComponentModelSample=N},4049:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacadeComponent=void 0;const i=n(9411),o=n(750),a=n(5974),r=n(7247),s=n(4808),l=n(9871),c=n(5088),u=n(5807),m=n(141),d=n(8656),p=n(4147),h=n(8111),f=n(8210),g=n(4612),y=n(9271),C=n(9983),v=n(908),b=n(3957),S=n(2545),w=n(1747),M=n(7787),x=n(5630),O=n(5694),P=n(5781),T=n(1154),D=n(2838);class E extends i.ApproachableComponent{constructor(){super(...arguments),this.type=o.TypeName.FacadeComponent,this.initialAltitude=new l.Altitude(r.Constants.FacadeComponentInitialAltitude),this.finalAltitude=new l.Altitude(r.Constants.FacadeComponentFinalAltitude),this.cameraSpecification=a.Serialization.clone(r.Constants.MapCameraSpecification),this.gimbalOrientations={0:new g.Orientation3Optional(r.Constants.FacadeComponentGimbalPitch)},this.droneOrientation=null,this.cameraMode=o.CameraMode.Photo,this.cameraPhotoMode=o.CameraPhotoMode.Single,this.capturePriority=o.FacadeCapturePriority.Distance,this.minCaptureInterval=r.Constants.FacadeComponentMinCaptureInterval,this.targetDistance=r.Constants.FacadeComponentDistance,this.sampleDistanceGimbalAngleEnabled=!0,this.pattern=o.FacadePattern.Vertical,this.cornering=o.PathCornering.Rounded,this.cornerRadius=r.Constants.FacadeComponentCornerRadius,this.verticalOverlap=r.Constants.FacadeComponentFrontOverlap,this.horizontalOverlap=r.Constants.FacadeComponentSideOverlap,this.boundaryFace=o.FacadeBoundaryFace.LineLeft,this.boundaryPoints=[]}applyJSON(e){if(super.applyJSON(e),a.Serialization.validateType(e,this.type),this.cameraMode=c.Common.parseString(e.cameraMode,this.cameraMode),this.cameraPhotoMode=c.Common.parseString(e.cameraPhotoMode,this.cameraPhotoMode),this.capturePriority=c.Common.parseString(e.capturePriority,this.capturePriority),this.minCaptureInterval=c.Common.parseFloat(e.minCaptureInterval,this.minCaptureInterval),this.targetDistance=c.Common.parseFloat(e.targetDistance,this.targetDistance),this.sampleDistanceGimbalAngleEnabled=c.Common.parseBoolean(e.sampleDistanceGimbalAngleEnabled,this.sampleDistanceGimbalAngleEnabled),this.pattern=c.Common.parseString(e.pattern,this.pattern),this.cornering=c.Common.parseString(e.cornering,this.cornering),this.cornerRadius=c.Common.parseFloat(e.cornerRadius,this.cornerRadius),this.verticalOverlap=c.Common.parseFloat(e.verticalOverlap,this.verticalOverlap),this.horizontalOverlap=c.Common.parseFloat(e.horizontalOverlap,this.horizontalOverlap),this.boundaryFace=c.Common.parseString(e.boundaryFace,this.boundaryFace),this.boundaryPoints=[],Array.isArray(e.boundaryPoints))for(let t of e.boundaryPoints)this.boundaryPoints.push(a.Serialization.deserialize(t,s.FacadeComponentBoundaryPoint,!1));if(this.droneOrientation=a.Serialization.deserialize(e.droneOrientation,g.Orientation3Optional),e.gimbalOrientations){this.gimbalOrientations={};for(let t of Object.keys(e.gimbalOrientations)){const n=new g.Orientation3Optional;n.applyJSON(e.gimbalOrientations[t]),this.gimbalOrientations[t]=n}}else this.gimbalOrientations={0:new g.Orientation3Optional(r.Constants.FacadeComponentGimbalPitch)};this.initialAltitude.applyJSON(e.initialAltitude),this.finalAltitude.applyJSON(e.finalAltitude),this.cameraSpecification.applyJSON(e.cameraSpecification)}get subtitle(){const e=[];switch(this.initialAltitude.system===this.finalAltitude.system?e.push(p.Strings.formatString(p.Strings.FacadeComponent.subtitle,D.Format.altitude(this.initialAltitude.value).toString(),this.finalAltitude.toString())):e.push(p.Strings.formatString(p.Strings.FacadeComponent.subtitle,this.initialAltitude.toString(),this.finalAltitude.toString())),this.boundaryFace){case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:break;default:e.push(D.Format.enum("FacadePattern",this.pattern))}return e.push(D.Format.enum("FacadeBoundaryFace",this.boundaryFace)),c.Common.joinNotEmpty(e)}verification(e){const t=super.verification(e);if(!t)return null;const n=t;return n.cameraMode=o.CameraMode.Unknown,n.droneOrientation=new g.Orientation3Optional,n.droneOrientation.z=0,n.droneOrientation.zReference=o.OrientationZReference.Path,n.gimbalOrientations={0:new g.Orientation3Optional(0)},n}cameraCaptureConfigurationsEnabled(e=null){return!1}alignment(e){let t=null;const n=this.boundarySegments;if(n.length>0)switch(t=new g.Orientation3Optional,t.yawReference=o.OrientationZReference.North,this.boundaryFace){case o.FacadeBoundaryFace.LineLeft:case o.FacadeBoundaryFace.LineRight:t.yaw=n[0].direction-this.boundaryFaceOrientation;break;case o.FacadeBoundaryFace.PolygonLeft:case o.FacadeBoundaryFace.PolygonRight:const i=this.paths(e);i&&(t.yaw=i[0].sampleForDistance(0).direction-this.boundaryFaceOrientation);break;case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:t.yaw=n[0].direction+Math.PI}return{droneOrientation:t,gimbalOrientations:this.gimbalOrientations}}get referenceOffsets(){return super.referenceOffsets.concat(this.boundaryPointOffsets)}referenceOffsetsHandleCoordinate(e){return this.centerCoordinate(e)}elevationCoordinates(e){const t=super.elevationCoordinates(e);return this.initialAltitude.system!==o.AltitudeSystem.AGL&&this.finalAltitude.system!==o.AltitudeSystem.AGL||t.push(this.approachCoordinate(e)),t}node(e=null){const t=super.node(e),n=new s.FacadeComponentBoundaryPointsNode(t);return this.boundaryPoints.forEach(((e,t)=>{n.children.push(e.node(n,t))})),n.appends.push({title:`${p.Strings.Common.new} ${p.Strings.FacadeComponentBoundaryPoint.name}`,tooltip:null,execute:(e,t=null)=>{this.addBoundaryPoint(e,t)}}),t.children.push(n),t}centerCoordinate(e){let t=u.Vector2.center(this.boundaryPointOffsets);return 2===this.boundaryPoints.length&&(t=t.add(new u.Vector2(this.boundaryPointOffsets[1].subtract(this.boundaryPointOffsets[0]).direction+this.boundaryFaceOrientation,this.targetDistance/2))),this.referenceCoordinate(e,t)}initialReferencedAltitude(e){return this.referencedAltitude(e,this.initialAltitude,this.approachCoordinate(e))}finalReferencedAltitude(e){return this.referencedAltitude(e,this.finalAltitude,this.approachCoordinate(e))}get surfaceSampleDistance(){let e=this.targetDistance;if(this.sampleDistanceGimbalAngleEnabled)for(const t in Object.keys(this.gimbalOrientations)){const n=this.gimbalOrientations[t];if(n&&n.pitch&&Math.abs(n.pitch)>w.Convert.degreesToRadians(1)){const t=Math.cos(n.pitch);e=0===t?e:e/t;break}}return this.cameraSpecification.groundSampleDistance(e)}resetApproachDestinationOffset(e){const t=this.paths(e);t&&t[0].coordinates.length>0&&(this.approachComponent.destinationOffset=this.referenceCoordinate(e).offset(t[0].coordinates[0]))}reverseBoundaryPoints(e){this.boundaryPoints.reverse(),this.resetApproachDestinationOffset(e)}addBoundaryPoint(e,t=null,n=null){return null===n?this.boundaryPoints.push(e):this.boundaryPoints.splice(n,0,e),t&&this.resetApproachDestinationOffset(t),e}get boundaryClosed(){switch(this.boundaryFace){case o.FacadeBoundaryFace.PolygonLeft:case o.FacadeBoundaryFace.PolygonRight:case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:return!0;case o.FacadeBoundaryFace.LineLeft:case o.FacadeBoundaryFace.LineRight:case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:default:return!1}}updateBoundaryPointCoordinate(e,t,n){const i=this.boundaryPoints[e].offset,a=this.referenceCoordinate(n).offset(t);this.boundaryPoints[e].offset=a;let r=this.boundarySegments;switch(this.boundaryFace){case o.FacadeBoundaryFace.LineLeft:case o.FacadeBoundaryFace.LineRight:for(var s=0;s<r.length;s++)for(var l=s+2;l<r.length;l++)if(null!==h.Geometry.lineIntersectionLine(r[s],r[l]))return void(this.boundaryPoints[e].offset=i);break;case o.FacadeBoundaryFace.PolygonLeft:case o.FacadeBoundaryFace.PolygonRight:let t=e,n=0;for(const o of r){if(n!==t&&n!==c.Common.modSafe(t+1,r.length)&&n!==c.Common.modSafe(t-1,r.length)&&null!==h.Geometry.lineIntersectionLine(r[t],o))return void(this.boundaryPoints[e].offset=i);n++}t=c.Common.modSafe(e-1,r.length),n=0;for(const o of r){if(n!==t&&n!==c.Common.modSafe(t+1,r.length)&&n!==c.Common.modSafe(t-1,r.length)&&null!==h.Geometry.lineIntersectionLine(r[t],o))return void(this.boundaryPoints[e].offset=i);n++}break;case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:r.length>1&&(this.boundaryPoints[2].offset=r[0].b.toVector2().add(new u.Vector2(r[0].direction,r[1].length-r[0].length)))}this.resetApproachDestinationOffset(n)}removeBoundaryPoint(e,t){return this.boundaryPoints=this.boundaryPoints.filter((t=>t!==e)),this.resetApproachDestinationOffset(t),e}get boundaryPointOffsets(){return this.boundaryPoints.filter(((e,t)=>0===this.maxBoundaryPoints||t<this.maxBoundaryPoints)).map((e=>e.offset))}get maxBoundaryPoints(){switch(this.boundaryFace){case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:switch(this.pattern){case o.FacadePattern.Horizontal:return 3;case o.FacadePattern.Vertical:return 2}case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:return 3;default:return 0}}get boundarySegments(){const e=this.boundaryPointOffsets;if(e.length<2)return[];switch(this.boundaryFace){case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:const n=[];for(var t=1;t<e.length;t++)n.push(new m.Line2(e[0].toPoint2(),e[t].toPoint2()));return n}const n=e.map(((t,n)=>new m.Line2(t.toPoint2(),e[(n+1)%e.length].toPoint2())));return this.boundaryClosed||n.splice(n.length-1,1),n}boundaryPointCoordinates(e){return this.boundaryPointOffsets.map((t=>this.referenceCoordinate(e,t)))}boundaryPointCoordinate(e,t){return this.referenceCoordinate(e,this.boundaryPoints[t].offset)}get boundaryFaceOrientation(){let e=Math.PI/2;switch(this.boundaryFace){case o.FacadeBoundaryFace.LineLeft:case o.FacadeBoundaryFace.PolygonLeft:case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.SpiralClockwise:e+=Math.PI}return e}endSpatial(e){if(this.patternResolved===o.FacadePattern.Vertical){const t=this.model(e,!0);if(t)return t.firstSample.last.current.droneSpatial}const t=this.paths(e);if(t){const n=c.Common.lastSafe(t);if(n){let i=!1;if(this.patternResolved===o.FacadePattern.Horizontal&&!this.boundaryClosed){const n=this.modelParameters(e,t);n&&n.rows%2==0&&(i=!0)}const a=c.Common.lastSafe(i?n.coordinates.reverse():n.coordinates),r=this.finalReferencedAltitude(e).toSystem(o.AltitudeSystem.ATL);if(a&&r){const e=a.toGeoSpatial();return e.altitude=r,e}}}return super.endSpatial(e)}estimate(e,t){const n=super.estimate(e,t);if(!e.pathRequired&&!e.timeRequired){const t=this.paths(e);if(t){const i=c.Common.lastSafe(t);if(i){const t=c.Common.lastSafe(i.coordinates),a=this.finalReferencedAltitude(e).toSystem(o.AltitudeSystem.ATL);if(t&&a){const e=t.toGeoSpatial();e.altitude=a,n.droneSpatials.push(e)}}}return n}if(!e.altitudeRequired&&!e.timeRequired){const t=this.paths(e);if(t)switch(t.forEach((e=>{n.droneSpatials.push(...e.coordinates.map((e=>e.toGeoSpatial())))})),this.boundaryFace){case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:break;default:if(this.patternResolved===o.FacadePattern.Horizontal&&!this.boundaryClosed){const i=this.modelParameters(e,t);i&&i.rows%2==0&&n.droneSpatials.push(...t[0].coordinates.reverse().map((e=>e.toGeoSpatial())))}}return n}const i=this.model(e,e.timeRequired);return i&&(i.addToEstimate(n),n.cameraCaptures=i.cameraCaptures),n}cachedData(e){const t=e.execution.getComponentState(this);return t.complete?null:t.cachedData(o.TypeName.FacadeComponent,(()=>{const n=this.model(e);if(n){const e=new P.FacadeComponentModelData(n.firstSample,n.captureInterval);return e.updateProgress(t.progress),e}return null}))}engaging(e,t){super.engaging(e,t),this.cachedData(e)}execute(e){const t=super.execute(e);if(t.status!==o.ComponentExecutionStatus.Executing)return t;if(e.execution.getComponentState(this.approachComponent).status!==o.ComponentExecutionStatus.Succeeded)return t;const n=this.cachedData(e);if(!n)return t;0===t.progress&&this.cameraMode!==o.CameraMode.Unknown&&(0===n.setupComponents.length&&Object.keys(this.gimbalOrientations).forEach((e=>{const t=parseInt(e),i=new y.StopCaptureCameraCommand;i.channel=t,n.setupComponents.push(new f.CommandComponent(i));const a=new C.ModeCameraCommand;if(a.channel=t,a.mode=this.cameraMode,n.setupComponents.push(new f.CommandComponent(a)),this.cameraMode===o.CameraMode.Photo){const e=new v.PhotoModeCameraCommand;if(e.channel=t,e.photoMode=n.captureInterval?o.CameraPhotoMode.Interval:this.cameraPhotoMode,n.setupComponents.push(new f.CommandComponent(e)),n.captureInterval){const e=new b.PhotoIntervalCameraCommand;e.channel=t,e.photoInterval=n.captureInterval,n.setupComponents.push(new f.CommandComponent(e))}}n.setupComponents.push((()=>{const e=new O.FocusModeCameraCommand;e.channel=t,e.focusMode=o.CameraFocusMode.Auto;const n=new f.CommandComponent(e);return n.required=!1,n})())})),this.aligned(e)&&!n.addedInitialFocus&&(Object.keys(this.gimbalOrientations).forEach((e=>{const t=parseInt(e);n.setupComponents.push((()=>{const e=new x.FocusCameraCommand;e.channel=t;const n=new f.CommandComponent(e);return n.required=!1,n})())})),n.addedInitialFocus=!0));const{engagement:i}=e;let a=!1;for(const t of n.setupComponents){const n=t.execute(e);if(n.status===o.ComponentExecutionStatus.Pending||n.status===o.ComponentExecutionStatus.Executing){if(a=!0,t.exclusiveExecution)break}else if(n.status===o.ComponentExecutionStatus.Failed&&t.required)return this.failed(e,n.error)}if(a)return t.messages.push(new M.Message(p.Strings.FacadeComponent.messages.setup.title)),t;if(!this.aligned(e))return t;const r=n.sampleLinked;let s=[];if(0===t.progress&&r&&r.current.component&&s.push(r.current.component),n.incrementTime(i.timeSinceLastExecution),n.sampleComponents.filter((t=>{const n=e.execution.getComponentState(t);return n.status===o.ComponentExecutionStatus.Pending||n.status===o.ComponentExecutionStatus.Executing})).length<3){let e=n.sampleLinked;for(;e&&e!==r;)e.current.component&&s.push(e.current.component),e=e.previous}n.addSampleComponents(s.reverse());const l=[];for(const t of n.sampleComponents){const n=t.execute(e);if(n.status===o.ComponentExecutionStatus.Pending||n.status===o.ComponentExecutionStatus.Executing){if(l.push(t),t.exclusiveExecution)break}else if(n.status===o.ComponentExecutionStatus.Failed&&t.required)return this.failed(e,n.error)}return n.sampleComponents=n.sampleComponents.filter((t=>{const n=e.execution.getComponentState(t);return n.status===o.ComponentExecutionStatus.Pending||n.status===o.ComponentExecutionStatus.Executing})),n.sampleLinked.next||0!==l.length?(this.addVelocityCommandsFromModel(e,n,this.cameraMode===o.CameraMode.Photo),t.progress=n.progress,t):this.succeeded(e)}reengagementDroneSpatial(e){const t=this.cachedData(e);return t?t.sampleInterpolated.droneSpatial:super.reengagementDroneSpatial(e)}paths(e){const t=this.pathsOffsets(e).map((t=>{const n=t.map((e=>e.toPoint2()));let i=null;switch(this.boundaryFace){case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:i=[n];break;default:switch(this.cornering){case o.PathCornering.Intersect:i=h.Geometry.cardinalSplinePoint2(n,this.boundaryClosed);break;case o.PathCornering.Rounded:i=h.Geometry.roundedCorners(n,this.cornerRadius,this.boundaryClosed)}}return null!==i&&i.length>0?new d.Path(i.map((t=>t.map((t=>this.referenceCoordinate(e,t.toVector2()))))).filter((e=>{for(const t of e)if(null===t)return!1;return!0}))):null})).filter((e=>e));return 0===t.length?null:t}get pathCorneringEnabled(){switch(this.boundaryFace){case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:return!1;default:return!0}}get patternEnabled(){switch(this.boundaryFace){case o.FacadeBoundaryFace.LineLeft:case o.FacadeBoundaryFace.LineRight:case o.FacadeBoundaryFace.PolygonLeft:case o.FacadeBoundaryFace.PolygonRight:case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:return!0;default:return!1}}get patternResolved(){switch(this.boundaryFace){case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:return o.FacadePattern.Horizontal;default:return this.pattern}}pathsOffsets(e){const t=this.boundarySegments;if(0===t.length)return[[]];const n=t[0].a.toVector2();switch(this.boundaryFace){case o.FacadeBoundaryFace.CircleClockwise:case o.FacadeBoundaryFace.CircleCounterclockwise:return(()=>{const i=[];let a=t[0].direction;if(t.length<2){const e=t[0].length+this.targetDistance,s=r.Constants.FacadeComponentOrbitSteps;for(let t=0;t<=s;t++)i.push(n.add(new u.Vector2(a+2*Math.PI*(t/s)*(this.boundaryFace===o.FacadeBoundaryFace.CircleClockwise?1:-1),e)));return[i]}const s=[],l=this.modelParameters(e),c=t[0].length+this.targetDistance,m=t.length>1?t[1].length+this.targetDistance:c,d=l?l.rows:1,p=r.Constants.FacadeComponentOrbitSteps;for(let e=0;e<d;e++){const t=[];for(let i=0;i<=p;i++)t.push(n.add(new u.Vector2(a+2*Math.PI*(i/p)*(this.boundaryFace===o.FacadeBoundaryFace.CircleClockwise?1:-1),S.Interpolation.linear(c,m,e/d))));s.push(t)}return s})();case o.FacadeBoundaryFace.SpiralClockwise:case o.FacadeBoundaryFace.SpiralCounterclockwise:return(()=>{const i=[],a=this.modelParameters(e);let s=t[0].direction;const l=t[0].length+this.targetDistance,c=t.length>1?t[1].length+this.targetDistance:l,m=a?a.rows:1,d=2*Math.PI*m,p=r.Constants.FacadeComponentOrbitSteps*m;for(let e=0;e<=p;e++)i.push(n.add(new u.Vector2(s+d*(e/p)*(this.boundaryFace===o.FacadeBoundaryFace.SpiralClockwise?1:-1),S.Interpolation.linear(l,c,e/p))));return[i]})()}const i=[],s=t.map((e=>e.add(new u.Vector2(e.direction+this.boundaryFaceOrientation,this.targetDistance))));return s.map(((e,n)=>{const i={segment:e,traverse:null},o=this.boundaryClosed?s[c.Common.modSafe(n+1,s.length)]:n+1<s.length?s[n+1]:null;if(o){let r=h.Geometry.lineIntersectionLine(e,o);if(null===r){const a=e.b.midPoint(o.a).toVector2().subtract(t[n].b.toVector2());a.magnitude=this.targetDistance,i.traverse=t[n].b.toVector2().add(a).toPoint2()}else e.b=a.Serialization.clone(r),o.a=a.Serialization.clone(r)}return i})).forEach(((e,t)=>{(0===t||s[t-1].b.distance(e.segment.a)>1)&&i.push(e.segment.a.toVector2());let n=!1;this.boundaryClosed?(t<s.length-1||e.segment.b.distance(s[0].a)>1)&&(n=!0):n=!0,n&&(i.push(e.segment.b.toVector2()),e.traverse&&i.push(e.traverse.toVector2()))})),[i]}modelParameters(e,t=null){let n=this.approachComponent.destinationReferencedAltitude(e).toSystem(o.AltitudeSystem.ATL),i=this.initialReferencedAltitude(e).toSystem(o.AltitudeSystem.ATL),r=this.finalReferencedAltitude(e).toSystem(o.AltitudeSystem.ATL);if(null===n||null===i||null===r)return null;const s=Math.abs(r.value-i.value);i.value===r.value&&(r.value=i.value+.1);const l=this.surfaceSampleDistance,c=Math.max(Math.ceil(s/(l.height*this.cameraSpecification.image.height*(1-this.verticalOverlap))),1);let u=t?Math.max(Math.ceil(t[0].distance/(l.width*this.cameraSpecification.image.width*(1-this.horizontalOverlap))),1):0;this.boundaryClosed&&(u=Math.max(1,u-1));const m=this.patternResolved,d=a.Serialization.clone(this.resolveDroneMotionLimits(e,this.droneMotionLimits));let p=null,h=null;if(this.cameraMode===o.CameraMode.Photo){let e=this.minCaptureInterval,t=0,n=.1;switch(this.capturePriority===o.FacadeCapturePriority.Time&&(e=Math.ceil(e),n=1),m){case o.FacadePattern.Horizontal:for(t=l.width*this.cameraSpecification.image.width*(1-this.horizontalOverlap);;){const i=T.Kinematic.v4(t,e);if(i<d.horizontal.velocity.max){d.horizontal.velocity.max=i;break}e+=n}break;case o.FacadePattern.Vertical:for(t=l.height*this.cameraSpecification.image.height*(1-this.verticalOverlap);;){const i=T.Kinematic.v4(t,e);if(i<Math.min(d.vertical.velocity.max,Math.abs(d.vertical.velocity.min))){d.vertical.velocity.max=i,d.vertical.velocity.min=-i;break}e+=n}break;default:return null}switch(this.capturePriority){case o.FacadeCapturePriority.Time:p=e;break;case o.FacadeCapturePriority.Distance:h=t;break;default:return null}}return new P.FacadeComponentModelParameters(d,n,i,r,c,u,p,h,this.cameraMode,m,this.boundaryFace,this.boundaryClosed,this.boundaryFaceOrientation,this.gimbalOrientations,this.droneOrientation,this.activeRestrictionZones(e))}model(e,t=!0){const n=this.paths(e);if(!n)return null;const i=this.modelParameters(e,n);return i?P.FacadeComponentModel.generate(e,t,n,i):null}}t.FacadeComponent=E},4808:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacadeComponentBoundaryPointNode=t.FacadeComponentBoundaryPointsNode=t.FacadeComponentBoundaryPoint=void 0;const i=n(79),o=n(5807),a=n(750),r=n(7722),s=n(4147),l=n(2838),c=n(9803),u=n(5974);class m extends r.Identifiable{constructor(){super(...arguments),this.type=a.TypeName.FacadeComponentBoundaryPoint,this.offset=new o.Vector2}applyJSON(e){super.applyJSON(e),u.Serialization.validateType(e,this.type),this.offset.applyJSON(e.offset)}node(e,t){return new p(e,t,this)}title(e){return l.Format.icaoWords(e).join(" ")}abbreviation(e){return l.Format.icaoLetters(e)}}t.FacadeComponentBoundaryPoint=m;class d extends i.ListNode{constructor(e){super(e,"boundaryPoints"),this.emptyChildrenNavigationEnabled=!0,this.propertiesEditorDisabled=!0}get title(){return s.Strings.FacadeComponent.values.boundaryPoints}}t.FacadeComponentBoundaryPointsNode=d;class p extends c.FacadeComponentElementNode{constructor(e,t,n){super(n.id,e,t,s.Strings.FacadeComponentBoundaryPoint.name,!0),this.boundaryPoint=n}}t.FacadeComponentBoundaryPointNode=p},5781:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacadeComponentModelParameters=t.FacadeComponentModelData=t.FacadeComponentModelSample=t.FacadeComponentModel=void 0;const i=n(750),o=n(5974),a=n(7247),r=n(5807),s=n(4830),l=n(9620),c=n(2778),u=n(8210),m=n(5718),d=n(1154),p=n(6750),h=n(9271),f=n(8283),g=n(3447),y=n(2545),C=n(6524),v=n(5088),b=n(4147),S=n(2838),w=n(7787);class M extends m.DroneMotionComponentModel{constructor(e,t,n){super(e),this.captureInterval=t,this.cameraCaptures=n}static addSamplePayloadCommandComponent(e,t,n,i=null){e&&e.current.addPayloadCommandComponent(t,n,i)}static generate(e,t=!0,n,o){o.initialAltitude.value===o.finalAltitude.value&&(o.finalAltitude.value=o.initialAltitude.value+.1);const r=o.captureIntervalDistance?Math.max(Math.min(.5*o.captureIntervalDistance,a.Constants.FacadeComponentSampleDistanceMax),a.Constants.FacadeComponentSampleDistanceMin):a.Constants.FacadeComponentSampleDistanceMax,s=new l.ComponentEstimateCameraCaptures;let c=null;switch(o.pattern){case i.FacadePattern.Horizontal:c=M.createHorizontalSamples(n,r,o,s);break;case i.FacadePattern.Vertical:c=M.createVerticalSamples(e,n,r,o,s);break;default:return null}if(c=c?c.first:null,!c)return null;if(!t)return new M(c,o.captureIntervalTime,s.channels);m.DroneMotionComponentModel.insertSamplesAltitudeChanges(e,c,a.Constants.FacadeComponentSampleDistanceMax,o.approachAltitude.value);let u=!1;switch(o.boundaryFace){case i.FacadeBoundaryFace.SpiralClockwise:case i.FacadeBoundaryFace.SpiralCounterclockwise:u=!0}return m.DroneMotionComponentModel.updateSamplesContrainVelocities(c,a.Constants.FacadeComponentSampleDistanceMax,u),new M(c,o.captureIntervalTime,s.channels)}static createHorizontalSamples(e,t,n,l){let u=n.rows;switch(n.boundaryFace){case i.FacadeBoundaryFace.SpiralClockwise:case i.FacadeBoundaryFace.SpiralCounterclockwise:u=1}let m=null;const g=[],v=n.finalAltitude.value-n.initialAltitude.value;let O=n.initialAltitude.value;for(let P=0;P<u;P++){const T=e[Math.min(e.length-1,P)];let D=T.samplesForMaxDistance(t),E=!0;if(n.boundaryClosed||P%2==0||(E=!1,D=D.reverse()),P>0&&m){const e=v/Math.max(u-1,1),t=o.Serialization.clone(m.current.droneSpatial);t.coordinate=D[0].coordinate,t.altitude.value=m.current.droneSpatial.altitude.value+e;const i=Math.floor(t.distance(m.current.droneSpatial)/a.Constants.FacadeComponentSampleDistanceMax),s=new p.OrientationReferenceSources,l=new C.OrientationReferenceTargets;for(let e=0;e<i;e++){const a=m.current.droneSpatial.interpolate(t,s,l,((t,n)=>y.Interpolation.linear(t,n,e/i)));a.velocity.horizontal=new r.Vector2;let d={};Object.keys(n.gimbalOrientations).forEach((e=>{d[e]=o.Serialization.clone(null==m?void 0:m.current.gimbalOrientations[e])})),m=new c.LinkedValue(new x(a,n.motionLimits,d,u>1?new w.Message(b.Strings.formatString(b.Strings.FacadeComponent.messages.horizontalTraverse.title,S.Format.integer(P+1),S.Format.integer(u)),b.Strings.FacadeComponent.messages.horizontalTraverse.details):null),m)}O+=e}let A=0,F=g.length-1;if(D.forEach(((e,t)=>{const a=e.direction+(E?0:Math.PI),C=p.OrientationReferenceSources.fromZ(a),v=new s.GeoSpatial;v.coordinate=e.coordinate,v.altitude.value=O,v.velocity.horizontal=new r.Vector2(a,n.motionLimits.horizontal.velocity.max),n.droneOrientation?(v.orientation.apply(n.droneOrientation),v.orientation.convertReferences(C)):(v.orientation.yaw=e.direction+n.boundaryFaceOrientation+Math.PI,v.orientation.yawReference=i.OrientationZReference.North);let N={};Object.keys(n.gimbalOrientations).forEach((e=>{N[e]=o.Serialization.clone(n.gimbalOrientations[e]),N[e].convertReferences(C)})),m=new c.LinkedValue(new x(v,n.motionLimits,N,u>1?new w.Message(b.Strings.formatString(b.Strings.FacadeComponent.messages.horizontalRow.title,S.Format.integer(P+1),S.Format.integer(u)),S.Format.percent(E?e.distance/T.distance:1-e.distance/T.distance).toString()):null),m);let I=!1;switch(Object.keys(n.gimbalOrientations).forEach((o=>{null!==n.captureIntervalTime||n.cameraMode===i.CameraMode.Video?0===t?M.addSamplePayloadCommandComponent(m,o,new f.StartCaptureCameraCommand):t===D.length-1&&(M.addSamplePayloadCommandComponent(m,o,new h.StopCaptureCameraCommand),l.add(parseInt(o),n.cameraMode,n.captureIntervalTime?d.Kinematic.t1(n.motionLimits.horizontal.velocity.max,T.distance)/n.captureIntervalTime:1)):null!==n.captureIntervalDistance&&(E?e.distance>=A&&(M.addSamplePayloadCommandComponent(m,o,new f.StartCaptureCameraCommand,!1),I=!0):e.distance<=g[F]&&(M.addSamplePayloadCommandComponent(m,o,new f.StartCaptureCameraCommand,!1),I=!0),I&&l.add(parseInt(o),n.cameraMode,1))})),null!==n.captureIntervalDistance&&I&&(E?(0===P&&g.push(e.distance),A+=n.captureIntervalDistance):F--),n.boundaryFace){case i.FacadeBoundaryFace.SpiralClockwise:case i.FacadeBoundaryFace.SpiralCounterclockwise:O=y.Interpolation.linear(n.initialAltitude.value,n.finalAltitude.value,e.distance/T.distance)}})),!m)return null}return m}static createVerticalSamples(e,t,n,a,l){const u=e=>e.length>0?Math.max(...e.map((e=>e.zone.maxAltitude.value))):null;let m=0,g=0;const y=t[0],C=y.distance/Math.max(a.columns-(a.boundaryClosed?0:1),1),M=y.samplesForMaxDistance(n);let O=null,P=null,T=[];return M.forEach((t=>{var y;if(m>=a.columns)return;const M=p.OrientationReferenceSources.fromZ(t.direction);let D={};Object.keys(a.gimbalOrientations).forEach((e=>{D[e]=o.Serialization.clone(a.gimbalOrientations[e]),D[e].convertReferences(M)}));let E=[];if(t.distance>=g){m++,g=C*m;let o=Math.min(a.initialAltitude.value,a.finalAltitude.value);const r=u(a.activeRestrictionZones.filter((n=>n.zone.coordinateInside(e,t.coordinate))))||o;o=Math.max(r,o);let l=Math.max(a.initialAltitude.value,a.finalAltitude.value);if(l>o){const e=l-o,r=Math.ceil(e/n);let c=l;for(let n=0;n<=r;n++){const n=new s.GeoSpatial;n.coordinate=t.coordinate,n.altitude.value=c,a.droneOrientation&&M?(n.orientation.apply(a.droneOrientation),n.orientation.convertReferences(M)):(n.orientation.yaw=t.direction+a.boundaryFaceOrientation+Math.PI,n.orientation.yawReference=i.OrientationZReference.North),E.push(new x(n,a.motionLimits,D)),c-=e/r}}}if(E.length>0){let e=!0;const n=v.Common.lastSafe(E);if(n){T.forEach((e=>{e.message=new w.Message(b.Strings.formatString(b.Strings.FacadeComponent.messages.verticalTraverse.title,S.Format.integer(m),S.Format.integer(a.columns)),b.Strings.FacadeComponent.messages.verticalTraverse.details),P=new c.LinkedValue(e,P)})),T=[];const o=(null==P?void 0:P.current.droneSpatial.altitude.value)||a.initialAltitude.value;O&&E.length>1&&Math.abs(o-E[0].droneSpatial.altitude.value)>Math.abs(o-n.droneSpatial.altitude.value)&&(e=!1);const r=Object.keys(a.gimbalOrientations);let s=0;const u=E[0].droneSpatial.altitude.value-n.droneSpatial.altitude.value;E.forEach(((t,o)=>{const c=E[0].droneSpatial.altitude.value-t.droneSpatial.altitude.value;if(t.message=new w.Message(b.Strings.formatString(b.Strings.FacadeComponent.messages.verticalColumn.title,S.Format.integer(m),S.Format.integer(a.columns)),v.Common.joinNotEmpty([b.Strings.formatString(e?b.Strings.FacadeComponent.messages.verticalColumn.detailsDown:b.Strings.FacadeComponent.messages.verticalColumn.detailsUp,S.Format.altitude((e?n:E[0]).droneSpatial.altitude.value).toString()),S.Format.percent(e?c/u:1-c/u).toString()])),r.length>0){let n=!1;r.forEach((r=>{if(null!==a.captureIntervalTime||a.cameraMode===i.CameraMode.Video){let n=null;0===o&&e||o===E.length-1&&!e?n=new f.StartCaptureCameraCommand:(0===o&&!e||o===E.length-1&&e)&&(n=new h.StopCaptureCameraCommand),n&&(t.addPayloadCommandComponent(r,n),n instanceof h.StopCaptureCameraCommand&&l.add(parseInt(r),a.cameraMode,a.captureIntervalTime?d.Kinematic.t1(a.motionLimits.vertical.velocity.max,u)/a.captureIntervalTime:1))}else null!==a.captureIntervalDistance&&c>=s&&(t.addPayloadCommandComponent(r,new f.StartCaptureCameraCommand,!1),l.add(parseInt(r),a.cameraMode,1),n=!0)})),null!==a.captureIntervalDistance&&n&&(s+=a.captureIntervalDistance)}})),E=e?E:E.reverse(),E.forEach((e=>{P=new c.LinkedValue(e,P)})),O=t.coordinate}}else{const l=(O||t.coordinate).toGeoSpatial(),c=u(a.activeRestrictionZones.filter((n=>n.zone.coordinateInside(e,t.coordinate)||n.zone.intersections(e,l,t.coordinate.toGeoSpatial(),!1)))),m=(null==P?void 0:P.current.droneSpatial.altitude.value)||a.initialAltitude.value,d=new s.GeoSpatial;d.coordinate=t.coordinate,d.altitude.value=null===c?m:Math.max(m,c),d.velocity.horizontal=new r.Vector2(t.direction,a.motionLimits.horizontal.velocity.max),a.droneOrientation&&M?(d.orientation.apply(a.droneOrientation),d.orientation.convertReferences(M)):(d.orientation.yaw=t.direction+a.boundaryFaceOrientation+Math.PI,d.orientation.yawReference=i.OrientationZReference.North);const p=(null===(y=v.Common.lastSafe(T))||void 0===y?void 0:y.droneSpatial)||(null==P?void 0:P.current.droneSpatial)||l;if(P&&Math.abs(d.altitude.value-p.altitude.value)>n){const e=o.Serialization.clone(d);e.coordinate=p.coordinate,e.velocity.horizontal=new r.Vector2,T.push(new x(e,a.motionLimits,D))}T.push(new x(d,a.motionLimits,D))}})),P}cameraCapture(e=0){return this.cameraCaptures[e]||(this.cameraCaptures[e]=new l.ComponentEstimateCameraCapture(e)),this.cameraCaptures[e]}}t.FacadeComponentModel=M;class x extends m.DroneMotionComponentModelSample{constructor(e,t,n,i=null){super(e,t,n,{},i),this.component=null}addPayloadCommandComponent(e,t,n=null){t.channel=parseInt(e);const i=new u.CommandComponent(t);if(null!==n&&(i.required=n),this.component)if(this.component instanceof g.ListComponent)this.component.childComponents.push(i);else{const e=new g.ListComponent;e.childComponents=[this.component,i],this.component=e}else this.component=i}}t.FacadeComponentModelSample=x;class O extends m.DroneMotionComponentModelData{constructor(e,t){super(e),this.setupComponents=[],this.addedInitialFocus=!1,this.sampleComponents=[],this.captureInterval=t}addSampleComponents(e){this.sampleComponents.push(...e)}}t.FacadeComponentModelData=O,t.FacadeComponentModelParameters=class{constructor(e,t,n,i,o,a,r,s,l,c,u,m,d,p,h,f){this.motionLimits=e,this.approachAltitude=t,this.initialAltitude=n,this.finalAltitude=i,this.rows=o,this.columns=a,this.captureIntervalTime=r,this.captureIntervalDistance=s,this.cameraMode=l,this.pattern=c,this.boundaryFace=u,this.boundaryClosed=m,this.boundaryFaceOrientation=d,this.gimbalOrientations=p,this.droneOrientation=h,this.activeRestrictionZones=f}}},9803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacadeComponentElementNode=void 0;const i=n(6718);class o extends i.ListElementNode{get facadeComponentNode(){return this.parent.parent}}t.FacadeComponentElementNode=o},8731:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadingComponent=void 0;const i=n(750),o=n(8111),a=n(7247),r=n(4147),s=n(7787),l=n(2838),c=n(9123),u=n(5088),m=n(4032),d=n(5974);class p extends m.AchievableDroneMotionComponent{constructor(){super(...arguments),this.type=i.TypeName.HeadingComponent,this.heading=0,this.achievementTime=a.Constants.HeadingComponentAchievementTime,this.achievementDistance=a.Constants.HeadingComponentAchievementDistance}applyJSON(e){super.applyJSON(e),d.Serialization.validateType(e,this.type),this.heading=u.Common.parseFloat(e.heading,this.heading),this.achievementTime=u.Common.parseFloat(e.achievementTime,this.achievementTime),this.achievementDistance=u.Common.parseFloat(e.achievementDistance,this.achievementDistance)}get subtitle(){const e=l.Format.angle(this.heading).toString();return this.achievementDistance>0?r.Strings.formatString(r.Strings.HeadingComponent.subtitle,e,l.Format.angle(this.achievementDistance).toString()):e}get repositionIfIncluded(){return!1}achieved(e){const t=e.execution.getComponentState(this).cachedData(i.TypeName.HeadingComponent);if(t&&t.achievementDistanceValidSince){const n=o.Geometry.angleDifferenceSigned(this.heading,e.drone.projectSpatial(e.engagement.currentDatetime).orientation.yaw);if(Math.abs(n)<=this.achievementDistance&&e.elapsedTime(t.achievementDistanceValidSince)>=this.achievementTime)return!0}return!1}estimate(e,t){const n=super.estimate(e,t),i=d.Serialization.clone(t);i.orientation.yaw=this.heading,n.droneSpatials.push(i);let r=0;if(e.timeRequired){const e=a.Constants.DroneMotionLimits.Max(),s=n.time,l=Math.abs(o.Geometry.angleDifferenceSigned(this.heading,t.orientation.yaw));l-this.achievementDistance>0&&(r=(l-this.achievementDistance)/e.rotational.velocity.max,n.time+=r),n.time+=this.achievementTime;const c=n.children.find((e=>e.component===this.immediateComponent));c&&c.totalTime>n.time&&(n.time+=c.totalTime-n.time,r=c.totalTime),i.updated.increment(n.time-s)}if(this.achievedComponent){const o=d.Serialization.clone(i);o.updated.value=new Date(t.updated.value.getTime()+1e3*r);const a=this.achievedComponent.estimate(e,o);n.children.push(a)}return n.updateWithCameraCaptureConfigurations(e,this.cameraCaptureConfigurations),n}execute(e){const t=super.execute(e);if(t.status!==i.ComponentExecutionStatus.Executing)return t;const{drone:n}=e,a=n.projectSpatial(e.engagement.currentDatetime),u=o.Geometry.angleDifferenceSigned(this.heading,a.orientation.yaw),m=this.resolveDroneMotionLimits(e),d=t.cachedData(i.TypeName.HeadingComponent,(()=>new h(n.spatial.coordinate.geoCoordinate(),Math.abs(u)))),p=new c.Velocity6;m.updateBoundedVelocityRotational(p,u,this.referenceSpatial(e).velocity.rotational);const f=d.startCoordinate,g=a.coordinate.offset(f),y=new c.Velocity6;if(m.updateBoundedVelocityHorizontal(y,g.direction,g.magnitude),p.horizontal=p.horizontal.add(y.horizontal),Math.abs(u)<=this.achievementDistance){d.achievementDistanceValidSince||(d.achievementDistanceValidSince=e.engagement.currentDatetime);const n=e.elapsedTime(d.achievementDistanceValidSince);n<this.achievementTime&&t.messages.push(new s.Message(r.Strings.AchievableDroneMotionComponent.messages.waiting.title,l.Format.number(this.achievementTime-n)))}else d.achievementDistanceValidSince=null,Math.abs(u)>.01&&t.messages.push(new s.Message(r.Strings.HeadingComponent.messages.rotating.title,l.Format.angle(u,!1).toString()));return this.addDroneVelocityCommand(e,p,this.heading),t.progress=d.progress(Math.abs(u)),t}}t.HeadingComponent=p;class h{constructor(e,t){this.achievementDistanceValidSince=null,this.startCoordinate=e,this.totalDistance=t}progress(e){return e>this.totalDistance?0:(this.totalDistance-e)/this.totalDistance}}},6030:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InspectionComponent=void 0;const r=n(750),s=n(9411),l=n(5974),c=n(5088),u=n(2838),m=a(n(7888)),d=n(4147),p=n(6484),h=n(9123),f=n(3854),g=n(7247),y=n(4545),C=n(8111),v=n(1985),b=n(5226),S=n(141),w=n(7787),M=n(6875),x=n(4612),O=n(1747),P=n(4457),T=n(5807),D=n(9871),E=n(2573),A=n(1194),F=n(9271),N=n(8210),I=n(9983),_=n(908),R=n(8283),L=n(3447);class k extends s.ApproachableComponent{constructor(){super(...arguments),this.type=r.TypeName.InspectionComponent,this.altitudeRange=new f.Limits(g.Constants.InspectionComponentAltitudeRange),this.achievementTime=g.Constants.InspectionComponentAchievementTime,this.achievementDistance=new y.DistanceTolerance(g.Constants.InspectionComponentAchievementDistanceHorizontal,g.Constants.InspectionComponentAchievementDistanceVertical),this.orientationDistance=new y.DistanceTolerance(g.Constants.InspectionComponentOrientationDistanceHorizontal,g.Constants.InspectionComponentOrientationDistanceVertical),this.cameraMode=r.CameraMode.Photo,this.cameraPhotoMode=r.CameraPhotoMode.Single,this.inspectionPoints=[]}applyJSON(e){if(super.applyJSON(e),l.Serialization.validateType(e,this.type),this.altitudeRange.applyJSON(e.altitudeRange),this.achievementTime=c.Common.parseFloat(e.achievementTime,this.achievementTime),this.achievementDistance.applyJSON(e.achievementDistance),this.orientationDistance=l.Serialization.deserialize(e.orientationDistance,y.DistanceTolerance),this.cameraMode=c.Common.parseString(e.cameraMode,this.cameraMode),this.cameraPhotoMode=c.Common.parseString(e.cameraPhotoMode,this.cameraPhotoMode),this.inspectionPoints=[],Array.isArray(e.inspectionPoints))for(let t of e.inspectionPoints)this.inspectionPoints.push(l.Serialization.deserialize(t,p.InspectionComponentInspectionPoint,!1))}get subtitle(){return c.Common.joinNotEmpty([0===this.inspectionPoints.length?"":`${u.Format.integer(this.inspectionPoints.length)} ${1===this.inspectionPoints.length?d.Strings.InspectionComponentInspectionPoint.name:d.Strings.InspectionComponentInspectionPoint.multiple}`])||super.subtitle}verification(e){const t=super.verification(e);if(!t)return null;const n=t;return n.orientationDistance=null,n.cameraMode=r.CameraMode.Unknown,n.inspectionPoints.forEach((e=>{e.actions=[]})),n}get inspectionPointOffsets(){return this.inspectionPoints.map((e=>e.offset))}get referenceOffsets(){return super.referenceOffsets.concat(this.inspectionPointOffsets)}referenceOffsetsHandleCoordinate(e){return this.centerCoordinate(e)}elevationCoordinates(e){const t=super.elevationCoordinates(e);return this.inspectionPoints.forEach(((n,i)=>{n.altitude&&n.altitude.system===r.AltitudeSystem.AGL&&t.push(this.referenceCoordinate(e,n.offset))})),t}node(e=null){const t=super.node(e),n=new p.InspectionComponentInspectionPointsNode(t);return this.inspectionPoints.forEach(((e,t)=>{n.children.push(e.node(n,t))})),n.appends.push({title:`${d.Strings.Common.new} ${d.Strings.InspectionComponentInspectionPoint.name}`,tooltip:null,execute:(e,t=null)=>{this.addInspectionPoint(e)}}),t.children.push(n),t}centerCoordinate(e){return this.referenceCoordinate(e,T.Vector2.center(this.inspectionPointOffsets.concat([this.approachComponent.destinationOffset])))}inspectionPointSpatial(e,t){const n=this.inspectionPoints[t],i=this.referenceCoordinate(e,n.offset).toGeoSpatial();return i.altitude=this.referencedAltitude(e,n.altitude,i.coordinate).toSystem(r.AltitudeSystem.ATL)||n.altitude,i}cameraCaptureConfigurationsEnabled(e=null){return!1}endSpatial(e){return this.inspectionPoints.length>0?this.inspectionPointSpatial(e,this.inspectionPoints.length-1):this.approachComponent.destinationSpatial(e)}estimate(e,t){const n=super.estimate(e,t);let i=n.lastDroneSpatial||l.Serialization.clone(t);if(n.droneSpatials.push(i),e.pathRequired||e.timeRequired)this.inspectionPoints.forEach(((t,o)=>{let a=this.inspectionPointSpatial(e,o);if(e.altitudeRequired||e.timeRequired){const o=a.altitude.value-i.altitude.value;if(e.altitudeRequired&&!this.altitudeRange.valid(-o)){const e=l.Serialization.clone(i);e.altitude.value=a.altitude.value+this.altitudeRange.bound(-o),n.droneSpatials.push(e)}if(e.timeRequired){a.updated=l.Serialization.clone(i.updated);const s=this.resolveDroneMotionLimits(e,t.droneMotionLimits),c=i.coordinate.distance(a.coordinate),u=c-this.achievementDistance.horizontal>0?s.timeLineHorizontal(c,c-this.achievementDistance.horizontal):0,m=Math.abs(o)-this.achievementDistance.vertical>0?s.timeLineVertical(o,Math.abs(o)-this.achievementDistance.vertical):0,d=u+(this.altitudeRange.valid(-o)?0:s.timeLineVertical(o,Math.abs(o)-Math.abs(this.altitudeRange.bound(-o))));a.updated.increment(Math.max(m,d)+this.achievementTime),t.actionGroups.forEach(((i,o)=>{a.updated.increment(Math.max(i.droneOrientation?1:0,i.gimbalOrientations?.5:0));let s=0;t.passthrough||this.cameraMode!==r.CameraMode.Photo||((i.gimbalOrientations?Object.keys(i.gimbalOrientations):["0"]).forEach((e=>{n.cameraCapture(parseInt(e)).photos+=1})),s=(new R.StartCaptureCameraCommand).estimatedTime),i.components.forEach((t=>{const i=t.estimate(e,a);n.children.push(i),s=Math.max(s,i.time)})),a.updated.increment(s)})),n.time+=a.updated.elapsedTime(i.updated)}}n.droneSpatials.push(a),i=a})),this.cameraMode===r.CameraMode.Video&&this.captureChannels.forEach((e=>{n.cameraCapture(e).videos+=1}));else{const t=this.endSpatial(e);t&&n.droneSpatials.push(t)}return n}addInspectionPoint(e){this.inspectionPoints.push(e)}cachedData(e,t=null){const n=e.execution.getComponentState(this);return n.complete?null:n.cachedData(r.TypeName.InspectionComponent,(()=>{const t=new z(this.approachComponent.destinationCoordinate(e)),i=Math.floor(n.progress*this.inspectionPoints.length);return i>0&&t.updatePoint(i,l.Serialization.clone(e.drone.spatial.coordinate)),t}))}engaging(e,t){super.engaging(e,t),this.cachedData(e)}get captureChannels(){const e={};return this.cameraMode===r.CameraMode.Video&&(e[0]=!0),this.inspectionPoints.forEach((t=>{t.passthrough&&this.cameraMode===r.CameraMode.Photo||t.actions.forEach((t=>{t.gimbalOrientations&&Object.keys(t.gimbalOrientations).forEach((t=>{e[t]=!0}))}))})),Object.keys(e).map((e=>parseInt(e)))}execute(e){const t=super.execute(e);if(t.status!==r.ComponentExecutionStatus.Executing)return t;if(e.execution.getComponentState(this.approachComponent).status!==r.ComponentExecutionStatus.Succeeded)return t;const n=this.cachedData(e);if(!n)return t;0===t.progress&&this.cameraMode!==r.CameraMode.Unknown&&0===n.intialComponents.length&&this.captureChannels.forEach((e=>{switch(n.intialComponents.push(new N.CommandComponent((()=>{const t=new F.StopCaptureCameraCommand;return t.channel=e,t})())),n.intialComponents.push(new N.CommandComponent((()=>{const t=new I.ModeCameraCommand;return t.channel=e,t.mode=this.cameraMode,t})())),this.cameraMode){case r.CameraMode.Photo:n.intialComponents.push(new N.CommandComponent((()=>{const t=new _.PhotoModeCameraCommand;return t.channel=e,t.photoMode=this.cameraPhotoMode,t})()));break;case r.CameraMode.Video:n.intialComponents.push(new N.CommandComponent((()=>{const t=new R.StartCaptureCameraCommand;return t.channel=e,t})()))}})),0===n.finalComponents.length&&this.cameraMode===r.CameraMode.Video&&this.captureChannels.forEach((e=>{n.finalComponents.push(new N.CommandComponent((()=>{const t=new F.StopCaptureCameraCommand;return t.channel=e,t})()))}));let i=!1;for(const t of n.intialComponents){const n=t.execute(e);if(n.status===r.ComponentExecutionStatus.Pending||n.status===r.ComponentExecutionStatus.Executing){if(i=!0,t.exclusiveExecution)break}else if(n.status===r.ComponentExecutionStatus.Failed&&t.required)return this.failed(e,n.error)}if(i)return t.messages.push(new w.Message(d.Strings.InspectionComponent.messages.setup.title)),t;const{drone:o}=e,a=this.referenceSpatial(e),s=n.pointIndex<this.inspectionPoints.length?this.inspectionPoints[n.pointIndex]:null;s&&t.messages.push(new w.Message(`${d.Strings.InspectionComponentInspectionPoint.name} ${s.abbreviation(n.pointIndex)}`));const m=o.projectSpatial(e.engagement.currentDatetime),p=0===this.inspectionPoints.length?this.approachComponent.destinationSpatial(e):this.inspectionPointSpatial(e,Math.min(this.inspectionPoints.length-1,n.pointIndex)),f=m.coordinate.distance(p.coordinate),y=p.altitude.value-m.altitude.value,b=new h.Velocity6,x=m.coordinate.bearing(p.coordinate),T=this.resolveDroneMotionLimits(e,null==s?void 0:s.droneMotionLimits);if(this.altitudeRange.valid(-y)){T.updateBoundedVelocityHorizontal(b,x,f,a.velocity.horizontal);const e=n.startCoordinate,t=e.geoCoordinate(C.Geometry.lineClosestPoint(new S.Line2(new M.Point2,e.offset(p.coordinate).toPoint2()),e.offset(m.coordinate).toPoint2()).toVector2()),i=m.coordinate.offset(t),o=new h.Velocity6;T.updateBoundedVelocityHorizontal(o,i.direction,i.magnitude),b.horizontal=b.horizontal.add(o.horizontal)}T.updateBoundedVelocityVertical(b,y,a.velocity.vertical);const D=this.achievementDistance.valid(f,y);let E=!1;if(D){n.achievementDistanceValidSince||(n.achievementDistanceValidSince=e.engagement.currentDatetime);const i=e.elapsedTime(n.achievementDistanceValidSince);E=i>=this.achievementTime,E||t.messages.push(new w.Message(d.Strings.AchievableDroneMotionComponent.messages.waiting.title,u.Format.number(this.achievementTime-i)))}else n.achievementDistanceValidSince=null;const A=p,k=!!this.orientationDistance&&this.orientationDistance.valid(f,y);let z=m.coordinate.bearing(A.coordinate);if(D||k)(()=>{if(!s)return E;z=null;const i=s.actionGroups;if(0===i.length)return E;const o=i[n.actionGroupIndex];if(n.actionGroupStarted||(n.actionGroupStarted=new v.Datetime),n.actionGroupGimbalOrientationsComponent||(n.actionGroupGimbalOrientationsComponent=o.gimbalOrientationsComponent),n.actionGroupGimbalOrientationsComponent&&n.actionGroupGimbalOrientationsComponent.execute(e),(o.orientationsAchieved(e)||(new v.Datetime).elapsedTime(n.actionGroupStarted)>g.Constants.InspectionComponentOrientationTimeMax)&&(n.actionGroupOrientationPending=!1),o.droneOrientation&&null!==o.droneOrientation.yaw&&(z=o.droneOrientation.yaw),i.length>1&&t.messages.push(new w.Message(`${d.Strings.InspectionComponentAction.name} ${u.Format.integer(n.actionGroupIndex+1)}`)),n.actionGroupOrientationPending)return!1;if(E){s.passthrough||this.cameraMode!==r.CameraMode.Photo||n.actionGroupCaptureComponent||(n.actionGroupCaptureComponent=(()=>{const e=new L.ListComponent;return(o.gimbalOrientations?Object.keys(o.gimbalOrientations):["0"]).forEach((t=>{const n=new R.StartCaptureCameraCommand;n.channel=parseInt(t);const i=new N.CommandComponent(n);i.required=!1,e.childComponents.push(i)})),e})());const t=[];t.push(...o.components),n.actionGroupCaptureComponent&&t.push(n.actionGroupCaptureComponent);let i=0;for(const n of t){const t=n.execute(e);switch(t.status){case r.ComponentExecutionStatus.Pending:case r.ComponentExecutionStatus.Executing:break;case r.ComponentExecutionStatus.Failed:if(n.required)return this.failed(e,t.error),!1;break;case r.ComponentExecutionStatus.Succeeded:i++}}i===t.length&&n.nextActionGroup()}return n.actionGroupIndex===i.length})()&&n.nextPoint(l.Serialization.clone(e.drone.spatial.coordinate));else{const t=l.Serialization.clone(g.Constants.DroneMotionComponentGimbalOrientation),n=A.altitude.value,i=m.coordinate.distance(A.coordinate),o=m.altitude.value-n;t.pitch=this.achievementDistance.valid(i,o)?0:Math.min(O.Convert.degreesToRadians(0),P.Gimbal.pitch(Math.max(this.achievementDistance.horizontal,i),o)),this.addGimbalVelocityCommand(e,0,t,{x:0,z:z||0})}const B=null===z?0:C.Geometry.angleDifferenceSigned(z,m.orientation.yaw),j=new w.Message(c.Common.joinNotEmpty([f<.1?"":d.Strings.formatString(d.Strings.InspectionComponent.messages.moving.details.distance,u.Format.distance(f).toString()),Math.abs(y)<.1?"":d.Strings.formatString(d.Strings.InspectionComponent.messages.moving.details.altitude,u.Format.altitude(y).toString()),Math.abs(B)<.01?"":d.Strings.formatString(d.Strings.InspectionComponent.messages.moving.details.heading,u.Format.angle(B,!1).toString())]));if(j.details&&t.messages.push(j),this.addDroneVelocityCommand(e,b,0===B?null:z),t.progress=n.pointIndex/this.inspectionPoints.length,t.progress>=1){let t=!1;for(const i of n.finalComponents){const n=i.execute(e);if(n.status===r.ComponentExecutionStatus.Pending||n.status===r.ComponentExecutionStatus.Executing){if(t=!0,i.exclusiveExecution)break}else if(n.status===r.ComponentExecutionStatus.Failed&&i.required)return this.failed(e,n.error)}if(!t)return this.succeeded(e)}return t}reengagementDroneSpatial(e){const t=this.cachedData(e);return t?this.inspectionPointSpatial(e,t.pointIndex):super.reengagementDroneSpatial(e)}static parseAsctecTrinityPoints(e){return e.split("\n").filter(((e,t)=>t>1&&e.startsWith("S;"))).map((e=>{const t=e.split(";");return new B(new b.GeoCoordinate(parseFloat(t[2]),parseFloat(t[1])),new D.Altitude(parseFloat(t[3])),[(()=>{const e=new E.Orientation3;return e.yaw=O.Convert.radiansMod(O.Convert.degreesToRadians(parseFloat(t[4]))),e.yawReference=r.OrientationZReference.North,e.pitch=O.Convert.degreesToRadians(parseFloat(t[5])),e.pitchReference=r.OrientationXReference.Horizon,e})()],!1)}))}static parseDJIPilotKmlPoints(e){const t=[],n=m.xml2js(e),i=(e,t)=>{if(!e||!e.elements||!Array.isArray(e.elements)||0===e.elements.length)return null;for(const n of e.elements)if(!t||n.name===t)return n;return null},o=i(i(i(n,null),null),"Folder");return o&&Array.isArray(o.elements)?(o.elements.forEach((e=>{if("Placemark"===e.name){const n=i(i(i(e,"Point"),"coordinates"),null),o=i(e,"ExtendedData");if(n&&n.text&&o&&Array.isArray(o.elements)){const e=n.text.split(",");if(3===e.length){const n=[];let a=null,s="0",l="0";o.elements.forEach((e=>{if("mis:heading"===e.name)s=i(e,null),s=s?s.text:"0",a||(a=s);else if("mis:gimbalPitch"===e.name)l=i(e,null),l=l?l.text:"0";else if("mis:actions"===e.name){let t=i(e,null);t&&("AircraftYaw"===t.text?e.attributes&&(s=e.attributes.param,a||(a=s)):"GimbalPitch"===t.text?e.attributes&&(l=e.attributes.param):"ShootPhoto"===t.text&&n.push({heading:s,gimbalPitch:l}))}})),t.push(new B(new b.GeoCoordinate(parseFloat(e[1]),parseFloat(e[0])),new D.Altitude(parseFloat(e[2])),0===n.length?[(()=>{const e=new E.Orientation3;return e.yaw=O.Convert.radiansMod(O.Convert.degreesToRadians(s)),e.yawReference=r.OrientationZReference.North,e.pitch=O.Convert.degreesToRadians(parseFloat(l)),e.pitchReference=r.OrientationXReference.Horizon,e})()]:n.map((e=>{const t=new E.Orientation3;return t.yaw=O.Convert.radiansMod(O.Convert.degreesToRadians(e.heading)),t.yawReference=r.OrientationZReference.North,t.pitch=O.Convert.degreesToRadians(parseFloat(e.gimbalPitch)),t.pitchReference=r.OrientationXReference.Horizon,t})),0===n.length))}}}})),t):t}}t.InspectionComponent=k;class z{constructor(e){this.intialComponents=[],this.finalComponents=[],this.pointIndex=0,this.actionGroupIndex=0,this.actionGroupStarted=null,this.actionGroupGimbalOrientationsComponent=null,this.actionGroupOrientationPending=!0,this.actionGroupCaptureComponent=null,this.achievementDistanceValidSince=null,this.startCoordinate=e}updatePoint(e,t){this.pointIndex=e,this.updateActionGroup(0),this.startCoordinate=t,this.achievementDistanceValidSince=null}updateActionGroup(e){this.actionGroupIndex=e,this.actionGroupStarted=null,this.actionGroupGimbalOrientationsComponent=null,this.actionGroupOrientationPending=!0,this.actionGroupCaptureComponent=null}nextPoint(e){this.updatePoint(this.pointIndex+1,e)}nextActionGroup(){this.updateActionGroup(this.actionGroupIndex+1)}}class B{constructor(e,t,n,i){this.coordinate=e,this.altitude=t,this.orientations=n,this.passthrough=i}toInspectionPoint(e,t){const n=new p.InspectionComponentInspectionPoint;return n.offset=t.referenceCoordinate(e).offset(this.coordinate),n.altitude=l.Serialization.clone(this.altitude),n.passthrough=this.passthrough,this.orientations.forEach((e=>{n.actions.push((()=>{const t=new A.InspectionComponentAction;return t.droneOrientation=new x.Orientation3Optional,t.droneOrientation.yaw=e.yaw,t.droneOrientation.yawReference=e.yawReference,t.gimbalOrientations={0:(()=>{const t=new x.Orientation3Optional;return t.pitch=e.pitch,t.pitchReference=e.pitchReference,t})()},t})())})),n}}},1194:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspectionComponentActionGroup=t.InspectionComponentActionNode=t.InspectionComponentActionsNode=t.InspectionComponentAction=void 0;const i=n(750),o=n(5974),a=n(7722),r=n(5293),s=n(79),l=n(4147),c=n(4612),u=n(6718),m=n(5088),d=n(2838),p=n(5664),h=n(7247),f=n(3447),g=n(946),y=n(8210);class C extends a.Identifiable{constructor(){super(...arguments),this.type=i.TypeName.InspectionComponentAction,this.descriptors=new p.Descriptors,this.droneOrientation=null,this.gimbalOrientations=null,this.component=null,this.toString=()=>{const e=[this.droneOrientation?this.droneOrientation.toString():""];if(this.gimbalOrientations)for(const t of Object.keys(this.gimbalOrientations)){const n=this.gimbalOrientations[t].toString();n&&("0"!==t||Object.keys(this.gimbalOrientations).length>1?e.push(`${l.Strings.Gimbal.name} ${t}`,n):e.push(l.Strings.Gimbal.name,n))}return this.component&&e.push(this.component.toString()),m.Common.joinNotEmpty(e)}}applyJSON(e){if(super.applyJSON(e),o.Serialization.validateType(e,this.type),this.descriptors.applyJSON(e.descriptors),this.droneOrientation=o.Serialization.deserialize(e.droneOrientation,c.Orientation3Optional),e.gimbalOrientations){this.gimbalOrientations={};for(let t of Object.keys(e.gimbalOrientations)){const n=new c.Orientation3Optional;n.applyJSON(e.gimbalOrientations[t]),this.gimbalOrientations[t]=n}}else this.gimbalOrientations=null;this.component=o.Serialization.deserialize(e.component,r.SubComponent)}node(e,t){const n=new b(e,t,this);if(this.component){const e=this.component.node(n);e.remove=()=>{this.component=null},n.children.push(e)}return n}title(e){return m.Common.joinNotEmpty([l.Strings.InspectionComponentAction.name,this.abbreviation(e),this.descriptors.description])}abbreviation(e){return d.Format.integer(e+1)}}t.InspectionComponentAction=C;class v extends s.ListNode{constructor(e){super(e,"inspectionActions"),this.emptyChildrenNavigationEnabled=!0,this.propertiesEditorDisabled=!0}get title(){return l.Strings.InspectionComponentInspectionPoint.values.actions}}t.InspectionComponentActionsNode=v;class b extends u.ListElementNode{constructor(e,t,n){super(n.id,e,t,l.Strings.InspectionComponentAction.name,!0),this.action=n}get inspectionPointNode(){return this.parent.parent}get inspectionComponentNode(){return this.inspectionPointNode.inspectionComponentNode}get title(){return this.action.title(this.index)}get subtitle(){return this.action.toString()}}t.InspectionComponentActionNode=b,t.InspectionComponentActionGroup=class{constructor(e){this.descriptors=e.descriptors,this.droneOrientation=e.droneOrientation,this.gimbalOrientations=null,e.gimbalOrientations&&(this.gimbalOrientations={},Object.assign(this.gimbalOrientations,e.gimbalOrientations)),this.components=e.component?[e.component]:[]}compatible(e,t){if(null===this.droneOrientation&&null!==e.droneOrientation)return!1;if(null!==this.droneOrientation&&null===e.droneOrientation)return!1;if(null!==this.droneOrientation&&null!==e.droneOrientation&&!this.droneOrientation.achieved(e.droneOrientation,t))return!1;if(this.gimbalOrientations&&e.gimbalOrientations)for(const t of Object.keys(e.gimbalOrientations))if(this.gimbalOrientations[t])return!1;return!0}add(e){e.gimbalOrientations&&(this.gimbalOrientations||(this.gimbalOrientations={}),Object.assign(this.gimbalOrientations,e.gimbalOrientations)),e.component&&this.components.push(e.component)}orientationsAchieved(e){if(this.droneOrientation&&null!==this.droneOrientation.yaw)for(const t of Object.keys(e.drone.gimbals)){const n=e.drone.gimbal(parseInt(t));if(n.settings.mode===i.GimbalMode.YawFollow){const e=new c.Orientation3Optional;if(e.yaw=n.orientation.yaw,e.yawReference=n.orientation.yawReference,this.droneOrientation.achieved(e,h.Constants.InspectionComponentOrientationDroneThreshold))return!1}}if(this.gimbalOrientations)for(const t of Object.keys(this.gimbalOrientations))if(!this.gimbalOrientations[t].achieved(e.drone.gimbalOrientation(parseInt(t)).asOptional(),h.Constants.InspectionComponentOrientationGimbalThreshold))return!1;return!0}get gimbalOrientationsComponent(){if(!this.gimbalOrientations)return null;const e=new f.ListComponent;for(const t of Object.keys(this.gimbalOrientations)){const n=new g.OrientationGimbalCommand;n.channel=parseInt(t),n.orientation=this.gimbalOrientations[t],e.childComponents.push(new y.CommandComponent(n))}return e}}},6484:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspectionComponentInspectionPointNode=t.InspectionComponentInspectionPointsNode=t.InspectionComponentInspectionPoint=void 0;const i=n(750),o=n(5974),a=n(7722),r=n(5664),s=n(9871),l=n(79),c=n(4147),u=n(2838),m=n(5088),d=n(6718),p=n(1194),h=n(9477),f=n(7247),g=n(5807);class y extends a.Identifiable{constructor(){super(...arguments),this.type=i.TypeName.InspectionComponentInspectionPoint,this.descriptors=new r.Descriptors,this.offset=new g.Vector2,this.altitude=new s.Altitude,this.droneMotionLimits=null,this.passthrough=!1,this.actions=[],this.toString=(e={horizontal:u.Format.velocityHorizontal,vertical:u.Format.velocityVertical,rotational:u.Format.velocityRotational})=>{const t=[this.altitude?this.altitude.toString():"",this.droneMotionLimits&&this.droneMotionLimits.horizontal&&this.droneMotionLimits.horizontal.velocity?this.droneMotionLimits.horizontal.velocity.toString(e.horizontal,{min:!1,max:!0}):"",this.droneMotionLimits&&this.droneMotionLimits.vertical&&this.droneMotionLimits.vertical.velocity?this.droneMotionLimits.vertical.velocity.toString(e.vertical):"",this.droneMotionLimits&&this.droneMotionLimits.rotational&&this.droneMotionLimits.rotational.velocity?this.droneMotionLimits.rotational.velocity.toString(e.rotational):""];return this.actions.forEach((e=>{t.push(e.toString())})),m.Common.joinNotEmpty(t)}}applyJSON(e){if(super.applyJSON(e),o.Serialization.validateType(e,this.type),this.descriptors.applyJSON(e.descriptors),this.offset.applyJSON(e.offset),this.altitude.applyJSON(e.altitude),this.droneMotionLimits=o.Serialization.deserialize(e.droneMotionLimits,h.MotionLimits6Optional),this.passthrough=m.Common.parseBoolean(e.passthrough,this.passthrough),this.actions=[],Array.isArray(e.actions))for(let t of e.actions)this.actions.push(o.Serialization.deserialize(t,p.InspectionComponentAction,!1))}node(e,t){const n=new v(e,t,this),i=new p.InspectionComponentActionsNode(n);return this.actions.forEach(((e,t)=>{i.children.push(e.node(i,t))})),i.appends.push({title:`${c.Strings.Common.new} ${c.Strings.InspectionComponentAction.name}`,tooltip:null,execute:e=>(this.addAction(e),e)}),n.children.push(i),n}title(e){return m.Common.joinNotEmpty([c.Strings.InspectionComponentInspectionPoint.name,this.abbreviation(e),this.descriptors.description])}abbreviation(e){return u.Format.integer(e+1)}addAction(e){this.actions.push(e)}get actionGroups(){const e=[];return this.actions.forEach((t=>{let n=null;for(const i of e)if(i.compatible(t,f.Constants.InspectionComponentActionDroneOrientationCompatibilityThreshold)){n=i;break}n?n.add(t):e.push(new p.InspectionComponentActionGroup(t))})),e}}t.InspectionComponentInspectionPoint=y;class C extends l.ListNode{constructor(e){super(e,"inspectionPoints"),this.emptyChildrenNavigationEnabled=!0,this.propertiesEditorDisabled=!0}get title(){return c.Strings.InspectionComponent.values.inspectionPoints}}t.InspectionComponentInspectionPointsNode=C;class v extends d.ListElementNode{constructor(e,t,n){super(n.id,e,t,c.Strings.InspectionComponentInspectionPoint.name,!0),this.inspectionPoint=n}get inspectionComponentNode(){return this.parent.parent}get title(){return this.inspectionPoint.title(this.index)}get subtitle(){return this.inspectionPoint.toString()}}t.InspectionComponentInspectionPointNode=v},3447:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListComponent=void 0;const i=n(750),o=n(5974),a=n(5088),r=n(5293),s=n(4147),l=n(5807),c=n(7787),u=n(2838);class m extends r.SubComponent{constructor(){super(...arguments),this.type=i.TypeName.ListComponent,this.childComponents=[],this.toString=()=>a.Common.joinNotEmpty(this.childComponents.map((e=>e.toString())))||this.title}applyJSON(e){if(super.applyJSON(e),o.Serialization.validateType(e,this.type),this.childComponents=[],Array.isArray(e.childComponents))for(let t of e.childComponents)this.childComponents.push(o.Serialization.deserialize(t,r.SubComponent,!1))}get subtitle(){return this.childComponents.length>0?this.childComponents.length>1?s.Strings.formatString(s.Strings.ListComponent.subtitle,this.childComponents[0].title,u.Format.integer(this.childComponents.length-1)):this.childComponents[0].title:super.subtitle}verification(e){const t=this.childComponents.map((t=>t.verification(e))).filter((e=>null!=e));if(t.length>0){const e=o.Serialization.clone(this,!0);return e.childComponents=t,e}return null}get exclusiveReadonly(){for(let e of this.childComponents)if(e.exclusiveReadonly)return!0;return!1}get exclusiveExecution(){if(super.exclusiveExecution)return!0;for(let e of this.childComponents)if(e.exclusiveExecution)return!0;return!1}get repositionIfIncluded(){for(let e of this.childComponents)if(e.repositionIfIncluded)return!0;return!1}referenceOffsetsHandleCoordinate(e){const t=[];if(this.childComponents.forEach((n=>{t.push(...n.referenceOffsets.map((t=>n.referenceCoordinate(e,t))))})),t.length<=1)return null;const n=[new l.Vector2];for(let e=1;e<t.length;e++)n.push(t[0].offset(t[e]));return t[0].geoCoordinate(l.Vector2.center(n))}node(e=null){const t=super.node(e);t.emptyChildrenNavigationEnabled=!0,this.childComponents.forEach((e=>{t.addChild(e).remove=()=>{this.childComponents=a.Common.remove(this.childComponents,e)}}));for(const e of t.children)if(null!==e.ordinal){t.ordinal=t.nextOrdinal();break}return t.appends.push({title:`${s.Strings.Common.new} ${s.Strings.Component.name}`,tooltip:null,execute:e=>{e instanceof r.SubComponent&&this.childComponents.push(e)}}),t}estimate(e,t){const n=super.estimate(e,t);return this.childComponents.forEach((i=>{const a=i.estimate(e,t);n.children.push(a);const r=n.lastDroneSpatial;r?t=r:(t=o.Serialization.clone(t)).updated.increment(a.time)})),n.updateWithCameraCaptureConfigurations(e,this.cameraCaptureConfigurations,n.totalTime),n}execute(e){const t=super.execute(e);if(t.status!==i.ComponentExecutionStatus.Executing)return t;let n=0,o=0,a=[];for(let t of this.childComponents){const r=t.execute(e);if(r.status===i.ComponentExecutionStatus.Pending){if(t.exclusiveExecution)break}else if(r.status===i.ComponentExecutionStatus.Executing){if(a.push(n),t.exclusiveExecution)break}else if(r.status===i.ComponentExecutionStatus.Succeeded)o++;else if(r.status===i.ComponentExecutionStatus.Failed&&(o++,t.required))return this.failed(e,r.error);n++}return t.progress=0===this.childComponents.length?1:Math.min(1,(o+1)/this.childComponents.length),o===this.childComponents.length?this.succeeded(e):(a.length>0&&t.messages.push(new c.Message(1===a.length?s.Strings.formatString(s.Strings.ListComponent.messages.running.title.single,u.Format.integer(a[0]+1),u.Format.integer(this.childComponents.length)):s.Strings.formatString(s.Strings.ListComponent.messages.running.title.multiple,u.Format.integer(this.childComponents.length-a.length),u.Format.integer(this.childComponents.length)))),t)}}t.ListComponent=m},8954:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MapComponentModelSample=t.MapComponentModel=t.MapComponentModelData=t.MapComponent=void 0;const o=n(750),a=n(9411),r=n(7247),s=n(2573),l=n(5406),c=n(4147),u=n(5807),m=n(5974),d=n(5088),p=n(2838),h=n(1747),f=n(141),g=n(4830),y=n(9620),C=n(5718),v=n(6875),b=n(2778),S=n(8111),w=n(1154),M=n(8656),x=n(8283),O=n(9271),P=n(8210),T=n(9983),D=n(908),E=n(4612),A=n(2545),F=i(n(9870)),N=n(9871),I=n(6750),_=n(9477),R=n(5486),L=n(5630),k=n(245),z=n(3957),B=n(5694),j=n(7787);class V extends a.ApproachableComponent{constructor(){super(...arguments),this.type=o.TypeName.MapComponent,this.cameraSpecification=m.Serialization.clone(r.Constants.MapCameraSpecification),this.direction=0,this.cameraMode=o.CameraMode.Photo,this.minCaptureInterval=r.Constants.MapComponentMinCaptureInterval,this.targetDistance=null,this.pattern=o.MapPattern.Normal,this.frontOverlap=r.Constants.MapComponentFrontOverlap,this.sideOverlap=r.Constants.MapComponentSideOverlap,this.droneOrientation=null,this.gimbalOrientation=new s.Orientation3(r.Constants.MapComponentGimbalPitch),this.boundaryPoints=[]}applyJSON(e){if(super.applyJSON(e),m.Serialization.validateType(e,this.type),this.direction=d.Common.parseFloat(e.direction),this.cameraMode=d.Common.parseString(e.cameraMode,this.cameraMode),this.minCaptureInterval=d.Common.parseFloat(e.minCaptureInterval,this.minCaptureInterval),this.targetDistance=d.Common.parseFloat(e.targetDistance,null),this.pattern=d.Common.parseString(e.pattern,this.pattern),this.frontOverlap=d.Common.parseFloat(e.frontOverlap,this.frontOverlap),this.sideOverlap=d.Common.parseFloat(e.sideOverlap,this.sideOverlap),this.boundaryPoints=[],Array.isArray(e.boundaryPoints))for(let t of e.boundaryPoints)this.boundaryPoints.push(m.Serialization.deserialize(t,l.MapComponentBoundaryPoint,!1));this.cameraSpecification.applyJSON(e.cameraSpecification),this.droneOrientation=m.Serialization.deserialize(e.droneOrientation,E.Orientation3Optional),this.gimbalOrientation.applyJSON(e.gimbalOrientation)}get subtitle(){return d.Common.joinNotEmpty([this.approachComponent.altitudeRange.altitude.toString(),p.Format.area(this.area()).toString(),this.pattern===o.MapPattern.Normal?"":p.Format.enum("MapPattern",this.pattern),Math.abs(this.gimbalOrientation.pitch-h.Convert.degreesToRadians(-90))<h.Convert.degreesToRadians(1)?"":p.Format.angle(this.gimbalOrientation.pitch,!1).toString(),p.Format.percent(this.frontOverlap).toString(),p.Format.percent(this.sideOverlap).toString()])}area(){return S.Geometry.polygonArea(this.boundaryPointOffsets.map((e=>e.toPoint2())).reverse())}verification(e){const t=super.verification(e);if(!t)return null;const n=t;n.droneMotionLimits=new _.MotionLimits6Optional,n.droneMotionLimits.horizontal=new R.MotionLimitsOptional;const i=this.resolveDroneMotionLimitsCaptureInterval(e).motionLimits.horizontal;return n.droneMotionLimits.horizontal.velocity=i.velocity,n.droneMotionLimits.horizontal.acceleration=i.acceleration,n.targetDistance=this.targetDistanceResolved(e),n.droneOrientation=null,n.cameraMode=o.CameraMode.Unknown,n.gimbalOrientation.pitch=0,n}cameraCaptureConfigurationsEnabled(e=null){return!1}alignment(e){let t=null;const n=this.segments(e);return n&&n.ordered.length>0&&(t=new s.Orientation3,this.droneOrientation?(t.apply(this.droneOrientation),t.convertReferences(I.OrientationReferenceSources.fromZ(n.ordered[0].direction))):(t.yaw=n.ordered[0].direction,t.yawReference=o.OrientationZReference.North)),{droneOrientation:(null==t?void 0:t.asOptional())||null,gimbalOrientations:{0:this.gimbalOrientation.asOptional()}}}get referenceOffsets(){return super.referenceOffsets.concat(this.boundaryPointOffsets)}referenceOffsetsHandleCoordinate(e){return this.centerCoordinate(e)}elevationCoordinates(e){const t=super.elevationCoordinates(e);if(this.approachComponent.altitudeRange.altitude.system===o.AltitudeSystem.AGL){const n=this.model(e,!1,!1,!0);if(n){let e=null,i=n.firstSample;for(;i;){if(e){const n=i.current.distance-e.current.distance;(!i.next||n>=r.Constants.MapComponentTerrainFollowGranularity)&&(t.push(i.current.droneSpatial.coordinate),e=i)}else e=i,t.push(i.current.droneSpatial.coordinate);i=i.next}}}return t}node(e=null){const t=super.node(e),n=new l.MapComponentBoundaryPointsNode(t);return this.boundaryPoints.forEach(((e,t)=>{n.children.push(e.node(n,t))})),n.appends.push({title:`${c.Strings.Common.new} ${c.Strings.MapComponentBoundaryPoint.name}`,tooltip:null,execute:(e,t=null)=>{this.addBoundaryPoint(e,t)}}),t.children.push(n),t}centerCoordinate(e){return this.referenceCoordinate(e,u.Vector2.center(this.boundaryPointOffsets))}targetDistanceResolved(e){let t=this.targetDistance;if(null===t){let n=this.approachComponent.altitudeRange.altitude;if(n.system===o.AltitudeSystem.MSL){const t=this.approachComponent.destinationReferencedAltitude(e).toSystem(o.AltitudeSystem.ATL);t&&(n=t)}if(t=n.value,this.gimbalOrientation.pitch>h.Convert.degreesToRadians(-89)){const e=Math.cos(Math.abs(h.Convert.degreesToRadians(-90)-this.gimbalOrientation.pitch));t=0===e?t:t/e}}return Math.max(t,r.Constants.MapComponentMinimumTargetDistance)}groundSampleDistance(e){return this.cameraSpecification.groundSampleDistance(this.targetDistanceResolved(e))}resetApproachDestinationOffset(e){const t=this.segments(e);if(t){const{motionLimits:n}=this.resolveDroneMotionLimitsCaptureInterval(e),i=t.ordered[0];this.approachComponent.destinationOffset=i.a.toVector2().add(new u.Vector2(i.direction+Math.PI,Math.max(r.Constants.MapComponentBaseDistanceMin,w.Kinematic.d4(0,n.horizontal.velocity.max,n.horizontal.acceleration.max*r.Constants.MapComponentBaseAccelerationMultiplier))))}}addBoundaryPoint(e,t=null,n=null){return null===n?this.boundaryPoints.push(e):this.boundaryPoints.splice(n,0,e),t&&this.resetApproachDestinationOffset(t),e}updateBoundaryPointCoordinate(e,t,n){const i=this.boundaryPoints[e].offset,o=this.referenceCoordinate(n).offset(t);this.boundaryPoints[e].offset=o;let a=this.boundarySegments,r=e,s=0;for(const t of a){if(s!==r&&s!==d.Common.modSafe(r+1,a.length)&&s!==d.Common.modSafe(r-1,a.length)&&null!==S.Geometry.lineIntersectionLine(a[r],t))return void(this.boundaryPoints[e].offset=i);s++}r=d.Common.modSafe(e-1,a.length),s=0;for(const t of a){if(s!==r&&s!==d.Common.modSafe(r+1,a.length)&&s!==d.Common.modSafe(r-1,a.length)&&null!==S.Geometry.lineIntersectionLine(a[r],t))return void(this.boundaryPoints[e].offset=i);s++}this.resetApproachDestinationOffset(n)}removeBoundaryPoint(e,t){return this.boundaryPoints=this.boundaryPoints.filter((t=>t!==e)),t&&this.resetApproachDestinationOffset(t),e}get boundaryPointOffsets(){return this.boundaryPoints.map((e=>e.offset))}get boundarySegments(){return S.Geometry.polygonSegements(this.boundaryPoints.map((e=>e.offset.toPoint2())))}boundaryBoundingBox(e=0){return v.Point2.boundingBox(this.boundaryPointOffsets.map((e=>e.toPoint2())),this.direction+e,1.5)}boundaryPointCoordinates(e){return this.boundaryPointOffsets.map((t=>this.referenceCoordinate(e,t)))}boundaryPointCoordinate(e,t){return this.referenceCoordinate(e,this.boundaryPoints[t].offset)}endSpatial(e){var t;const n=this.model(e,!0,!1,!1);if(n){const e=null===(t=n.firstSample.last)||void 0===t?void 0:t.current.droneSpatial;if(e)return e}return super.endSpatial(e)}estimate(e,t){const n=super.estimate(e,t);if(!e.pathRequired&&!e.timeRequired){const t=this.model(e,!1,!1,!1),i=(this.approachComponent.altitudeRange.altitude.system===o.AltitudeSystem.AGL?e.referencedAltitude(this.approachComponent.altitudeRange.altitude,this.elevations?d.Common.lastSafe(this.elevations):null):this.approachComponent.destinationReferencedAltitude(e)).toSystem(o.AltitudeSystem.ATL);if(t&&i){const e=d.Common.last(t.samples).current.droneSpatial;e.altitude=i,n.droneSpatials.push(e)}return n}const i=this.model(e,e.altitudeRequired,e.timeRequired,!1);return i&&(i.addToEstimate(n),n.cameraCaptures[0]=i.estimatedCapture),n}cachedData(e){const t=e.execution.getComponentState(this);return t.cachedData(o.TypeName.MapComponent,(()=>{const n=this.model(e);if(n){const e=new G(n.firstSample,n.captureInterval);return e.updateProgress(t.progress),e}return null}))}engaging(e,t){super.engaging(e,t),this.cachedData(e)}execute(e){const t=super.execute(e);if(t.status!==o.ComponentExecutionStatus.Executing)return t;if(e.execution.getComponentState(this.approachComponent).status!==o.ComponentExecutionStatus.Succeeded)return t;const n=this.cachedData(e);if(!n)return t;0===t.progress&&this.cameraMode!==o.CameraMode.Unknown&&(0===n.setupComponents.length&&(n.setupComponents.push(new P.CommandComponent(new O.StopCaptureCameraCommand)),n.setupComponents.push((()=>{const e=new T.ModeCameraCommand;return e.mode=this.cameraMode,new P.CommandComponent(e)})()),this.cameraMode===o.CameraMode.Photo&&(n.setupComponents.push((()=>{const e=new D.PhotoModeCameraCommand;return e.photoMode=o.CameraPhotoMode.Interval,new P.CommandComponent(e)})()),n.setupComponents.push((()=>{const e=new z.PhotoIntervalCameraCommand;return e.photoInterval=n.captureInterval,new P.CommandComponent(e)})()),n.setupComponents.push((()=>{const e=new k.AutoLockGimbalCameraCommand;e.enabled=!1;const t=new P.CommandComponent(e);return t.required=!1,t})())),n.setupComponents.push((()=>{const e=new B.FocusModeCameraCommand;e.focusMode=o.CameraFocusMode.Auto;const t=new P.CommandComponent(e);return t.required=!1,t})())),this.aligned(e)&&!n.addedInitialFocus&&(n.setupComponents.push((()=>{const e=new L.FocusCameraCommand,t=new P.CommandComponent(e);return t.required=!1,t})()),n.addedInitialFocus=!0));let i=!1;for(const t of n.setupComponents){const n=t.execute(e);if(n.status===o.ComponentExecutionStatus.Pending||n.status===o.ComponentExecutionStatus.Executing){if(i=!0,t.exclusiveExecution)break}else if(n.status===o.ComponentExecutionStatus.Failed&&t.required)return this.failed(e,n.error)}if(i)return t.messages.push(new j.Message(c.Strings.MapComponent.messages.setup.title)),t;if(!this.aligned(e))return t;const{engagement:a}=e,r=n.sampleLinked;n.incrementTime(a.timeSinceLastExecution);let s=[],l=n.sampleLinked;for(;l&&l!==r;)l.current.commandComponent&&s.push(l.current.commandComponent),l=l.previous;s.reverse().forEach((e=>{n.commandComponents.push(e)}));const u=[];for(const t of n.commandComponents){const n=t.execute(e);if(n.status===o.ComponentExecutionStatus.Pending||n.status===o.ComponentExecutionStatus.Executing){if(u.push(t),t.exclusiveExecution)break}else if(n.status===o.ComponentExecutionStatus.Failed&&t.required)return this.failed(e,n.error)}return n.sampleLinked.next||0!==u.length?(this.addVelocityCommandsFromModel(e,n,!0),t.progress=n.progress,t):this.succeeded(e)}reengagementDroneSpatial(e){const t=this.cachedData(e);return t?t.sampleInterpolated.droneSpatial:super.reengagementDroneSpatial(e)}resolveDroneMotionLimitsCaptureInterval(e){const t=m.Serialization.clone(this.resolveDroneMotionLimits(e,this.droneMotionLimits));let n=this.minCaptureInterval;if(this.cameraMode===o.CameraMode.Photo){const i=this.groundSampleDistance(e).height*this.cameraSpecification.image.height*(1-this.frontOverlap);for(;;){const e=w.Kinematic.v4(i,n);if(e<t.horizontal.velocity.max){t.horizontal.velocity.max=e;break}n+=1}}return{motionLimits:t,captureInterval:n}}model(e,t=!0,n=!0,i=!0){let a=this.segments(e);if(!a)return null;if(this.pattern===o.MapPattern.Grid){let t=this.segments(e,Math.PI/2,d.Common.last(a.ordered).b);if(!t)return null;a.ordered=a.ordered.concat(t.ordered)}const{motionLimits:s,captureInterval:l}=this.resolveDroneMotionLimitsCaptureInterval(e),c=new y.ComponentEstimateCameraCapture;let m=[],p=[];const h=[],f=Math.max(r.Constants.MapComponentBaseDistanceMin,w.Kinematic.d4(0,s.horizontal.velocity.max,s.horizontal.acceleration.max*r.Constants.MapComponentBaseAccelerationMultiplier));a.ordered.forEach((t=>{const n=t.a.toVector2(),i=t.b.toVector2(),a=i.subtract(n).direction,r=n.add(new u.Vector2(a+Math.PI,f)),d=i.add(new u.Vector2(a,f));if(h.push(r.toPoint2()),h.push(n.toPoint2()),h.push(i.toPoint2()),h.push(d.toPoint2()),this.cameraMode!==o.CameraMode.Unknown)switch(m.push(this.referenceCoordinate(e,n)),p.push(this.referenceCoordinate(e,i)),this.cameraMode){case o.CameraMode.Photo:c.photos+=Math.floor(w.Kinematic.t1(s.horizontal.velocity.max,i.subtract(n).magnitude)/l);break;case o.CameraMode.Video:c.videos++}}));const v=S.Geometry.roundedCorners(h,5*f);if(!t&&!n&&!i){const t=[];v.forEach((e=>{e.forEach((e=>{t.push(e.toVector2())}))}));let n=0,i=null;return t.forEach(((t,o)=>{if(0===o){const t=this.approachComponent.destinationCoordinate(e).toGeoSpatial();i=new b.LinkedValue(new J(t,s,{},n),i)}const a=this.referenceCoordinate(e,t).toGeoSpatial();i&&(n+=a.coordinate.distance(i.current.droneSpatial.coordinate)),i=new b.LinkedValue(new J(a,s,{},n),i)})),new U(i,l,c)}const T=[];v.forEach(((t,n)=>{const i=[];0===n&&i.push(this.approachComponent.destinationCoordinate(e)),t.forEach((t=>{i.push(this.referenceCoordinate(e,t.toVector2()))})),T.push(i)}));const D=new M.Path(T).samplesForMaxDistance(r.Constants.MapComponentSampleDistance);if(!D||0===D.length)return null;const E=this.approachComponent.destinationReferencedAltitude(e).toSystem(o.AltitudeSystem.ATL);if(t&&null===E)return null;const _=E||new N.Altitude;let R=null;for(const e of D){const t=new g.GeoSpatial;t.coordinate=e.coordinate,t.altitude.value=_.value,t.velocity.horizontal=new u.Vector2(e.direction,s.horizontal.velocity.max),this.droneOrientation?(t.orientation.apply(this.droneOrientation),t.orientation.convertReferences(I.OrientationReferenceSources.fromZ(e.direction))):(t.orientation.yaw=t.velocity.horizontal.direction,t.orientation.yawReference=o.OrientationZReference.North),R=new b.LinkedValue(new J(t,s,{0:this.gimbalOrientation.asOptional()},e.distance),R)}if(!t&&!n)return new U(R,l,c);if(this.elevations&&R&&this.approachComponent.altitudeRange.altitude.system===o.AltitudeSystem.AGL){const t=R.current.droneSpatial.coordinate,n=new F.default(this.elevations.map((e=>e.coordinate.offset(t).toPoint2())),(e=>e.x),(e=>e.y));let i=null,a=R.first;for(;a;){let s=!1;if(!i||a.current.distance-i.current.distance>.98*r.Constants.MapComponentTerrainFollowGranularity){const l=a.current.droneSpatial.coordinate.offset(t).toPoint2(),c=n.within(l.x,l.y,r.Constants.ComponentElevationTolerance);if(c&&c.length>0&&this.elevations){const t=e.referencedAltitude(this.approachComponent.altitudeRange.altitude,this.elevations[c[0]]).toSystem(o.AltitudeSystem.ATL);t&&(a.current.droneSpatial.altitude=t,i=a,s=!0)}}s||(a.current.droneSpatial.altitude.system=o.AltitudeSystem.AGL),a=a.next}for(i=null,a=R.first;a;){const e=a.current.droneSpatial.altitude;if(e.system===o.AltitudeSystem.ATL){let t=a.previous;const n=i?i.current.droneSpatial.altitude:_,r=i?i.current.distance:0,s=a.current.distance;for(;t&&t.current.droneSpatial.altitude.system===o.AltitudeSystem.AGL;)t.current.droneSpatial.altitude=n.interpolate(e,((e,n)=>A.Interpolation.sigmoid(e,n,((t?t.current.distance:0)-r)/(s-r),1.5))),t=t.previous;i=a}a=a.next}for(a=R.last;a&&a.current.droneSpatial.altitude.system===o.AltitudeSystem.AGL;)a.current.droneSpatial.altitude=i?i.current.droneSpatial.altitude:_,a=a.previous}if(!n)return new U(R,l,c);if(C.DroneMotionComponentModel.updateSamplesContrainVelocities(R,r.Constants.MapComponentSampleDistance,!1),R){let e=!0;m=m.reverse(),p=p.reverse();for(const t of R.list){if(0===m.length&&0===p.length)break;if(t.previous){const n=d.Common.last(e?m:p),i=t.current.droneSpatial.coordinate.distance(n);i<10*r.Constants.MapComponentSampleDistance&&i>t.previous.current.droneSpatial.coordinate.distance(n)&&(t.previous.current.commandComponent=new P.CommandComponent(e?new x.StartCaptureCameraCommand:new O.StopCaptureCameraCommand),e?m.pop():p.pop(),e=!e)}}}return new U(R,l,c)}segments(e,t=0,n=null){if(this.boundaryPoints.length<3)return null;const i=this.boundarySegments,o=this.boundaryBoundingBox(t),a=this.groundSampleDistance(e),r=o.bottomRight.toVector2().subtract(o.bottomLeft.toVector2()),s=Math.ceil(r.magnitude/(a.width*this.cameraSpecification.image.width*(1-this.sideOverlap))),l=r.magnitude/s,c=[];for(let e=0;e<s;e++){const t=new u.Vector2(r.direction,l*e+l/2),n=new f.Line2(o.bottomLeft.toVector2().add(t).toPoint2(),o.topLeft.toVector2().add(t).toPoint2()),a=[];i.forEach((e=>{const t=S.Geometry.lineIntersectionLine(e,n);t&&a.push(t)}));for(let e=0;e+1<a.length;e+=2)c.push(new f.Line2(a[e],a[e+1]))}const m=[];if(c.length>0){let e=n||c[0].b;for(;c.length>0;){c.sort(((t,n)=>Math.min(e.distance(n.a),e.distance(n.b))-Math.min(e.distance(t.a),e.distance(t.b))));const t=c.pop();t&&(e.distance(t.a)<e.distance(t.b)?(m.push(new f.Line2(t.a,t.b)),e=t.b):(m.push(new f.Line2(t.b,t.a)),e=t.a))}}return 0===m.length?null:{ordered:m,baseDistance:l}}}t.MapComponent=V;class G extends C.DroneMotionComponentModelData{constructor(e,t){super(e),this.setupComponents=[],this.addedInitialFocus=!1,this.commandComponents=[],this.captureInterval=t}}t.MapComponentModelData=G;class U extends C.DroneMotionComponentModel{constructor(e,t,n){super(e),this.captureInterval=t,this.estimatedCapture=n}}t.MapComponentModel=U;class J extends C.DroneMotionComponentModelSample{constructor(e,t,n,i){super(e,t,n,{}),this.commandComponent=null,this.distance=i}}t.MapComponentModelSample=J},5406:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapComponentBoundaryPointNode=t.MapComponentBoundaryPointsNode=t.MapComponentBoundaryPoint=void 0;const i=n(79),o=n(5807),a=n(750),r=n(7722),s=n(4147),l=n(2838),c=n(4152),u=n(5974);class m extends r.Identifiable{constructor(){super(...arguments),this.type=a.TypeName.MapComponentBoundaryPoint,this.offset=new o.Vector2}applyJSON(e){super.applyJSON(e),u.Serialization.validateType(e,this.type),this.offset.applyJSON(e.offset)}node(e,t){return new p(e,t,this)}title(e){return l.Format.icaoWords(e).join(" ")}abbreviation(e){return l.Format.icaoLetters(e)}}t.MapComponentBoundaryPoint=m;class d extends i.ListNode{constructor(e){super(e,"boundaryPoints"),this.emptyChildrenNavigationEnabled=!0,this.propertiesEditorDisabled=!0}get title(){return s.Strings.MapComponent.values.boundaryPoints}}t.MapComponentBoundaryPointsNode=d;class p extends c.MapComponentElementNode{constructor(e,t,n){super(n.id,e,t,s.Strings.MapComponentBoundaryPoint.name,!0),this.boundaryPoint=n}}t.MapComponentBoundaryPointNode=p},4152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapComponentElementNode=void 0;const i=n(6718);class o extends i.ListElementNode{get mapComponentNode(){return this.parent.parent}}t.MapComponentElementNode=o},3948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrbitComponent=void 0;const i=n(750),o=n(5807),a=n(9411),r=n(5088),s=n(4147),l=n(2838),c=n(5718),u=n(2778),m=n(7247),d=n(4612),p=n(4457),h=n(9871),f=n(2545),g=n(5974),y=n(6750),C=n(3913);class v extends a.ApproachableComponent{constructor(){super(...arguments),this.type=i.TypeName.OrbitComponent,this.centerOffset=new o.Vector2,this.direction=i.OrbitDirection.Clockwise,this.circumference=2*Math.PI,this.finalAltitude=null,this.finalRadius=null,this.droneOrientation=null,this.gimbalOrientations=null}applyJSON(e){if(super.applyJSON(e),g.Serialization.validateType(e,this.type),this.centerOffset.applyJSON(e.centerOffset),this.direction=r.Common.parseString(e.direction,this.direction),this.circumference=r.Common.parseFloat(e.circumference,2*Math.PI),this.finalAltitude=g.Serialization.deserialize(e.finalAltitude,h.Altitude),this.finalRadius=r.Common.parseFloat(e.finalRadius,null),this.droneOrientation=g.Serialization.deserialize(e.droneOrientation,d.Orientation3Optional),e.gimbalOrientations){this.gimbalOrientations={};for(let t of Object.keys(e.gimbalOrientations)){const n=new d.Orientation3Optional;n.applyJSON(e.gimbalOrientations[t]),this.gimbalOrientations[t]=n}}else this.gimbalOrientations=null}get subtitle(){return r.Common.joinNotEmpty([this.approachComponent.altitudeRange.altitude.toString(),s.Strings.formatString(s.Strings.OrbitComponent.subtitle,l.Format.angle(this.circumference,!1).toString(),l.Format.enum("OrbitDirection",this.direction),l.Format.distance(this.radius).toString())])}verification(e){const t=super.verification(e);if(!t)return null;const n=t;return n.gimbalOrientations=null,n.droneOrientation=new d.Orientation3Optional,n.droneOrientation.z=0,n.droneOrientation.zReference=i.OrientationZReference.Path,t}get pointsOfInterestEnabled(){return!0}get referenceOffsets(){return[this.centerOffset].concat(super.referenceOffsets)}get radius(){return Math.abs(this.approachComponent.destinationOffset.subtract(this.centerOffset).magnitude)}set radius(e){const t=this.approachComponent.destinationOffset.subtract(this.centerOffset);t.magnitude=e,this.approachComponent.destinationOffset=this.centerOffset.add(t)}referenceOffsetsHandleCoordinate(e){return this.centerCoordinate(e)}elevationCoordinates(e){const t=super.elevationCoordinates(e);return this.finalAltitude&&this.finalAltitude.system===i.AltitudeSystem.AGL&&t.push(this.finalCoordinate(e)),t}centerCoordinate(e){return this.referenceCoordinate(e,this.centerOffset)}finalCoordinate(e){const t=this.approachComponent.destinationCoordinate(e),n=this.centerCoordinate(e),o=n.offset(t);return o.direction+=(this.direction===i.OrbitDirection.Clockwise?1:-1)*this.circumference,this.finalRadius&&(o.magnitude=this.finalRadius),n.geoCoordinate(o)}finalReferencedAltitude(e){return this.finalAltitude?this.referencedAltitude(e,this.finalAltitude,this.finalCoordinate(e)):null}alignment(e){const t=this.model(e,!1,!0);return t?{droneOrientation:t.firstSample.current.droneSpatial.orientation.asOptional(),gimbalOrientations:t.firstSample.current.gimbalOrientations}:null}endSpatial(e){var t;const n=this.finalCoordinate(e).toGeoSpatial(),o=null===(t=this.finalReferencedAltitude(e))||void 0===t?void 0:t.toSystem(i.AltitudeSystem.ATL);return o&&(n.altitude=o),n}estimate(e,t){const n=super.estimate(e,t),i=n.time,o=this.model(e,!e.timeRequired);return o&&(e.pathRequired||e.timeRequired?o.addToEstimate(n):n.droneSpatials.push(r.Common.last(o.samples).current.droneSpatial)),n.updateWithCameraCaptureConfigurations(e,this.cameraCaptureConfigurations,n.time-i),n}cachedData(e){const t=e.execution.getComponentState(this);return t.complete?null:t.cachedData(i.TypeName.OrbitComponent,(()=>{const n=this.model(e);if(n){const e=new c.DroneMotionComponentModelData(n.firstSample);return e.filters.rotationalVelocity=new C({R:.1,Q:3}),e.updateProgress(t.progress),e}return null}))}engaging(e,t){super.engaging(e,t),this.cachedData(e)}execute(e){const t=super.execute(e);if(t.status!==i.ComponentExecutionStatus.Executing)return t;if(e.execution.getComponentState(this.approachComponent).status!==i.ComponentExecutionStatus.Succeeded)return t;const n=this.cachedData(e);if(!n)return t;if(!this.aligned(e))return t;const{engagement:o}=e;return n.incrementTime(o.timeSinceLastExecution),n.sampleLinked.next?(this.addVelocityCommandsFromModel(e,n,!1),t.progress=n.progress,t):this.succeeded(e)}reengagementDroneSpatial(e){const t=this.cachedData(e);return t?t.sampleInterpolated.droneSpatial:super.reengagementDroneSpatial(e)}model(e,t=!1,n=!1){const a=this.approachComponent.destinationCoordinate(e),r=this.approachComponent.destinationReferencedAltitude(e).toSystem(i.AltitudeSystem.ATL);if(null===r)return null;const s=this.finalReferencedAltitude(e),l=this.resolveDroneMotionLimits(e,this.droneMotionLimits);let h=null;const C=this.centerCoordinate(e);let v=C.toGeoSpatial();this.pointsOfInterest.length>0&&(v=this.pointsOfInterest[0].referenceSpatial(e.spatialSources,this.reference));const b=C.offset(a),S=b.magnitude,w=Math.max(1,Math.ceil(this.circumference*b.magnitude/m.Constants.OrbitComponentSampleDistance)),M=this.direction===i.OrbitDirection.Clockwise?1:-1;for(let a=0;a<=w;a++){let m={};b.direction+=M*this.circumference*(1/w),this.finalRadius&&(b.magnitude=f.Interpolation.linear(S,this.finalRadius,a/w));const x=C.geoCoordinate(b).toGeoSpatial();let O=r.value;if(this.finalAltitude){const e=s?s.toSystem(i.AltitudeSystem.ATL):null;if(null===e)return null;O=f.Interpolation.linear(O,e.value,a/w)}if(x.altitude.value=O,!t){let t=b.direction+M*(Math.PI/2);h&&(t=h.current.droneSpatial.coordinate.bearing(x.coordinate)),x.velocity.horizontal=new o.Vector2(t,l.horizontal.velocity.max);const n=y.OrientationReferenceSources.fromZ(t);if(h&&(n.x.path=p.Gimbal.pitch(x.coordinate.distance(h.current.droneSpatial.coordinate),h.current.droneSpatial.altitude.value-x.altitude.value)),this.droneOrientation?(x.orientation.apply(this.droneOrientation),x.orientation.convertReferences(n)):(x.orientation.yaw=x.coordinate.bearing(v.coordinate),x.orientation.yawReference=i.OrientationZReference.North),this.gimbalOrientations)m=this.gimbalOrientations;else{const t=new d.Orientation3Optional;t.pitch=p.Gimbal.pitch(x.coordinate.distance(v.coordinate),x.altitude.value-e.referencedAltitude(v.altitude).altitude.value),t.roll=0,t.yaw=x.orientation.yaw,t.yawReference=x.orientation.yawReference,m[0]=t}Object.keys(m).forEach((e=>{m[e]=g.Serialization.clone(m[e]),m[e].convertReferences(n)}))}const P=new c.DroneMotionComponentModelSample(x,l,m,{});if(h=null===h?new u.LinkedValue(P):h.insertAfter(P),n)break}return t||n||c.DroneMotionComponentModel.updateSamplesContrainVelocities(h,m.Constants.OrbitComponentSampleDistance,!0),new c.DroneMotionComponentModel(h)}}t.OrbitComponent=v},864:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathComponent=void 0;const i=n(5807),o=n(5974),a=n(750),r=n(8111),s=n(9411),l=n(4147),c=n(2838),u=n(5088),m=n(1707),d=n(7247),p=n(527),h=n(8656),f=n(438),g=n(4612),y=n(5718),C=n(6241),v=n(3913);class b extends s.ApproachableComponent{constructor(){super(...arguments),this.type=a.TypeName.PathComponent,this.cornering=a.PathCornering.Intersect,this.cornerRadius=d.Constants.PathComponentCornerRadius,this.waypoints=[],this.markers=[]}applyJSON(e){if(super.applyJSON(e),o.Serialization.validateType(e,this.type),this.cornering=u.Common.parseString(e.cornering,this.cornering),this.cornerRadius=u.Common.parseFloat(e.cornerRadius,this.cornerRadius),this.waypoints=[],Array.isArray(e.waypoints))for(let t of e.waypoints)this.waypoints.push(o.Serialization.deserialize(t,m.PathComponentWaypoint,!1));if(this.markers=[],Array.isArray(e.markers))for(let t of e.markers)this.markers.push(o.Serialization.deserialize(t,p.PathComponentMarker,!1))}get subtitle(){return u.Common.joinNotEmpty([`${c.Format.integer(this.waypoints.length)} ${1===this.waypoints.length?l.Strings.PathComponentWaypoint.name:l.Strings.PathComponentWaypoint.multiple}`,0===this.markers.length?"":`${c.Format.integer(this.markers.length)} ${1===this.markers.length?l.Strings.PathComponentMarker.name:l.Strings.PathComponentMarker.multiple}`,0===this.pointsOfInterest.length?"":`${c.Format.integer(this.pointsOfInterest.length)} ${1===this.pointsOfInterest.length?l.Strings.PointOfInterest.name:l.Strings.PointOfInterest.multiple}`])||super.subtitle}verification(e){const t=super.verification(e);if(!t)return null;const n=t;return n.markers.forEach((t=>{if(t.pointOfInterestID=null,t.droneOrientation=null,t.gimbalOrientations=null,t.component){const n=t.component.verification(e);t.component=n||null}})),n}get pointsOfInterestEnabled(){return!0}get pointsOfInterestReferences(){return super.pointsOfInterestReferences.concat(this.markers.filter((e=>e.pointOfInterestID)))}get waypointOffsets(){return this.waypoints.map((e=>e.offset))}get referenceOffsets(){return super.referenceOffsets.concat(this.waypointOffsets)}referenceOffsetsHandleCoordinate(e){return this.centerCoordinate(e)}elevationCoordinates(e){const t=super.elevationCoordinates(e),n=this.markerCoordinates(e);return n&&this.markers.forEach(((e,i)=>{e.altitude&&e.altitude.system===a.AltitudeSystem.AGL&&t.push(n[i])})),t}node(e=null){const t=super.node(e),n=new m.PathComponentWaypointsNode(t);this.waypoints.forEach(((e,t)=>{n.children.push(e.node(n,t))})),n.appends.push({title:`${l.Strings.Common.new} ${l.Strings.PathComponentWaypoint.name}`,tooltip:null,execute:(e,t=null)=>{this.addWaypoint(e,t)}}),t.children.push(n);const i=new p.PathComponentMarkersNode(t);return this.markers.forEach(((e,t)=>{i.children.push(e.node(i,t))})),i.appends.push({title:`${l.Strings.Common.new} ${l.Strings.PathComponentMarker.name}`,tooltip:null,execute:e=>{this.addMarker(e)}}),t.children.push(i),t}centerCoordinate(e){return this.referenceCoordinate(e,i.Vector2.center(this.waypointOffsets.concat([this.approachComponent.destinationOffset])))}waypointCoordinate(e,t){return this.referenceCoordinate(e,this.waypoints[t].offset)}waypointCoordinates(e){return this.waypointOffsets.map((t=>this.referenceCoordinate(e,t)))}addWaypoint(e,t=null){if(t&&this.markers.length>0){const n=this.markerCoordinates(t);if(n){this.waypoints.push(e);const i=this.path(t);return i&&(n.forEach(((e,t)=>{this.markers[t].distance=i.nearestDistance(e)})),this.orderMarkers()),e}}return this.waypoints.push(e),e}markerCoordinates(e){const t=this.path(e);return t?t.samplesForDistances(this.markers.map((e=>e.distance))).map((e=>e.coordinate)):null}addMarker(e){return this.markers.push(e),this.orderMarkers(),e}orderMarkers(){this.markers.sort(((e,t)=>e.distance-t.distance))}path(e){const t=[this.approachComponent.destinationOffset].concat(this.waypointOffsets).map((e=>e.toPoint2()));let n=null;switch(this.cornering){case a.PathCornering.Intersect:n=r.Geometry.cardinalSplinePoint2(t);break;case a.PathCornering.Rounded:n=r.Geometry.roundedCorners(t,[0].concat(this.waypoints.map((e=>e.cornerRadius||this.cornerRadius))).concat([0]))}return null!==n&&n.length>0?new h.Path(n.map((t=>t.map((t=>this.referenceCoordinate(e,t.toVector2()))))).filter((e=>{for(const t of e)if(null===t)return!1;return!0}))):null}alignment(e){const t=this.model(e,!1,!0);if(t){const e=t.firstSample.current.gimbalOrientations;if(0===Object.keys(e).length&&(e[0]=new g.Orientation3Optional,e[0].pitch=0),Object.keys(e).length>0)return{droneOrientation:t.firstSample.current.droneSpatial.orientation.asOptional(),gimbalOrientations:e}}return null}endSpatial(e){if(this.waypoints.length<1)return super.endSpatial(e);const t=this.waypointCoordinate(e,this.waypoints.length-1).toGeoSpatial();let n=this.approachComponent.destinationReferencedAltitude(e).toSystem(a.AltitudeSystem.ATL);const i=this.markerCoordinates(e);return this.markers.forEach(((t,o)=>{t.altitude&&i&&(n=this.referencedAltitude(e,t.altitude,i[o]).toSystem(a.AltitudeSystem.ATL)||n)})),n&&(t.altitude=n),t}estimate(e,t){var n;const i=super.estimate(e,t),o=i.time;if(!e.pathRequired&&!e.timeRequired){const t=null===(n=u.Common.lastSafe(this.waypointCoordinates(e)))||void 0===n?void 0:n.toGeoSpatial();let o=this.approachComponent.destinationReferencedAltitude(e).toSystem(a.AltitudeSystem.ATL);if(t&&o){const n=this.markerCoordinates(e);this.markers.forEach(((t,i)=>{t.altitude&&n&&(o=this.referencedAltitude(e,t.altitude,n[i]).toSystem(a.AltitudeSystem.ATL)||o)})),t.altitude=o,i.droneSpatials.push(t)}return i}if(e.altitudeRequired||e.timeRequired){const t=this.model(e,!e.timeRequired);if(t){t.addToEstimate(i);let n=0;const o=t.firstSample.last.current.time;this.markers.forEach((a=>{if(a.component){let r=t.firstSample;for(;r.next&&a.distance>r.next.current.pathDistance;)r=r.next;const s=a.component.estimate(e,r.current.droneSpatial),l=o-r.current.time;s.time>l&&(n=Math.max(n,s.time-l)),s.timeConcurrent=!0,i.children.push(s)}})),n>0&&(i.time+=n)}}else{const t=this.path(e);t&&t.segments.length>0&&i.droneSpatials.push(...t.coordinates.map((e=>e.toGeoSpatial())))}return i.updateWithCameraCaptureConfigurations(e,this.cameraCaptureConfigurations,i.time-o),i}cachedData(e){const t=e.execution.getComponentState(this);return t.complete?null:t.cachedData(a.TypeName.PathComponent,(()=>{const n=this.model(e);if(n){const e=new y.DroneMotionComponentModelData(n.firstSample);return e.filters.rotationalVelocity=new v({R:.1,Q:3}),e.updateProgress(t.progress),e}return null}))}engaging(e,t){super.engaging(e,t),this.cachedData(e)}execute(e){const t=super.execute(e);if(t.status!==a.ComponentExecutionStatus.Executing)return t;if(e.execution.getComponentState(this.approachComponent).status!==a.ComponentExecutionStatus.Succeeded)return t;const n=this.cachedData(e);if(!n)return t;if(!this.aligned(e))return t;const{engagement:i}=e;n.incrementTime(i.timeSinceLastExecution);const o=[];for(const t of this.markers)if((null===n.sampleLinked.next||t.distance<=n.sampleLinked.current.pathDistance)&&t.component){const n=t.component.execute(e);if(n.status===a.ComponentExecutionStatus.Pending||n.status===a.ComponentExecutionStatus.Executing){if(o.push(t),t.component.exclusiveExecution)break}else if(n.status===a.ComponentExecutionStatus.Failed&&t.component.required)return this.failed(e,n.error)}return n.sampleLinked.next||0!==o.length?(this.addVelocityCommandsFromModel(e,n,!1),t.progress=n.progress,t):this.succeeded(e)}reengagementDroneSpatial(e){const t=this.cachedData(e);return t?t.sampleInterpolated.droneSpatial:super.reengagementDroneSpatial(e)}model(e,t=!1,n=!1){const i=this.path(e);if(!i)return null;const o=this.approachComponent.destinationReferencedAltitude(e).toSystem(a.AltitudeSystem.ATL);if(null===o)return null;let r=new f.PathComponentModelParameterAltitude(o.value),s=new f.PathComponentModelParameterMotionLimits6(this.resolveDroneMotionLimits(e)),l=null,c=new g.Orientation3Optional;c.yaw=0,c.yawReference=a.OrientationZReference.Path,l=new f.PathComponentModelParameterOrientation3Optional(c);let u={},m=null;const p=this.markerCoordinates(e);return p?(this.markers.forEach(((t,n)=>{if(t.altitude){const i=this.referencedAltitude(e,t.altitude,p[n]).toSystem(a.AltitudeSystem.ATL);i&&(r=new f.PathComponentModelParameterAltitude(i.value,t,r))}if(t.droneMotionLimits&&(s=new f.PathComponentModelParameterMotionLimits6(this.resolveDroneMotionLimits(e,t.droneMotionLimits),t,s)),t.droneOrientation&&(l=new f.PathComponentModelParameterOrientation3Optional(t.droneOrientation,t,0===t.distance?null:l)),t.pointOfInterestID){const n=this.pointOfInterestCoordinateByID(e,t.pointOfInterestID),i=this.pointOfInterestReferencedAltitudeByID(e,t.pointOfInterestID),o=i?i.toSystem(a.AltitudeSystem.ATL):null;n&&null!==o&&(m=new f.PathComponentModelParameterPointOfInterest(new C.GeoLocation(n,o),t,m))}if(t.gimbalOrientations)for(const e of Object.keys(t.gimbalOrientations))u[e]=new f.PathComponentModelParameterOrientation3Optional(t.gimbalOrientations[e],t,u[e])})),f.PathComponentModel.generate(e,new f.PathComponentModelParameters(this.reference,t?d.Constants.PathComponentModelSampleDistancePosition:d.Constants.PathComponentModelSampleDistance,i,o.value,r,s,l,u,m),t,n)):null}}t.PathComponent=b},527:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathComponentMarkerNode=t.PathComponentMarkersNode=t.PathComponentMarker=void 0;const i=n(750),o=n(5088),a=n(7722),r=n(9871),s=n(9477),l=n(4612),c=n(5974),u=n(5293),m=n(4147),d=n(2838),p=n(79),h=n(7794),f=n(2545);class g extends a.Identifiable{constructor(e=0){super(),this.type=i.TypeName.PathComponentMarker,this.positioning=i.PathMarkerPositioning.Coordinate,this.interpolation=new f.Interpolation,this.component=null,this.altitude=null,this.pointOfInterestID=null,this.droneMotionLimits=null,this.droneOrientation=null,this.gimbalOrientations=null,this.toString=(e={horizontal:d.Format.velocityHorizontal,vertical:d.Format.velocityVertical,rotational:d.Format.velocityRotational})=>{const t=[this.altitude?this.altitude.toString():"",this.pointOfInterestID?m.Strings.PathComponentMarker.values.pointOfInterestID:"",this.droneMotionLimits&&this.droneMotionLimits.horizontal&&this.droneMotionLimits.horizontal.velocity?this.droneMotionLimits.horizontal.velocity.toString(e.horizontal,{min:!1,max:!0}):"",this.droneMotionLimits&&this.droneMotionLimits.vertical&&this.droneMotionLimits.vertical.velocity?this.droneMotionLimits.vertical.velocity.toString(e.vertical):"",this.droneMotionLimits&&this.droneMotionLimits.rotational&&this.droneMotionLimits.rotational.velocity?this.droneMotionLimits.rotational.velocity.toString(e.rotational):"",this.droneOrientation?this.droneOrientation.toString():""];if(this.gimbalOrientations)for(const e of Object.keys(this.gimbalOrientations)){const n=this.gimbalOrientations[e].toString();n&&("0"!==e||Object.keys(this.gimbalOrientations).length>1?t.push(`${m.Strings.Gimbal.name} ${e}`,n):t.push(m.Strings.Gimbal.name,n))}return this.component&&t.push(this.component.toString()),o.Common.joinNotEmpty(t)},this.distance=e}applyJSON(e){if(super.applyJSON(e),c.Serialization.validateType(e,this.type),this.distance=o.Common.parseFloat(e.distance,this.distance),this.positioning=o.Common.parseString(e.positioning,this.positioning),this.interpolation.applyJSON(e.interpolation),this.component=c.Serialization.deserialize(e.component,u.SubComponent),this.altitude=c.Serialization.deserialize(e.altitude,r.Altitude),this.pointOfInterestID=o.Common.parseString(e.pointOfInterestID,this.pointOfInterestID),this.droneMotionLimits=c.Serialization.deserialize(e.droneMotionLimits,s.MotionLimits6Optional),this.droneOrientation=c.Serialization.deserialize(e.droneOrientation,l.Orientation3Optional),e.gimbalOrientations){this.gimbalOrientations={};for(let t of Object.keys(e.gimbalOrientations)){const n=new l.Orientation3Optional;n.applyJSON(e.gimbalOrientations[t]),this.gimbalOrientations[t]=n}}else this.gimbalOrientations=null}node(e,t){const n=new C(e,t,this);if(this.component){const e=this.component.node(n);e.remove=()=>{this.component=null},n.children.push(e)}return n}get interpolationPossible(){return Boolean(this.altitude||this.pointOfInterestID||this.droneMotionLimits||this.droneOrientation||this.gimbalOrientations)}get interpolationPreferred(){return this.interpolationPossible&&null===this.pointOfInterestID}}t.PathComponentMarker=g;class y extends p.ListNode{constructor(e){super(e,"markers"),this.emptyChildrenNavigationEnabled=!0,this.propertiesEditorDisabled=!0}get title(){return m.Strings.PathComponent.values.markers}}t.PathComponentMarkersNode=y;class C extends h.PathComponentElementNode{constructor(e,t,n){super(n.id,e,t,m.Strings.PathComponentMarker.name,!1),this.marker=n,n.component||this.appends.push({title:`${m.Strings.Common.set} ${m.Strings.Component.name}`,tooltip:null,execute:e=>{e instanceof u.SubComponent&&(this.marker.component=e)}})}get subtitle(){return this.marker.toString()}}t.PathComponentMarkerNode=C},438:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathComponentModelParameters=t.PathComponentModelParameterPointOfInterest=t.PathComponentModelParameterMotionLimits6=t.PathComponentModelParameterOrientation3Optional=t.PathComponentModelParameterAltitude=t.PathComponentModelParameterLinked=t.PathComponentModelParameter=t.PathComponentModelSample=t.PathComponentModel=void 0;const i=n(2778),o=n(4612),a=n(5051),r=n(2903),s=n(4830),l=n(5974),c=n(5718),u=n(750),m=n(2545),d=n(5088),p=n(5807),h=n(4457),f=n(6750),g=n(6524),y=n(944);class C extends c.DroneMotionComponentModel{static generate(e,t,n,i){const o=C.createSamples(t,n,i);return o?(n||i||(c.DroneMotionComponentModel.insertSamplesAltitudeChanges(e,o,t.maxSampleDistance,t.approachAltitudeATL),c.DroneMotionComponentModel.updateSamplesContrainVelocities(o,t.maxSampleDistance,!0)),new C(o)):null}static createSamples(e,t,n){let a=null;const c=e.path.samplesForMaxDistance(e.maxSampleDistance);if(!c||0===c.length)return null;if(t)return c.forEach((t=>{e.advanceToDistance(t.distance);const n=new s.GeoSpatial;n.coordinate=t.coordinate,n.altitude.value=e.altitude.valueInterpolated(t.distance),a=new i.LinkedValue(new v(t.distance,n,e.droneMotionLimits.current.value),a)})),a;for(const t of c){e.advanceToDistance(t.distance);const c=new s.GeoSpatial;c.coordinate=t.coordinate,c.altitude.value=e.altitude.valueInterpolated(t.distance),c.velocity.horizontal=new p.Vector2(t.direction,e.droneMotionLimits.valueInterpolated(t.distance).horizontal.velocity.max);const m={},d=new f.OrientationReferenceSources(new y.OrientationXReferenceSources,new r.OrientationZReferenceSources(c.velocity.horizontal.direction,t.direction,t.direction));if(a&&(d.x.path=h.Gimbal.pitch(t.distance-a.current.pathDistance,a.current.droneSpatial.altitude.value-c.altitude.value)),e.pointOfInterest){const n=e.pointOfInterestInterpolates?e.pointOfInterest.valueInterpolated(t.distance):e.pointOfInterest.current.value;c.orientation.yaw=c.coordinate.bearing(n.coordinate),c.orientation.yawReference=u.OrientationZReference.North,d.z.heading=c.orientation.yaw;const i=new o.Orientation3Optional,a=c.coordinate.distance(n.coordinate),r=c.altitude.value-n.altitude.value;i.pitch=h.Gimbal.pitch(a,r),i.roll=0,i.yaw=c.orientation.yaw,i.yawReference=c.orientation.yawReference,m[0]=i}e.droneOrientation&&(e.droneOrientationInterpolates?c.orientation.apply(e.droneOrientation.valueInterpolated(t.distance,d)):(c.orientation.apply(e.droneOrientation.current.value),c.orientation.convertReferences(d)));for(const n of e.gimbalOrientations)e.gimbalOrientationInterpolates(n.channel)?m[n.channel]=n.orientation.valueInterpolated(t.distance,d):(m[n.channel]=l.Serialization.clone(n.orientation.current.value),m[n.channel].convertReferences(d));if(a=new i.LinkedValue(new v(t.distance,c,e.droneMotionLimits.current.value,m),a),n)break}return a}}t.PathComponentModel=C;class v extends c.DroneMotionComponentModelSample{constructor(e=0,t=new s.GeoSpatial,n=new a.MotionLimits6,i={},o={}){super(t,n,i,o),this.type=u.TypeName.PathComponentModelSample,this.pathDistance=e,this.droneMotionLimits=n}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.pathDistance=d.Common.parseFloat(e.pathDistance,this.pathDistance)}interpolate(e,t,n){const i=super.interpolate(e,t,n);return new v(m.Interpolation.linear(this.pathDistance,e.pathDistance,t),i.droneSpatial,i.droneMotionLimits,i.gimbalOrientations,i.gimbalVelocities)}}t.PathComponentModelSample=v;class b{constructor(e,t=null){this.value=e,this.marker=t}get distance(){return this.marker?this.marker.distance:0}}t.PathComponentModelParameter=b;class S extends i.LinkedValue{constructor(e,t=null,n=null){super(new b(e,t),null!==t&&t.distance>0?n:null)}get nextMarker(){return this.next?this.next.current.marker:null}interpolationPercentForDistance(e){return this.next&&this.next.current.distance>this.current.distance?(e-this.current.distance)/(this.next.current.distance-this.current.distance):0}}t.PathComponentModelParameterLinked=S,t.PathComponentModelParameterAltitude=class extends S{valueInterpolated(e){return this.next&&this.nextMarker?this.nextMarker.interpolation.interpolate(this.current.value,this.next.current.value,this.interpolationPercentForDistance(e)):this.current.value}},t.PathComponentModelParameterOrientation3Optional=class extends S{valueInterpolated(e,t){if(this.next&&this.nextMarker){const n=this.nextMarker.interpolation,i=this.interpolationPercentForDistance(e);return this.current.value.interpolate(this.next.current.value,t,new g.OrientationReferenceTargets,((e,t)=>n.interpolate(e,t,i)))}return this.current.value}},t.PathComponentModelParameterMotionLimits6=class extends S{valueInterpolated(e){if(this.next&&this.nextMarker){const t=this.nextMarker.interpolation,n=this.interpolationPercentForDistance(e);return this.current.value.interpolate(this.next.current.value,((e,i)=>t.interpolate(e,i,n)))}return this.current.value}},t.PathComponentModelParameterPointOfInterest=class extends S{valueInterpolated(e){const t=this.current.value;if(this.next&&this.nextMarker){const n=this.next.current.value,i=l.Serialization.clone(t),o=this.nextMarker.interpolation,a=this.interpolationPercentForDistance(e);return i.coordinate=t.coordinate.interpolate(n.coordinate,(e=>o.interpolate(0,e,a))),i.altitude=i.altitude.interpolate(n.altitude,((e,t)=>o.interpolate(e,t,a))),i}return t}},t.PathComponentModelParameters=class{constructor(e,t,n,i,o,a,r,s,l){this._distance=0,this.reference=e,this.maxSampleDistance=t,this.path=n,this.approachAltitudeATL=i,this._altitude=o,this._droneMotionLimits=a,this._droneOrientation=r,this._gimbalOrientations=s,this._pointOfInterest=l,this.resetToFirst()}resetToFirst(){this._distance=0,this._altitude=this._altitude.first,this._droneMotionLimits=this._droneMotionLimits.first,this._droneOrientation=this._droneOrientation.first;for(const e of Object.keys(this._gimbalOrientations))this._gimbalOrientations[e]=this._gimbalOrientations[e].first;return this._pointOfInterest&&(this._pointOfInterest=this._pointOfInterest.first),this}advanceToDistance(e){this._distance=e,this._altitude.next&&this._altitude.next.current.distance<=e&&(this._altitude=this._altitude.next),this._droneMotionLimits.next&&this._droneMotionLimits.next.current.distance<=e&&(this._droneMotionLimits=this._droneMotionLimits.next),this._droneOrientation.next&&this._droneOrientation.next.current.distance<=e&&(this._droneOrientation=this._droneOrientation.next);for(const t of Object.keys(this._gimbalOrientations)){const n=this._gimbalOrientations[t];n.next&&n.next.current.distance<=e&&(this._gimbalOrientations[t]=n.next)}return this._pointOfInterest&&this._pointOfInterest.next&&this._pointOfInterest.next.current.distance<=e&&(this._pointOfInterest=this._pointOfInterest.next),this}get distance(){return this._distance}get altitude(){return this._altitude}get droneMotionLimits(){return this._droneMotionLimits}get droneOrientation(){const e=this.pointOfInterest;return e&&this._droneOrientation.current.distance<=e.current.distance?null:this._droneOrientation}get droneOrientationInterpolates(){const e=this.pointOfInterestNext;return null!==this._droneOrientation.next&&(null===e||this._droneOrientation.next.current.distance<e.current.distance)}get gimbalOrientations(){const e=[];for(const t of Object.keys(this._gimbalOrientations)){const n=this.gimbalOrientation(parseInt(t));n&&e.push({channel:parseInt(t),orientation:n})}return e}gimbalOrientation(e){const t=this._gimbalOrientations[e];if(this.distance<t.current.distance)return null;if(0===e){const e=this.pointOfInterest;if(e&&t&&t.current.distance<=e.current.distance)return null}return t}gimbalOrientationInterpolates(e){const t=this._gimbalOrientations[e];if(t&&t.next){if(0===e){const e=this.pointOfInterestNext;return null===e||t.next.current.distance<e.current.distance}return!0}return!1}get orientationDistanceCurrent(){const e=this._droneOrientation.current.distance,t=this._gimbalOrientations[0];return t&&t.current.distance<e?t.current.distance:e}get orientationDistanceNext(){let e=null;this._droneOrientation.next&&(e=this._droneOrientation.next.current.distance);const t=this._gimbalOrientations[0];return t&&t.next&&(e=null===e?t.next.current.distance:Math.min(e,t.next.current.distance)),e}get pointOfInterest(){return this._pointOfInterest&&this._distance>=this._pointOfInterest.current.distance&&this._pointOfInterest.current.distance>=this.orientationDistanceCurrent?this._pointOfInterest:null}get pointOfInterestInterpolates(){return null!==this.pointOfInterestNext}get pointOfInterestNext(){if(this._pointOfInterest&&this._pointOfInterest.next){const e=this.orientationDistanceNext;if(null===e||this._pointOfInterest.next.current.distance<e)return this._pointOfInterest}return null}}},7794:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathComponentElementNode=void 0;const i=n(6718);class o extends i.ListElementNode{get pathComponentNode(){return this.parent.parent}}t.PathComponentElementNode=o},1707:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathComponentWaypointNode=t.PathComponentWaypointsNode=t.PathComponentWaypoint=void 0;const i=n(79),o=n(5807),a=n(750),r=n(5088),s=n(5664),l=n(7722),c=n(4147),u=n(2838),m=n(7794),d=n(5974);class p extends l.Identifiable{constructor(){super(...arguments),this.type=a.TypeName.PathComponentWaypoint,this.offset=new o.Vector2,this.cornerRadius=null,this.descriptors=new s.Descriptors}applyJSON(e){super.applyJSON(e),d.Serialization.validateType(e,this.type),this.cornerRadius=r.Common.parseFloat(e.cornerRadius,null),this.descriptors.applyJSON(e.descriptors),this.offset.applyJSON(e.offset)}node(e,t){return new f(e,t,this)}title(e){return u.Format.icaoWords(e).join(" ")}abbreviation(e){return u.Format.icaoLetters(e)}}t.PathComponentWaypoint=p;class h extends i.ListNode{constructor(e){super(e,"waypoints"),this.emptyChildrenNavigationEnabled=!0,this.propertiesEditorDisabled=!0}get title(){return c.Strings.PathComponent.values.waypoints}}t.PathComponentWaypointsNode=h;class f extends m.PathComponentElementNode{constructor(e,t,n){super(n.id,e,t,c.Strings.PathComponentWaypoint.name,!0),this.waypoint=n}get subtitle(){return this.waypoint.descriptors.description}}t.PathComponentWaypointNode=f},6437:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlanComponent=void 0;const i=n(737),o=n(5974),a=n(5293),r=n(750),s=n(5807),l=n(4545),c=n(7247),u=n(3447),m=n(3071),d=n(8328),p=n(5088),h=n(5167),f=n(9477),g=n(3310);class y extends i.Component{constructor(){super(...arguments),this.type=r.TypeName.PlanComponent,this.takeoffOffset=null,this.takeoffDistance=new l.DistanceTolerance(c.Constants.PlanComponentTakeoffDistanceHorizontal),this.droneMotionLimits=c.Constants.DroneMotionLimits.Conservative(),this.droneMotionErrorTolerance=new l.DistanceTolerance(c.Constants.DroneMotionErrorToleranceHorizontal,c.Constants.DroneMotionErrorToleranceVertical),this.droneMotionErrorLimits=null,this.rootComponent=new u.ListComponent,this.restrictionZones=[],this.altitudeContinuity=!1,this.reengagementRules=new d.PlanReengagementRules,this.completeAction=r.PlanCompleteAction.None,this.userInterfaceSettings=null}applyJSON(e){if(super.applyJSON(e),o.Serialization.validateType(e,this.type),this.descriptors.applyJSON(e.descriptors),this.coordinate.applyJSON(e.coordinate),this.droneMotionLimits.applyJSON(e.droneMotionLimits),this.takeoffDistance.applyJSON(e.takeoffDistance),this.takeoffOffset=o.Serialization.deserialize(e.takeoffOffset,s.Vector2),e.droneMotionErrorTolerance&&this.droneMotionErrorTolerance.applyJSON(e.droneMotionErrorTolerance),e.droneMotionErrorLimits&&(this.droneMotionErrorLimits=o.Serialization.deserialize(e.droneMotionErrorLimits,f.MotionLimits6Optional)),this.rootComponent=o.Serialization.deserialize(e.rootComponent,a.SubComponent,!1),this.restrictionZones=[],Array.isArray(e.restrictionZones))for(let t of e.restrictionZones)this.restrictionZones.push(o.Serialization.deserialize(t,m.PlanRestrictionZone,!1));this.altitudeContinuity=p.Common.parseBoolean(e.altitudeContinuity,!1),e.reengagementRules?this.reengagementRules.applyJSON(e.reengagementRules):this.reengagementRules=new d.PlanReengagementRules,this.completeAction=p.Common.parseString(e.completeAction,this.completeAction),this.userInterfaceSettings=o.Serialization.deserialize(e.userInterfaceSettings,h.UserInterfaceSettings,!0)}verification(e){const t=this.rootComponent.verification(e);if(!t)return null;const n=o.Serialization.clone(this,!0);return n.rootComponent=t,n}cameraCaptureConfigurationsEnabled(e=null){return!1}get referenceOffsets(){const e=super.referenceOffsets;return this.restrictionZones.forEach((t=>{e.push(...t.zone.boundaryPoints.map((e=>e.offset)))})),e}get requiredTakeoffCoordinate(){return this.takeoffOffset?this.coordinate.geoCoordinate(this.takeoffOffset):null}get takeoffCoordinate(){return this.requiredTakeoffCoordinate||this.coordinate}elevationCoordinates(e){const t=super.elevationCoordinates(e);return t.push(this.takeoffCoordinate),t}get context(){return new g.ComponentContext(this)}node(e=null){const t=super.node(e);return t.addChild(this.rootComponent,!1),t.children.push(new m.PlanRestrictionZonesNode(t,(()=>this.restrictionZones))),t}estimate(e,t){return this.restrictionZones.length>0&&(e.altitudeRequired=!0),this.rootComponent.estimate(e,t)}execute(e){const t=super.execute(e);if(t.status!==r.ComponentExecutionStatus.Executing)return t;const n=this.rootComponent.execute(e);switch(n.status){case r.ComponentExecutionStatus.Pending:case r.ComponentExecutionStatus.Executing:return t;case r.ComponentExecutionStatus.Succeeded:case r.ComponentExecutionStatus.Failed:if(n.status===r.ComponentExecutionStatus.Failed&&this.rootComponent.required)return this.failed(e,n.error)}return this.succeeded(e)}}t.PlanComponent=y},8328:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlanReengagementRules=void 0;const i=n(750),o=n(1504),a=n(5974),r=n(7787),s=n(5088),l=n(4612);t.PlanReengagementRules=class{constructor(){this.type=i.TypeName.PlanReengagementRules,this.pointOfInterest=null,this.gimbalOrientations=null,this.confirmationMessage=null,this.confirmationInstructionsImageUrl=null}applyJSON(e){if(a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.pointOfInterest=a.Serialization.deserialize(e.pointOfInterest,o.PointOfInterest),this.confirmationMessage=a.Serialization.deserialize(e.confirmationMessage,r.Message),this.confirmationInstructionsImageUrl=s.Common.parseString(e.confirmationInstructionsImageUrl,null),e.gimbalOrientations){this.gimbalOrientations={};for(let t of Object.keys(e.gimbalOrientations)){const n=new l.Orientation3Optional;n.applyJSON(e.gimbalOrientations[t]),this.gimbalOrientations[t]=n}}else this.gimbalOrientations=null}}},3071:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlanRestrictionZoneNode=t.PlanRestrictionZonesNode=t.PlanRestrictionZone=void 0;const i=n(8569),o=n(7722),a=n(750),r=n(5664),s=n(9477),l=n(4545),c=n(5974),u=n(4147),m=n(79),d=n(176),p=n(2838),h=n(7247);class f extends o.Identifiable{constructor(){super(...arguments),this.type=a.TypeName.PlanRestrictionZone,this.descriptors=new r.Descriptors,this.zone=new i.Zone,this.minApplicableProximity=new l.DistanceTolerance(h.Constants.PlanRestrictionZoneMinApplicableProximityHorizontal,h.Constants.PlanRestrictionZoneMinApplicableProximityVertical),this.droneMotionLimits=new s.MotionLimits6Optional,this.droneMotionErrorTolerance=null}applyJSON(e){super.applyJSON(e),c.Serialization.validateType(e,this.type),this.droneMotionErrorTolerance=c.Serialization.deserialize(e.droneMotionErrorTolerance,l.DistanceTolerance),this.descriptors.applyJSON(e.descriptors),this.zone.applyJSON(e.zone),this.minApplicableProximity.applyJSON(e.minApplicableProximity),this.droneMotionLimits.applyJSON(e.droneMotionLimits)}}t.PlanRestrictionZone=f;class g extends m.ListNode{constructor(e,t){super(e,"plan-restriction-zones"),this.listAccessor=t,this.list.forEach(((e,t)=>{this.children.push(new y(this,t,e))})),this.emptyChildrenNavigationEnabled=!0,this.propertiesEditorDisabled=!0,this.appends.push({title:`${u.Strings.Common.new} ${u.Strings.PlanRestrictionZone.name}`,tooltip:null,execute:e=>{e instanceof f&&this.list.push(e)}})}get title(){return u.Strings.PlanRestrictionZone.multiple}get list(){return this.listAccessor()}}t.PlanRestrictionZonesNode=g;class y extends m.ListNode{constructor(e,t,n){super(e,""),this.id=n.id,this.planRestrictionZone=n,this.index=t,this.emptyChildrenNavigationEnabled=!0,this.propertiesEditorDisabled=!1,n.zone.boundaryPoints.forEach(((e,t)=>{this.children.push(new d.ZoneBoundaryPointNode(this,n.zone,t,e))}))}get title(){return`${c.Serialization.typeDisplay(this.planRestrictionZone)} ${p.Format.integer(this.index+1)}`}get subtitle(){return this.planRestrictionZone.descriptors.description}}t.PlanRestrictionZoneNode=y},6191:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RotationComponent=void 0;const i=n(750),o=n(7247),a=n(2838),r=n(5088),s=n(4032),l=n(5974),c=n(1154),u=n(9123);class m extends s.AchievableDroneMotionComponent{constructor(){super(...arguments),this.type=i.TypeName.RotationComponent,this.direction=i.RotationDirection.Clockwise,this.time=0,this.distance=o.Constants.RotationComponentDistance}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.direction=r.Common.parseString(e.direction,this.direction),this.time=r.Common.parseFloat(e.time,this.time),this.distance=r.Common.parseFloat(e.distance,this.distance)}get subtitle(){return`${this.time>0?a.Format.timeElapsed(this.time):a.Format.angle(this.distance,!1).toString()} ${a.Format.enum("RotationDirection",this.direction)}`}get repositionIfIncluded(){return!1}achieved(e){return 1===e.execution.getComponentState(this).progress}model(e){const t=this.resolveDroneMotionLimits(e),n=this.direction===i.RotationDirection.Clockwise?1:-1;if(this.time>0)return{time:this.time,distance:n*c.Kinematic.d1(t.rotational.velocity.max,this.time)};const o=n*this.distance;return{time:t.timeLineRotational(this.distance),distance:o}}estimate(e,t){const n=super.estimate(e,t),i=l.Serialization.clone(t),o=this.model(e);i.orientation.yaw+=o.distance,n.droneSpatials.push(i);let a=0;if(e.timeRequired){const e=n.time;n.time+=o.time,a=n.time-e;const t=n.children.find((e=>e.component===this.immediateComponent));t&&t.totalTime>n.time&&(n.time+=t.totalTime-n.time,a=t.totalTime),i.updated.increment(n.time-e)}if(this.achievedComponent){const o=l.Serialization.clone(i);o.updated.value=new Date(t.updated.value.getTime()+1e3*a);const r=this.achievedComponent.estimate(e,o);n.children.push(r)}return n.updateWithCameraCaptureConfigurations(e,this.cameraCaptureConfigurations),n}execute(e){const t=super.execute(e);if(t.status!==i.ComponentExecutionStatus.Executing)return t;const{drone:n,engagement:a}=e,s=n.projectSpatial(e.engagement.currentDatetime),c=this.resolveDroneMotionLimits(e),m=t.cachedData(i.TypeName.RotationComponent,(()=>{const t=this.model(e);return new d(l.Serialization.clone(n.spatial),t.time,t.distance)}));this.time>0?t.progress+=a.timeSinceLastExecution/m.time:(t.progress+=a.timeSinceLastExecution*m.velocityPrevious/m.distance,t.progress>.999&&(t.progress=1)),t.progress=Math.min(1,t.progress);const p=new u.Velocity6;if(m.time*(1-t.progress)>0){const n=m.distance*(1-t.progress);c.updateBoundedVelocityRotational(p,n,this.referenceSpatial(e).velocity.rotational),Math.abs(p.rotational)<o.Constants.RotationComponentVelocityMin&&(p.rotational=r.Common.matchSign(o.Constants.RotationComponentVelocityMin,p.rotational))}const h=s.coordinate.offset(m.startSpatial.coordinate),f=new u.Velocity6;return c.updateBoundedVelocityHorizontal(f,h.direction,h.magnitude),p.horizontal=p.horizontal.add(f.horizontal),m.velocityPrevious=this.addDroneVelocityCommand(e,p).velocity.rotational,t}}t.RotationComponent=m;class d{constructor(e,t,n){this.velocityPrevious=0,this.startSpatial=e,this.time=t,this.distance=n}}},5293:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubComponent=void 0;const i=n(5445),o=n(737),a=n(1504),r=n(5974),s=n(5807),l=n(5088),c=n(750),u=n(4147);class m extends o.Component{constructor(){super(...arguments),this.required=!0,this.exclusive=!1,this.reference=new i.SourcedGeoSpatial,this.pointsOfInterest=[]}applyJSON(e){if(super.applyJSON(e),this.descriptors.applyJSON(e.descriptors),this.coordinate.applyJSON(e.coordinate),this.required=l.Common.parseBoolean(e.required,this.required),this.exclusive=l.Common.parseBoolean(e.exclusive,this.exclusive),this.reference.applyJSON(e.reference),this.pointsOfInterest=[],Array.isArray(e.pointsOfInterest))for(let t of e.pointsOfInterest)this.pointsOfInterest.push(r.Serialization.deserialize(t,a.PointOfInterest,!1))}get pointsOfInterestEnabled(){return!1}get pointsOfInterestReferences(){return[]}get exclusiveReadonly(){return!1}get exclusiveExecution(){return this.exclusive}get repositionIfIncluded(){return!1}reposition(e,t){const n=this.node().referenceOffsets;if(n.length>0){const i=t?this.referenceCoordinate(t,null).offset(e).subtract(n[0]):new s.Vector2;n.forEach((e=>{e.addToSelf(i)}))}}get referenceOffsets(){return this.pointsOfInterestEnabled?super.referenceOffsets.concat(this.pointsOfInterest.map((e=>e.referencedOffset.coordinateOffset))):super.referenceOffsets}referenceSpatial(e){return this.reference.value(e.spatialSources)}referenceCoordinate(e,t=null){return this.referenceSpatial(e).coordinate.geoCoordinate(t||new s.Vector2)}elevationCoordinates(e){const t=super.elevationCoordinates(e);return this.pointsOfInterest.forEach((n=>{const i=n.referenceSpatial(e.spatialSources,this.reference);i.altitude.system===c.AltitudeSystem.AGL&&t.push(i.coordinate)})),t}pointOfInterestCoordinate(e,t){return this.pointsOfInterest[t].referenceCoordinate(e.spatialSources,this.reference)}pointsOfInterestCoordinates(e){return this.pointsOfInterest.map((t=>t.referenceCoordinate(e.spatialSources,this.reference)))}pointOfInterestByID(e){return this.pointsOfInterest.find((t=>t.id===e))}pointOfInterestCoordinateByID(e,t){const n=this.pointOfInterestByID(t);return n?n.referenceCoordinate(e.spatialSources,this.reference):null}pointOfInterestReferencedAltitudeByID(e,t){const n=this.pointOfInterestByID(t);if(!n)return null;const i=n.referenceSpatial(e.spatialSources,this.reference);return this.referencedAltitude(e,i.altitude,i.coordinate)}node(e=null){const t=super.node(e);return this.pointsOfInterestEnabled&&t.children.push(new a.PointsOfInterestNode(t,(()=>this.pointsOfInterest))),t}engaging(e,t){super.engaging(e,t),this.elevationsPending(e)&&this.failed(e,u.Strings.SubComponent.messages.failedElevationsPending.title)}}t.SubComponent=m},4259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WaitComponent=void 0;const i=n(5293),o=n(750),a=n(7247),r=n(5088),s=n(2838),l=n(7787),c=n(4147),u=n(5974);class m extends i.SubComponent{constructor(){super(...arguments),this.type=o.TypeName.WaitComponent,this.time=a.Constants.WaitComponentTime}applyJSON(e){super.applyJSON(e),u.Serialization.validateType(e,this.type),this.time=r.Common.parseFloat(e.time,this.time)}get subtitle(){return s.Format.timeElapsed(this.time)}get exclusiveReadonly(){return!0}get exclusiveExecution(){return!0}estimate(e,t){const n=super.estimate(e,t);return n.time+=this.time,n.updateWithCameraCaptureConfigurations(e,this.cameraCaptureConfigurations),n}execute(e){const t=super.execute(e);if(t.status!==o.ComponentExecutionStatus.Executing)return t;const{engagement:n}=e;return this.time>0&&(t.progress=Math.min(1,t.progress+n.timeSinceLastExecution/this.time),t.progress<1)?(t.messages.push(new l.Message(c.Strings.WaitComponent.messages.waiting.title,s.Format.number(this.time*t.progress))),t):(this.succeeded(e),t)}}t.WaitComponent=m},9871:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Altitude=void 0;const i=n(750),o=n(5088),a=n(2838),r=n(5974);class s{constructor(e=0,t=i.AltitudeSystem.ATL){this.type=i.TypeName.Altitude,this.system=i.AltitudeSystem.ATL,this.value=e,this.system=t}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.system=o.Common.parseString(e.system,this.system),this.value=o.Common.parseFloat(e.value)}interpolate(e,t){return this.system===e.system?new s(t(this.value,e.value),this.system):this}toString(){return`${a.Format.altitude(this.value).toString()} ${a.Format.string(`AltitudeSystem.values.${this.system}.abbreviation`)}`}}t.Altitude=s},6776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AltitudeRange=void 0;const i=n(750),o=n(3854),a=n(9871),r=n(4147),s=n(2838),l=n(5974);t.AltitudeRange=class{constructor(e=new a.Altitude,t=new o.Limits){this.type=i.TypeName.AltitudeRange,this.altitude=new a.Altitude,this.altitude=e,this.range=t}applyJSON(e){l.Serialization.validateJson(e),l.Serialization.validateType(e,this.type),this.altitude.applyJSON(e.altitude),this.range.applyJSON(e.range)}toString(){return[this.altitude.toString(),this.range.toString(s.Format.altitude)].join(r.Strings.Common.delimeter)}}},7436:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Asset=void 0;const i=n(750),o=n(5664),a=n(5088),r=n(5974);t.Asset=class{constructor(e=null,t=new o.Descriptors){this.type=i.TypeName.Asset,this.cameraFiles=[],this.key=e||a.Common.uuid(),this.descriptors=t}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.key=a.Common.parseString(e.key,a.Common.uuid()),this.descriptors.applyJSON(e.descriptors)}merge(e){this.key=this.key||e.key,this.descriptors.merge(e.descriptors),this.cameraFiles=Array.from(new Set([...this.cameraFiles,...e.cameraFiles]))}get size(){return this.cameraFiles.reduce(((e,t)=>e+t.size),0)}}},5154:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssetManifest=void 0;const i=n(750),o=n(7436),a=n(5974),r=n(5664),s=n(7722),l=n(5226);class c extends s.Identifiable{constructor(e=null,t=new r.Descriptors,n=[]){super(e),this.type=i.TypeName.AssetManifest,this.coordinate=null,this.assets=[],this.descriptors=t,this.assets=n}applyJSON(e){if(super.applyJSON(e),a.Serialization.validateType(e,this.type),this.descriptors.applyJSON(e.descriptors),this.coordinate=a.Serialization.deserialize(e.coordinate,l.GeoCoordinate),this.assets=[],Array.isArray(e.assets))for(let t of e.assets)this.assets.push(a.Serialization.deserialize(t,o.Asset,!1))}add(e){const t=this.assets.find((t=>t.key===e.key));t?t.merge(e):this.assets.push(e)}get size(){return this.assets.reduce(((e,t)=>e+t.size),0)}}t.AssetManifest=c},4110:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssetSource=void 0;const i=n(750),o=n(5664),a=n(7436),r=n(5974),s=n(5088);t.AssetSource=class{constructor(e=""){this.type=i.TypeName.AssetSource,this.descriptors=new o.Descriptors,this.key=e}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.key=s.Common.parseString(e.key,this.key),this.descriptors.applyJSON(e.descriptors)}toAsset(e=null){return new a.Asset(this.key||e,r.Serialization.clone(this.descriptors))}get title(){return s.Common.joinNotEmpty([this.key,this.descriptors.name,this.descriptors.description])}get subtitle(){return s.Common.joinNotEmpty(this.descriptors.tags)}}},1111:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;const i=n(6801),o=n(750),a=n(1985),r=n(5088),s=n(7247),l=n(5974);class c extends i.Payload{constructor(){super(...arguments),this.type=o.TypeName.Camera,this.model=null,this.lensDetails=null,this.updated=new a.Datetime,this.capturing=!1,this.settings={mode:o.CameraMode.Photo,photoMode:o.CameraPhotoMode.Single,photoFileFormat:o.CameraPhotoFileFormat.JPEG,photoInterval:2,videoMode:o.CameraVideoMode.Normal,videoFileFormat:o.CameraVideoFileFormat.MP4}}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.model=r.Common.parseString(e.model),this.lensDetails=r.Common.parseString(e.lensDetails),this.capturing=r.Common.parseBoolean(e.capturing,this.capturing),this.settings.mode=r.Common.parseString(e.settings.mode,this.settings.mode),this.settings.photoMode=r.Common.parseString(e.settings.photoMode,this.settings.photoMode),this.settings.videoMode=r.Common.parseString(e.settings.videoMode,this.settings.videoMode)}get specification(){switch(this.model){case"Phantom 3 Standard Camera":return s.Constants.CameraSpecification("phantom3Standard");case"Phantom 3 Advanced Camera":return s.Constants.CameraSpecification("phantom3Advanced");case"Phantom 3 Professional Camera":return s.Constants.CameraSpecification("phantom3Pro");case"Zenmuse X3":return s.Constants.CameraSpecification("zenmuseX3");case"Zenmuse X5":return s.Constants.CameraSpecification("zenmuseX5");case"Zenmuse X5R":return s.Constants.CameraSpecification("zenmuseX5R");case"Phantom 4 Camera":return s.Constants.CameraSpecification("phantom4");case"Phantom 4 Pro Camera":return s.Constants.CameraSpecification("phantom4Pro");case"Mavic Pro Camera":return s.Constants.CameraSpecification("mavicPro");case"Zenmuse Z30":return s.Constants.CameraSpecification("zenmuseZ30Max");case"Zenmuse X4S":return s.Constants.CameraSpecification("zenmuseX4S");case"Zenmuse X5S":return s.Constants.CameraSpecification("zenmuseX5S");case"Phantom 4 Advanced Camera":return s.Constants.CameraSpecification("phantom4Advanced");case"Spark Camera":return s.Constants.CameraSpecification("spark");case"Phantom 4 Pro V2 Camera":case"Phantom 4 Pro V2.0 Camera":return s.Constants.CameraSpecification("phantom4Pro2_0");case"Phantom 4 RTK Camera":return s.Constants.CameraSpecification("phantom4RTK");case"Zenmuse X7":return s.Constants.CameraSpecification("zenmuseX7");case"Mavic Air 2 Camera":return s.Constants.CameraSpecification("mavicAir2");case"Mavic Air Camera":return s.Constants.CameraSpecification("mavicAir");case"Mavic 2 Zoom Camera":return s.Constants.CameraSpecification("mavic2ZoomMax");case"Mavic 2 Pro Camera":return s.Constants.CameraSpecification("mavic2Pro");case"Mavic 2 Enterprise Camera":return s.Constants.CameraSpecification("mavic2EnterpriseMax");case"Mavic 2 Enterprise Dual-Thermal":return s.Constants.CameraSpecification("mavic2EnterpriseDualThermal");case"Mavic 2 Enterprise Dual-Visual":return s.Constants.CameraSpecification("mavic2EnterpriseDualRGB");case"Zenmuse XT":return s.Constants.CameraSpecification("zenmuseXT");case"Zenmuse XT2-Thermal":return s.Constants.CameraSpecification("zenmuseXT2");case"Zenmuse XT2-Visual":return s.Constants.CameraSpecification("zenmuseXT2RGB");case"Zenmuse H20":return s.Constants.CameraSpecification("zenmuseH20Wide");case"Zenmuse H20T":return s.Constants.CameraSpecification("zenmuseH20Thermal");case"Mavic Mini":return s.Constants.CameraSpecification("mavicMini");case"anafi4k":return s.Constants.CameraSpecification("anafi4k");case"Zenmuse Z3":default:return s.Constants.CameraSpecification(this.model)}}}t.Camera=c},1678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraCaptureConfiguration=void 0;const i=n(750),o=n(5974),a=n(5088),r=n(8210),s=n(9271),l=n(9983),c=n(908),u=n(8283);t.CameraCaptureConfiguration=class{constructor(){this.type=i.TypeName.CameraCaptureConfiguration,this.channel=0,this.captureType=i.CameraCaptureType.Photos}applyJSON(e){o.Serialization.validateJson(e),o.Serialization.validateType(e,this.type),this.channel=a.Common.parseInt(e.channel,this.channel),this.captureType=a.Common.parseString(e.captureType,this.captureType)}get startComponents(){const e=[new r.CommandComponent((()=>{const e=new s.StopCaptureCameraCommand;return e.channel=this.channel,e})()),new r.CommandComponent((()=>{const e=new l.ModeCameraCommand;switch(this.captureType){case i.CameraCaptureType.Photos:e.mode=i.CameraMode.Photo;break;case i.CameraCaptureType.Video:e.mode=i.CameraMode.Video}return e.channel=this.channel,e})())];return this.captureType===i.CameraCaptureType.Photos&&e.push(new r.CommandComponent((()=>{const e=new c.PhotoModeCameraCommand;return e.photoMode=i.CameraPhotoMode.Interval,e.channel=this.channel,e})())),e.push(new r.CommandComponent((()=>{const e=new u.StartCaptureCameraCommand;return e.channel=this.channel,e})())),e}get stopComponents(){return[new r.CommandComponent((()=>{const e=new s.StopCaptureCameraCommand;return e.channel=this.channel,e})())]}}},916:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraFile=void 0;const i=n(750),o=n(1985),a=n(5088),r=n(7722),s=n(5226),l=n(9871),c=n(2573),u=n(5974);class m extends r.Identifiable{constructor(e="",t=0,n=new o.Datetime,a=null,r=null,s=null,l=null){super(),this.type=i.TypeName.CameraFile,this.name=e,this.size=t,this.created=n,this.metadata=a,this.coordinate=r,this.altitude=s,this.orientation=l}applyJSON(e){u.Serialization.validateJson(e),u.Serialization.validateType(e,this.type),this.name=a.Common.parseString(e.name,this.name),this.size=a.Common.parseInt(e.size,this.size),this.created.applyJSON(e.created),this.metadata=a.Common.parseString(e.metadata),this.coordinate=u.Serialization.deserialize(e.coordinate,s.GeoCoordinate),this.altitude=u.Serialization.deserialize(e.altitude,l.Altitude),this.orientation=u.Serialization.deserialize(e.orientation,c.Orientation3)}}t.CameraFile=m},7525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraImageSpecification=void 0;const i=n(750),o=n(5088),a=n(4147),r=n(2838),s=n(5974);t.CameraImageSpecification=class{constructor(e=1,t=1){this.type=i.TypeName.CameraImageSpecification,this.toString=()=>`${a.Strings.CameraImageSpecification.name}: ${r.Format.cameraSpecificationPixels(this.width).toString()} x ${r.Format.cameraSpecificationPixels(this.height).toString()}`,this.width=e,this.height=t}applyJSON(e){s.Serialization.validateJson(e),s.Serialization.validateType(e,this.type),this.width=o.Common.parseFloat(e.width,this.width),this.height=o.Common.parseFloat(e.height,this.height)}}},8925:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraLensSpecification=void 0;const i=n(750),o=n(5088),a=n(4147),r=n(2838),s=n(5974);t.CameraLensSpecification=class{constructor(e=1){this.type=i.TypeName.CameraLensSpecification,this.toString=()=>`${a.Strings.CameraLensSpecification.name}: ${r.Format.cameraSpecificationLength(this.focalLength).toString()}`,this.focalLength=e}applyJSON(e){s.Serialization.validateJson(e),s.Serialization.validateType(e,this.type),this.focalLength=o.Common.parseFloat(e.focalLength,this.focalLength)}}},9122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraSensorSpecification=void 0;const i=n(750),o=n(5088),a=n(4147),r=n(2838),s=n(5974);t.CameraSensorSpecification=class{constructor(e=1,t=1){this.type=i.TypeName.CameraSensorSpecification,this.toString=()=>`${a.Strings.CameraSensorSpecification.name}: ${r.Format.cameraSpecificationLength(this.width).toString()} x ${r.Format.cameraSpecificationLength(this.height).toString()}`,this.width=e,this.height=t}applyJSON(e){s.Serialization.validateJson(e),s.Serialization.validateType(e,this.type),this.width=o.Common.parseFloat(e.width,this.width),this.height=o.Common.parseFloat(e.height,this.height)}}},924:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraSpecification=void 0;const i=n(750),o=n(5664),a=n(7525),r=n(8925),s=n(9122),l=n(745),c=n(7722),u=n(5088),m=n(5974);class d extends c.Identifiable{constructor(e=null,t="",n=9,l=12.8,c=9.6,m=5472,d=3648){super(e),this.type=i.TypeName.CameraSpecification,this.toString=(e=!1)=>u.Common.joinNotEmpty([this.lens.toString(),this.sensor.toString(),e?this.image.toString():""]),this.descriptors=new o.Descriptors(t),this.lens=new r.CameraLensSpecification(n),this.sensor=new s.CameraSensorSpecification(l,c),this.image=new a.CameraImageSpecification(m,d)}applyJSON(e){super.applyJSON(e),m.Serialization.validateType(e,this.type),this.descriptors.applyJSON(e.descriptors),this.lens.applyJSON(e.lens),this.sensor.applyJSON(e.sensor),this.image.applyJSON(e.image)}get resettable(){return!1}get fieldOfView(){return new l.FieldOfView(2*Math.atan(this.sensor.width/(2*this.lens.focalLength)),2*Math.atan(this.sensor.height/(2*this.lens.focalLength)),2*Math.atan(Math.sqrt(Math.pow(this.sensor.width,2)+Math.pow(this.sensor.height,2))/(2*this.lens.focalLength)))}groundSampleDistance(e){const t=this.sensor.width/1e3,n=this.sensor.height/1e3,i=this.lens.focalLength/1e3;return{width:e*t/(i*this.image.width),height:e*n/(i*this.image.height)}}}t.CameraSpecification=d},7247:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Constants=void 0;const i=n(1747),o=n(5051),a=n(3854),r=n(924),s=n(4147),l=n(3509),c=n(6202),u=n(750),m=n(4612);class d{}t.Constants=d,d.Version="2.1.0",d.ExecuteIntervalTarget=.1,d.ExecuteIntervalMax=.2,d.ExecuteDelayStrikesMax=5,d.SimulationUpdateInterval=.2,d.DroneConnectionLatency=.1,d.DroneMotionLimits={Generic:()=>{const e=new o.MotionLimits6;return e.horizontal.velocity.max=15,e.horizontal.acceleration.max=3,e.horizontal.acceleration.min=-e.horizontal.acceleration.max,e.vertical.velocity.max=4,e.vertical.velocity.min=-e.vertical.velocity.max,e.vertical.acceleration.max=2,e.vertical.acceleration.min=-e.vertical.acceleration.max,e.rotational.velocity.max=i.Convert.degreesToRadians(45),e.rotational.velocity.min=-e.rotational.velocity.max,e.rotational.acceleration.max=i.Convert.degreesToRadians(45),e.rotational.acceleration.min=-e.rotational.acceleration.max,e},Conservative:()=>{const e=new o.MotionLimits6;return e.horizontal.velocity.max=i.Convert.milesPerHourToMetersPerSecond(10),e.horizontal.acceleration.max=i.Convert.feetToMeters(6),e.horizontal.acceleration.min=i.Convert.feetToMeters(-2),e.vertical.velocity.max=i.Convert.feetToMeters(10),e.vertical.velocity.min=-e.vertical.velocity.max,e.vertical.acceleration.max=i.Convert.feetToMeters(6),e.vertical.acceleration.min=i.Convert.feetToMeters(-3),e.rotational.velocity.max=i.Convert.degreesToRadians(45),e.rotational.velocity.min=-e.rotational.velocity.max,e.rotational.acceleration.max=i.Convert.degreesToRadians(10),e.rotational.acceleration.min=-e.rotational.acceleration.max,e},Max:()=>{const e=new o.MotionLimits6;return e.horizontal.velocity.max=15,e.horizontal.acceleration.max=4,e.horizontal.acceleration.min=-e.horizontal.acceleration.max,e.vertical.velocity.max=4,e.vertical.velocity.min=-e.vertical.velocity.max,e.vertical.acceleration.max=4,e.vertical.acceleration.min=-e.vertical.acceleration.max,e.rotational.velocity.max=i.Convert.degreesToRadians(90),e.rotational.velocity.min=-e.rotational.velocity.max,e.rotational.acceleration.max=i.Convert.degreesToRadians(45),e.rotational.acceleration.min=-e.rotational.acceleration.max,e}},d.DroneOrientationLimits={Yaw:new a.Limits(i.Convert.degreesToRadians(359),0)},d.GimbalLimits={Pitch:new a.Limits(i.Convert.degreesToRadians(30),i.Convert.degreesToRadians(-90)),Roll:new a.Limits(i.Convert.degreesToRadians(15),i.Convert.degreesToRadians(-15)),Yaw:new a.Limits(i.Convert.degreesToRadians(359),0)},d.GimbalMotionLimits=new l.MotionLimits3(new c.MotionLimits(new a.Limits(i.Convert.degreesToRadians(90),i.Convert.degreesToRadians(-90)),new a.Limits(i.Convert.degreesToRadians(90),i.Convert.degreesToRadians(-90))),new c.MotionLimits(new a.Limits(i.Convert.degreesToRadians(90),i.Convert.degreesToRadians(-90)),new a.Limits(i.Convert.degreesToRadians(90),i.Convert.degreesToRadians(-90))),new c.MotionLimits(new a.Limits(i.Convert.degreesToRadians(90),i.Convert.degreesToRadians(-90)),new a.Limits(i.Convert.degreesToRadians(90),i.Convert.degreesToRadians(-90)))),d.CameraSpecifications=[new r.CameraSpecification("default","Default",8.8,12.8,9.6,5472,3648),new r.CameraSpecification("zenmuseX7",s.Strings.CameraSpecification.models.zenmuseX7,25,23.5,15.7,6016,4008),new r.CameraSpecification("zenmuseX5S",s.Strings.CameraSpecification.models.zenmuseX5S,15,17.3,13,5820,3956),new r.CameraSpecification("zenmuseX4S",s.Strings.CameraSpecification.models.zenmuseX4S,8.8,12.8,9.6,5472,3648),new r.CameraSpecification("zenmuseX5R",s.Strings.CameraSpecification.models.zenmuseX5R,15,17.3,13,4608,3456),new r.CameraSpecification("zenmuseX5",s.Strings.CameraSpecification.models.zenmuseX5,15,17.3,13,4608,3456),new r.CameraSpecification("zenmuseX3",s.Strings.CameraSpecification.models.zenmuseX3,3.61,6.17,4.65,4e3,3e3),new r.CameraSpecification("zenmuseXT",s.Strings.CameraSpecification.models.zenmuseXT,13,10.88,8.704,640,512),new r.CameraSpecification("zenmuseXT2RGB",s.Strings.CameraSpecification.models.zenmuseXT2RGB,8,7.4,5.55,4e3,3e3),new r.CameraSpecification("zenmuseXT2Thermal",s.Strings.CameraSpecification.models.zenmuseXT2Thermal,13,10.88,8.704,640,512),new r.CameraSpecification("zenmuseH20Thermal",s.Strings.CameraSpecification.models.zenmuseH20Thermal,13.5,8.15,6.52,640,512),new r.CameraSpecification("zenmuseH20Wide",s.Strings.CameraSpecification.models.zenmuseH20Wide,4.5,6.65,4.92,4056,3040),new r.CameraSpecification("zenmuseH20ZoomMin",s.Strings.CameraSpecification.models.zenmuseH20ZoomMin,6.83,9.5,5.7,5184,3888),new r.CameraSpecification("zenmuseH20ZoomMax",s.Strings.CameraSpecification.models.zenmuseH20ZoomMax,119.94,9.5,5.7,5184,3888),new r.CameraSpecification("zenmuseZ30Min",s.Strings.CameraSpecification.models.zenmuseZ30Min,4.3,4.71,3.54,1920,1080),new r.CameraSpecification("zenmuseZ30Max",s.Strings.CameraSpecification.models.zenmuseZ30Max,129,4.71,3.54,1920,1080),new r.CameraSpecification("mavicMini",s.Strings.CameraSpecification.models.mavicMini,4.36,6.17,4.65,4e3,3e3),new r.CameraSpecification("mavic2Pro",s.Strings.CameraSpecification.models.mavic2Pro,10.27,13.2,8.2,5472,3648),new r.CameraSpecification("mavic2ProHQ",s.Strings.CameraSpecification.models.mavic2ProHQ,10.27,9.4,5.9,5472,3648),new r.CameraSpecification("mavic2ZoomMin",s.Strings.CameraSpecification.models.mavic2ZoomMin,4.36,6.17,4.65,4e3,3e3),new r.CameraSpecification("mavic2ZoomMax",s.Strings.CameraSpecification.models.mavic2ZoomMax,8.65,6.17,4.65,4e3,3e3),new r.CameraSpecification("mavic2EnterpriseMin",s.Strings.CameraSpecification.models.mavic2EnterpriseMin,4.36,6.17,4.65,4e3,3e3),new r.CameraSpecification("mavic2EnterpriseMax",s.Strings.CameraSpecification.models.mavic2EnterpriseMax,8.65,6.17,4.65,4e3,3e3),new r.CameraSpecification("mavic2EnterpriseDualRGB",s.Strings.CameraSpecification.models.mavic2EnterpriseDualRGB,4.3,6.2,4.65,4056,3040),new r.CameraSpecification("mavic2EnterpriseDualThermal",s.Strings.CameraSpecification.models.mavic2EnterpriseDualThermal,4.3,7.68,5.67,640,480),new r.CameraSpecification("mavicAir2",s.Strings.CameraSpecification.models.mavicAir2,4.5,6.4,4.8,4e3,3e3),new r.CameraSpecification("mavicAir248MP",s.Strings.CameraSpecification.models.mavicAir248MP,4.5,6.4,4.8,8e3,6e3),new r.CameraSpecification("mavicAir",s.Strings.CameraSpecification.models.mavicAir,4,6.17,4.65,4056,3040),new r.CameraSpecification("mavicPro",s.Strings.CameraSpecification.models.mavicPro,5,6.17,4.65,4e3,3e3),new r.CameraSpecification("mavicProPlatinum",s.Strings.CameraSpecification.models.mavicProPlatinum,5,6.17,4.65,4e3,3e3),new r.CameraSpecification("phantom4Pro2_0",s.Strings.CameraSpecification.models.phantom4Pro2_0,8.8,12.8,9.6,5472,3648),new r.CameraSpecification("phantom4RTK",s.Strings.CameraSpecification.models.phantom4RTK,8.8,12.8,9.6,5472,3648),new r.CameraSpecification("phantom4Multispectral",s.Strings.CameraSpecification.models.phantom4Multispectral,5.74,4.98,4.74,1600,1300),new r.CameraSpecification("phantom4Pro",s.Strings.CameraSpecification.models.phantom4Pro,8.8,12.8,9.6,5472,3648),new r.CameraSpecification("phantom4Advanced",s.Strings.CameraSpecification.models.phantom4Advanced,8.8,12.8,9.6,5472,3648),new r.CameraSpecification("phantom4",s.Strings.CameraSpecification.models.phantom4,3.61,6.17,4.65,4e3,3e3),new r.CameraSpecification("phantom3Pro",s.Strings.CameraSpecification.models.phantom3Pro,3.61,6.17,4.65,4e3,3e3),new r.CameraSpecification("phantom3Advanced",s.Strings.CameraSpecification.models.phantom3Advanced,3.61,6.17,4.65,4e3,3e3),new r.CameraSpecification("phantom3Standard",s.Strings.CameraSpecification.models.phantom3Standard,3.61,6.17,4.65,4e3,3e3),new r.CameraSpecification("spark",s.Strings.CameraSpecification.models.spark,4,6.17,4.65,3968,2976),new r.CameraSpecification("anafi4k",s.Strings.CameraSpecification.models.anafi4k,8.8,12.8,9.6,5472,3648)],d.CameraSpecification=e=>{const t={};return d.CameraSpecifications.forEach((e=>{t[e.id]=e})),e&&t[e]?t[e]:t.default},d.MissionReengagementAltitudeRange=i.Convert.feetToMeters(5),d.MissionReengagementMinAltitude=i.Convert.feetToMeters(5),d.MissionReengagementMinRampVelocity=i.Convert.milesPerHourToMetersPerSecond(2),d.ComponentElevationTolerance=1,d.PlanComponentTakeoffDistanceHorizontal=i.Convert.feetToMeters(20),d.DroneMotionComponentGimbalOrientation=new m.Orientation3Optional(i.Convert.degreesToRadians(-12),u.OrientationXReference.Horizon,0,0,u.OrientationZReference.Path),d.DroneMotionComponentModelSampleTimeMax=2,d.DroneMotionComponentErrorK=2*Math.E,d.DroneMotionErrorToleranceHorizontal=i.Convert.feetToMeters(75),d.DroneMotionErrorToleranceVertical=i.Convert.feetToMeters(25),d.DestinationComponentHeadingAchievement=i.Convert.degreesToRadians(45),d.DestinationComponentEstimateSampleDistance=1,d.DestinationComponentAchievementTime=4,d.DestinationComponentAchievementDistanceHorizontal=i.Convert.feetToMeters(5),d.DestinationComponentAchievementDistanceVertical=i.Convert.feetToMeters(5),d.DestinationComponentAltitude=i.Convert.feetToMeters(100),d.DestinationComponentAltitudeRange=i.Convert.feetToMeters(15),d.DestinationComponentRestrictionZoneCornerRadius=i.Convert.feetToMeters(2),d.DestinationComponentSampleDistance=.3,d.DestinationComponentRestrictionZoneExitMinAltitude=i.Convert.feetToMeters(25),d.CourseComponentAchievementDistance=i.Convert.feetToMeters(10),d.FacadeComponentDistance=i.Convert.feetToMeters(30),d.FacadeComponentMinCaptureInterval=2,d.FacadeComponentFrontOverlap=.5,d.FacadeComponentSideOverlap=.5,d.FacadeComponentGimbalPitch=i.Convert.degreesToRadians(0),d.FacadeComponentInitialAltitude=i.Convert.feetToMeters(100),d.FacadeComponentFinalAltitude=i.Convert.feetToMeters(300),d.FacadeComponentCornerRadius=i.Convert.feetToMeters(20),d.FacadeComponentOrbitSteps=360,d.FacadeComponentSampleDistanceMax=.3,d.FacadeComponentSampleDistanceMin=.1,d.FacadeGimbalPitchLimits=new a.Limits(i.Convert.degreesToRadians(30),i.Convert.degreesToRadians(-90)),d.HeadingComponentAchievementTime=1,d.HeadingComponentAchievementDistance=i.Convert.degreesToRadians(5),d.InspectionComponentAchievementTime=3,d.InspectionComponentAchievementDistanceHorizontal=i.Convert.feetToMeters(7),d.InspectionComponentAchievementDistanceVertical=i.Convert.feetToMeters(7),d.InspectionComponentOrientationDistanceHorizontal=i.Convert.feetToMeters(25),d.InspectionComponentOrientationDistanceVertical=i.Convert.feetToMeters(25),d.InspectionComponentOrientationTimeMax=3,d.InspectionComponentActionDroneOrientationCompatibilityThreshold=i.Convert.degreesToRadians(1),d.InspectionComponentOrientationDroneThreshold=i.Convert.degreesToRadians(1.5),d.InspectionComponentOrientationGimbalThreshold=i.Convert.degreesToRadians(2),d.InspectionComponentAltitudeRange=i.Convert.feetToMeters(10),d.MapComponentMaxHorizontalVelocity=i.Convert.milesPerHourToMetersPerSecond(26),d.MapComponentMinCaptureInterval=2,d.MapComponentFrontOverlap=.8,d.MapComponentSideOverlap=.7,d.MapComponentGimbalPitch=i.Convert.degreesToRadians(-90),d.MapComponentBaseAccelerationMultiplier=.5,d.MapComponentBaseDistanceMin=i.Convert.feetToMeters(10),d.MapComponentSampleDistance=.3,d.MapComponentMinimumTargetDistance=i.Convert.feetToMeters(5),d.MapComponentTerrainFollowGranularity=30,d.MapCameraSpecification=new r.CameraSpecification("phantom4Pro2_0",s.Strings.CameraSpecification.models.phantom4Pro2_0,8.8,12.8,9.6,5472,3648),d.MapGimbalPitchLimits=new a.Limits(i.Convert.degreesToRadians(-35),i.Convert.degreesToRadians(-90)),d.OrbitComponentEstimateSampleDistance=1,d.OrbitComponentSampleDistance=.3,d.PathComponentCornerRadius=i.Convert.feetToMeters(20),d.PathComponentModelSampleDistance=.3,d.PathComponentModelSampleDistancePosition=1,d.PlanRestrictionZoneMinApplicableProximityHorizontal=i.Convert.feetToMeters(5),d.PlanRestrictionZoneMinApplicableProximityVertical=i.Convert.feetToMeters(5),d.RotationComponentVelocity=i.Convert.degreesToRadians(45),d.RotationComponentDistance=2*Math.PI,d.RotationComponentVelocityMin=i.Convert.degreesToRadians(1),d.RotationAchievementDistance=i.Convert.degreesToRadians(1),d.WaitComponentTime=1,d.VelocityHorizontalDampenThreshold=2,d.VelocityVerticalDampenThreshold=2,d.VelocityRotationalDampenThreshold=i.Convert.degreesToRadians(10),d.LowBatteryWarningThresholdDroneCommandValue=.2,d.SeriousLowBatteryWarningThresholdDroneCommand=.1,d.ReturnHomeAltitudeDroneCommandValue=i.Convert.feetToMeters(100),d.MaxAltitudeDroneCommandValue=i.Convert.feetToMeters(400),d.MaxDistanceDroneCommandValue=i.Convert.feetToMeters(1e4),d.PhotoIntervalCommandValue=2,d.ZoneMaxAltitude=i.Convert.feetToMeters(100),d.ZoneEdgeBufferDistance=.1},3593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;const i=n(8510),o=n(4567),a=n(5760),r=n(7470);t.Context=class{constructor(){this.user=new o.User,this.device=new a.Device,this.drone=new i.Drone,this.remoteControllers={},this.preview=!1,this.metadata=null}remoteController(e=0){return this.remoteControllers[e]||(this.remoteControllers[e]=new r.RemoteController(e)),this.remoteControllers[e]}}},1985:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Datetime=void 0;const i=n(750),o=n(5088),a=n(5974);class r{constructor(e=new Date){this.type=i.TypeName.Datetime,this.value=e}toJSON(){return{type:this.type,value:this.value.getTime()}}applyJSON(e){a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type);const t=o.Common.parseInt(e.value,null);this.value=null===t?new Date:new Date(t)}interpolate(e,t){return new r(new Date(t(this.value.getTime(),e.value.getTime())))}elapsedTime(e){return(this.value.getTime()-e.value.getTime())/1e3}increment(e){this.value=new Date(this.value.getTime()+1e3*e)}}t.Datetime=r},5664:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Descriptors=void 0;const i=n(750),o=n(5088),a=n(5974);t.Descriptors=class{constructor(e="",t="",n=[]){this.type=i.TypeName.Descriptors,this.name=e,this.description=t,this.tags=n}applyJSON(e){a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.name=o.Common.parseString(e.name,this.name),this.description=o.Common.parseString(e.description,this.description),this.tags=e.tags||this.tags}toString(){return o.Common.joinNotEmpty([this.name,this.description])}merge(e){this.name=this.name||e.name,this.description=this.description||e.description,this.mergeTags(e.tags)}mergeTags(e){this.tags=Array.from(new Set([...this.tags,...e]))}mergeTag(e){this.tags=Array.from(new Set([...this.tags,e]))}}},5760:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Device=void 0;const i=n(7722),o=n(4830),a=n(750),r=n(5974),s=n(5088),l=n(1985);class c extends i.Identifiable{constructor(){super(...arguments),this.type=a.TypeName.Device,this.spatial=new o.GeoSpatial,this.os=null,this.model=null}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.spatial.applyJSON(e.spatial),this.os=s.Common.parseString(e.os,null),this.model=s.Common.parseString(e.model,null)}projectSpatial(e,t=0){const n=new o.GeoSpatial;n.updated=new l.Datetime(new Date(e.value.getTime()+t));const i=n.updated.elapsedTime(this.spatial.updated);return n.coordinate=this.spatial.projectCoordinate(i),n.altitude=this.spatial.projectAltitude(i),n.orientation=this.spatial.projectOrientation(i),n.velocity=this.spatial.velocity,n}}t.Device=c},2700:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disengagement=void 0;const i=n(7722),o=n(750),a=n(1985),r=n(7787),s=n(5974);class l extends i.Identifiable{constructor(e=new r.Message){super(),this.type=o.TypeName.Disengagement,this.disengaged=new a.Datetime,this.reason=e}applyJSON(e){super.applyJSON(e),s.Serialization.validateType(e,this.type),this.disengaged.applyJSON(e.disengaged),this.reason.applyJSON(e.reason)}}t.Disengagement=l},4545:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DistanceTolerance=void 0;const i=n(750),o=n(5088),a=n(5974);t.DistanceTolerance=class{constructor(e=0,t=0){this.type=i.TypeName.DistanceTolerance,this.horizontal=e,this.vertical=t}valid(e,t){return this.validHorizontal(e)&&this.validVertical(t)}validHorizontal(e){return e<=this.horizontal}validVertical(e){return Math.abs(e)<=this.vertical}applyJSON(e){a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.horizontal=o.Common.parseFloat(e.horizontal,this.horizontal),this.vertical=o.Common.parseFloat(e.vertical,this.vertical)}}},8510:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Drone=void 0;const i=n(5974),o=n(5226),a=n(7722),r=n(4830),s=n(9645),l=n(3405),c=n(750),u=n(4457),m=n(1111),d=n(1985),p=n(2903),h=n(7247),f=n(944),g=n(6750),y=n(6241),C=n(9871),v=n(5088),b=n(916);class S extends a.Identifiable{constructor(){super(...arguments),this.type=c.TypeName.Drone,this.model=null,this.serialNumber=null,this.takeoffCoordinate=new o.GeoCoordinate,this.takeoffAltitude=null,this.spatial=new r.GeoSpatial,this.batteryPercent=null,this.obstacleDistance=null,this.cameras={},this.gimbals={},this.statelessCommands=[],this.statefulCommands=[],this.commandExecutionStates={}}applyJSON(e){super.applyJSON(e),i.Serialization.validateType(e,this.type),this.model=v.Common.parseString(e.model),this.serialNumber=v.Common.parseString(e.serialNumber),this.takeoffCoordinate.applyJSON(e.takeoffCoordinate),this.spatial.applyJSON(e.spatial),this.takeoffAltitude=i.Serialization.deserialize(e.takeoffAltitude,C.Altitude),this.batteryPercent=v.Common.parseFloat(e.batteryPercent,null),this.obstacleDistance=v.Common.parseFloat(e.obstacleDistance,null),this.cameras={};for(let t of Object.keys(e.cameras)){const n=new m.Camera(parseInt(t));n.applyJSON(e.cameras[t]),this.cameras[t]=n}this.gimbals={};for(let t of Object.keys(e.gimbals)){const n=new u.Gimbal(parseInt(t));n.applyJSON(e.gimbals[t]),this.gimbals[t]=n}if(this.statelessCommands=[],Array.isArray(e.statelessCommands))for(let t of e.statelessCommands)this.statelessCommands.push(i.Serialization.deserialize(t,s.Command,!1));if(this.statefulCommands=[],Array.isArray(e.statefulCommands))for(let t of e.statefulCommands)this.statefulCommands.push(i.Serialization.deserialize(t,s.Command,!1));this.commandExecutionStates={};for(let t of Object.keys(e.commandExecutionStates)){const n=new l.CommandExecutionState(t);n.applyJSON(e.commandExecutionStates[t]),this.commandExecutionStates[t]=n}}referenceSources(e){return new g.OrientationReferenceSources(new f.OrientationXReferenceSources(e.x),new p.OrientationZReferenceSources(this.spatial.velocity.horizontal.direction,this.spatial.orientation.yaw,e.z))}projectSpatial(e,t=2*h.Constants.DroneConnectionLatency){const n=new r.GeoSpatial;n.updated=new d.Datetime(new Date(e.value.getTime()+t));const i=n.updated.elapsedTime(this.spatial.updated);return n.coordinate=this.spatial.projectCoordinate(i),n.altitude=this.spatial.projectAltitude(i),n.orientation=this.spatial.projectOrientation(i),n.velocity=this.spatial.velocity,n}projectGimbalOrientation(e,t,n=2*h.Constants.DroneConnectionLatency){const i=new d.Datetime(new Date(t.value.getTime()+n)).elapsedTime(this.spatial.updated);return this.gimbal(e).projectOrientation(i)}camera(e=0){return this.cameras[e]||(this.cameras[e]=new m.Camera(e)),this.cameras[e]}gimbal(e=0){return this.gimbals[e]||(this.gimbals[e]=new u.Gimbal(e)),this.gimbals[e]}gimbalOrientation(e=0){const t=this.gimbal(e),n=i.Serialization.clone(t.orientation);return t.settings.mode!==c.GimbalMode.Free&&(n.yaw=this.spatial.orientation.yaw),n}createCameraFile(e,t,n,o){const a=i.Serialization.clone(this.spatial.orientation),r=this.gimbal(e);return a.x=r.orientation.x,a.xReference=r.orientation.xReference,a.y=r.orientation.y,new b.CameraFile(t,n,o,null,i.Serialization.clone(this.spatial.coordinate),i.Serialization.clone(this.spatial.altitude),a)}addStatelessCommand(e){this.statelessCommands.push(e)}addStatefulCommand(e){this.statefulCommands.push(e),this.commandExecutionStates[e.id]=new l.CommandExecutionState(e.id)}removeStatefulCommand(e){this.statefulCommands=this.statefulCommands.filter((t=>t.id!==e.id)),delete this.commandExecutionStates[e.id]}removeAllStatefulCommands(){this.statefulCommands=[],this.commandExecutionStates={}}commandExecutionState(e){return this.commandExecutionStates[e]}updateCommandExecutionState(e,t,n=null,i=null){const o=this.commandExecutionState(e);o&&o.update(t,n,i)}statefulCommandsWhereStatus(e){return this.statefulCommands.filter((t=>{const n=this.commandExecutionState(t.id);return n&&n.status===e}))}get takeoffLocation(){return this.takeoffAltitude?new y.GeoLocation(this.takeoffCoordinate,this.takeoffAltitude):null}get groundCoordinateInView(){return this.spatial.groundCoordinate(this.gimbalOrientation().pitch,this.gimbalOrientation().yaw)}groundCoordinatesInView(e){return this.spatial.groundCoordinates(e,this.gimbalOrientation().pitch,this.gimbalOrientation().yaw)}}t.Drone=S},4137:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Engagement=void 0;const i=n(7722),o=n(5088),a=n(750),r=n(1985),s=n(8510),l=n(5974),c=n(4334),u=n(2700),m=n(4567),d=n(5760),p=n(7247);class h extends i.Identifiable{constructor(e=null,t=new m.User,n=new d.Device,i=new s.Drone,o=null){super(),this.type=a.TypeName.Engagement,this.reengagement=null,this.lastExecuted=null,this.timeSinceLastExecution=0,this.totalExecutes=0,this.executeIntervalTarget=p.Constants.ExecuteIntervalTarget,this.executeIntervalMax=p.Constants.ExecuteIntervalMax,this.executeDelayStrikesMax=p.Constants.ExecuteDelayStrikesMax,this.disengagement=null,this.engaged=e||new r.Datetime,this.reengagement=o,this.lastUserSnapshot=l.Serialization.clone(t),this.startDeviceSpatial=l.Serialization.clone(n.spatial),this.lastDeviceSnapshot=l.Serialization.clone(n),this.startDroneSpatial=l.Serialization.clone(i.spatial),this.lastDroneSnapshot=l.Serialization.clone(i)}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.engaged.applyJSON(e.engaged),this.reengagement=l.Serialization.deserialize(e.reengagement,c.Mission),this.lastUserSnapshot.applyJSON(e.lastUserSnapshot),this.startDeviceSpatial.applyJSON(e.startDeviceSpatial),this.lastDeviceSnapshot.applyJSON(e.lastDeviceSnapshot),this.startDroneSpatial.applyJSON(e.startDroneSpatial),this.lastDroneSnapshot.applyJSON(e.lastDroneSnapshot),this.lastExecuted=l.Serialization.deserialize(e.lastExecuted,r.Datetime),this.timeSinceLastExecution=o.Common.parseFloat(e.timeSinceLastExecution,this.timeSinceLastExecution),this.totalExecutes=o.Common.parseInt(e.totalExecutes,this.totalExecutes),this.executeIntervalTarget=o.Common.parseFloat(e.executeIntervalTarget,this.executeIntervalTarget),this.executeIntervalMax=o.Common.parseFloat(e.executeIntervalMax,this.executeIntervalMax),this.executeDelayStrikesMax=o.Common.parseFloat(e.executeDelayStrikesMax,this.executeDelayStrikesMax),this.disengagement=l.Serialization.deserialize(e.disengagement,u.Disengagement)}execute(e,t,n=new d.Device,i){this.lastExecuted&&(this.timeSinceLastExecution=e.elapsedTime(this.lastExecuted)),this.lastUserSnapshot=l.Serialization.clone(t),this.lastDeviceSnapshot=l.Serialization.clone(n),this.lastDroneSnapshot=l.Serialization.clone(i),this.lastExecuted=e,this.totalExecutes++}disengage(e,t){this.disengagement||(e.removeAllStatefulCommands(),this.disengagement=new u.Disengagement(t))}get currentDatetime(){return this.lastExecuted||this.engaged}get timeElapsed(){return(this.currentDatetime.value.getTime()-this.engaged.value.getTime())/1e3}}t.Engagement=h},750:(e,t)=>{"use strict";var n,i,o,a,r,s,l,c,u,m,d,p,h,f,g,y,C,v,b,S,w,M,x,O,P,T,D,E,A,F,N,I,_,R,L,k,z,B,j,V,G,U,J,W,H,q,Z,K,$,X,Y,Q,ee,te,ne,ie,oe,ae,re;Object.defineProperty(t,"__esModule",{value:!0}),t.OrbitDirection=t.OrientationZReference=t.OrientationXReference=t.MapPattern=t.MessageLevel=t.MeasurementType=t.InterpolationFunction=t.GimbalMode=t.GeoSpatialSource=t.FacadePattern=t.FacadeCapturePriority=t.FacadeBoundaryFace=t.DroneOcuSyncFrequencyBand=t.DroneOcuSyncChannelSelectionMode=t.DroneLightbridgeFrequencyBand=t.DroneLightbridgeChannelSelectionMode=t.DroneConnectionFailSafeBehavior=t.DJIWaypointMissionComponentWaypointActionType=t.DJIWaypointTurnMode=t.DJIWaypointMissionFlightPathMode=t.DJIWaypointMissionHeadingMode=t.DJIWaypointMissionGotoWaypointMode=t.ComponentExecutionStatus=t.CommandReengagementTiming=t.CommandExecutionStatus=t.CameraWhiteBalancePreset=t.CameraVideoStandard=t.CameraVideoResolution=t.CameraVideoMode=t.CameraVideoFrameRate=t.CameraVideoFieldOfView=t.CameraVideoFileFormat=t.CameraVideoFileCompressionStandard=t.CameraStorageLocation=t.CameraShutterSpeed=t.CameraPhotoMode=t.CameraPhotoFileFormat=t.CameraPhotoAspectRatio=t.CameraMode=t.CameraMeteringMode=t.CameraISO=t.CameraFocusMode=t.CameraFileIndexMode=t.CameraExposureMode=t.CameraExposureCompensation=t.CameraColor=t.CameraCaptureType=t.CameraAperture=t.CameraAEBCount=t.AltitudeSystem=void 0,t.ZoneShape=t.ZoneMotionPriority=t.VariableValueType=t.UnitSystem=t.TypeName=t.RotationDirection=t.PlanCompleteAction=t.PathMarkerPositioning=t.PathCornering=void 0,(re=t.AltitudeSystem||(t.AltitudeSystem={})).ATL="atl",re.AGL="agl",re.MSL="msl",(ae=t.CameraAEBCount||(t.CameraAEBCount={}))._3="3",ae._5="5",ae._7="7",ae.Unknown="unknown",(oe=t.CameraAperture||(t.CameraAperture={})).F1dot6="f/1dot6",oe.F1dot7="f/1dot7",oe.F1dot8="f/1dot8",oe.F2="f/2",oe.F2dot2="f/2dot2",oe.F2dot4="f/2dot4",oe.F2dot5="f/2dot5",oe.F2dot6="f/2dot6",oe.F2dot8="f/2dot8",oe.F3dot2="f/3dot2",oe.F3dot4="f/3dot4",oe.F3dot5="f/3dot5",oe.F4="f/4",oe.F4dot5="f/4dot5",oe.F4dot8="f/4dot8",oe.F5="f/5",oe.F5dot6="f/5dot6",oe.F6dot3="f/6dot3",oe.F6dot8="f/6dot8",oe.F7dot1="f/7dot1",oe.F8="f/8",oe.F9="f/9",oe.F9dot5="f/9dot5",oe.F9dot6="f/9dot6",oe.F10="f/10",oe.F11="f/11",oe.F13="f/13",oe.F14="f/14",oe.F16="f/16",oe.F18="f/18",oe.F19="f/19",oe.F20="f/20",oe.F22="f/22",oe.Unknown="unknown",(ie=t.CameraCaptureType||(t.CameraCaptureType={})).Photos="photos",ie.Video="video",(ne=t.CameraColor||(t.CameraColor={})).None="none",ne.Art="art",ne.BlackAndWhite="blackAndWhite",ne.Bright="bright",ne.DCinelike="dCinelike",ne.Portrait="portrait",ne.M31="m31",ne.KDX="kDX",ne.Prismo="prismo",ne.Jugo="jugo",ne.DLog="dLog",ne.TrueColor="trueColor",ne.Inverse="inverse",ne.Reminiscence="reminiscence",ne.Solarize="solarize",ne.Posterize="posterize",ne.Whiteboard="whiteboard",ne.Blackboard="blackboard",ne.Aqua="aqua",ne.Delta="delta",ne.DK79="dk79",ne.Vision4="vision4",ne.Vision6="vision6",ne.TrueColorExt="trueColorExt",ne.FilmA="filmA",ne.FilmB="filmB",ne.FilmC="filmC",ne.FilmD="filmD",ne.FilmE="filmE",ne.FilmF="filmF",ne.FilmG="filmG",ne.FilmH="filmH",ne.FilmI="filmI",ne.HLG="hlg",ne.Unknown="unknown",(te=t.CameraExposureCompensation||(t.CameraExposureCompensation={})).N50="n50",te.N47="n47",te.N43="n43",te.N40="n40",te.N37="n37",te.N33="n33",te.N30="n30",te.N27="n27",te.N23="n23",te.N20="n20",te.N17="n17",te.N13="n13",te.N10="n10",te.N07="n07",te.N03="n03",te.N00="n00",te.P03="p03",te.P07="p07",te.P10="p10",te.P13="p13",te.P17="p17",te.P20="p20",te.P23="p23",te.P27="p27",te.P30="p30",te.P33="p33",te.P37="p37",te.P40="p40",te.P43="p43",te.P47="p47",te.P50="p50",te.Fixed="fixed",te.Unknown="unknown",(ee=t.CameraExposureMode||(t.CameraExposureMode={})).Program="program",ee.ShutterPriority="shutterPriority",ee.AperturePriority="aperturePriority",ee.Manual="manual",ee.Unknown="unknown",(Q=t.CameraFileIndexMode||(t.CameraFileIndexMode={})).Reset="reset",Q.Sequence="sequence",Q.Unknown="unknown",(Y=t.CameraFocusMode||(t.CameraFocusMode={})).Manual="manual",Y.Auto="auto",Y.AutoContinuous="autoContinuous",Y.Unknown="unknown",(X=t.CameraISO||(t.CameraISO={})).Auto="auto",X._100="100",X._200="200",X._400="400",X._800="800",X._1600="1600",X._3200="3200",X._6400="6400",X._12800="12800",X._25600="25600",X.Fixed="fixed",X.Unknown="unknown",($=t.CameraMeteringMode||(t.CameraMeteringMode={})).Center="center",$.Average="average",$.Spot="spot",$.Unknown="unknown",(K=t.CameraMode||(t.CameraMode={})).Photo="photo",K.Video="video",K.Playback="playback",K.Download="download",K.Broadcast="broadcast",K.Unknown="unknown",(Z=t.CameraPhotoAspectRatio||(t.CameraPhotoAspectRatio={}))._4_3="4:3",Z._16_9="16:9",Z._3_2="3:2",Z.Unknown="unknown",(q=t.CameraPhotoFileFormat||(t.CameraPhotoFileFormat={})).RAW="raw",q.JPEG="jpeg",q.RAWAndJPEG="raw+jpeg",q.TIFF14Bit="tiff14bit",q.RadiometricJPEG="radiometricJpeg",q.TIFF14BitLinearLowTempResolution="tiff14bitLinearLowTempResolution",q.TIFF14BitLinearHighTempResolution="tiff14bitLinearHighTempResolution",q.Unknown="unknown",(H=t.CameraPhotoMode||(t.CameraPhotoMode={})).Single="single",H.Interval="interval",H.AEB="aeb",H.HDR="hdr",H.EHDR="ehdr",H.Burst="burst",H.RAWBurst="rawBurst",H.ShallowFocus="shallowFocus",H.Panorama="panorama",H.HyperLight="hyperLight",H.TimeLapse="timeLapse",H.HighResolution="highResolution",H.Smart="smart",H.InternalAISpotChecking="internalAISpotChecking",H.Unknown="unknown",(W=t.CameraShutterSpeed||(t.CameraShutterSpeed={}))._1_8000="1/8000",W._1_6400="1/6400",W._1_6000="1/6000",W._1_5000="1/5000",W._1_4000="1/4000",W._1_3200="1/3200",W._1_3000="1/3000",W._1_2500="1/2500",W._1_2000="1/2000",W._1_1600="1/1600",W._1_1500="1/1500",W._1_1250="1/1250",W._1_1000="1/1000",W._1_800="1/800",W._1_750="1/750",W._1_725="1/725",W._1_640="1/640",W._1_500="1/500",W._1_400="1/400",W._1_350="1/350",W._1_320="1/320",W._1_250="1/250",W._1_240="1/240",W._1_200="1/200",W._1_180="1/180",W._1_160="1/160",W._1_125="1/125",W._1_120="1/120",W._1_100="1/100",W._1_90="1/90",W._1_80="1/80",W._1_60="1/60",W._1_50="1/50",W._1_45="1/45",W._1_40="1/40",W._1_30="1/30",W._1_25="1/25",W._1_20="1/20",W._1_15="1/15",W._1_12dot5="1/12dot5",W._1_10="1/10",W._1_8="1/8",W._1_6dot25="1/6dot25",W._1_6="1/6",W._1_5="1/5",W._1_4="1/4",W._1_3="1/3",W._1_2dot5="1/2dot5",W._0dot3="0dot3",W._1_2="1/2",W._1_1dot67="1/1dot67",W._1_1dot25="1/1dot25",W._0dot7="0dot7",W._1="1",W._1dot3="1dot3",W._1dot4="1dot4",W._1dot6="1dot6",W._2="2",W._2dot5="2dot5",W._3="3",W._3dot2="3dot2",W._4="4",W._5="5",W._6="6",W._7="7",W._8="8",W._9="9",W._10="10",W._11="11",W._13="13",W._15="15",W._16="16",W._20="20",W._23="23",W._25="25",W._30="30",W.Unknown="unknown",(J=t.CameraStorageLocation||(t.CameraStorageLocation={})).SDCard="sdCard",J.Internal="internal",J.Unknown="unknown",(U=t.CameraVideoFileCompressionStandard||(t.CameraVideoFileCompressionStandard={})).H264="h264",U.H265="h265",U.Unknown="unknown",(G=t.CameraVideoFileFormat||(t.CameraVideoFileFormat={})).MOV="mov",G.MP4="mp4",G.TIFFSequence="tiffSequence",G.SEQ="seq",G.Unknown="unknown",(V=t.CameraVideoFieldOfView||(t.CameraVideoFieldOfView={})).Default="default",V.Narrow="narrow",V.Wide="wide",V.Unknown="unknown",(j=t.CameraVideoFrameRate||(t.CameraVideoFrameRate={}))._23dot976="23dot976",j._24="24",j._25="25",j._29dot970="29dot970",j._30="30",j._47dot950="47dot950",j._48="48",j._50="50",j._59dot940="59dot940",j._60="60",j._90="90",j._96="96",j._100="100",j._120="120",j._8dot7="8dot7",j.Unknown="unknown",(B=t.CameraVideoMode||(t.CameraVideoMode={})).Normal="normal",B.HDR="hdr",B.SlowMotion="slowMotion",B.Unknown="unknown",(z=t.CameraVideoResolution||(t.CameraVideoResolution={}))._336x256="336x256",z._640x360="640x360",z._640x480="640x480",z._640x512="640x512",z._1280x720="1280x720",z._1920x1080="1920x1080",z._2048x1080="2048x1080",z._2688x1512="2688x1512",z._2704x1520="2704x1520",z._2720x1530="2720x1530",z._3712x2088="3712x2088",z._3840x1572="3840x1572",z._3840x2160="3840x2160",z._3944x2088="3944x2088",z._4096x2160="4096x2160",z._4608x2160="4608x2160",z._4608x2592="4608x2592",z._5280x2160="5280x2160",z._5280x2972="5280x2972",z._5760x3240="5760x3240",z._6016x3200="6016x3200",z.Max="max",z.NoSSDVideo="noSSDVideo",z.Unknown="unknown",(k=t.CameraVideoStandard||(t.CameraVideoStandard={})).PAL="pal",k.NTSC="ntsc",k.Unknown="unknown",(L=t.CameraWhiteBalancePreset||(t.CameraWhiteBalancePreset={})).Auto="auto",L.Sunny="sunny",L.Cloudy="cloudy",L.WaterSurface="waterSurface",L.IndoorIncandescent="indoorIncandescent",L.IndoorFluorescent="indoorFluorescent",L.Custom="custom",L.Neutral="neutral",L.Unknown="unknown",(R=t.CommandExecutionStatus||(t.CommandExecutionStatus={})).Pending="pending",R.Queued="queued",R.Executing="executing",R.Succeeded="succeeded",R.Failed="failed",(_=t.CommandReengagementTiming||(t.CommandReengagementTiming={})).Never="never",_.Approach="approach",_.Destination="destination",(I=t.ComponentExecutionStatus||(t.ComponentExecutionStatus={})).Pending="pending",I.Executing="executing",I.Succeeded="succeeded",I.Failed="failed",(N=t.DJIWaypointMissionGotoWaypointMode||(t.DJIWaypointMissionGotoWaypointMode={})).Safely="safely",N.PointToPoint="pointToPoint",(F=t.DJIWaypointMissionHeadingMode||(t.DJIWaypointMissionHeadingMode={})).Auto="auto",F.UsingInitialDirection="usingInitialDirection",F.ControlledByRemoteController="controlledByRemoteController",F.UsingWaypointHeading="usingWaypointHeading",F.TowardPointOfInterest="towardPointOfInterest",(A=t.DJIWaypointMissionFlightPathMode||(t.DJIWaypointMissionFlightPathMode={})).Normal="normal",A.Curved="curved",(E=t.DJIWaypointTurnMode||(t.DJIWaypointTurnMode={})).Clockwise="clockwise",E.DJIWaypointTurnCounterClockwise="counterClockwise",(D=t.DJIWaypointMissionComponentWaypointActionType||(t.DJIWaypointMissionComponentWaypointActionType={})).Stay="stay",D.ShootPhoto="shootPhoto",D.StartRecord="startRecord",D.StopRecord="stopRecord",D.RotateAircraft="rotateAircraft",D.RotateGimbalPitch="rotateGimbalPitch",(T=t.DroneConnectionFailSafeBehavior||(t.DroneConnectionFailSafeBehavior={})).Hover="hover",T.ReturnHome="returnHome",T.AutoLand="autoLand",T.Unknown="unknown",(P=t.DroneLightbridgeChannelSelectionMode||(t.DroneLightbridgeChannelSelectionMode={})).Auto="auto",P.Manual="manual",P.Unknown="unknown",(O=t.DroneLightbridgeFrequencyBand||(t.DroneLightbridgeFrequencyBand={}))._2dot4ghz="2dot4ghz",O._5dot7ghz="5dot7ghz",O._5dot8ghz="5dot8ghz",O.Unknown="unknown",(x=t.DroneOcuSyncChannelSelectionMode||(t.DroneOcuSyncChannelSelectionMode={})).Auto="auto",x.Manual="manual",x.Unknown="unknown",(M=t.DroneOcuSyncFrequencyBand||(t.DroneOcuSyncFrequencyBand={}))._2dot4ghz="2dot4ghz",M._5dot8ghz="5dot8ghz",M.Dual="dual",M.Unknown="unknown",(w=t.FacadeBoundaryFace||(t.FacadeBoundaryFace={})).LineLeft="lineLeft",w.LineRight="lineRight",w.PolygonLeft="polygonLeft",w.PolygonRight="polygonRight",w.CircleClockwise="circleClockwise",w.CircleCounterclockwise="circleCounterclockwise",w.SpiralClockwise="spiralClockwise",w.SpiralCounterclockwise="spiralCounterclockwise",(S=t.FacadeCapturePriority||(t.FacadeCapturePriority={})).Time="time",S.Distance="distance",(b=t.FacadePattern||(t.FacadePattern={})).Horizontal="horizontal",b.Vertical="vertical",(v=t.GeoSpatialSource||(t.GeoSpatialSource={})).Input="input",v.Plan="plan",v.Device="device",v.Drone="drone",(C=t.GimbalMode||(t.GimbalMode={})).Free="free",C.FPV="fpv",C.YawFollow="yawFollow",C.Unknown="unknown",(y=t.InterpolationFunction||(t.InterpolationFunction={})).None="none",y.Linear="linear",y.Sigmoid="sigmoid",(g=t.MeasurementType||(t.MeasurementType={})).Distance="distance",g.VelocityHorizontal="velocityHorizontal",g.VelocityVertical="velocityVertical",g.VelocityRotational="velocityRotational",g.AccelerationHorizontal="accelerationHorizontal",g.AccelerationVertical="accelerationVertical",g.AccelerationRotational="accelerationRotational",g.Angle="angle",g.AngleMod="angleMod",g.Percent="percent",(f=t.MessageLevel||(t.MessageLevel={})).Info="info",f.Warning="warning",f.Danger="danger",f.Error="error",(h=t.MapPattern||(t.MapPattern={})).Normal="normal",h.Grid="grid",(p=t.OrientationXReference||(t.OrientationXReference={})).Horizon="horizon",p.Path="path",(d=t.OrientationZReference||(t.OrientationZReference={})).North="north",d.Course="course",d.Heading="heading",d.Path="path",(m=t.OrbitDirection||(t.OrbitDirection={})).Clockwise="clockwise",m.Counterclockwise="counterclockwise",(u=t.PathCornering||(t.PathCornering={})).Intersect="intersect",u.Rounded="rounded",(c=t.PathMarkerPositioning||(t.PathMarkerPositioning={})).Absolute="absolute",c.Coordinate="coordinate",(l=t.PlanCompleteAction||(t.PlanCompleteAction={})).None="none",l.ReturnHome="returnHome",l.AutoLand="autoLand",(s=t.RotationDirection||(t.RotationDirection={})).Clockwise="clockwise",s.Counterclockwise="counterclockwise",(r=t.TypeName||(t.TypeName={})).AEBCountCameraCommand="AEBCountCameraCommand",r.Altitude="Altitude",r.AltitudeRange="AltitudeRange",r.ApertureCameraCommand="ApertureCameraCommand",r.ApproachableComponent="ApproachableComponent",r.Asset="Asset",r.AssetManifest="AssetManifest",r.AssetSource="AssetSource",r.AutoExposureLockCameraCommand="AutoExposureLockCameraCommand",r.AutoLockGimbalCameraCommand="AutoLockGimbalCameraCommand",r.Camera="Camera",r.CameraFile="CameraFile",r.CameraImageSpecification="CameraImageSpecification",r.CameraLensSpecification="CameraLensSpecification",r.CameraSensorSpecification="CameraSensorSpecification",r.CameraCommand="CameraCommand",r.CameraSpecification="CameraSpecification",r.CameraCaptureConfiguration="CameraCaptureConfiguration",r.CollisionAvoidanceDroneCommand="CollisionAvoidanceDroneCommand",r.ColorCameraCommand="ColorCameraCommand",r.CommandComponent="CommandComponent",r.CommandExecutionState="CommandExecutionState",r.Component="Component",r.ComponentExecutionState="ComponentExecutionState",r.ComponentSource="ComponentSource",r.ConnectionFailSafeBehaviorDroneCommand="ConnectionFailSafeBehaviorDroneCommand",r.ContrastCameraCommand="ContrastCameraCommand",r.CourseComponent="CourseComponent",r.Datetime="Datetime",r.Descriptors="Descriptors",r.Disengagement="Disengagement",r.DestinationComponent="DestinationComponent",r.DistanceTolerance="DistanceTolerance",r.Device="Device",r.DisengageComponent="DisengageComponent",r.DJIWaypointMissionComponent="DJIWaypointMissionComponent",r.DJIWaypointMissionComponentWaypoint="DJIWaypointMissionComponentWaypoint",r.DJIWaypointMissionComponentWaypointAction="DJIWaypointMissionComponentWaypointAction",r.DJIWaypointMissionComponentWaypointActionType="DJIWaypointMissionComponentWaypointActionType",r.Drone="Drone",r.DroneCommand="DroneCommand",r.DroneMotionComponent="DroneMotionComponent",r.Engagement="Engagement",r.Execution="Execution",r.ExposureCompensationCameraCommand="ExposureCompensationCameraCommand",r.ExposureCompensationStepCameraCommand="ExposureCompensationStepCameraCommand",r.ExposureModeCameraCommand="ExposureModeCameraCommand",r.FacadeComponent="FacadeComponent",r.FacadeComponentBoundaryPoint="FacadeComponentBoundaryPoint",r.FacadeComponentModelSample="FacadeComponentModelSample",r.FocusCameraCommand="FocusCameraCommand",r.FocusModeCameraCommand="FocusModeCameraCommand",r.FieldOfView="FieldOfView",r.FileIndexModeCameraCommand="FileIndexModeCameraCommand",r.Func="Func",r.FuncInput="FuncInput",r.FuncInputExtensions="FuncInputExtensions",r.GeoCoordinate="GeoCoordinate",r.GeoLocation="GeoLocation",r.GeoReferencedOffset="GeoReferencedOffset",r.GeoSpatial="GeoSpatial",r.Gimbal="Gimbal",r.GimbalCommand="GimbalCommand",r.HeadingDroneCommand="HeadingDroneCommand",r.HeadingComponent="HeadingComponent",r.HomeLocationDroneCommand="HomeLocationDroneCommand",r.InspectionComponent="InspectionComponent",r.InspectionComponentAction="InspectionComponentAction",r.InspectionComponentInspectionPoint="InspectionComponentInspectionPoint",r.Interpolation="Interpolation",r.ISOCameraCommand="ISOCameraCommand",r.LandingGearAutomaticMovementDroneCommand="LandingGearAutomaticMovementDroneCommand",r.LandingGearDeployDroneCommand="LandingGearDeployDroneCommand",r.LandingGearRetractDroneCommand="LandingGearRetractDroneCommand",r.LandingProtectionDroneCommand="LandingProtectionDroneCommand",r.LightbridgeChannelDroneCommand="LightbridgeChannelDroneCommand",r.LightbridgeChannelSelectionModeDroneCommand="LightbridgeChannelSelectionModeDroneCommand",r.LightbridgeFrequencyBandDroneCommand="LightbridgeFrequencyBandDroneCommand",r.Limits="Limits",r.Line2="Line2",r.ListComponent="ListComponent",r.LowBatteryWarningThresholdDroneCommand="LowBatteryWarningThresholdDroneCommand",r.MapComponent="MapComponent",r.MapComponentBoundaryPoint="MapComponentBoundaryPoint",r.MaxAltitudeDroneCommand="MaxAltitudeDroneCommand",r.MaxDistanceDroneCommand="MaxDistanceDroneCommand",r.MaxDistanceLimitationDroneCommand="MaxDistanceLimitationDroneCommand",r.MechanicalShutterCameraCommand="MechanicalShutterCameraCommand",r.Message="Message",r.MessageGroup="MessageGroup",r.MeteringModeCameraCommand="MeteringModeCameraCommand",r.Mission="Mission",r.Mode="Mode",r.ModeInput="ModeInput",r.ModeSession="ModeSession",r.ModeCameraCommand="ModeCameraCommand",r.ModeGimbalCommand="ModeGimbalCommand",r.MotionLimits="MotionLimits",r.MotionLimitsOptional="MotionLimitsOptional",r.MotionLimits3="MotionLimits3",r.MotionLimits3Optional="MotionLimits3Optional",r.MotionLimits6="MotionLimits6",r.MotionLimits6Optional="MotionLimits6Optional",r.OcuSyncChannelDroneCommand="OcuSyncChannelDroneCommand",r.OcuSyncChannelSelectionModeDroneCommand="OcuSyncChannelSelectionModeDroneCommand",r.OcuSyncFrequencyBandDroneCommand="OcuSyncFrequencyBandDroneCommand",r.OrbitComponent="OrbitComponent",r.Orientation3="Orientation3",r.Orientation3Optional="Orientation3Optional",r.OrientationGimbalCommand="OrientationGimbalCommand",r.PhotoAspectRatioCameraCommand="PhotoAspectRatioCameraCommand",r.PhotoIntervalCameraCommand="PhotoIntervalCameraCommand",r.PhotoModeCameraCommand="PhotoModeCameraCommand",r.PointOfInterest="PointOfInterest",r.Position3="Position3",r.PathComponent="PathComponent",r.PathComponentWaypoint="PathComponentWaypoint",r.PathComponentMarker="PathComponentMarker",r.PathComponentModelSample="PathComponentModelSample",r.PlanComponent="PlanComponent",r.PlanReengagementRules="PlanReengagementRules",r.PlanRestrictionZone="PlanRestrictionZone",r.PhotoFileFormatCameraCommand="PhotoFileFormatCameraCommand",r.Point2="Point2",r.PrecisionLandingDroneCommand="PrecisionLandingDroneCommand",r.RemoteController="RemoteController",r.RemoteControllerButton="RemoteControllerButton",r.RemoteControllerStick="RemoteControllerStick",r.RemoteControllerSticksDroneCommand="RemoteControllerSticksDroneCommand",r.RemoteControllerWheel="RemoteControllerWheel",r.ReturnHomeAltitudeDroneCommand="ReturnHomeAltitudeDroneCommand",r.ReturnHomeObstacleAvoidanceDroneCommand="ReturnHomeObstacleAvoidanceDroneCommand",r.ReturnHomeRemoteObstacleAvoidanceDroneCommand="ReturnHomeRemoteObstacleAvoidanceDroneCommand",r.RotationComponent="RotationComponent",r.SaturationCameraCommand="SaturationCameraCommand",r.SeriousLowBatteryWarningThresholdDroneCommand="SeriousLowBatteryWarningThresholdDroneCommand",r.SharpnessCameraCommand="SharpnessCameraCommand",r.ShutterSpeedCameraCommand="ShutterSpeedCameraCommand",r.SmartReturnHomeDroneCommand="SmartReturnHomeDroneCommand",r.SourcedGeoSpatial="SourcedGeoSpatial",r.SpotMeteringTargetCameraCommand="SpotMeteringTargetCameraCommand",r.StorageLocationCameraCommand="StorageLocationCameraCommand",r.StartCaptureCameraCommand="StartCaptureCameraCommand",r.StopCaptureCameraCommand="StopCaptureCameraCommand",r.SubComponent="SubComponent",r.Timeline="Timeline",r.TimelineCameraCapture="TimelineCameraCapture",r.TimelineCommand="TimelineCommand",r.TimelineFrame="TimelineFrame",r.UpwardsAvoidanceDroneCommand="UpwardsAvoidanceDroneCommand",r.UserInterfaceSettings="UserInterfaceSettings",r.User="User",r.Variable="Variable",r.Vector2="Vector2",r.Velocity3="Velocity3",r.Velocity6="Velocity6",r.VelocityDroneCommand="VelocityDroneCommand",r.VelocityGimbalCommand="VelocityGimbalCommand",r.VideoCaptionCameraCommand="VideoCaptionCameraCommand",r.VideoFileCompressionStandardCameraCommand="VideoFileCompressionStandardCameraCommand",r.VideoFileFormatCameraCommand="VideoFileFormatCameraCommand",r.VideoModeCameraCommand="VideoModeCameraCommand",r.VideoResolutionFrameRateCameraCommand="VideoResolutionFrameRateCameraCommand",r.VideoStandardCameraCommand="VideoStandardCameraCommand",r.VisionAssistedPositioningDroneCommand="VisionAssistedPositioningDroneCommand",r.WaitComponent="WaitComponent",r.WhiteBalancePresetCameraCommand="WhiteBalancePresetCameraCommand",r.WhiteBalanceCustomCameraCommand="WhiteBalanceCustomCameraCommand",r.YawSimultaneousFollowGimbalCommand="YawSimultaneousFollowGimbalCommand",r.Zone="Zone",r.ZoneBoundaryPoint="ZoneBoundaryPoint",(a=t.UnitSystem||(t.UnitSystem={})).Metric="metric",a.Imperial="imperial",(o=t.VariableValueType||(t.VariableValueType={})).Null="null",o.Drone="Drone",o.Boolean="boolean",o.Number="number",o.String="string",(i=t.ZoneMotionPriority||(t.ZoneMotionPriority={})).Horizontal="horizontal",i.Vertical="vertical",(n=t.ZoneShape||(t.ZoneShape={})).Circle="circle",n.Polygon="polygon"},8777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Executable=void 0;const i=n(4137),o=n(7722),a=n(5974),r=n(5088);class s extends o.Identifiable{constructor(){super(...arguments),this.engagements=[]}applyJSON(e){if(super.applyJSON(e),this.engagements=[],Array.isArray(e.engagements))for(let t of e.engagements)this.engagements.push(a.Serialization.deserialize(t,i.Engagement,!1))}get engagementsTimeElapsed(){let e=0;return this.engagements.forEach((t=>{e+=t.timeElapsed})),e}get engaged(){const e=r.Common.lastSafe(this.engagements);return!!e&&!e.disengagement}get reengaging(){if(this.engaged){const e=r.Common.lastSafe(this.engagements);if(e&&e.reengagement)return!e.reengagement.complete}return!1}engage(e,t=null){return null}execute(e,t=null,n=null){}disengage(e,t){const n=r.Common.lastSafe(this.engagements);n&&n.disengage(e.drone,t)}get disengagement(){const e=r.Common.lastSafe(this.engagements);return e?e.disengagement:null}addCameraFile(e,t){}}t.Executable=s},360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Execution=void 0;const i=n(8002),o=n(750),a=n(9645),r=n(5974),s=n(916),l=n(5311);t.Execution=class{constructor(){this.type=o.TypeName.Execution,this.componentStates={},this.reengagementCommands=[],this.cameraFiles={}}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.componentStates={};for(let t of Object.keys(e.componentStates)){const n=new i.ComponentExecutionState(t);n.applyJSON(e.componentStates[t]),this.componentStates[t]=n}if(this.reengagementCommands=[],Array.isArray(e.reengagementCommands))for(let t of e.reengagementCommands)this.reengagementCommands.push(r.Serialization.deserialize(t,a.Command,!1));if(this.cameraFiles={},e.cameraFiles)for(let t of Object.keys(e.cameraFiles)){const n=e.cameraFiles[t];if(!Array.isArray(n))continue;const i=[];for(let e of n)i.push(r.Serialization.deserialize(e,s.CameraFile,!1));this.cameraFiles[parseInt(t)]=i}}getComponentStateByID(e){let t=this.componentStates[e];return t||(t=new i.ComponentExecutionState(e),this.componentStates[e]=t),t}getComponentState(e){return this.getComponentStateByID(e.id)}addReengagementCommand(e){if(-1===this.reengagementCommands.indexOf(e))if(e.reengagementReplaceable){for(var t=0;t<this.reengagementCommands.length;t++){const n=this.reengagementCommands[t];if(n.type===e.type&&!(n instanceof l.PayloadCommand&&e instanceof l.PayloadCommand&&n.channel!==e.channel)){this.reengagementCommands.splice(t,1);break}}this.reengagementCommands.push(e)}else this.reengagementCommands.push(e)}addCameraFile(e,t){const n=this.cameraFiles[e]||[];n.push(t),this.cameraFiles[e]=n}get allCameraFiles(){const e=[];for(let t of Object.values(this.cameraFiles))e.push(...t);return e}}},745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldOfView=void 0;const i=n(750),o=n(5088),a=n(5974);t.FieldOfView=class{constructor(e=0,t=0,n=0){this.type=i.TypeName.FieldOfView,this.horizontal=e,this.vertical=t,this.diagonal=n}applyJSON(e){a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.horizontal=o.Common.parseFloat(e.horizontal,this.horizontal),this.vertical=o.Common.parseFloat(e.vertical,this.vertical),this.diagonal=o.Common.parseFloat(e.diagonal,this.diagonal)}}},7343:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FuncInputExtensions=t.FuncInput=t.Func=void 0;const r=n(750),s=n(6437),l=n(7722),c=n(5664),u=n(5226),m=n(5974),d=n(2838),p=n(4147),h=n(5088),f=n(5293),g=n(5167),y=n(3310),C=n(4260),v=n(1747),b=a(n(3607));class S extends l.Identifiable{constructor(){super(...arguments),this.type=r.TypeName.Func,this.coordinate=new u.GeoCoordinate,this.descriptors=new c.Descriptors,this.introImageUrl=null,this.components=[],this.inputs=[],this.dynamicInputs=null,this.executable="",this.userInterfaceSettings=null,this.cachedDynamicInputs={}}toJSON(){return{id:this.id,type:this.type,coordinate:this.coordinate,descriptors:this.descriptors,introImageUrl:this.introImageUrl,components:this.components,inputs:this.inputs,dynamicInputs:this.dynamicInputs,executable:this.executable,userInterfaceSettings:this.userInterfaceSettings}}applyJSON(e){if(super.applyJSON(e),m.Serialization.validateType(e,this.type),this.coordinate.applyJSON(e.coordinate),this.descriptors.applyJSON(e.descriptors),this.introImageUrl=h.Common.parseString(e.introImageUrl),this.components=[],Array.isArray(e.components))for(let t of e.components)this.components.push(m.Serialization.deserialize(t,f.SubComponent,!1));if(this.inputs=[],Array.isArray(e.inputs))for(let t of e.inputs)this.inputs.push(m.Serialization.deserialize(t,w,!1));this.dynamicInputs=h.Common.parseString(e.dynamicInputs,null),this.executable=h.Common.parseString(e.executable,this.executable),this.userInterfaceSettings=m.Serialization.deserialize(e.userInterfaceSettings,g.UserInterfaceSettings,!0)}get title(){return this.descriptors.name||m.Serialization.typeDisplay(this)}get subtitle(){return d.Format.integer(this.inputs.length,{singular:p.Strings.FuncInput.name,plural:p.Strings.FuncInput.multiple}).toString()}get urls(){var e;const t=[];return this.introImageUrl&&t.push(this.introImageUrl),(null===(e=this.userInterfaceSettings)||void 0===e?void 0:e.reticleImageUrl)&&t.push(this.userInterfaceSettings.reticleImageUrl),this.inputs.forEach((e=>{e.imageUrl&&t.push(e.imageUrl)})),this.dynamicInputs&&t.push(...v.Convert.findStrings(this.dynamicInputs,(e=>e.startsWith("http")))),t.push(...v.Convert.findStrings(this.executable,(e=>e.startsWith("http")))),t}get inputsVariableValuesNamed(){const e={};return this.inputs.forEach(((t,n)=>{const i=m.Serialization.clone(t.variable);e[n]=i.value,i.descriptors.name&&(e[i.descriptors.name]=i.value)})),e}evaluate(e=!1,t,n=null,i=null,o=null,a=new s.PlanComponent){const r=new y.ComponentContext(a);r.metadata=o,r.drone=m.Serialization.clone(n||r.drone),n||(r.drone.takeoffCoordinate=m.Serialization.clone(this.coordinate),r.drone.spatial.coordinate=m.Serialization.clone(this.coordinate)),r.device=m.Serialization.clone(i||r.device),i||(r.device.spatial.coordinate=m.Serialization.clone(this.coordinate)),a.coordinate=m.Serialization.clone(r.drone.takeoffCoordinate),a.descriptors.name=this.descriptors.name,a.descriptors.tags=this.descriptors.tags;const l={};this.components.forEach(((e,t)=>{const n=m.Serialization.clone(e);n.descriptors.name&&(l[n.descriptors.name]=n),l[t]=n}));const c=["Dronelink","metadata","syntaxValidation","plan","context","components","inputs","variables",t],u=[b,o,e,a,r,l,this.inputs,this.inputsVariableValuesNamed];try{return Function(...c).bind(this)(...u)}catch(e){throw"string"==typeof e?new Error(e):e}}validateSyntax(e=null){const t=m.Serialization.clone(this);if(t.dynamicInputs)try{for(;t.addNextDynamicInput(e,null,null,!0)&&t.inputs.length<100;);}catch(e){throw h.Common.joinNotEmpty([p.Strings.Func.values.dynamicInputs,e])}t.inputs.forEach((t=>{t.optional||null!==t.variable.value||(t.enumValues&&t.enumValues.length>0?t.variable.value=t.enumValues[0]:t.variable.value=t.variable.defaultValue(e))}));try{t.evaluate(!0,t.executable)}catch(e){if(!t.dynamicInputs)throw e;throw h.Common.joinNotEmpty([p.Strings.Func.values.executable,e])}}nextDynamicInput(e=null,t=null,n=null,i=!1){if(!this.dynamicInputs)return null;const o=this.evaluate(i,this.dynamicInputs,e,t,n);return o&&o instanceof w?(o.dynamic=!0,o):null}addNextDynamicInput(e=null,t=null,n=null,i=!1){const o=this.nextDynamicInput(e,t,n,i);if(o){if(this.inputs.push(o),!i){const e=this.cachedDynamicInputs[o.key];e&&e.variable.compatible(o.variable)&&(o.variable=e.variable),this.cachedDynamicInputs[o.key]=o}return o}return null}removeLastDynamicInput(){const e=h.Common.lastSafe(this.inputs);return!(!e||!e.dynamic||(this.inputs.pop(),0))}addCachedInputs(e){const t={};this.inputs.forEach((e=>{e.key&&(t[e.key]=e)})),e.inputs.forEach((e=>{if(e.key){const n=t[e.key];n&&n.variable.compatible(e.variable)&&(n.variable=m.Serialization.clone(e.variable)),e.dynamic&&(this.cachedDynamicInputs[e.key]=e)}}))}execute(e=null,t=null,n=null){const i=new s.PlanComponent;return this.evaluate(!1,this.executable,e,t,n,i)||i}inputFormatted(e,t=null){if(e>=this.inputs.length)return"";const n=this.inputs[e];let i=n.variable.value;if(null===i)return n.variable.valueFormatted;if(n.formatter){Array.isArray(i)&&(i=i[t||0]);const e=["Dronelink","value","input","inputs","variables",n.formatter],o=[b,i,this,this.inputs,this.inputsVariableValuesNamed];try{const i=Function(...e)(...o);return null===t&&n.variable.value&&Array.isArray(n.variable.value)&&n.variable.value.length>1?`${i} + ${d.Format.integer(n.variable.value.length-1)} ${p.Strings.Common.more}`:i}catch(e){return e.message}}return null!==t?n.variable.valueFormattedArray(t):n.variable.valueFormatted}}t.Func=S;class w extends C.Input{constructor(){super(...arguments),this.type=r.TypeName.FuncInput,this.extensions=null}applyJSON(e){super.applyJSON(e),m.Serialization.validateType(e,this.type),this.extensions=m.Serialization.deserialize(e.extensions,M,!0)}}t.FuncInput=w;class M{constructor(){this.type=r.TypeName.FuncInputExtensions,this.droneOffsetsCoordinateReference=!1}applyJSON(e){m.Serialization.validateJson(e),m.Serialization.validateType(e,this.type),this.droneOffsetsCoordinateReference=h.Common.parseBoolean(e.droneOffsetsCoordinateReference,this.droneOffsetsCoordinateReference)}}t.FuncInputExtensions=M},5226:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GeoCoordinate=void 0;const r=a(n(7698)),s=n(1747),l=n(5807),c=n(750),u=n(2838),m=n(5088),d=n(4830),p=n(8111),h=n(5974),f=n(7411),g=n(6875);class y{constructor(e=0,t=0){this.type=c.TypeName.GeoCoordinate,this.latitude=e,this.longitude=t}applyJSON(e){h.Serialization.validateJson(e),h.Serialization.validateType(e,this.type),this.latitude=m.Common.parseFloat(e.latitude,this.latitude),this.longitude=m.Common.parseFloat(e.longitude,this.longitude)}get valid(){return Math.abs(this.latitude)>1e-6&&Math.abs(this.longitude)>1e-6}distance(e){const t=s.Convert.degreesToRadians(e.latitude-this.latitude),n=s.Convert.degreesToRadians(e.longitude-this.longitude),i=Math.sin(t/2)*Math.sin(t/2)+Math.cos(s.Convert.degreesToRadians(this.latitude))*Math.cos(s.Convert.degreesToRadians(e.latitude))*Math.sin(n/2)*Math.sin(n/2),o=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i));return y.GeoRadius*o}bearing(e){return s.Convert.degreesToRadians(r.getGreatCircleBearing(this,e))}geoCoordinate(e=null){if(e){const t=r.computeDestinationPoint(this,e.magnitude,s.Convert.radiansToDegrees(e.direction),y.GeoRadius);return new y(t.latitude,t.longitude)}return new y(this.latitude,this.longitude)}geoCoordinates(e){return e.map((e=>this.geoCoordinate(e)))}offset(e){return new l.Vector2(this.bearing(e),this.distance(e))}offsets(e){return e.map((e=>this.offset(e)))}interpolate(e,t){const n=this.offset(e);return this.geoCoordinate(new l.Vector2(n.direction,t(n.magnitude)))}toRadians(){return new y(s.Convert.degreesToRadians(this.latitude),s.Convert.degreesToRadians(this.longitude))}toLngLat(){return[this.longitude,this.latitude]}toGeoSpatial(){const e=new d.GeoSpatial;return e.coordinate=this,e}toFilter(e){return new f.GeoCoordinateFilter(this,e)}toString(){const e=u.Format.geoCoordinate(this);return`${e.latitude.toString()} ${e.longitude.toString()}`}closest(e){let t=null,n=null;return e.forEach((e=>{if(t&&null!==n){const i=e.distance(this);i<n&&(t=e,n=i)}else t=e})),t||this}static center(e){if(e.length<1)return null;if(e.length<2)return e[0];const t=e[0];return t.geoCoordinate(g.Point2.center(e.map((e=>e.offset(t).toPoint2()))).toVector2())}static convexHull(e){if(e.length<3)return null;const t=e[0];return p.Geometry.convexHull(t.offsets(e).map((e=>e.toPoint2()))).map((e=>t.geoCoordinate(e.toVector2())))}static totalDistance(e){let t=0;for(var n=1;n<e.length;n++)t+=e[n-1].distance(e[n]);return t}}t.GeoCoordinate=y,y.GeoRadius=6378137},7411:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoCoordinateFilter=void 0;const i=n(3913);t.GeoCoordinateFilter=class{constructor(e,t={R:.01,Q:3}){this.coordinate=e,this.latitude=new i(t),this.longitude=new i(t)}add(e){this.coordinate.latitude=this.latitude.filter(e.latitude),this.coordinate.longitude=this.longitude.filter(e.longitude)}}},6241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoLocation=void 0;const i=n(9871),o=n(5226),a=n(750),r=n(4830),s=n(5974);t.GeoLocation=class{constructor(e=new o.GeoCoordinate,t=new i.Altitude){this.type=a.TypeName.GeoLocation,this.altitude=new i.Altitude,this.coordinate=e,this.altitude=t}applyJSON(e){s.Serialization.validateJson(e),s.Serialization.validateType(e,this.type),this.coordinate.applyJSON(e.coordinate),this.altitude.applyJSON(e.altitude)}toGeoSpatial(){const e=new r.GeoSpatial;return e.coordinate=this.coordinate,e.altitude=this.altitude,e}}},6142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoReferencedOffset=void 0;const i=n(7722),o=n(5807),a=n(5445),r=n(5088),s=n(750),l=n(5974);class c extends i.Identifiable{constructor(){super(...arguments),this.type=s.TypeName.GeoReferencedOffset,this.reference=null,this.coordinateOffset=new o.Vector2,this.altitudeOffset=0}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type),this.reference=l.Serialization.deserialize(e.reference,a.SourcedGeoSpatial),this.altitudeOffset=r.Common.parseFloat(e.altitudeOffset,this.altitudeOffset),this.coordinateOffset.applyJSON(e.coordinateOffset)}value(e,t){const n=l.Serialization.clone((this.reference||t).value(e));return n.coordinate=n.coordinate.geoCoordinate(this.coordinateOffset),n.altitude.value+=this.altitudeOffset,n}}t.GeoReferencedOffset=c},4830:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoSpatial=void 0;const i=n(9871),o=n(2573),a=n(5226),r=n(1154),s=n(5807),l=n(750),c=n(1985),u=n(9123),m=n(8111),d=n(1747),p=n(6875),h=n(5974);t.GeoSpatial=class{constructor(){this.type=l.TypeName.GeoSpatial,this.updated=new c.Datetime,this.coordinate=new a.GeoCoordinate,this.altitude=new i.Altitude,this.orientation=new o.Orientation3,this.velocity=new u.Velocity6}applyJSON(e){h.Serialization.validateJson(e),h.Serialization.validateType(e,this.type),this.updated.applyJSON(e.updated),this.coordinate.applyJSON(e.coordinate),this.altitude.applyJSON(e.altitude),this.orientation.applyJSON(e.orientation),this.velocity.applyJSON(e.velocity)}applyVelocity(e){this.coordinate=this.coordinate.geoCoordinate(new s.Vector2(this.velocity.horizontal.direction,r.Kinematic.d1(e,this.velocity.horizontal.magnitude))),this.altitude.value+=r.Kinematic.d1(this.velocity.vertical,e),this.orientation.applyVelocity(this.velocity.orientation,e)}interpolate(e,t,n,i){const o=this.coordinate.interpolate(e.coordinate,(e=>i(0,e))).toGeoSpatial();return o.updated=this.updated.interpolate(e.updated,i),o.altitude=this.altitude.interpolate(e.altitude,i),o.orientation=this.orientation.interpolate(e.orientation,t,n,i),o.velocity=this.velocity.interpolate(e.velocity,i),o}projectCoordinate(e){return this.coordinate.geoCoordinate(new s.Vector2(this.velocity.horizontal.direction,r.Kinematic.d1(this.velocity.horizontal.magnitude,e)))}projectAltitude(e){return new i.Altitude(this.altitude.value+r.Kinematic.d1(this.velocity.vertical,e),this.altitude.system)}projectOrientation(e){return new o.Orientation3(this.orientation.x+r.Kinematic.d1(this.velocity.orientation.x,e),this.orientation.xReference,this.orientation.y+r.Kinematic.d1(this.velocity.orientation.y,e),this.orientation.z+r.Kinematic.d1(this.velocity.orientation.z,e),this.orientation.zReference)}distance(e){const t=new p.Point2(this.coordinate.distance(e.coordinate),0);return this.altitude.system===e.altitude.system&&(t.y=Math.abs(this.altitude.value-e.altitude.value)),t.toVector2().magnitude}groundCoordinate(e,t=null,n=d.Convert.degreesToRadians(-5)){e=Math.min(e,n);const i=m.Geometry.angleDifferenceSigned(e,-Math.PI/2);return 0===i?this.coordinate:this.coordinate.geoCoordinate(new s.Vector2(null===t?this.orientation.yaw:t,Math.tan(i)*Math.abs(this.altitude.value)))}groundCoordinates(e,t,n=null,i=d.Convert.degreesToRadians(-5)){if(n=null===n?this.orientation.yaw:n,t<-d.Convert.degreesToRadians(35)||t>d.Convert.degreesToRadians(15)){const o=t+e.vertical/2;if(o>i)return this.groundCoordinates(e,i-e.vertical/2-.01,n,i);const a=this.groundCoordinate(t,n),r=this.groundCoordinate(t-e.vertical/2,n),l=a.distance(r),c=this.groundCoordinate(o,n),u=a.distance(c),m=Math.atan2(e.horizontal,e.vertical),d=[];if(d.push(a.geoCoordinate(new s.Vector2(n+Math.PI+m,l*Math.tan(m)))),Math.abs(o-i)<.01){const e=25;for(let t=0;t<=e;t++)d.push(a.geoCoordinate(new s.Vector2(n-m+t/e*2*m,u*Math.tan(m))))}else d.push(a.geoCoordinate(new s.Vector2(n-m,u*Math.tan(m)))),d.push(a.geoCoordinate(new s.Vector2(n+m,u*Math.tan(m))));return d.push(a.geoCoordinate(new s.Vector2(n+Math.PI-m,l*Math.tan(m)))),d}const o=Math.min(t+e.vertical/2,i),a=t-e.vertical/2;if(a>=o)return[];const r=this.groundCoordinate(a,n),l=this.coordinate.distance(r);if(a<-Math.PI/2||l>1e3)return[];const c=this.groundCoordinate(o,n),u=this.coordinate.distance(c),m=e.horizontal/2,p=[];if(p.push(this.coordinate.geoCoordinate(new s.Vector2(n-m,l))),o>=i){const e=25;for(let t=0;t<=e;t++)p.push(this.coordinate.geoCoordinate(new s.Vector2(n-m+t/e*2*m,u)))}else p.push(this.coordinate.geoCoordinate(new s.Vector2(n-m,u))),p.push(this.coordinate.geoCoordinate(new s.Vector2(n+m,u)));return p.push(this.coordinate.geoCoordinate(new s.Vector2(n+e.horizontal/2,l))),p}}},4754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeoSpatialSources=void 0;const i=n(750);t.GeoSpatialSources=class{constructor(e,t,n){this.plan=e,this.drone=t,this.device=n}value(e,t=null){switch(e){case i.GeoSpatialSource.Input:return t||this.drone;case i.GeoSpatialSource.Plan:return this.plan;case i.GeoSpatialSource.Device:return this.device||this.drone;case i.GeoSpatialSource.Drone:return this.drone}}}},4457:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Gimbal=void 0;const i=n(6801),o=n(750),a=n(5589),r=n(2573),s=n(1985),l=n(1154),c=n(5974),u=n(5088);class m extends i.Payload{constructor(){super(...arguments),this.type=o.TypeName.Gimbal,this.updated=new s.Datetime,this.settings={mode:o.GimbalMode.YawFollow},this.orientation=new r.Orientation3,this.velocity=new a.Velocity3}applyJSON(e){super.applyJSON(e),c.Serialization.validateType(e,this.type),this.settings.mode=u.Common.parseString(e.settings.mode,this.settings.mode),this.updated.applyJSON(e.updated),this.orientation.applyJSON(e.orientation),this.velocity.applyJSON(e.velocity)}projectOrientation(e){return new r.Orientation3(this.orientation.x+l.Kinematic.d1(this.velocity.x,e),this.orientation.xReference,this.orientation.y+l.Kinematic.d1(this.velocity.y,e),this.orientation.z+l.Kinematic.d1(this.velocity.z,e),this.orientation.zReference)}static pitch(e,t){return 0===t?0:t<0?Math.PI/2-Math.atan(e/-t):Math.atan(e/t)-Math.PI/2}}t.Gimbal=m},7722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Identifiable=void 0;const i=n(5088),o=n(5974);t.Identifiable=class{constructor(e=null){this.id=e||i.Common.uuid()}applyJSON(e){o.Serialization.validateJson(e),this.id=i.Common.parseString(e.id,i.Common.uuid())}get resettable(){return!0}}},4260:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;const i=n(9993),o=n(5664),a=n(5974),r=n(5088);t.Input=class{constructor(){this.descriptors=new o.Descriptors,this.imageUrl=null,this.variable=new i.Variable,this.optional=!1,this.enumValues=null,this.dynamic=!1,this.formatter=null}applyJSON(e){a.Serialization.validateJson(e),this.descriptors.applyJSON(e.descriptors),this.imageUrl=r.Common.parseString(e.imageUrl),this.variable.applyJSON(e.variable),this.optional=r.Common.parseBoolean(e.optional,this.optional),e.enumValues?this.enumValues=e.enumValues.map((e=>a.Serialization.read(e)||e)):this.enumValues=null,this.dynamic=r.Common.parseBoolean(e.dynamic,this.dynamic),this.formatter=r.Common.parseString(e.formatter,null)}get title(){return this.descriptors.name}get subtitle(){return this.descriptors.description}get key(){return this.variable.descriptors.name}}},2545:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Interpolation=void 0;const i=n(750),o=n(5088),a=n(5974);class r{constructor(){this.type=i.TypeName.Interpolation,this.f=i.InterpolationFunction.Linear,this.sigmoidK=Math.E}applyJSON(e){a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.f=o.Common.parseString(e.f,this.f),this.sigmoidK=o.Common.parseFloat(e.sigmoidK,this.sigmoidK)}interpolate(e,t,n){switch(this.f){case i.InterpolationFunction.None:return e;case i.InterpolationFunction.Linear:return r.linear(e,t,n);case i.InterpolationFunction.Sigmoid:return r.sigmoid(e,t,n,this.sigmoidK)}}static linear(e,t,n){return e+(t-e)*Math.max(Math.min(1,n),0)}static sigmoid(e,t,n,i){return e+(t-e)*o.Common.sigmoid(Math.max(Math.min(1,n),0),i)}}t.Interpolation=r},3854:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Limits=void 0;const i=n(750),o=n(5088),a=n(4147),r=n(2838),s=n(5974);class l{constructor(e=0,t){this.type=i.TypeName.Limits,this.max=e,this.min=void 0===t?0===e?0:-e:t}applyJSON(e){s.Serialization.validateJson(e),s.Serialization.validateType(e,this.type),this.max=o.Common.parseFloat(e.max,this.max),this.min=o.Common.parseFloat(e.min,this.min)}bound(e){return Math.max(Math.min(e,this.max),this.min)}valid(e){return e<=this.max&&e>=this.min}interpolate(e,t){return new l(t(this.max,e.max),t(this.min,e.min))}toString(e=null,t={min:!0,max:!0}){return t.min||t.max?(e||(e=r.Format.distance),t.min&&!t.max?e(this.min).toString():!t.min&&t.max?e(this.max).toString():this.max>0&&this.min<0&&Math.abs(this.max+this.min)<.01*Math.abs(this.max)?a.Strings.formatString(a.Strings.Limits.toString.same,e(this.max).toString()):a.Strings.formatString(a.Strings.Limits.toString.different,e(this.min).toString(),e(this.max).toString())):""}}t.Limits=l},141:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Line2=void 0;const i=n(750),o=n(6875),a=n(5807),r=n(5974);class s{constructor(e=new o.Point2,t=new o.Point2){this.type=i.TypeName.Point2,this.a=e,this.b=t}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.a.applyJSON(e.a),this.b.applyJSON(e.b)}get length(){return this.a.distance(this.b)}get direction(){return this.b.toVector2().subtract(this.a.toVector2()).direction}add(e){return new s(this.a.toVector2().add(e).toPoint2(),this.b.toVector2().add(e).toPoint2())}lengthen(e,t=null){return new s(this.a.toVector2().add(new a.Vector2(this.direction+Math.PI,e)).toPoint2(),this.b.toVector2().add(new a.Vector2(this.direction,t||e)).toPoint2())}interpolate(e){return this.a.interpolate(this.b,e<0?0:Math.min(1,e/this.a.distance(this.b)))}}t.Line2=s},2778:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedValue=void 0;class n{constructor(e,t=null){this._previous=null,this._next=null,this.current=e,this.previous=t}insertBefore(e){const t=new n(e);return t._next=this,this._previous&&(t._previous=this._previous,this._previous._next=t),this._previous=t,t}insertAfter(e){const t=new n(e);return t._previous=this,this._next&&(t._next=this._next,this._next._previous=t),this._next=t,t}get list(){const e=[];let t=this.first;for(;t;)e.push(t),t=t.next;return e}get valueList(){return this.list.map((e=>e.current))}get previous(){return this._previous}set previous(e){this._previous=e,e&&(e._next=this)}get next(){return this._next}set next(e){this._next=e,e&&(e._previous=this)}get first(){let e=this;for(;e._previous;)e=e._previous;return e}get last(){let e=this;for(;e._next;)e=e._next;return e}}t.LinkedValue=n},6718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListElementNode=void 0;const i=n(9674),o=n(2838),a=n(4147);class r extends i.Node{constructor(e,t,n,i,o){super(e,t),this.index=n,this.typeName=i,this.icaoIndex=o}get title(){return`${this.typeName} ${this.icaoIndex?a.Strings.Common.delimeter+o.Format.icaoWords(this.index):o.Format.integer(this.index+1)}`}get abbreviation(){return this.icaoIndex?o.Format.icaoLetters(this.index):o.Format.integer(this.index+1)}}t.ListElementNode=r},79:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListNode=void 0;const i=n(9674),o=n(2838);class a extends i.Node{constructor(e,t){super(`${e.id}-${t}`,e)}get subtitle(){return this.children.length>0?o.Format.integer(this.children.length):""}}t.ListNode=a},7787:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;const i=n(750),o=n(5088),a=n(5974),r=n(8299);t.Message=class{constructor(e="",t=null,n=i.MessageLevel.Info){this.type=i.TypeName.Message,this.toString=()=>this.details?`${this.title}: ${this.details}`:this.title,this.title=e,this.details=t,this.level=n}applyJSON(e){a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.title=o.Common.parseString(e.title,this.title),this.details=o.Common.parseString(e.details),this.level=o.Common.parseString(e.level,this.level)}toMessageGroup(){const e=new r.MessageGroup;return e.messages=[this],e}select(e){if(null===e)return this;switch(e.level){case i.MessageLevel.Info:switch(this.level){case i.MessageLevel.Warning:case i.MessageLevel.Danger:case i.MessageLevel.Error:return this;default:return e}case i.MessageLevel.Warning:switch(this.level){case i.MessageLevel.Danger:case i.MessageLevel.Error:return this;default:return e}case i.MessageLevel.Danger:switch(this.level){case i.MessageLevel.Error:return this;default:return e}case i.MessageLevel.Error:return e}}}},8299:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageGroup=void 0;const i=n(750),o=n(5664),a=n(7787),r=n(5974),s=n(5088);t.MessageGroup=class{constructor(e=new o.Descriptors,t=[]){this.type=i.TypeName.MessageGroup,this.toString=()=>s.Common.joinNotEmpty([this.descriptors.toString()].concat(this.messages.map((e=>e.toString()))),"\n"),this.descriptors=e,this.messages=t}applyJSON(e){if(r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.descriptors.applyJSON(e.descriptors),this.messages=[],Array.isArray(e.messages))for(let t of e.messages)this.messages.push(r.Serialization.deserialize(t,a.Message,!1))}}},4334:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mission=void 0;const i=n(6437),o=n(4137),a=n(360),r=n(5088),s=n(5664),l=n(750),c=n(5293),u=n(1985),m=n(9514),d=n(1412),p=n(5974),h=n(7247),f=n(1159),g=n(8368),y=n(7787),C=n(4187),v=n(4147),b=n(8952),S=n(3447),w=n(2962),M=n(8731),x=n(8210),O=n(946),P=n(5861),T=n(9271),D=n(3854),E=n(8283),A=n(8299),F=n(5807),N=n(1154),I=n(4200),_=n(5486),R=n(2838),L=n(5718),k=n(5154),z=n(7343),B=n(9123),j=n(8777),V=n(3593);class G extends j.Executable{constructor(){super(...arguments),this.type=l.TypeName.Mission,this.descriptors=null,this.func=null,this.plan=new i.PlanComponent,this.execution=new a.Execution}applyJSON(e){super.applyJSON(e),p.Serialization.validateType(e,this.type),this.descriptors=p.Serialization.deserialize(e.descriptors,s.Descriptors),this.plan.applyJSON(e.plan),this.execution.applyJSON(e.execution),this.func=p.Serialization.deserialize(e.func,z.Func)}static createFromComponent(e){const t=new G;return e instanceof i.PlanComponent?t.plan=e:e instanceof c.SubComponent&&(Object.assign(t.plan.coordinate,e.coordinate),t.plan.descriptors.name=e.descriptors.name,t.plan.rootComponent=e,t.plan.elevations=e.elevations?e.elevations.filter((t=>t.coordinate.distance(e.coordinate)<=h.Constants.ComponentElevationTolerance)):null),t.descriptors=p.Serialization.clone(t.plan.descriptors),t}get coordinate(){return this.plan.coordinate}get verification(){const e=new G,t=this.plan.verification(this.context);return t&&(e.plan=t),e.descriptors=p.Serialization.clone(this.descriptors||this.plan.descriptors),e}get complete(){return this.execution.getComponentState(this.plan).complete}get state(){return this.execution.getComponentState(this.plan)}get componentNodeExecutionStates(){const e=this.plan.node(),t=[new b.ComponentNodeExecutionState(e,this.execution.getComponentState(this.plan))];return e.descendants.forEach((e=>{e instanceof f.ComponentNode&&t.push(new b.ComponentNodeExecutionState(e,this.execution.getComponentState(e.component)))})),t}get executingMessageGroups(){const e=[];if(!this.engaged)return e;if(this.reengaging){const t=r.Common.lastSafe(this.engagements);if(t&&t.reengagement){const n=new A.MessageGroup;return n.descriptors.name=v.Strings.Mission.values.reengagement,e.push(n),e.concat(t.reengagement.executingMessageGroups)}}return this.componentNodeExecutionStates.forEach((t=>{if(t.state.status===l.ComponentExecutionStatus.Executing){if(t.node.component instanceof i.PlanComponent)return;if(t.node.parent&&t.node.parent instanceof f.ComponentNode&&t.node.parent.component instanceof i.PlanComponent)return;const n=new A.MessageGroup;n.descriptors.name=r.Common.joinNotEmpty([t.node.title,t.state.progress>0?R.Format.percent(t.state.progress).toString():""]),n.descriptors.description=t.node.subtitle,n.messages.push(...t.state.messages),e.push(n)}})),e}get droneMotionComponentCount(){return this.plan.node().descendantComponentCount((e=>e instanceof L.DroneMotionComponent))}get elevationsRequired(){return this.plan.node().elevationsRequired(this.context)}get context(){return this.plan.context}componentExecuteContext(e,t){const n=new d.ComponentExecuteContext(this.plan,this.execution,t);return Object.assign(n,e),n}componentEstimateParams(e=!0,t=!1,n=!1,i=null){const o=new g.ComponentEstimateContext(this.plan);return i&&(o.drone=i),o.drone.spatial.coordinate.valid||(o.drone.spatial.coordinate=p.Serialization.clone(this.plan.takeoffCoordinate)),o.pathRequired=e,o.altitudeRequired=t,o.timeRequired=n,{context:o,start:p.Serialization.clone(this.engagements.length>0?this.engagements[0].startDroneSpatial:o.drone.spatial)}}estimate(e=!1,t=!1,n=null){const i=this.componentEstimateParams(!0,e,t,n);return this.plan.estimate(i.context,i.start)}engageDisallowedReasons(e){if(this.complete)return[new y.Message(v.Strings.Mission.messages.engageDisallowed.complete)];const t=[],n=this.plan.requiredTakeoffCoordinate;return n&&(e.drone.takeoffCoordinate.valid?e.drone.takeoffCoordinate.distance(n)>this.plan.takeoffDistance.horizontal&&t.push(new y.Message(v.Strings.Mission.messages.engageDisallowed.requiredTakeoffInvalid.title,v.Strings.formatString(v.Strings.Mission.messages.engageDisallowed.requiredTakeoffInvalid.details,R.Format.distance(e.drone.takeoffCoordinate.distance(n)-this.plan.takeoffDistance.horizontal).toString()))):t.push(new y.Message(v.Strings.Mission.messages.engageDisallowed.requiredTakeoffUnavailable.title))),t}engage(e,t=null){if(this.complete)return r.Common.last(this.engagements);let n=r.Common.lastSafe(this.engagements);n&&this.disengage(e,new y.Message(v.Strings.Mission.messages.reengaging)),n=new o.Engagement(t,e.user,e.device,e.drone,this.reengagement(e.drone)),this.engagements.push(n);const i=this.componentExecuteContext(e,n);let a=p.Serialization.clone(e.drone.spatial);return this.plan.node().descendantsDepthFirst.forEach((e=>{if(e instanceof f.ComponentNode){e.component.engaging(i,a);const t=e.component.endSpatial(i);t&&(a=t)}})),n.reengagement&&n.reengagement.engage(i,t),n}execute(e,t=null,n=null){let i=this.state;switch(i.status){case l.ComponentExecutionStatus.Pending:case l.ComponentExecutionStatus.Executing:t=t||new u.Datetime;let o=r.Common.lastSafe(this.engagements);if(o&&(o.disengagement?o=null:o.lastUserSnapshot.id!==e.user.id?(this.disengage(e,new y.Message(v.Strings.Mission.messages.reengagementUserID)),o=null):o.lastDeviceSnapshot.id!==e.device.id?(this.disengage(e,new y.Message(v.Strings.Mission.messages.reengagementDeviceID)),o=null):o.lastDroneSnapshot.id!==e.drone.id&&(this.disengage(e,new y.Message(v.Strings.Mission.messages.reengagementDroneID)),o=null)),!o)return i;let a=!0;if(o.reengagement&&o.reengagement.engaged)switch(o.reengagement.state.status){case l.ComponentExecutionStatus.Pending:case l.ComponentExecutionStatus.Executing:a=!1,o.reengagement.execute(e,t);break;case l.ComponentExecutionStatus.Failed:this.disengage(e,new y.Message(v.Strings.Mission.messages.reengagementFailed,o.reengagement.state.error)),a=!1;break;case l.ComponentExecutionStatus.Succeeded:}if(a){o.execute(t,e.user,e.device,e.drone),e.drone.statefulCommands.forEach((t=>{e.drone.commandExecutionState(t.id).status===l.CommandExecutionStatus.Succeeded&&this.execution.addReengagementCommand(t)}));const a=this.componentExecuteContext(e,o);if(i=this.plan.execute(a),this.complete)switch(i.status){case l.ComponentExecutionStatus.Failed:this.disengage(e,new y.Message(v.Strings.Mission.messages.failed,i.error));break;case l.ComponentExecutionStatus.Succeeded:this.disengage(e,new y.Message(v.Strings.Mission.messages.succeeded))}n&&n.addFrame(this,a,i.duration)}return i;default:return i}}get executionDuration(){return this.state.duration}addCameraFile(e,t){this.execution.addCameraFile(e,t)}reengagement(e){if(this.complete||!e.spatial.coordinate.valid)return null;const t=r.Common.lastSafe(this.engagements.filter((e=>!e.reengagement||e.reengagement.state.status===l.ComponentExecutionStatus.Succeeded)));if(!t)return null;const n=new V.Context;n.drone=e;const i=this.componentExecuteContext(n,t),o=new G;o.plan.descriptors=this.plan.descriptors,o.plan.droneMotionLimits=this.plan.droneMotionLimits,o.plan.coordinate=this.plan.coordinate,o.plan.restrictionZones=this.plan.restrictionZones.map((e=>p.Serialization.clone(e,!0)));const a=new S.ListComponent;o.plan.rootComponent=a;let s=null,c=0;for(const e of this.componentNodeExecutionStates)switch(e.state.status){case l.ComponentExecutionStatus.Pending:break;case l.ComponentExecutionStatus.Executing:e.node.component instanceof L.DroneMotionComponent&&(s=e.node.component,c++);break;case l.ComponentExecutionStatus.Succeeded:case l.ComponentExecutionStatus.Failed:e.node.component instanceof L.DroneMotionComponent&&c++}let u=null;0===c?(u=p.Serialization.clone(e.spatial),u.velocity=new B.Velocity6):s&&(u=s.reengagementDroneSpatial(i));let m=u;m||(m=p.Serialization.clone(t.lastDroneSnapshot.spatial),m.velocity.horizontal=new F.Vector2,0===m.altitude.value&&(0===e.spatial.altitude.value?m.altitude.value=h.Constants.MissionReengagementMinAltitude:m.altitude.value=e.spatial.altitude.value));const d=new w.DestinationComponent;this.plan.reengagementRules.pointOfInterest&&d.pointsOfInterest.push(this.plan.reengagementRules.pointOfInterest),this.plan.reengagementRules.gimbalOrientations&&(d.gimbalOrientations=this.plan.reengagementRules.gimbalOrientations),d.destinationOffset=o.plan.coordinate.offset(m.coordinate),d.altitudeRange.altitude.value=m.altitude.value,d.altitudeRange.range=new D.Limits(h.Constants.MissionReengagementAltitudeRange);let f=0;m.velocity.horizontal.magnitude>h.Constants.MissionReengagementMinRampVelocity&&(f=N.Kinematic.d4(0,m.velocity.horizontal.magnitude,o.plan.droneMotionLimits.horizontal.acceleration.max)),f>0&&d.destinationOffset.addToSelf(new F.Vector2(m.velocity.horizontal.direction+Math.PI,f)),a.childComponents.push(d);const g=e=>this.execution.reengagementCommands.filter((t=>t.reengagementTiming===e)).map((e=>p.Serialization.clone(e,!0)));d.immediateComponent=(()=>{const e=new S.ListComponent;for(const n of Object.keys(t.lastDroneSnapshot.cameras)){const t=new T.StopCaptureCameraCommand;t.channel=parseInt(n),e.childComponents.push(new x.CommandComponent(t))}for(const n of Object.keys(t.lastDroneSnapshot.gimbals)){const t=new P.ModeGimbalCommand;t.channel=parseInt(n),t.mode=l.GimbalMode.YawFollow,e.childComponents.push(new x.CommandComponent(t))}return g(l.CommandReengagementTiming.Approach).forEach((t=>{e.childComponents.push(new x.CommandComponent(t))})),e.childComponents.length>0?e:null})();const y=new M.HeadingComponent;return y.heading=m.orientation.yaw,y.immediateComponent=(()=>{const e=new S.ListComponent;for(const n of Object.keys(t.lastDroneSnapshot.gimbals)){const i=new O.OrientationGimbalCommand;i.channel=parseInt(n),i.orientation.apply(t.lastDroneSnapshot.gimbal(i.channel).orientation),e.childComponents.push(new x.CommandComponent(i))}return e.childComponents.length>0?e:null})(),y.achievedComponent=(()=>{const e=new S.ListComponent;g(l.CommandReengagementTiming.Destination).forEach((t=>{e.childComponents.push(new x.CommandComponent(t))}));for(const n of Object.keys(t.lastDroneSnapshot.cameras))if(t.lastDroneSnapshot.camera(parseInt(n)).capturing){const t=new E.StartCaptureCameraCommand;t.channel=parseInt(n),e.childComponents.push(new x.CommandComponent(t))}return e.childComponents.length>0?e:null})(),a.childComponents.push(y),f>0&&a.childComponents.push((()=>{const e=new I.CourseComponent;return e.course=m.velocity.horizontal.direction,e.droneMotionLimits.horizontal=new _.MotionLimitsOptional(new D.Limits(m.velocity.horizontal.magnitude,0)),e.distance=f,e})()),o}get assetManifest(){const e=new k.AssetManifest(this.id);e.coordinate=p.Serialization.clone(this.plan.takeoffCoordinate),e.descriptors.mergeTags([`dronelink.mission:${this.id}`,`dronelink.plan:${this.plan.id}`]),e.descriptors.mergeTags(this.plan.descriptors.tags),this.descriptors&&e.descriptors.mergeTags(this.descriptors.tags),this.func&&e.descriptors.mergeTags(this.func.descriptors.tags);const t=this.execution.allCameraFiles;return this.componentNodeExecutionStates.forEach((n=>{if(n.node.component.assetSource){const i=n.node.component.assetSource.toAsset(n.node.id),o=n.node.component;if(o.type&&i.descriptors.mergeTag(`dronelink.component.type:${o.type}`),i.descriptors.mergeTags(n.node.component.descriptors.tags),!n.state.started)return void e.add(i);const a=n.state.started.value.getTime();let r=n.state.finished?n.state.finished.value.getTime():null;i.cameraFiles=t.filter((e=>!(e.created.value.getTime()<a||null!=r&&e.created.value.getTime()>r))),e.add(i)}})),e}simulate(e=null,t){const n=p.Serialization.clone(this),i=new C.Timeline;let o=!1;const a=new m.Simulation(n.plan.takeoffCoordinate,(e=>{if(o&&!e.engaged)return e.stop(),void t(n,i);switch(n.state.status){case l.ComponentExecutionStatus.Pending:break;case l.ComponentExecutionStatus.Executing:const o=i.lastFrame;o&&(t&&!1===t(n,i)&&e.stop(),o.elapsedTime>18e3&&(e.disengage(new y.Message("timeout")),t(n,i)));break;case l.ComponentExecutionStatus.Failed:case l.ComponentExecutionStatus.Succeeded:e.stop(),t(n,i)}}),!0,e);a.executeIntervalTarget=h.Constants.SimulationUpdateInterval,a.engage(n,i),o=!0,a.rate=null}}t.Mission=G},4174:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ModeInput=t.Mode=void 0;const r=n(750),s=n(5226),l=n(5974),c=n(4147),u=n(5088),m=n(5664),d=n(5167),p=n(4137),h=n(916),f=n(7787),g=n(3593),y=n(1985),C=n(8777),v=n(5589),b=n(1906),S=n(8111),w=n(5437),M=n(9123),x=n(7343),O=n(4260),P=n(7247),T=a(n(3607));class D extends C.Executable{constructor(){super(...arguments),this.type=r.TypeName.Mode,this.func=null,this.coordinate=new s.GeoCoordinate,this.descriptors=new m.Descriptors,this.userInterfaceSettings=null,this.inputs=[],this.executable="",this.executionDuration=0,this.cameraFiles={},this.state={},this.summaryMessage=null,this.executingMessageGroups=[],this.target=null,this.visibleCoordinates=null}toJSON(){return{id:this.id,type:this.type,engagements:this.engagements,func:this.func,coordinate:this.coordinate,descriptors:this.descriptors,userInterfaceSettings:this.userInterfaceSettings,inputs:this.inputs,executable:this.executable,executionDuration:this.executionDuration,cameraFiles:this.cameraFiles}}applyJSON(e){if(super.applyJSON(e),l.Serialization.validateType(e,this.type),this.func=l.Serialization.deserialize(e.func,x.Func),this.coordinate.applyJSON(e.coordinate),this.descriptors.applyJSON(e.descriptors),this.userInterfaceSettings=l.Serialization.deserialize(e.userInterfaceSettings,d.UserInterfaceSettings,!0),this.inputs=[],Array.isArray(e.inputs))for(let t of e.inputs)this.inputs.push(l.Serialization.deserialize(t,E,!1));if(this.executable=u.Common.parseString(e.executable,this.executable),this.executionDuration=u.Common.parseFloat(e.executionDuration,this.executionDuration),this.cameraFiles={},e.cameraFiles)for(let t of Object.keys(e.cameraFiles)){const n=e.cameraFiles[t];if(!Array.isArray(n))continue;const i=[];for(let e of n)i.push(l.Serialization.deserialize(e,h.CameraFile,!1));this.cameraFiles[parseInt(t)]=i}if(this.state=e.state||{},this.summaryMessage=l.Serialization.deserialize(e.summaryMessage,d.UserInterfaceSettings,!0),this.executingMessageGroups=[],Array.isArray(e.executingMessageGroups))for(let t of e.executingMessageGroups)this.executingMessageGroups.push(l.Serialization.deserialize(t,f.Message,!1))}get title(){return this.descriptors.name||l.Serialization.typeDisplay(this)}get inputsVariableValuesNamed(){const e={};return this.inputs.forEach(((t,n)=>{const i=l.Serialization.clone(t.variable);e[n]=i.value,i.descriptors.name&&(e[i.descriptors.name]=i.value)})),e}evaluate(e,t,n){const i=["Dronelink","syntaxValidation","context","variables",t],o=[T,e,n,this.inputsVariableValuesNamed];try{return Function(...i).bind(this)(...o)}catch(e){throw"string"==typeof e?new Error(e):e}}validateSyntax(){try{this.evaluate(!0,this.executable,this.modeExecuteContext())}catch(e){throw u.Common.joinNotEmpty([c.Strings.Mode.values.executable,e])}}modeExecuteContext(e=new g.Context,t=new p.Engagement){const n=new A(t);return Object.assign(n,e),n}engage(e,t=null){let n=u.Common.lastSafe(this.engagements);return n&&this.disengage(e,new f.Message(c.Strings.Mode.messages.reengaging)),n=new p.Engagement(t,e.user,e.device,e.drone),this.engagements.push(n),n}execute(e,t=null,n=null){const i=u.Common.lastSafe(this.engagements);if(!i||i.disengagement)return null;i.execute(t||new y.Datetime,e.user,e.device,e.drone),this.executionDuration+=i.timeSinceLastExecution,this.executingMessageGroups=[],this.evaluate(!1,this.executable,this.modeExecuteContext(e,i)),n&&n.addFrame(this,e,this.executionDuration)}addDroneVelocityCommand(e,t,n,i=null){const o=new w.VelocityDroneCommand;return o.velocity=t.boundedVelocity(this.state.previousVelocity||new M.Velocity6,n,e.engagement.timeSinceLastExecution),o.heading=i,e.drone.addStatelessCommand(o),this.state.previousVelocity=o.velocity,o}addGimbalVelocityCommand(e,t,n,i,o){const a=new b.VelocityGimbalCommand;a.channel=t;const s=e.drone.projectGimbalOrientation(t,e.engagement.currentDatetime),c=o?l.Serialization.clone(o):new v.Velocity3;return null!==n.x&&(c.x+=S.Geometry.angleDifferenceSigned(n.x,s.x)),c.x=P.Constants.GimbalMotionLimits.x.velocity.bound(c.x),null!==n.y&&(c.y+=S.Geometry.angleDifferenceSigned(n.y,s.y)),c.y=P.Constants.GimbalMotionLimits.y.velocity.bound(c.y),n.convertReferences(e.drone.referenceSources(i)),null!==n.z&&e.drone.gimbal(t).settings.mode===r.GimbalMode.Free&&(c.z+=S.Geometry.angleDifferenceSigned(n.z,s.z)),c.z=P.Constants.GimbalMotionLimits.z.velocity.bound(c.z),a.velocity=c,e.drone.addStatelessCommand(a),a}addCameraFile(e,t){const n=this.cameraFiles[e]||[];n.push(t),this.cameraFiles[e]=n}}t.Mode=D;class E extends O.Input{constructor(){super(...arguments),this.type=r.TypeName.ModeInput}static from(e){const t=new E;return Object.assign(t.descriptors,e.descriptors),Object.assign(t.variable,e.variable),t.imageUrl=e.imageUrl,t.optional=e.optional,t.enumValues=e.enumValues,t.formatter=e.formatter,t}applyJSON(e){super.applyJSON(e),l.Serialization.validateType(e,this.type)}}t.ModeInput=E;class A extends g.Context{constructor(e){super(),this.engagement=e}elapsedTime(e){return this.engagement.currentDatetime.elapsedTime(e)}}},6202:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MotionLimits=void 0;const i=n(1154),o=n(3854),a=n(750),r=n(5088),s=n(5974);class l{constructor(e=new o.Limits,t=new o.Limits){this.type=a.TypeName.MotionLimits,this.toString=e=>r.Common.joinNotEmpty([this.velocity.toString(e.velocity),this.acceleration.toString(e.acceleration)]),this.velocity=e,this.acceleration=t}applyJSON(e){s.Serialization.validateJson(e),s.Serialization.validateType(e,this.type),this.velocity.applyJSON(e.velocity),this.acceleration.applyJSON(e.acceleration)}currentVelocityLimits(e,t){return new o.Limits(Math.min(this.velocity.max,i.Kinematic.v2(e,this.acceleration.max,t)),Math.max(this.velocity.min,i.Kinematic.v2(e,this.acceleration.min,t)))}resolve(e){return new l(e&&e.velocity?e.velocity:this.velocity,e&&e.acceleration?e.acceleration:this.acceleration)}interpolate(e,t){return new l(this.velocity.interpolate(e.velocity,t),this.acceleration.interpolate(e.acceleration,t))}}t.MotionLimits=l},3509:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MotionLimits3=void 0;const i=n(750),o=n(6202),a=n(5088),r=n(5974);class s{constructor(e=new o.MotionLimits,t=new o.MotionLimits,n=new o.MotionLimits){this.type=i.TypeName.MotionLimits3,this.toString=e=>a.Common.joinNotEmpty([this.x.toString(e.x),this.y.toString(e.y),this.z.toString(e.z)]),this.x=e,this.y=t,this.z=n}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.x.applyJSON(e.x),this.y.applyJSON(e.y),this.z.applyJSON(e.z)}resolve(e){return new s(this.x.resolve(e?e.x:null),this.y.resolve(e?e.y:null),this.z.resolve(e?e.z:null))}interpolate(e,t){return new s(this.x.interpolate(e.x,t),this.y.interpolate(e.y,t),this.z.interpolate(e.z,t))}get pitch(){return this.x}set pitch(e){this.x=e}get roll(){return this.y}set roll(e){this.y=e}get yaw(){return this.z}set yaw(e){this.z=e}get forwardBackward(){return this.x}set forwardBackward(e){this.x=e}get leftRight(){return this.y}set leftRight(e){this.y=e}get upDown(){return this.z}set upDown(e){this.z=e}}t.MotionLimits3=s},2064:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MotionLimits3Optional=void 0;const i=n(750),o=n(5486),a=n(5088),r=n(5974);t.MotionLimits3Optional=class{constructor(e=null,t=null,n=null){this.type=i.TypeName.MotionLimits3Optional,this.toString=e=>a.Common.joinNotEmpty([this.x?this.x.toString(e.x):"",this.y?this.y.toString(e.y):"",this.z?this.z.toString(e.z):""]),this.x=e,this.y=t,this.z=n}applyJSON(e){e||(this.x=null,this.z=null,this.z=null),r.Serialization.validateType(e,this.type),this.x=r.Serialization.deserialize(e.x,o.MotionLimitsOptional),this.y=r.Serialization.deserialize(e.y,o.MotionLimitsOptional),this.z=r.Serialization.deserialize(e.z,o.MotionLimitsOptional)}get pitch(){return this.x}set pitch(e){this.x=e}get roll(){return this.y}set roll(e){this.y=e}get yaw(){return this.z}set yaw(e){this.z=e}get forwardBackward(){return this.x}set forwardBackward(e){this.x=e}get leftRight(){return this.y}set leftRight(e){this.y=e}get upDown(){return this.z}set upDown(e){this.z=e}}},5051:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MotionLimits6=void 0;const i=n(750),o=n(3509),a=n(5088),r=n(2838),s=n(1154),l=n(5974),c=n(9123),u=n(5807),m=n(7247);class d{constructor(e=new o.MotionLimits3,t=new o.MotionLimits3){this.type=i.TypeName.MotionLimits6,this.toString=(e={position:{x:{velocity:r.Format.velocityHorizontal,acceleration:r.Format.accelerationHorizontal},y:{velocity:r.Format.velocityHorizontal,acceleration:r.Format.accelerationHorizontal},z:{velocity:r.Format.velocityVertical,acceleration:r.Format.accelerationVertical}},orientation:{x:{velocity:r.Format.velocityRotational,acceleration:r.Format.accelerationRotational},y:{velocity:r.Format.velocityRotational,acceleration:r.Format.accelerationRotational},z:{velocity:r.Format.velocityRotational,acceleration:r.Format.accelerationRotational}}})=>a.Common.joinNotEmpty([this.position.toString(e.position),this.orientation.toString(e.orientation)]),this.position=e,this.orientation=t}applyJSON(e){l.Serialization.validateJson(e),l.Serialization.validateType(e,this.type),this.position.applyJSON(e.position),this.orientation.applyJSON(e.orientation)}resolve(e){return new d(this.position.resolve(e.position),this.orientation.resolve(e.orientation))}interpolate(e,t){return new d(this.position.interpolate(e.position,t),this.orientation.interpolate(e.orientation,t))}get horizontal(){return this.position.forwardBackward}set horizontal(e){this.position.forwardBackward=e}get vertical(){return this.position.upDown}set vertical(e){this.position.upDown=e}get rotational(){return this.orientation.yaw}set rotational(e){this.orientation.yaw=e}timeLineHorizontal(e,t=null){return s.Kinematic.tLine(this.horizontal.velocity.max,this.horizontal.acceleration.min,this.horizontal.acceleration.max,e,t||e)}timeLineVertical(e,t=null){return s.Kinematic.tLine(e<0?Math.abs(this.vertical.velocity.min):this.vertical.velocity.max,e<0?-this.vertical.acceleration.max:this.vertical.acceleration.min,e<0?-this.vertical.acceleration.min:this.vertical.acceleration.max,Math.abs(e),t||Math.abs(e))}timeLineRotational(e,t=null){return s.Kinematic.tLine(this.rotational.velocity.max,this.rotational.acceleration.min,this.rotational.acceleration.max,Math.abs(e),t||Math.abs(e))}boundedVelocity(e,t,n){const i=new c.Velocity6,o=t.horizontal.subtract(e.horizontal);return i.horizontal=e.horizontal.add(new u.Vector2(o.direction,this.horizontal.currentVelocityLimits(0,n).bound(o.magnitude))),i.vertical=this.vertical.currentVelocityLimits(e.vertical,n).bound(t.vertical),i.rotational=this.rotational.currentVelocityLimits(e.rotational,n).bound(t.rotational),i}updateBoundedVelocityHorizontal(e,t,n,i=new u.Vector2){const o=s.Kinematic.dampen(s.Kinematic.v3(0,-this.horizontal.acceleration.min,n),m.Constants.VelocityHorizontalDampenThreshold),a=i.add(new u.Vector2(t,o));a.magnitude=this.horizontal.velocity.bound(a.magnitude),e.horizontal=a}updateBoundedVelocityVertical(e,t,n=0){const i=s.Kinematic.dampen(s.Kinematic.v3(0,-this.vertical.acceleration.min,Math.abs(t)),m.Constants.VelocityVerticalDampenThreshold);e.vertical=this.vertical.velocity.bound(n+(t<0?-1:1)*i)}updateBoundedVelocityRotational(e,t,n=0){const i=s.Kinematic.dampen(Math.min(Math.abs(t),s.Kinematic.v3(0,-this.rotational.acceleration.min,Math.abs(t))),m.Constants.VelocityRotationalDampenThreshold);e.rotational=this.rotational.velocity.bound(n+(t<0?-1:1)*i)}}t.MotionLimits6=d},9477:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MotionLimits6Optional=void 0;const i=n(750),o=n(2064),a=n(5088),r=n(2838),s=n(5974);t.MotionLimits6Optional=class{constructor(e=null,t=null){this.type=i.TypeName.MotionLimits6Optional,this.toString=(e={position:{x:{velocity:r.Format.velocityHorizontal,acceleration:r.Format.accelerationHorizontal},y:{velocity:r.Format.velocityHorizontal,acceleration:r.Format.accelerationHorizontal},z:{velocity:r.Format.velocityVertical,acceleration:r.Format.accelerationVertical}},orientation:{x:{velocity:r.Format.velocityRotational,acceleration:r.Format.accelerationRotational},y:{velocity:r.Format.velocityRotational,acceleration:r.Format.accelerationRotational},z:{velocity:r.Format.velocityRotational,acceleration:r.Format.accelerationRotational}}})=>a.Common.joinNotEmpty([this.position?this.position.toString(e.position):"",this.orientation?this.orientation.toString(e.orientation):""]),this.position=e,this.orientation=t}applyJSON(e){if(!e)return this.position=null,void(this.orientation=null);s.Serialization.validateType(e,this.type),this.position=s.Serialization.deserialize(e.position,o.MotionLimits3Optional),this.orientation=s.Serialization.deserialize(e.orientation,o.MotionLimits3Optional)}get horizontal(){return this.position?this.position.forwardBackward:null}set horizontal(e){this.position||(this.position=new o.MotionLimits3Optional(e)),this.position.forwardBackward=e}get vertical(){return this.position?this.position.upDown:null}set vertical(e){this.position||(this.position=new o.MotionLimits3Optional),this.position.upDown=e}get rotational(){return this.orientation?this.orientation.yaw:null}set rotational(e){this.orientation||(this.orientation=new o.MotionLimits3Optional),this.orientation.yaw=e}}},5486:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MotionLimitsOptional=void 0;const i=n(3854),o=n(750),a=n(5088),r=n(5974);t.MotionLimitsOptional=class{constructor(e=null,t=null){this.type=o.TypeName.MotionLimitsOptional,this.toString=e=>a.Common.joinNotEmpty([this.velocity?this.velocity.toString(e.velocity):"",this.acceleration?this.acceleration.toString(e.acceleration):""]),this.velocity=e,this.acceleration=t}applyJSON(e){if(!e)return this.velocity=null,void(this.acceleration=null);r.Serialization.validateType(e,this.type),this.velocity=r.Serialization.deserialize(e.velocity,i.Limits),this.acceleration=r.Serialization.deserialize(e.acceleration,i.Limits)}}},9674:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;const i=n(7722);class o extends i.Identifiable{constructor(e,t){super(e),this.children=[],this.ordinal=null,this.remove=null,this.inserts=[],this.appends=[],this.emptyChildrenNavigationEnabled=!1,this.propertiesEditorDisabled=!1,this.parent=t;let n=0;this.nextOrdinal=t?t.nextOrdinal:()=>n++}get ordinalDisplay(){return null===this.ordinal?"":`${this.ordinal+1}`}get title(){return this.ordinalDisplay||this.id}get subtitle(){return""}get depth(){return null===this.parent?0:this.parent.depth+1}get root(){return null===this.parent?this:this.parent.root}get ancestors(){const e=[];return this.parent&&(e.push(this.parent),e.push(...this.parent.ancestors)),e}get descendants(){const e=[];return this.children.forEach((t=>{e.push(t),e.push(...t.descendants)})),e}get descendantsDepthFirst(){const e=[];return this.children.forEach((t=>{e.push(...t.descendantsDepthFirst),e.push(t)})),e}find(e){return this.root.findDescendant(e)}findDescendant(e){if(this.id===e)return this;for(let t=0;t<this.children.length;t++){const n=this.children[t].findDescendant(e);if(n)return n}return null}descendantAllowed(e){return!(this.parent&&!this.parent.descendantAllowed(e))}}t.Node=o},2573:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Orientation3=void 0;const i=n(750),o=n(4147),a=n(2838),r=n(5088),s=n(4612),l=n(8111),c=n(1154),u=n(6524),m=n(5974);class d{constructor(e=0,t=i.OrientationXReference.Horizon,n=0,r=0,s=i.OrientationZReference.North){this.type=i.TypeName.Orientation3,this.toString=()=>{const e=[];return this.xReference===i.OrientationXReference.Horizon?e.push(`${o.Strings.Orientation3.values.x} ${a.Format.angle(this.x,!1)}`):e.push(`${o.Strings.Orientation3.values.x} ${a.Format.angle(this.x,!1)}  ${a.Format.enum("OrientationXReference",this.xReference)}`),this.zReference===i.OrientationZReference.North?e.push(`${o.Strings.Orientation3.values.z} ${a.Format.angle(this.z,!0)}`):e.push(`${o.Strings.Orientation3.values.z} ${a.Format.angle(this.z,!0)}  ${a.Format.enum("OrientationZReference",this.zReference)}`),0!==this.y&&e.push(`${o.Strings.Orientation3.values.y} ${a.Format.angle(this.y,!1)}`),e.join(o.Strings.Common.delimeter)},this.x=e,this.xReference=t,this.y=n,this.z=r,this.zReference=s}applyJSON(e){m.Serialization.validateJson(e),m.Serialization.validateType(e,this.type),this.x=r.Common.parseFloat(e.x,this.x),this.xReference=r.Common.parseString(e.xReference,this.xReference),this.y=r.Common.parseFloat(e.y,this.y),this.z=r.Common.parseFloat(e.z,this.z),this.zReference=r.Common.parseString(e.zReference,this.zReference)}applyVelocity(e,t){this.x+=c.Kinematic.d1(e.x,t),this.y+=c.Kinematic.d1(e.y,t),this.z+=c.Kinematic.d1(e.z,t)}interpolate(e,t,n,o){let a=this.x,r=this.xReference,s=this.x,c=e.x;e.xReference!==this.xReference&&(s=t.x.value(this.xReference)+this.x,c=t.x.value(e.xReference)+e.x,r=i.OrientationXReference.Horizon),a=s-o(0,l.Geometry.angleDifferenceSigned(s,c));let u=this.z,m=this.zReference,p=this.z,h=e.z;e.zReference!==this.zReference&&(p=t.z.value(this.zReference)+this.z,h=t.z.value(e.zReference)+e.z,m=i.OrientationZReference.North),u=p-o(0,l.Geometry.angleDifferenceSigned(p,h));const f=new d(a,r,o(this.y,e.y),u,m);return f.convertReferences(t,n),f}convertReferences(e,t=new u.OrientationReferenceTargets){this.xReference!==t.x&&(this.x=e.x.value(this.xReference)+this.x-e.x.value(t.x),this.xReference=t.x),this.zReference!==t.z&&(this.z=e.z.value(this.zReference)+this.z-e.z.value(t.z),this.zReference=t.z)}apply(e){return null!==e.x&&(this.x=e.x),e.xReference&&(this.xReference=e.xReference),null!==e.y&&(this.y=e.y),null!==e.z&&(this.z=e.z),e.zReference&&(this.zReference=e.zReference),this}get pitch(){return this.x}set pitch(e){this.x=e}get pitchReference(){return this.xReference}set pitchReference(e){this.xReference=e}get roll(){return this.y}set roll(e){this.y=e}get yaw(){return this.z}set yaw(e){this.z=e}get yawReference(){return this.zReference}set yawReference(e){this.zReference=e}asOptional(){const e=new s.Orientation3Optional;return e.apply(this),e}}t.Orientation3=d},4612:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Orientation3Optional=void 0;const i=n(750),o=n(4147),a=n(2838),r=n(5088),s=n(8111),l=n(5589),c=n(1154),u=n(6524),m=n(5974);class d{constructor(e=null,t=i.OrientationXReference.Horizon,n=null,r=null,s=i.OrientationZReference.North){this.type=i.TypeName.Orientation3Optional,this.toString=()=>{let e=[];return null!==this.x&&(this.xReference===i.OrientationXReference.Horizon?e.push(`${o.Strings.Orientation3.values.x} ${a.Format.angle(this.x,!1)}`):e.push(`${o.Strings.Orientation3.values.x} ${a.Format.angle(this.x,!1)}  ${a.Format.enum("OrientationXReference",this.xReference)}`)),null!==this.y&&e.push(`${o.Strings.Orientation3.values.y} ${a.Format.angle(this.y,!1)}`),null!==this.z&&(this.zReference===i.OrientationZReference.North?e.push(`${o.Strings.Orientation3.values.z} ${a.Format.angle(this.z,!0)}`):e.push(`${o.Strings.Orientation3.values.z} ${a.Format.angle(this.z,!0)}  ${a.Format.enum("OrientationZReference",this.zReference)}`)),e.join(o.Strings.Common.delimeter)},this.x=e,this.xReference=t,this.y=n,this.z=r,this.zReference=s}applyJSON(e){m.Serialization.validateJson(e),m.Serialization.validateType(e,this.type),this.x=r.Common.parseFloat(e.x,null),this.xReference=r.Common.parseString(e.xReference,this.xReference),this.y=r.Common.parseFloat(e.y,null),this.z=r.Common.parseFloat(e.z,null),this.zReference=r.Common.parseString(e.zReference,this.zReference)}interpolate(e,t,n,o){let a=this.x,r=this.xReference;if(null!==this.x&&null!==e.x){let n=this.x,l=e.x;e.xReference!==this.xReference&&(n=t.x.value(this.xReference)+this.x,l=t.x.value(e.xReference)+e.x,r=i.OrientationXReference.Horizon),a=n-o(0,s.Geometry.angleDifferenceSigned(n,l))}let l=this.z,c=this.zReference;if(null!==this.z&&null!==e.z){let n=this.z,a=e.z;e.zReference!==this.zReference&&(n=t.z.value(this.zReference)+this.z,a=t.z.value(e.zReference)+e.z,c=i.OrientationZReference.North),l=n-o(0,s.Geometry.angleDifferenceSigned(n,a))}const u=new d(a,r,null===this.y?null:null===e.y?this.y:o(this.y,e.y),l,c);return u.convertReferences(t,n),u}convertReferences(e,t=new u.OrientationReferenceTargets){this.xReference!==t.x&&(null!==this.x&&(this.x=e.x.value(this.xReference)+this.x-e.x.value(t.x)),this.xReference=t.x),this.zReference!==t.z&&(null!==this.z&&(this.z=e.z.value(this.zReference)+this.z-e.z.value(t.z)),this.zReference=t.z)}velocity(e,t){const n=new l.Velocity3;return null!==this.x&&null!==e.x&&this.xReference===e.xReference&&(n.x=c.Kinematic.v4(s.Geometry.angleDifferenceSigned(this.x,e.x),t)),null!==this.y&&null!==e.y&&(n.y=c.Kinematic.v4(s.Geometry.angleDifferenceSigned(this.y,e.y),t)),null!==this.z&&null!==e.z&&this.zReference===e.zReference&&(n.z=c.Kinematic.v4(s.Geometry.angleDifferenceSigned(this.z,e.z),t)),n}get pitch(){return this.x}set pitch(e){this.x=e}get pitchReference(){return this.xReference}set pitchReference(e){this.xReference=e}get roll(){return this.y}set roll(e){this.y=e}get yaw(){return this.z}set yaw(e){this.z=e}get yawReference(){return this.zReference}set yawReference(e){this.zReference=e}apply(e){return this.x=e.x,this.xReference=e.xReference,this.y=e.y,this.z=e.z,this.zReference=e.zReference,this}achieved(e,t){return!(null!==this.x&&null!==e.x&&this.xReference===e.xReference&&Math.abs(s.Geometry.angleDifferenceSigned(this.x,e.x))>t||null!==this.y&&null!==e.y&&Math.abs(s.Geometry.angleDifferenceSigned(this.y,e.y))>t||null!==this.z&&null!==e.z&&Math.abs(s.Geometry.angleDifferenceSigned(this.z,e.z))>t)}}t.Orientation3Optional=d},6750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrientationReferenceSources=void 0;const i=n(2903),o=n(944);class a{constructor(e=new o.OrientationXReferenceSources,t=new i.OrientationZReferenceSources){this.x=e,this.z=t}static fromZ(e){return new a(new o.OrientationXReferenceSources,new i.OrientationZReferenceSources(e,e,e))}}t.OrientationReferenceSources=a},6524:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrientationReferenceTargets=void 0;const i=n(750);t.OrientationReferenceTargets=class{constructor(e=i.OrientationXReference.Horizon,t=i.OrientationZReference.North){this.x=e,this.z=t}}},944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrientationXReferenceSources=void 0;const i=n(750);t.OrientationXReferenceSources=class{constructor(e=0){this.path=e}value(e){switch(e){case i.OrientationXReference.Horizon:return 0;case i.OrientationXReference.Path:return this.path}}}},2903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrientationZReferenceSources=void 0;const i=n(750);t.OrientationZReferenceSources=class{constructor(e=0,t=0,n=0){this.course=e,this.heading=t,this.path=n}value(e){switch(e){case i.OrientationZReference.North:return 0;case i.OrientationZReference.Course:return this.course;case i.OrientationZReference.Heading:return this.heading;case i.OrientationZReference.Path:return this.path}}}},8656:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathSample=t.PathPoint=t.Path=void 0;const i=n(6875),o=n(5088),a=n(5807),r=n(141),s=n(8111);t.Path=class{constructor(e){let t=0,n=-1,i=0,o=null;this.segments=e.map((e=>{n++;let a=0;return e.map(((e,r)=>{if(o){const t=e.distance(o);if(t<.001)return null;i+=t,r>0&&(a+=t)}return o=e,new l(e,t++,i,n,r,a)})).filter((e=>e))})).filter((e=>e.length>0)),this.distance=i}get points(){const e=[];return this.segments.forEach((t=>{e.push(...t)})),e}get coordinates(){return this.points.map((e=>e.coordinate))}get segmentEndPoints(){return this.segments.map((e=>o.Common.last(e)))}get segmentCenterCoordinates(){return this.segments.map((e=>{if(e.length>1){const t=o.Common.last(e).segmentDistance/2;for(const n of e)if(n.segmentDistance>=t){if(n.segmentIndex>0&&n.segmentIndex<e.length)return n.coordinate.geoCoordinate(new a.Vector2(n.coordinate.bearing(e[n.segmentIndex-1].coordinate),n.segmentDistance-t));break}}return e[0].coordinate}))}nextCoordinate(e=null,t=5){return null===e&&(e=this.distance),this.sampleForDistance(e+t,!1).coordinate}nearestDistance(e){const t=this.points;if(t.length<2)return 0;const n=t.map((n=>{if(0===n.index)return{point:n,intersect:n.coordinate,distance:e.distance(n.coordinate)};const o=t[n.index-1],a=o.coordinate.geoCoordinate(s.Geometry.lineClosestPoint(new r.Line2(new i.Point2,o.coordinate.offset(n.coordinate).toPoint2()),o.coordinate.offset(e).toPoint2()).toVector2());return{point:o,intersect:a,distance:e.distance(a)}})).sort(((e,t)=>e.distance-t.distance))[0];return n.point.distance+n.intersect.distance(n.point.coordinate)}sampleForDistance(e,t=!0){return this.samplesForDistances([e],t)[0]}samplesForMaxDistance(e,t=!0){const n=Math.ceil(this.distance/e),i=this.distance/n,o=[];for(let e=0;e<this.distance;e+=i)o.push(e);return o.push(this.distance),this.samplesForDistances(o,t)}samplesForDistances(e,t=!0){if(0===e.length)return[];const n=this.points;if(0===n.length)return[];if(1===n.length)return e.map((e=>new c(n[0].coordinate,0,0)));const i=e.map(((e,t)=>({index:t,distance:e,coordinate:n[0].coordinate,direction:n[0].coordinate.bearing(n[1].coordinate)}))).sort(((e,t)=>e.distance-t.distance));let o=0;for(const e of n){for(;o<i.length;){const r=i[o],s=e.index===n.length-1;if(!(e.distance>=r.distance||s))break;s&&t&&r.distance>e.distance?(e.index>0?r.direction=n[e.index-1].coordinate.bearing(e.coordinate):e.index+1<n.length&&(r.direction=e.coordinate.bearing(n[e.index+1].coordinate)),r.coordinate=e.coordinate):e.index>0?(r.direction=n[e.index-1].coordinate.bearing(e.coordinate),r.coordinate=e.coordinate.geoCoordinate(new a.Vector2(r.direction+Math.PI,e.distance-r.distance))):(r.direction=e.coordinate.bearing(n[e.index+1].coordinate),r.coordinate=e.coordinate),o++}if(o===i.length)break}return i.sort(((e,t)=>e.index-t.index)).map((e=>new c(e.coordinate,e.direction,e.distance)))}};class l{constructor(e,t,n,i,o,a){this.coordinate=e,this.index=t,this.distance=n,this.segment=i,this.segmentIndex=o,this.segmentDistance=a}}t.PathPoint=l;class c{constructor(e,t,n){this.coordinate=e,this.direction=t,this.distance=n}}t.PathSample=c},6801:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Payload=void 0;const i=n(7722),o=n(5088);class a extends i.Identifiable{constructor(e=0){super(),this.channel=e}applyJSON(e){super.applyJSON(e),this.channel=o.Common.parseInt(e.channel,this.channel)}}t.Payload=a},6875:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Point2=void 0;const i=n(5807),o=n(750),a=n(5088),r=n(5974);class s{constructor(e=0,t=0){this.type=o.TypeName.Point2,this.x=e,this.y=t}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.x=a.Common.parseFloat(e.x,this.x),this.y=a.Common.parseFloat(e.y,this.y)}get direction(){return Math.atan2(this.y,this.x)}get magnitude(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}toVector2(){return new i.Vector2(this.direction,this.magnitude)}distance(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}midPoint(e){return this.interpolate(e,.5)}interpolateDistance(e,t){return 0===this.distance(e)?this:this.interpolate(e,Math.min(Math.max(t/this.distance(e),0),1))}interpolate(e,t){return new s(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}static center(e){const t=new s;return e.forEach((n=>{t.x+=n.x/e.length,t.y+=n.y/e.length})),t}static boundingBox(e,t=0,n=1){const i=s.center(e).toVector2(),o=e.map((e=>{const n=e.toVector2().subtract(i);return n.direction-=t,n.toPoint2()}));let a=new s,r=new s;o.forEach(((e,t)=>{(0===t||e.x<a.x)&&(a.x=e.x),(0===t||e.y<a.y)&&(a.y=e.y),(0===t||e.x>r.x)&&(r.x=e.x),(0===t||e.y>r.y)&&(r.y=e.y)}));const l={topLeft:new s(r.x,a.y).toVector2(),topRight:r.toVector2(),bottomLeft:a.toVector2(),bottomRight:new s(a.x,r.y).toVector2()};return l.topLeft.direction+=t,l.topLeft.magnitude=l.topLeft.magnitude*=n,l.topRight.direction+=t,l.topRight.magnitude=l.topRight.magnitude*=n,l.bottomLeft.direction+=t,l.bottomLeft.magnitude=l.bottomLeft.magnitude*=n,l.bottomRight.direction+=t,l.bottomRight.magnitude=l.bottomRight.magnitude*=n,{topLeft:i.add(l.topLeft).toPoint2(),topRight:i.add(l.topRight).toPoint2(),bottomLeft:i.add(l.bottomLeft).toPoint2(),bottomRight:i.add(l.bottomRight).toPoint2()}}static compare(e,t){return e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0}}t.Point2=s},1504:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointOfInterestNode=t.PointsOfInterestNode=t.PointOfInterest=void 0;const i=n(7722),o=n(750),a=n(5664),r=n(6142),s=n(2838),l=n(6718),c=n(5974),u=n(79),m=n(4147);class d extends i.Identifiable{constructor(){super(...arguments),this.type=o.TypeName.PointOfInterest,this.referencedOffset=new r.GeoReferencedOffset,this.descriptors=new a.Descriptors}applyJSON(e){super.applyJSON(e),c.Serialization.validateType(e,this.type),this.descriptors.applyJSON(e.descriptors),this.referencedOffset.applyJSON(e.referencedOffset)}node(e,t){return new h(e,t,this)}referenceSpatial(e,t){return this.referencedOffset.value(e,t)}referenceCoordinate(e,t){return this.referenceSpatial(e,t).coordinate}title(e){return s.Format.icaoWords(e).join(" ")}abbreviation(e){return s.Format.icaoLetters(e)}}t.PointOfInterest=d;class p extends u.ListNode{constructor(e,t){super(e,"points-of-interest"),this.listAccessor=t,this.list.forEach(((e,t)=>{this.children.push(new h(this,t,e))})),this.emptyChildrenNavigationEnabled=!0,this.propertiesEditorDisabled=!0,this.appends.push({title:`${m.Strings.Common.new} ${m.Strings.PointOfInterest.name}`,tooltip:null,execute:e=>{e instanceof d&&this.list.push(e)}})}get title(){return m.Strings.PointOfInterest.multiple}get list(){return this.listAccessor()}}t.PointsOfInterestNode=p;class h extends l.ListElementNode{constructor(e,t,n){super(n.id,e,t,c.Serialization.typeDisplay(n),!0),this.pointOfInterest=n}get subtitle(){return this.pointOfInterest.descriptors.description}}t.PointOfInterestNode=h},8658:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReferencedAltitude=void 0;const i=n(9871),o=n(750);t.ReferencedAltitude=class{constructor(e,t,n){this.altitude=e,this.takeoffLocation=t,this.groundLocation=n}toSystem(e){if(e===this.altitude.system)return this.altitude;let t=this.altitude.value;switch(this.altitude.system){case o.AltitudeSystem.ATL:if(!this.takeoffLocation)return null;t+=this.takeoffLocation.altitude.value;break;case o.AltitudeSystem.MSL:break;case o.AltitudeSystem.AGL:if(!this.groundLocation)return null;t+=this.groundLocation.altitude.value}switch(e){case o.AltitudeSystem.ATL:if(!this.takeoffLocation)return null;t-=this.takeoffLocation.altitude.value;break;case o.AltitudeSystem.MSL:break;case o.AltitudeSystem.AGL:if(!this.groundLocation)return null;t-=this.groundLocation.altitude.value}return new i.Altitude(t,e)}}},7470:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteControllerWheel=t.RemoteControllerButton=t.RemoteControllerStick=t.RemoteController=void 0;const i=n(7722),o=n(750),a=n(5974),r=n(1985),s=n(5088);class l extends i.Identifiable{constructor(e=0){super(),this.type=o.TypeName.RemoteController,this.updated=new r.Datetime,this.leftStick=new c,this.leftWheel=new m,this.rightStick=new c,this.pauseButton=new u,this.c1Button=new u,this.c2Button=new u,this.channel=e}applyJSON(e){super.applyJSON(e),a.Serialization.validateType(e,this.type),super.applyJSON(e),this.channel=s.Common.parseInt(e.channel,this.channel),this.updated.applyJSON(e.updated),this.leftStick.applyJSON(e.leftStick),this.leftWheel.applyJSON(e.leftWheel),this.rightStick.applyJSON(e.rightStick),this.pauseButton.applyJSON(e.pauseButton),this.c1Button.applyJSON(e.c1Button),this.c2Button.applyJSON(e.c2Button)}}t.RemoteController=l;class c{constructor(e=0,t=0){this.type=o.TypeName.RemoteControllerStick,this.x=e,this.y=t}applyJSON(e){a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.x=s.Common.parseFloat(e.x,this.x),this.y=s.Common.parseFloat(e.y,this.y)}}t.RemoteControllerStick=c;class u{constructor(e=!1,t=!1){this.type=o.TypeName.RemoteControllerButton,this.present=e,this.pressed=t}applyJSON(e){a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.present=s.Common.parseBoolean(e.present,this.present),this.pressed=s.Common.parseBoolean(e.pressed,this.pressed)}}t.RemoteControllerButton=u;class m{constructor(e=!1,t=!1,n=0){this.type=o.TypeName.RemoteControllerWheel,this.present=e,this.pressed=t,this.value=n}applyJSON(e){a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.present=s.Common.parseBoolean(e.present,this.present),this.pressed=s.Common.parseBoolean(e.pressed,this.pressed),this.value=s.Common.parseFloat(e.value,this.value)}}t.RemoteControllerWheel=m},5974:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Serialization=void 0;const o=i(n(4037)),a=n(5088),r=n(2838),s=n(3405),l=n(2154),c=n(7278),u=n(3215),m=n(7432),d=n(6275),p=n(1791),h=n(4682),f=n(7212),g=n(9626),y=n(4976),C=n(7658),v=n(6091),b=n(609),S=n(3893),w=n(6589),M=n(5850),x=n(6207),O=n(499),P=n(948),T=n(709),D=n(2322),E=n(9226),A=n(1612),F=n(7885),N=n(3795),I=n(5437),_=n(9866),R=n(5967),L=n(1639),k=n(5094),z=n(245),B=n(1044),j=n(6382),V=n(3014),G=n(9935),U=n(6802),J=n(3999),W=n(5630),H=n(5694),q=n(5739),Z=n(7416),K=n(6953),$=n(9983),X=n(9185),Y=n(2e3),Q=n(3957),ee=n(908),te=n(7754),ne=n(9986),ie=n(4065),oe=n(5327),ae=n(8283),re=n(9271),se=n(1445),le=n(7152),ce=n(8218),ue=n(1041),me=n(9343),de=n(4107),pe=n(4153),he=n(8354),fe=n(466),ge=n(5861),ye=n(946),Ce=n(1906),ve=n(1201),be=n(8002),Se=n(4321),we=n(8210),Me=n(4200),xe=n(2962),Oe=n(3750),Pe=n(4049),Te=n(4808),De=n(8731),Ee=n(6030),Ae=n(1194),Fe=n(6484),Ne=n(8954),Ie=n(5406),_e=n(3948),Re=n(864),Le=n(1707),ke=n(527),ze=n(438),Be=n(6437),je=n(8328),Ve=n(3071),Ge=n(6191),Ue=n(4259),Je=n(9871),We=n(6776),He=n(7436),qe=n(5154),Ze=n(4110),Ke=n(1111),$e=n(916),Xe=n(1678),Ye=n(7525),Qe=n(8925),et=n(9122),tt=n(924),nt=n(1985),it=n(5664),ot=n(2700),at=n(4545),rt=n(5760),st=n(8510),lt=n(4137),ct=n(360),ut=n(745),mt=n(7343),dt=n(7343),pt=n(7343),ht=n(5226),ft=n(6241),gt=n(6142),yt=n(4830),Ct=n(4457),vt=n(2545),bt=n(3854),St=n(141),wt=n(3447),Mt=n(7787),xt=n(8299),Ot=n(4334),Pt=n(6202),Tt=n(5486),Dt=n(3509),Et=n(2064),At=n(5051),Ft=n(9477),Nt=n(1504),It=n(2573),_t=n(4612),Rt=n(6875),Lt=n(5445),kt=n(750),zt=n(4187),Bt=n(4187),jt=n(4187),Vt=n(4187),Gt=n(4567),Ut=n(5167),Jt=n(9993),Wt=n(5807),Ht=n(5589),qt=n(9123),Zt=n(8569),Kt=n(176),$t=n(7722),Xt=n(4174),Yt=n(7470);class Qt{static typeDisplay(e,t="name"){return e?"string"==typeof e?r.Format.string(`${e}.${t}`):Qt.typeDisplay(e.type,t):""}static clone(e,t=!1){const n=Qt.deserialize(Qt.serialize(e));if(t){const e={};a.Common.descendantsMatching(n,(e=>e instanceof $t.Identifiable&&e.resettable)).forEach((t=>{const n=a.Common.uuid();e[t.id]=n,t.id=n})),a.Common.descendantsMatching(n,(e=>"object"==typeof e)).forEach((t=>{Object.keys(t).map((n=>{const i=t[n];"string"==typeof i&&e[i]&&(t[n]=e[i])}))}))}return n}static plainJSON(e){return e?JSON.parse(Qt.serialize(e)):e}static write(e){return Qt.WriteCompressByDefault?Qt.compress(e):Qt.serialize(e)}static read(e,t){try{const t=Qt.decompress(e);if(t)return t}catch(e){if(t)return t(e),null}try{return Qt.deserialize(e)}catch(e){if(t)return t(e),null}}static serialize(e){return JSON.stringify(e,((e,t)=>null===t||""===t||Array.isArray(t)&&0===t.length?void 0:t))}static compress(e){return e?o.default.compress("string"==typeof e?e:Qt.serialize(e),{outputEncoding:"StorageBinaryString"}):null}static decompress(e){if(!e)return null;let t=null;try{t=JSON.parse(o.default.decompress(e,{inputEncoding:"StorageBinaryString"}))}catch(e){return null}return t?Qt.deserialize(t):null}static deserialize(e,t=null,n=!0){if(!e){if(!n)throw new TypeError("Expected not null but found null");return null}if("string"==typeof e)return Qt.deserialize(JSON.parse(e),t,n);const i=Qt.deserializeInstance(e);if(t&&!(i instanceof t))throw new TypeError(`Expected ${Qt.typeDisplay(new t)} but found ${Qt.typeDisplay(i.type)}`);return i}static createInstance(e){switch(e){case kt.TypeName.AEBCountCameraCommand:return new R.AEBCountCameraCommand;case kt.TypeName.Altitude:return new Je.Altitude;case kt.TypeName.AltitudeRange:return new We.AltitudeRange;case kt.TypeName.Asset:return new He.Asset;case kt.TypeName.AssetManifest:return new qe.AssetManifest;case kt.TypeName.AssetSource:return new Ze.AssetSource;case kt.TypeName.ApertureCameraCommand:return new L.ApertureCameraCommand;case kt.TypeName.AutoExposureLockCameraCommand:return new k.AutoExposureLockCameraCommand;case kt.TypeName.AutoLockGimbalCameraCommand:return new z.AutoLockGimbalCameraCommand;case kt.TypeName.Camera:return new Ke.Camera;case kt.TypeName.CameraFile:return new $e.CameraFile;case kt.TypeName.CameraCaptureConfiguration:return new Xe.CameraCaptureConfiguration;case kt.TypeName.CameraImageSpecification:return new Ye.CameraImageSpecification;case kt.TypeName.CameraLensSpecification:return new Qe.CameraLensSpecification;case kt.TypeName.CameraSensorSpecification:return new et.CameraSensorSpecification;case kt.TypeName.CameraSpecification:return new tt.CameraSpecification;case kt.TypeName.CollisionAvoidanceDroneCommand:return new l.CollisionAvoidanceDroneCommand;case kt.TypeName.ColorCameraCommand:return new B.ColorCameraCommand;case kt.TypeName.CommandComponent:return new we.CommandComponent;case kt.TypeName.CommandExecutionState:return new s.CommandExecutionState;case kt.TypeName.ComponentExecutionState:return new be.ComponentExecutionState;case kt.TypeName.ComponentSource:return new Se.ComponentSource;case kt.TypeName.ConnectionFailSafeBehaviorDroneCommand:return new c.ConnectionFailSafeBehaviorDroneCommand;case kt.TypeName.ContrastCameraCommand:return new j.ContrastCameraCommand;case kt.TypeName.CourseComponent:return new Me.CourseComponent;case kt.TypeName.Datetime:return new nt.Datetime;case kt.TypeName.Descriptors:return new it.Descriptors;case kt.TypeName.Disengagement:return new ot.Disengagement;case kt.TypeName.DestinationComponent:return new xe.DestinationComponent;case kt.TypeName.Device:return new rt.Device;case kt.TypeName.DistanceTolerance:return new at.DistanceTolerance;case kt.TypeName.DisengageComponent:return new Oe.DisengageComponent;case kt.TypeName.Drone:return new st.Drone;case kt.TypeName.Engagement:return new lt.Engagement;case kt.TypeName.Execution:return new ct.Execution;case kt.TypeName.ExposureCompensationCameraCommand:return new V.ExposureCompensationCameraCommand;case kt.TypeName.ExposureCompensationStepCameraCommand:return new G.ExposureCompensationStepCameraCommand;case kt.TypeName.ExposureModeCameraCommand:return new U.ExposureModeCameraCommand;case kt.TypeName.FacadeComponent:return new Pe.FacadeComponent;case kt.TypeName.FacadeComponentBoundaryPoint:return new Te.FacadeComponentBoundaryPoint;case kt.TypeName.FieldOfView:return new ut.FieldOfView;case kt.TypeName.FocusCameraCommand:return new W.FocusCameraCommand;case kt.TypeName.FocusModeCameraCommand:return new H.FocusModeCameraCommand;case kt.TypeName.ISOCameraCommand:return new q.ISOCameraCommand;case kt.TypeName.MechanicalShutterCameraCommand:return new Z.MechanicalShutterCameraCommand;case kt.TypeName.FileIndexModeCameraCommand:return new J.FileIndexModeCameraCommand;case kt.TypeName.Func:return new mt.Func;case kt.TypeName.FuncInput:return new dt.FuncInput;case kt.TypeName.FuncInputExtensions:return new pt.FuncInputExtensions;case kt.TypeName.GeoCoordinate:return new ht.GeoCoordinate;case kt.TypeName.GeoLocation:return new ft.GeoLocation;case kt.TypeName.GeoReferencedOffset:return new gt.GeoReferencedOffset;case kt.TypeName.GeoSpatial:return new yt.GeoSpatial;case kt.TypeName.Gimbal:return new Ct.Gimbal;case kt.TypeName.HeadingComponent:return new De.HeadingComponent;case kt.TypeName.HomeLocationDroneCommand:return new u.HomeLocationDroneCommand;case kt.TypeName.InspectionComponent:return new Ee.InspectionComponent;case kt.TypeName.InspectionComponentAction:return new Ae.InspectionComponentAction;case kt.TypeName.InspectionComponentInspectionPoint:return new Fe.InspectionComponentInspectionPoint;case kt.TypeName.Interpolation:return new vt.Interpolation;case kt.TypeName.LandingGearAutomaticMovementDroneCommand:return new m.LandingGearAutomaticMovementDroneCommand;case kt.TypeName.LandingGearDeployDroneCommand:return new d.LandingGearDeployDroneCommand;case kt.TypeName.LandingGearRetractDroneCommand:return new p.LandingGearRetractDroneCommand;case kt.TypeName.LandingProtectionDroneCommand:return new h.LandingProtectionDroneCommand;case kt.TypeName.LightbridgeChannelDroneCommand:return new f.LightbridgeChannelDroneCommand;case kt.TypeName.LightbridgeChannelSelectionModeDroneCommand:return new g.LightbridgeChannelSelectionModeDroneCommand;case kt.TypeName.LightbridgeFrequencyBandDroneCommand:return new y.LightbridgeFrequencyBandDroneCommand;case kt.TypeName.Limits:return new bt.Limits;case kt.TypeName.Line2:return new St.Line2;case kt.TypeName.ListComponent:return new wt.ListComponent;case kt.TypeName.LowBatteryWarningThresholdDroneCommand:return new C.LowBatteryWarningThresholdDroneCommand;case kt.TypeName.MapComponent:return new Ne.MapComponent;case kt.TypeName.MapComponentBoundaryPoint:return new Ie.MapComponentBoundaryPoint;case kt.TypeName.MaxAltitudeDroneCommand:return new v.MaxAltitudeDroneCommand;case kt.TypeName.MaxDistanceDroneCommand:return new b.MaxDistanceDroneCommand;case kt.TypeName.MaxDistanceLimitationDroneCommand:return new S.MaxDistanceLimitationDroneCommand;case kt.TypeName.Mission:return new Ot.Mission;case kt.TypeName.Message:return new Mt.Message;case kt.TypeName.MessageGroup:return new xt.MessageGroup;case kt.TypeName.MeteringModeCameraCommand:return new K.MeteringModeCameraCommand;case kt.TypeName.Mode:return new Xt.Mode;case kt.TypeName.ModeInput:return new Xt.ModeInput;case kt.TypeName.ModeCameraCommand:return new $.ModeCameraCommand;case kt.TypeName.ModeGimbalCommand:return new ge.ModeGimbalCommand;case kt.TypeName.MotionLimits:return new Pt.MotionLimits;case kt.TypeName.MotionLimitsOptional:return new Tt.MotionLimitsOptional;case kt.TypeName.MotionLimits3:return new Dt.MotionLimits3;case kt.TypeName.MotionLimits3Optional:return new Et.MotionLimits3Optional;case kt.TypeName.MotionLimits6:return new At.MotionLimits6;case kt.TypeName.MotionLimits6Optional:return new Ft.MotionLimits6Optional;case kt.TypeName.PointOfInterest:return new Nt.PointOfInterest;case kt.TypeName.OcuSyncChannelDroneCommand:return new w.OcuSyncChannelDroneCommand;case kt.TypeName.OcuSyncChannelSelectionModeDroneCommand:return new M.OcuSyncChannelSelectionModeDroneCommand;case kt.TypeName.OcuSyncFrequencyBandDroneCommand:return new x.OcuSyncFrequencyBandDroneCommand;case kt.TypeName.OrbitComponent:return new _e.OrbitComponent;case kt.TypeName.Orientation3:return new It.Orientation3;case kt.TypeName.Orientation3Optional:return new _t.Orientation3Optional;case kt.TypeName.OrientationGimbalCommand:return new ye.OrientationGimbalCommand;case kt.TypeName.PhotoAspectRatioCameraCommand:return new X.PhotoAspectRatioCameraCommand;case kt.TypeName.PhotoFileFormatCameraCommand:return new Y.PhotoFileFormatCameraCommand;case kt.TypeName.PhotoModeCameraCommand:return new ee.PhotoModeCameraCommand;case kt.TypeName.PhotoIntervalCameraCommand:return new Q.PhotoIntervalCameraCommand;case kt.TypeName.PathComponent:return new Re.PathComponent;case kt.TypeName.PathComponentWaypoint:return new Le.PathComponentWaypoint;case kt.TypeName.PathComponentMarker:return new ke.PathComponentMarker;case kt.TypeName.PathComponentModelSample:return new ze.PathComponentModelSample;case kt.TypeName.PlanComponent:return new Be.PlanComponent;case kt.TypeName.PlanReengagementRules:return new je.PlanReengagementRules;case kt.TypeName.PlanRestrictionZone:return new Ve.PlanRestrictionZone;case kt.TypeName.Point2:return new Rt.Point2;case kt.TypeName.PrecisionLandingDroneCommand:return new O.PrecisionLandingDroneCommand;case kt.TypeName.RemoteController:return new Yt.RemoteController;case kt.TypeName.RemoteControllerButton:return new Yt.RemoteControllerButton;case kt.TypeName.RemoteControllerStick:return new Yt.RemoteControllerStick;case kt.TypeName.RemoteControllerSticksDroneCommand:return new P.RemoteControllerSticksDroneCommand;case kt.TypeName.RemoteControllerWheel:return new Yt.RemoteControllerWheel;case kt.TypeName.ReturnHomeAltitudeDroneCommand:return new T.ReturnHomeAltitudeDroneCommand;case kt.TypeName.ReturnHomeObstacleAvoidanceDroneCommand:return new D.ReturnHomeObstacleAvoidanceDroneCommand;case kt.TypeName.ReturnHomeRemoteObstacleAvoidanceDroneCommand:return new E.ReturnHomeRemoteObstacleAvoidanceDroneCommand;case kt.TypeName.RotationComponent:return new Ge.RotationComponent;case kt.TypeName.SaturationCameraCommand:return new te.SaturationCameraCommand;case kt.TypeName.SeriousLowBatteryWarningThresholdDroneCommand:return new A.SeriousLowBatteryWarningThresholdDroneCommand;case kt.TypeName.SharpnessCameraCommand:return new ne.SharpnessCameraCommand;case kt.TypeName.ShutterSpeedCameraCommand:return new ie.ShutterSpeedCameraCommand;case kt.TypeName.SmartReturnHomeDroneCommand:return new F.SmartReturnHomeDroneCommand;case kt.TypeName.SourcedGeoSpatial:return new Lt.SourcedGeoSpatial;case kt.TypeName.SpotMeteringTargetCameraCommand:return new oe.SpotMeteringTargetCameraCommand;case kt.TypeName.StartCaptureCameraCommand:return new ae.StartCaptureCameraCommand;case kt.TypeName.StopCaptureCameraCommand:return new re.StopCaptureCameraCommand;case kt.TypeName.StorageLocationCameraCommand:return new se.StorageLocationCameraCommand;case kt.TypeName.Timeline:return new zt.Timeline;case kt.TypeName.TimelineCameraCapture:return new Bt.TimelineCameraCapture;case kt.TypeName.TimelineCommand:return new jt.TimelineCommand;case kt.TypeName.TimelineFrame:return new Vt.TimelineFrame;case kt.TypeName.User:return new Gt.User;case kt.TypeName.UserInterfaceSettings:return new Ut.UserInterfaceSettings;case kt.TypeName.UpwardsAvoidanceDroneCommand:return new N.UpwardsAvoidanceDroneCommand;case kt.TypeName.Variable:return new Jt.Variable;case kt.TypeName.Vector2:return new Wt.Vector2;case kt.TypeName.Velocity3:return new Ht.Velocity3;case kt.TypeName.Velocity6:return new qt.Velocity6;case kt.TypeName.VelocityDroneCommand:return new I.VelocityDroneCommand;case kt.TypeName.VelocityGimbalCommand:return new Ce.VelocityGimbalCommand;case kt.TypeName.VideoCaptionCameraCommand:return new le.VideoCaptionCameraCommand;case kt.TypeName.VideoFileCompressionStandardCameraCommand:return new ce.VideoFileCompressionStandardCameraCommand;case kt.TypeName.VideoFileFormatCameraCommand:return new ue.VideoFileFormatCameraCommand;case kt.TypeName.VideoModeCameraCommand:return new me.VideoModeCameraCommand;case kt.TypeName.VideoResolutionFrameRateCameraCommand:return new de.VideoResolutionFrameRateCameraCommand;case kt.TypeName.VideoStandardCameraCommand:return new pe.VideoStandardCameraCommand;case kt.TypeName.VisionAssistedPositioningDroneCommand:return new _.VisionAssistedPositioningDroneCommand;case kt.TypeName.WaitComponent:return new Ue.WaitComponent;case kt.TypeName.WhiteBalanceCustomCameraCommand:return new he.WhiteBalanceCustomCameraCommand;case kt.TypeName.WhiteBalancePresetCameraCommand:return new fe.WhiteBalancePresetCameraCommand;case kt.TypeName.YawSimultaneousFollowGimbalCommand:return new ve.YawSimultaneousFollowGimbalCommand;case kt.TypeName.Zone:return new Zt.Zone;case kt.TypeName.ZoneBoundaryPoint:return new Kt.ZoneBoundaryPoint}return null}static deserializeInstance(e){const t=Qt.createInstance(e.type);return null!==t&&t.applyJSON(e),t}static generateCode(e,t=0,n="Dronelink"){if(!e||!e.type)return null;const i=e.type.charAt(0).toLowerCase()+e.type.slice(1),o=[];return t>0&&o.push("(() => {"),o.push(`${Qt.indent(t+1)}const ${i} = new ${n?n+".":""}${e.type}()`),Object.keys(e).forEach((a=>{if("type"===a)return;if("id"===a&&e.type!==kt.TypeName.PointOfInterest)return;const r=e[a];e.type===kt.TypeName.Datetime&&"value"===a?o.push(`${Qt.indent(t+1)}${i}.${a} = new Date(${r.getTime()})`):null===r?o.push(`${Qt.indent(t+1)}${i}.${a} = null`):Array.isArray(r)?(o.push(`${Qt.indent(t+1)}${i}.${a} = [`),r.forEach((e=>{o.push(`${Qt.indent(t+2)}${Qt.generateCode(e,t+2,n)},`)})),o.push(Qt.indent(t+1)+"]")):"object"==typeof r?o.push(`${Qt.indent(t+1)}${i}.${a} = ${Qt.generateCode(r,t+1,n)}`):"string"==typeof r?o.push(`${Qt.indent(t+1)}${i}.${a} = "${r.replace('"','\\"')}"`):"function"==typeof r||o.push(`${Qt.indent(t+1)}${i}.${a} = ${r}`)})),t>0&&(o.push(`${Qt.indent(t+1)}return ${i}`),o.push(`${Qt.indent(t)}})()`)),o.join("\n")}static indent(e){return Array(e).join("    ")}static validateJson(e){if(!e)throw new TypeError("Expected object but found null")}static validateType(e,t){if(!e||!e.type)throw new TypeError(`Expected ${Qt.typeDisplay(t)} but found null`);if(e.type!==t)throw new TypeError(`Expected ${Qt.typeDisplay(t)} but found ${Qt.typeDisplay(e.type)}`)}}t.Serialization=Qt,Qt.WriteCompressByDefault=!0},9514:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((i=i.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Simulation=void 0;const a=n(5226),r=n(5088),s=n(4334),l=n(5437),c=n(750),u=n(7247),m=n(8179),d=n(9123),p=n(7553),h=n(2681),f=n(9983),g=n(908),y=n(6802),C=n(5311),v=n(5861),b=n(946),S=n(8283),w=n(9271),M=n(1985),x=n(1906),O=n(7787),P=n(4147),T=n(8111),D=n(3957),E=n(2e3),A=n(1041),F=n(5974),N=o(n(2077)),I=n(3593),_=n(8002),R=n(948),L=n(5807),k=n(9343);t.Simulation=class{constructor(e=new a.GeoCoordinate,t,n=!1,i=null){this.updateInterval=u.Constants.SimulationUpdateInterval,this.executeIntervalTarget=u.Constants.ExecuteIntervalTarget,this.preventThreadStarvation=!0,this.droneMotionLimits=u.Constants.DroneMotionLimits.Max(),this.rate=1,this.started=null,this.millisSinceStart=0,this.executable=null,this.engaged=!1,this.timeline=null,this.cameraFilesByChannel={},this.executionListeners=[],t&&this.executionListeners.push(t),this.context=new I.Context,this.context.drone.takeoffCoordinate=e,this.context.drone.spatial.coordinate=e,this.context.device.spatial.coordinate=e,this.context.metadata=i,this.context.preview=n}get currentDatetime(){return new M.Datetime(this.started?new Date(this.started.value.getTime()+this.millisSinceStart):new Date)}start(){this.started||(this.millisSinceStart=0,this.started=this.currentDatetime,this.execute())}load(e,t=null){this.engaged||(this.executable=e,this.timeline=t)}addExecutionListener(e){this.executionListeners.push(e)}engage(e,t=null){this.start(),this.engaged||(e&&this.load(e,t),this.executable&&(this.engaged=!0,this.executable.engage(this.context,this.currentDatetime)))}disengage(e){this.engaged&&this.executable&&(this.engaged=!1,this.executable.disengage(this.context,e))}stop(){this.disengage(new O.Message(P.Strings.Simulation.messages.disengageStop)),this.started=null}generateCameraFile(e,t,n=.5){const i=this.cameraFilesByChannel[e.channel]||[],o=e.settings.mode===c.CameraMode.Video?e.settings.videoFileFormat:e.settings.photoFileFormat;let a=Math.floor(5000001*Math.random()+5e6);e.settings.mode===c.CameraMode.Video&&(a*=n);const r=this.context.drone.createCameraFile(e.channel,`SIM_${N.default(i.length+1).format("0000")}.${o.toUpperCase()}`,a,t);return i.push(r),this.cameraFilesByChannel[e.channel]=i,this.executable&&this.engaged&&this.executable.addCameraFile(e.channel,r),this.timeline&&this.timeline.addCapture(e,r,n),r}execute(){return i(this,void 0,void 0,(function*(){let e=null,t=null,n={},i=[],o={},a={},f={},g=0;for(;this.started;){const y=this.currentDatetime,C=(new Date).getTime(),v=y.elapsedTime(this.context.drone.spatial.updated);if(v>=this.updateInterval){let s=null;if(e)this.context.drone.spatial.velocity=this.droneMotionLimits.boundedVelocity(this.context.drone.spatial.velocity,e.velocity,v),s=e.heading;else if(t){const e=new d.Velocity6;e.position.horizontal=new L.Vector2(this.context.drone.spatial.orientation.yaw,this.droneMotionLimits.horizontal.velocity.max*t.rightStick.y).add(new L.Vector2(this.context.drone.spatial.orientation.yaw+Math.PI/2,this.droneMotionLimits.horizontal.velocity.max*t.rightStick.x)),e.position.vertical=t.leftStick.y*this.droneMotionLimits.position.upDown.velocity.max,e.rotational=t.leftStick.x*this.droneMotionLimits.rotational.velocity.max,this.context.drone.spatial.velocity=this.droneMotionLimits.boundedVelocity(this.context.drone.spatial.velocity,e,v),s=t.heading}else this.context.drone.spatial.velocity=this.droneMotionLimits.boundedVelocity(this.context.drone.spatial.velocity,new d.Velocity6,v);if(null!=s){this.context.drone.spatial.velocity.rotational=0;const e=T.Geometry.angleDifferenceSigned(s,this.context.drone.spatial.orientation.z),t=this.droneMotionLimits.rotational.velocity.max*v;Math.abs(e)>t?this.context.drone.spatial.orientation.z+=r.Common.matchSign(t,e):this.context.drone.spatial.orientation.z=s}this.context.drone.spatial.applyVelocity(v),this.context.drone.spatial.updated.value=y.value,i=this.processCommands(y,i);for(let e of Object.keys(o))o[e]=this.processCommands(y,o[e]);for(let e of Object.keys(n)){const t=this.context.drone.gimbal(parseInt(e)),i=n[e];t.velocity=x.VelocityGimbalCommand.boundedVelocity(t.velocity,i.velocity,v,u.Constants.GimbalMotionLimits),t.orientation.applyVelocity(t.velocity,v),t.settings.mode===c.GimbalMode.YawFollow&&(t.velocity.yaw=0,t.orientation.yaw=this.context.drone.spatial.orientation.yaw),t.updated.value=y.value}for(let e of Object.keys(a))a[e]=this.processCommands(y,a[e]);for(let e of Object.values(this.context.drone.cameras))if(e.capturing)switch(f[e.channel]||(f[e.channel]=F.Serialization.clone(y)),e.settings.mode){case c.CameraMode.Photo:e.settings.photoMode===c.CameraPhotoMode.Interval&&y.elapsedTime(f[e.channel])>=e.settings.photoInterval&&(this.generateCameraFile(e,f[e.channel]),f[e.channel]=F.Serialization.clone(y))}else if(f[e.channel]){switch(e.settings.mode){case c.CameraMode.Photo:e.settings.photoMode!==c.CameraPhotoMode.Interval&&this.generateCameraFile(e,f[e.channel]);break;case c.CameraMode.Video:this.generateCameraFile(e,f[e.channel],y.elapsedTime(f[e.channel]))}delete f[e.channel]}}if(e=null,t=null,n={},this.executable&&this.engaged){const r=this.executable.execute(this.context,y,this.timeline);if(this.executable instanceof s.Mission&&r instanceof _.ComponentExecutionState)switch(r.status){case c.ComponentExecutionStatus.Pending:case c.ComponentExecutionStatus.Executing:case c.ComponentExecutionStatus.Failed:break;case c.ComponentExecutionStatus.Succeeded:switch(this.executable.plan.completeAction){case c.PlanCompleteAction.AutoLand:this.context.drone.spatial.altitude.value=0,this.context.drone.spatial.velocity=new d.Velocity6;break;case c.PlanCompleteAction.ReturnHome:this.context.drone.spatial.coordinate=this.context.drone.takeoffCoordinate,this.context.drone.spatial.velocity=new d.Velocity6,this.context.drone.spatial.altitude.value=0}}this.engaged=this.executable.engaged,this.context.drone.statelessCommands.forEach((i=>{i instanceof l.VelocityDroneCommand?e=i:i instanceof R.RemoteControllerSticksDroneCommand?t=i:i instanceof x.VelocityGimbalCommand&&(n[i.channel]=i)})),this.context.drone.statefulCommands.forEach((e=>{const t=this.context.drone.commandExecutionState(e.id);t&&t.status===c.CommandExecutionStatus.Pending&&(e instanceof h.DroneCommand?(t.update(c.CommandExecutionStatus.Queued,null,y),i.push(e)):e instanceof m.CameraCommand?(o[e.channel]||(o[e.channel]=[]),t.update(c.CommandExecutionStatus.Queued,null,y),o[e.channel].push(e)):e instanceof p.GimbalCommand&&(a[e.channel]||(a[e.channel]=[]),t.update(c.CommandExecutionStatus.Queued,null,y),a[e.channel].push(e))),this.timeline&&this.timeline.updateCommandExecutionState(e,t)}))}this.context.drone.statelessCommands=[],this.executionListeners.forEach((e=>{e(this)})),this.rate&&this.rate>0?yield r.Common.sleep(Math.max(5,this.executeIntervalTarget/this.rate*1e3-((new Date).getTime()-C))):this.preventThreadStarvation&&g%200==0&&(yield r.Common.sleep(5)),this.millisSinceStart+=1e3*this.executeIntervalTarget,g++}}))}processCommands(e,t){let n=!1;return t.filter((t=>{const i=this.context.drone.commandExecutionState(t.id);if(!i)return!1;switch(i.status){case c.CommandExecutionStatus.Pending:case c.CommandExecutionStatus.Queued:return n||(this.applyCommandStart(e,t),i.update(c.CommandExecutionStatus.Executing,null,e),n=!0),!0;case c.CommandExecutionStatus.Executing:return i.started&&e.elapsedTime(i.started)>=t.estimatedTime?(this.applyCommandFinish(e,t),i.update(c.CommandExecutionStatus.Succeeded,null,new M.Datetime(new Date(i.started.value.getTime()+1e3*t.estimatedTime))),!1):(n=!0,!0);case c.CommandExecutionStatus.Failed:case c.CommandExecutionStatus.Succeeded:return!1}}))}applyCommandStart(e,t){t instanceof h.DroneCommand?this.applyDroneCommandStart(e,t):t instanceof C.PayloadCommand&&this.applyPayloadCommandStart(e,t)}applyCommandFinish(e,t){t instanceof h.DroneCommand?this.applyDroneCommandFinish(e,t):t instanceof C.PayloadCommand&&this.applyPayloadCommandFinish(e,t)}applyDroneCommandStart(e,t){}applyDroneCommandFinish(e,t){}applyPayloadCommandStart(e,t){t instanceof m.CameraCommand?this.applyCameraCommandStart(e,t):t instanceof p.GimbalCommand&&this.applyGimbalCommandStart(e,t)}applyPayloadCommandFinish(e,t){t instanceof m.CameraCommand?this.applyCameraCommandFinish(e,t):t instanceof p.GimbalCommand&&this.applyGimbalCommandFinish(e,t)}applyCameraCommandStart(e,t){const n=this.context.drone.camera(t.channel);n.updated.value=e.value,t instanceof S.StartCaptureCameraCommand&&S.StartCaptureCameraCommand.possible(n.settings.mode)&&(n.capturing=!0)}applyCameraCommandFinish(e,t){const n=this.context.drone.camera(t.channel);n.updated.value=e.value,t instanceof S.StartCaptureCameraCommand?S.StartCaptureCameraCommand.continuous(n.settings.mode,n.settings.photoMode)||(n.capturing=!1):t instanceof w.StopCaptureCameraCommand?n.capturing=!1:t instanceof f.ModeCameraCommand?n.settings.mode=t.mode:t instanceof y.ExposureModeCameraCommand||(t instanceof g.PhotoModeCameraCommand?n.settings.photoMode=t.photoMode:t instanceof E.PhotoFileFormatCameraCommand?n.settings.photoFileFormat=t.photoFileFormat:t instanceof D.PhotoIntervalCameraCommand?n.settings.photoInterval=t.photoInterval:t instanceof A.VideoFileFormatCameraCommand?n.settings.videoFileFormat=t.videoFileFormat:t instanceof k.VideoModeCameraCommand&&(n.settings.videoMode=t.videoMode))}applyGimbalCommandStart(e,t){this.context.drone.gimbal(t.channel).updated.value=e.value}applyGimbalCommandFinish(e,t){const n=this.context.drone.gimbal(t.channel);n.updated.value=e.value,t instanceof v.ModeGimbalCommand?n.settings.mode=t.mode:t instanceof b.OrientationGimbalCommand&&n.orientation.apply(t.orientation)}}},5445:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourcedGeoSpatial=void 0;const i=n(750),o=n(4830),a=n(7722),r=n(5974);class s extends a.Identifiable{constructor(){super(...arguments),this.type=i.TypeName.SourcedGeoSpatial,this.source=i.GeoSpatialSource.Plan,this.input=null}applyJSON(e){super.applyJSON(e),r.Serialization.validateType(e,this.type),this.source=e.source,this.source===i.GeoSpatialSource.Input?this.input=r.Serialization.deserialize(e.input,o.GeoSpatial,!1):this.input=null}value(e){return e.value(this.source,this.input)}}t.SourcedGeoSpatial=s},4147:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Strings=void 0;const o=i(n(2694));t.Strings=new o.default({en:{Common:{delimeter:" | ",set:"Set",new:"New",yes:"Yes",no:"No",more:"More",enabled:"Enabled",disabled:"Disabled"},AchievableDroneMotionComponent:{values:{immediateComponent:"Immediate",immediateComponentTooltip:"The immediate component will be executed before this component is achieved.",achievedComponent:"Achieved",achievedComponentTooltip:"The achieved component will be executed after this component is achieved and after the immediate component is finished (if it exists)."},messages:{waiting:{title:"Waiting for Achievement"}}},AEBCountCameraCommand:{name:"Camera AEB Count",values:{aebCount:"AEB Count"}},Altitude:{name:"Altitude",values:{value:"Altitude",system:"Reference"}},AltitudeSystem:{name:"Altitude System",values:{atl:{name:"Takeoff Location",abbreviation:"ATL"},agl:{name:"Ground Level",abbreviation:"AGL"},msl:{name:"Mean Sea Level",abbreviation:"MSL"}}},AltitudeRange:{name:"Altitude Range",values:{altitude:"Target",range:"Range",rangeMin:"Below",rangeMax:"Above"}},ApertureCameraCommand:{name:"Camera Aperture",values:{aperture:"Aperture"}},ApproachableComponent:{name:"Approachable",values:{approachComponent:"Approach"},messages:{aligning:{title:"Aligning..."}}},Asset:{name:"Asset",multiple:"Assets"},AssetManifest:{name:"Asset Manifest"},AssetSource:{name:"Asset Source",values:{key:"Key"}},AutoExposureLockCameraCommand:{name:"Camera Auto Exposure Lock",values:{enabled:"Enabled"}},AutoLockGimbalCameraCommand:{name:"Camera Auto Lock Gimbal",values:{enabled:"Enabled"}},Battery:{name:"Battery",multiple:"Batteries"},Camera:{name:"Camera"},CameraAEBCount:{name:"Camera AEB Count",values:{3:{name:"3"},5:{name:"5"},7:{name:"7"},unknown:{name:"Unknown"}}},CameraAperture:{name:"Camera Aperture",values:{auto:{name:"Auto"},"f/1dot6":{name:"f/1.6"},"f/1dot7":{name:"f/1.7"},"f/1dot8":{name:"f/1.8"},"f/2":{name:"f/2"},"f/2dot2":{name:"f/2.2"},"f/2dot4":{name:"f/2.4"},"f/2dot5":{name:"f/2.5"},"f/2dot6":{name:"f/2.6"},"f/2dot8":{name:"f/2.8"},"f/3dot2":{name:"f/3.2"},"f/3dot4":{name:"f/3.4"},"f/3dot5":{name:"f/3.5"},"f/4":{name:"f/4"},"f/4dot5":{name:"f/4.5"},"f/4dot8":{name:"f/4.8"},"f/5":{name:"f/5"},"f/5dot6":{name:"f/5.6"},"f/6dot3":{name:"f/6.3"},"f/6dot8":{name:"f/6.8"},"f/7dot1":{name:"f/7.1"},"f/8":{name:"f/8"},"f/9":{name:"f/9"},"f/9dot5":{name:"f/9.5"},"f/9dot6":{name:"f/9.6"},"f/10":{name:"f/10"},"f/11":{name:"f/11"},"f/13":{name:"f/13"},"f/14":{name:"f/14"},"f/16":{name:"f/16"},"f/18":{name:"f/18"},"f/19":{name:"f/19"},"f/20":{name:"f/20"},"f/22":{name:"f/22"},unknown:{name:"Unknown"}}},CameraCaptureConfiguration:{name:"Capture Configuration",values:{channel:"Channel",captureType:"Camera Capture"}},CameraColor:{name:"Camera Color",values:{none:{name:"Normal"},art:{name:"Art"},blackAndWhite:{name:"Black and White"},bright:{name:"Bright"},dCinelike:{name:"D-Cinelike"},portrait:{name:"Portrait"},m31:{name:"M31"},kDX:{name:"kDX"},prismo:{name:"Prismo"},jugo:{name:"Jugo"},dLog:{name:"DLog-M"},trueColor:{name:"True Color"},inverse:{name:"Inverse"},reminiscence:{name:"Reminiscence"},solarize:{name:"Solarize"},posterize:{name:"Posterize"},whiteboard:{name:"Whiteboard"},blackboard:{name:"Blackboard"},aqua:{name:"Aqua"},delta:{name:"Delta"},dk79:{name:"DK79"},vision4:{name:"Vision 4"},vision6:{name:"Vision6"},trueColorExt:{name:"True Color Extend"},filmA:{name:"Film A"},filmB:{name:"Film B"},filmC:{name:"Film C"},filmD:{name:"Film D"},filmE:{name:"Film E"},filmF:{name:"Film F"},filmG:{name:"Film G"},filmH:{name:"Film H"},filmI:{name:"Film I"},hlg:{name:"HLG"},unknown:{name:"Unknown"}}},CameraLensSpecification:{name:"Lens",values:{focalLength:"Focal Length"}},CameraCaptureType:{name:"Camera Capture Type",values:{photos:{name:"Photos"},video:{name:"Video"}}},CameraCommand:{name:"Camera Command",description:""},CameraExposureCompensation:{name:"Camera Exposure Compensation",values:{n50:{name:"-5.0ev"},n47:{name:"-4.7ev"},n43:{name:"-4.3ev"},n40:{name:"-4.0ev"},n37:{name:"-3.7ev"},n33:{name:"-3.3ev"},n30:{name:"-3.0ev"},n27:{name:"-2.7ev"},n23:{name:"-2.3ev"},n20:{name:"-2.0ev"},n17:{name:"-1.7ev"},n13:{name:"-1.3ev"},n10:{name:"-1.0ev"},n07:{name:"-0.7ev"},n03:{name:"-0.3ev"},n00:{name:"0.0ev"},p03:{name:"+0.3ev"},p07:{name:"+0.7ev"},p10:{name:"+1.0ev"},p13:{name:"+1.3ev"},p17:{name:"+1.7ev"},p20:{name:"+2.0ev"},p23:{name:"+2.3ev"},p27:{name:"+2.7ev"},p30:{name:"+3.0ev"},p33:{name:"+3.3ev"},p37:{name:"+3.7ev"},p40:{name:"+4.0ev"},p43:{name:"+4.3ev"},p47:{name:"+4.7ev"},p50:{name:"+5.0ev"},fixed:{name:"Fixed"},unknown:{name:"Unknown"}}},CameraExposureMode:{name:"Camera Exposure Mode",values:{program:{name:"Auto"},shutterPriority:{name:"Shutter Priority"},aperturePriority:{name:"Aperture Priority"},manual:{name:"Manual"},unknown:{name:"Unknown"}}},CameraFile:{name:"File",multiple:"Files"},CameraFileIndexMode:{name:"Camera File Index Mode",values:{reset:{name:"Reset"},sequence:{name:"Sequence"},unknown:{name:"Unknown"}}},CameraFocusMode:{name:"Camera Focus Mode",values:{manual:{name:"Manual"},auto:{name:"Auto"},autoContinuous:{name:"Continuous AF"},unknown:{name:"Unknown"}}},CameraISO:{name:"Camera ISO",values:{auto:{name:"Auto"},100:{name:"100"},200:{name:"200"},400:{name:"400"},800:{name:"800"},1600:{name:"1600"},3200:{name:"3200"},6400:{name:"6400"},12800:{name:"12800"},25600:{name:"25600"},fixed:{name:"Fixed"},unknown:{name:"Unknown"}}},CameraMeteringMode:{name:"Camera Metering Mode",values:{center:{name:"Center"},average:{name:"Average"},spot:{name:"Spot"},unknown:{name:"Unknown"}}},CameraMode:{name:"Camera Mode",values:{photo:{name:"Photo"},video:{name:"Video"},playback:{name:"Playback"},download:{name:"Download"},broadcast:{name:"Broadcast"},unknown:{name:"None"}}},CameraPhotoAspectRatio:{name:"Camera Photo Aspect Ratio",values:{"4:3":{name:"4:3"},"16:9":{name:"16:9"},"3:2":{name:"3:2"},unknown:{name:"Unknown"}}},CameraPhotoFileFormat:{name:"Camera Photo File Format",values:{raw:{name:"RAW"},jpeg:{name:"JPEG"},"raw+jpeg":{name:"RAW+JPEG"},tiff14bit:{name:"TIFF (14bit)"},radiometricJpeg:{name:"Radiometric JPEG"},tiff14bitLinearLowTempResolution:{name:"TIFF Linear Low"},tiff14bitLinearHighTempResolution:{name:"TIFF Linear High"},unknown:{name:"Unknown"}}},CameraPhotoMode:{name:"Camera Photo Type",values:{single:{name:"Single"},interval:{name:"Interval"},aeb:{name:"AEB"},hdr:{name:"HDR"},ehdr:{name:"eHDR"},burst:{name:"Burst"},rawBurst:{name:"RAW Burst"},shallowFocus:{name:"Shallow Focus"},panorama:{name:"Panorama"},hyperLight:{name:"Hyper Light"},timeLapse:{name:"Time Lapse"},highResolution:{name:"High Resolution"},smart:{name:"Smart"},internalAISpotChecking:{name:"Internal AI Spot Checking"},unknown:{name:"Unknown"}}},CameraImageSpecification:{name:"Image",values:{width:"Width",height:"Height"}},CameraSensorSpecification:{name:"Sensor",values:{width:"Width",height:"Height"}},CameraSpecification:{models:{zenmuseX7:"Zenmuse X7",zenmuseX5S:"Zenmuse X5S",zenmuseX4S:"Zenmuse X4S",zenmuseX5R:"Zenmuse X5R",zenmuseX5:"Zenmuse X5",zenmuseX3:"Zenmuse X3",zenmuseXT:"Zenmuse XT",zenmuseXT2RGB:"Zenmuse XT2 (RGB)",zenmuseXT2Thermal:"Zenmuse XT2 (Thermal)",zenmuseH20Thermal:"Zenmuse H20 (Thermal)",zenmuseH20Wide:"Zenmuse H20 - Wide",zenmuseH20ZoomMin:"Zenmuse H20 - Zoom (Min)",zenmuseH20ZoomMax:"Zenmuse H20 - Zoom (Max)",zenmuseZ30Min:"Zenmuse Z30 (Min)",zenmuseZ30Max:"Zenmuse Z30 (Max)",mavicMini:"Mavic Mini",mavic2Pro:"Mavic 2 - Pro (Full FOV)",mavic2ProHQ:"Mavic 2 - Pro (HQ)",mavic2ZoomMin:"Mavic 2 - Zoom (Min)",mavic2ZoomMax:"Mavic 2 - Zoom (Max)",mavic2EnterpriseMin:"Mavic 2 - Enterprise (Min)",mavic2EnterpriseMax:"Mavic 2 - Enterprise (Max)",mavic2EnterpriseDualRGB:"Mavic 2 - Enterprise Dual (RGB)",mavic2EnterpriseDualThermal:"Mavic 2 - Enterprise Dual (Thermal)",mavicAir2:"Mavic - Air 2",mavicAir248MP:"Mavic - Air 2 (48 MP)",mavicAir:"Mavic - Air",mavicPro:"Mavic - Pro",mavicProPlatinum:"Mavic - Pro Platinum",phantom4Pro2_0:"Phantom 4 - Pro v2.0",phantom4RTK:"Phantom 4 - RTK",phantom4Multispectral:"Phantom 4 - Multispectral",phantom4Pro:"Phantom 4 - Pro",phantom4Advanced:"Phantom 4 - Advanced",phantom4:"Phantom 4",phantom3Pro:"Phantom 3 - Pro",phantom3Advanced:"Phantom 3 - Advanced",phantom3Standard:"Phantom 3 - Standard",spark:"Spark",anafi4k:"Anafi (4k)"}},CameraShutterSpeed:{name:"Camera Shutter Speed",values:{"1/8000":{name:"1/8000 s"},"1/6400":{name:"1/6400 s"},"1/6000":{name:"1/6000 s"},"1/5000":{name:"1/5000 s"},"1/4000":{name:"1/4000 s"},"1/3200":{name:"1/3200 s"},"1/3000":{name:"1/3000 s"},"1/2500":{name:"1/2500 s"},"1/2000":{name:"1/2000 s"},"1/1600":{name:"1/1600 s"},"1/1500":{name:"1/1500 s"},"1/1250":{name:"1/1250 s"},"1/1000":{name:"1/1000"},"1/800":{name:"1/800 s"},"1/750":{name:"1/750 s"},"1/725":{name:"1/725 s"},"1/640":{name:"1/640 s"},"1/500":{name:"1/500 s"},"1/400":{name:"1/400 s"},"1/350":{name:"1/350 s"},"1/320":{name:"1/320 s"},"1/250":{name:"1/250 s"},"1/240":{name:"1/240 s"},"1/200":{name:"1/200 s"},"1/180":{name:"1/180 s"},"1/160":{name:"1/160 s"},"1/125":{name:"1/125 s"},"1/120":{name:"1/120 s"},"1/100":{name:"1/100 s"},"1/90":{name:"1/90 s"},"1/80":{name:"1/80 s"},"1/60":{name:"1/60 s"},"1/50":{name:"1/50 s"},"1/45":{name:"1/45 s"},"1/40":{name:"1/40 s"},"1/30":{name:"1/30 s"},"1/25":{name:"1/25 s"},"1/20":{name:"1/20 s"},"1/15":{name:"1/15 s"},"1/12dot5":{name:"1/12.5 s"},"1/10":{name:"1/10 s"},"1/8":{name:"1/8 s"},"1/6dot25":{name:"1/6.25 s"},"1/6":{name:"1/6 s"},"1/5":{name:"1/5 s"},"1/4":{name:"1/4 s"},"1/3":{name:"1/3 s"},"1/2dot5":{name:"1/2.5 s"},"0dot3":{name:"0.3 s"},"1/2":{name:"1/2 s"},"1/1dot67":{name:"1/1.67 s"},"1/1dot25":{name:"1/1.25 s"},"0dot7":{name:"0.7 s"},1:{name:"1.0 s"},"1dot3":{name:"1.3 s"},"1dot4":{name:"1.4 s"},"1dot6":{name:"1.6 s"},2:{name:"2.0 s"},"2dot5":{name:"2.5 s"},3:{name:"3.0 s"},"3dot2":{name:"3.2 s"},4:{name:"4.0 s"},5:{name:"5.0 s"},6:{name:"6.0 s"},7:{name:"7.0 s"},8:{name:"8.0 s"},9:{name:"9.0 s"},10:{name:"10.0 s"},11:{name:"11.0 s"},13:{name:"13.0 s"},15:{name:"15.0 s"},16:{name:"16.0 s"},20:{name:"20.0 s"},23:{name:"23.0 s"},25:{name:"25.0 s"},30:{name:"30.0 s"},unknown:{name:"Unknown"}}},CameraStorageLocation:{name:"Camera Storage Location",values:{sdCard:{name:"SD Card"},internal:{name:"Internal"},unknown:{name:"Unknown"}}},CameraVideoFileCompressionStandard:{name:"Camera Video File Compression Standard",values:{h264:{name:"H.264"},h265:{name:"H.265"},unknown:{name:"Unknown"}}},CameraVideoFileFormat:{name:"Camera Video File Format",values:{mov:{name:"MOV"},mp4:{name:"MP4"},tiffSequence:{name:"TIFF Sequence"},seq:{name:"SEQ"},unknown:{name:"Unknown"}}},CameraVideoFieldOfView:{name:"Camera Video Field of View",values:{default:{name:"Default"},narrow:{name:"HQ (Narrow)"},wide:{name:"Full FOV (Wide)"},unknown:{name:"Unknown"}}},CameraVideoFrameRate:{name:"Camera Video Frame Rate",values:{"23dot976":{name:"23.976fps"},24:{name:"24fps"},25:{name:"25fps"},"29dot970":{name:"29.970fps"},30:{name:"30fps"},"47dot950":{name:"47.950fps"},48:{name:"48fps"},50:{name:"50fps"},"59dot940":{name:"59.940fps"},60:{name:"60fps"},90:{name:"90fps"},96:{name:"96fps"},100:{name:"100fps"},120:{name:"120fps"},"8dot7":{name:"8.7fps"},unknown:{name:"Unknown"}}},CameraVideoMode:{name:"Camera Video Type",values:{normal:{name:"Normal"},hdr:{name:"HDR"},slowMotion:{name:"Slow Motion"},unknown:{name:"Unknown"}}},CameraVideoResolution:{name:"Camera Video Resolution",values:{"336x256":{name:"336x256"},"640x360":{name:"640x360"},"640x480":{name:"640x480"},"640x512":{name:"640x512"},"1280x720":{name:"1280x720"},"1920x1080":{name:"1920x1080"},"2048x1080":{name:"2048x1080"},"2688x1512":{name:"2688x1512"},"2704x1520":{name:"2704x1520"},"2720x1530":{name:"2720x1530"},"3712x2088":{name:"3712x2088"},"3840x1572":{name:"3840x1572"},"3840x2160":{name:"3840x2160"},"3944x2088":{name:"3944x2088"},"4096x2160":{name:"4096x2160"},"4608x2160":{name:"4608x2160"},"4608x2592":{name:"4608x2592"},"5280x2160":{name:"5280x2160"},"5280x2972":{name:"5280x2972"},"5760x3240":{name:"5760x3240"},"6016x3200":{name:"6016x3200"},max:{name:"Max"},noSSDVideo:{name:"No SSD Video"},unknown:{name:"Unknown"}}},CameraVideoStandard:{name:"Camera Video Standard",values:{pal:{name:"PAL"},ntsc:{name:"NTSC"},unknown:{name:"Unknown"}}},CameraWhiteBalancePreset:{name:"Camera White Balance Preset",values:{auto:{name:"Auto"},sunny:{name:"Sunny"},cloudy:{name:"Cloudy"},waterSurface:{name:"Water Surface"},indoorIncandescent:{name:"Indoor Incandescent"},indoorFluorescent:{name:"Indoor Fluorescent"},custom:{name:"Custom"},neutral:{name:"Neutral"},unknown:{name:"Unknown"}}},CollisionAvoidanceDroneCommand:{name:"Drone Collision Avoidance",values:{enabled:"Enabled"}},ColorCameraCommand:{name:"Camera Color",values:{color:"Color"}},Component:{name:"Component",multiple:"Components",verification:"Verification",values:{coordinate:"Reference",referenceOffsetsHandleCoordinate:"Center",descriptors:"Descriptors",cameraCaptureConfiguration:"Automatic Capture",script:"JavaScript"}},Command:{name:"Command"},CommandComponent:{name:"Command",description:"Perform a drone, camera, or gimbal command."},ComponentEstimate:{name:"Estimate",values:{time:"Total Time",distance:"Total Distance",velocityMax:"Max Speed",altitude:"Altitude",photos:"Photos",videos:"Videos"}},CommandExecutionStatus:{name:"Command Execution Status",values:{pending:{name:"Pending"},queued:{name:"Queued"},executing:{name:"Executing"},succeeded:{name:"Succeeded"},failed:{name:"Failed"}}},ComponentExecutionState:{name:"Component Execution State"},ComponentExecutionStatus:{name:"Component Execution Status",values:{pending:{name:"Pending"},executing:{name:"Executing"},succeeded:{name:"Succeeded"},failed:{name:"Failed"}}},ConnectionFailSafeBehaviorDroneCommand:{name:"Drone Connection Fail-Safe",values:{connectionFailSafeBehavior:"Behavior"}},ContrastCameraCommand:{name:"Camera Contrast",values:{contrast:"Contrast"}},CourseComponent:{name:"Course",description:"Fly the drone along a specific course.",subtitle:"{0}  {1}"},Datetime:{name:"Datetime"},Descriptors:{name:"Descriptors",values:{name:"Name",description:"Description",tags:"Tags"}},DestinationComponent:{name:"Destination",description:"Fly the drone to a specific location.",values:{destinationOffset:"Destination",achievement:"Achievement",achievementTime:"Time",achievementDistance:"Distance",altitudeRange:"Altitude Range",droneOrientation:"Drone Heading",gimbalOrientations:"Gimbal Orientation"},messages:{moving:{title:"Destination",details:{distance:"D {0}",altitude:"A {0}",heading:"H {0}"}}}},Device:{name:"Device",multiple:"Devices"},Disengagement:{name:"Disengagement"},DisengageComponent:{name:"Disengage",description:"Disengage before executing more components.",values:{reason:"Reason"},messages:{default:"Automatically Disengaged"}},DistanceTolerance:{name:"Distance Tolerance",values:{horizontal:"Distance",vertical:"Altitude"}},Drone:{name:"Drone",multiple:"Drones"},DroneCommand:{name:"Drone Command",description:""},DroneConnectionFailSafeBehavior:{name:"Drone Connection Fail-Safe Behavior",values:{hover:{name:"Hover"},returnHome:{name:"Return Home"},autoLand:{name:"Auto Land"},unknown:{name:"Unknown"}}},DroneLightbridgeChannelSelectionMode:{name:"Drone Lightbridge Channel Selection Mode",values:{auto:{name:"Auto"},manual:{name:"Manual"},unknown:{name:"Unknown"}}},DroneLightbridgeFrequencyBand:{name:"Drone Lightbridge Frequency Band",values:{"2dot4ghz":{name:"2.4GHz"},"5dot7ghz":{name:"5.7GHz"},"5dot8ghz":{name:"5.8GHz"},unknown:{name:"Unknown"}}},DroneMotionComponent:{name:"Motion",values:{droneMotionLimits:"Motion Limits",droneMotionLimitsHorizontalVelocityMax:"Speed (max)",droneMotionLimitsHorizontalAccelerationMin:"H. Deceleration",droneMotionLimitsHorizontalAccelerationMax:"H. Acceleration",droneMotionLimitsVerticalVelocityMin:"Descent Rate",droneMotionLimitsVerticalVelocityMax:"Ascent Rate",droneMotionLimitsVerticalAccelerationMin:"V. Deceleration",droneMotionLimitsVerticalAccelerationMax:"V. Acceleration",droneMotionLimitsRotationalVelocityMax:"Rotation Rate",droneMotionLimitsRotationalAccelerationMin:"R. Deceleration",droneMotionLimitsRotationalAccelerationMax:"R. Acceleration",restrictionZonesEnabled:"Respect Restriction Zones"},messages:{disengageErrorTolerance:{title:"Drone Too Far Off Course",details:{distance:"D {0}",altitude:"A {0}"}}}},DroneOcuSyncChannelSelectionMode:{name:"Drone OcuSync Channel Selection Mode",values:{auto:{name:"Auto"},manual:{name:"Manual"},unknown:{name:"Unknown"}}},DroneOcuSyncFrequencyBand:{name:"Drone OcuSync Frequency Band",values:{"2dot4ghz":{name:"2.4GHz"},"5dot8ghz":{name:"5.8GHz"},dual:{name:"Dual"},unknown:{name:"Unknown"}}},Engagement:{name:"Engagement",multiple:"Engagements"},Execution:{name:"Execution"},ExposureCompensationCameraCommand:{name:"Camera Exposure Compensation",values:{exposureCompensation:"Exposure Compensation"}},ExposureCompensationStepCameraCommand:{name:"Camera Exposure Compensation Step",values:{exposureCompensationStep:"Step",exposureCompensationSteps:"Steps"}},ExposureModeCameraCommand:{name:"Camera Exposure Mode",values:{exposureMode:"Exposure Mode"}},FacadeBoundaryFace:{name:"Facade Boundary Face",values:{lineLeft:{name:"Line - Left"},lineRight:{name:"Line - Right"},polygonLeft:{name:"Polygon - Left"},polygonRight:{name:"Polygon - Right"},circleClockwise:{name:"Circle - Clockwise"},circleCounterclockwise:{name:"Circle - Counterclockwise"},spiralClockwise:{name:"Spiral - Clockwise"},spiralCounterclockwise:{name:"Spiral - Counterclockwise"}}},FacadeComponent:{name:"Facade",description:"Fly the drone along a boundary to scan a facade.",subtitle:"{0}  {1}",values:{approachAltitude:"Approach Alt.",initialAltitude:"Initial Alt.",finalAltitude:"Final Alt.",gimbalOrientations:"Capture Angle",direction:"Direction",cameraMode:"Capture Mode",capturePriority:"Capture Priority",minCaptureInterval:"Min Capture Interval",targetDistance:"Target Distance",pattern:"Pattern",verticalOverlap:"V. Overlap",horizontalOverlap:"H. Overlap",boundaryFace:"Boundary Face",boundaryPoints:"Boundary Points",surfaceSampleDistance:"Sample Distance",sampleDistanceGimbalAngleEnabled:"Gimbal Pitch Affects Sample Distance",droneOrientation:"Drone Heading"},messages:{setup:{title:"Configuring camera..."},horizontalRow:{title:"Row {0} of {1}"},horizontalTraverse:{title:"Row {0} of {1}",details:"Approaching..."},verticalColumn:{title:"Column {0} of {1}",detailsUp:" {0}",detailsDown:" {0}"},verticalTraverse:{title:"Column {0} of {1}",details:"Approaching..."}}},FacadeComponentBoundaryPoint:{name:"Boundary Point",multiple:"Boundary Points"},FacadeCapturePriority:{name:"Facade Capture Priority",values:{time:{name:"Time"},distance:{name:"Distance"}}},FacadePattern:{name:"Facade Pattern",values:{horizontal:{name:"Horizontal"},vertical:{name:"Vertical"}}},FileIndexModeCameraCommand:{name:"Camera File Index Mode",values:{fileIndexMode:"File Index Mode"}},FocusCameraCommand:{name:"Camera Focus",values:{focusTarget:"Focus Target",focusTargetX:"Horizontal",focusTargetY:"Vertical"}},FocusModeCameraCommand:{name:"Camera Focus Mode",values:{focusMode:"Focus Mode"}},Gimbal:{name:"Gimbal"},GimbalMode:{name:"Gimbal Mode",values:{free:{name:"Free"},fpv:{name:"FPV"},yawFollow:{name:"Yaw Follow"},unknown:{name:"Unknown"}}},Func:{name:"Function",multiple:"Functions",values:{coordinate:"Location",introImageUrl:"Into Image URL",components:"Components",inputs:"Inputs",dynamicInputs:"Dynamic Inputs",executable:"Code"}},FuncInput:{name:"Input",multiple:"Inputs",values:{imageUrl:"Image URL",optional:"Optional",enumValues:"Enumeration"}},GeoCoordinate:{name:"Geo Coordinate",multiple:"Geo Coordinates",values:{latitude:"Latitude",longitude:"Longitude"}},GeoLocation:{name:"Geo Location"},GeoReferencedOffset:{name:"Geo Referenced Offset",values:{altitudeOffset:"Altitude Offset"}},GeoSpatial:{name:"Geo Spatial"},GeoSpatialSource:{name:"Geo Spatial Source",values:{input:{name:"Input"},plan:{name:"Plan"},user:{name:"User"},drone:{name:"Drone"}}},GimbalCommand:{name:"Gimbal Command",description:""},GroundSampleDistance:{name:"Ground Sample Distance"},HeadingDroneCommand:{name:"Heading"},HeadingComponent:{name:"Heading",description:"Point the drone in a specific direction.",subtitle:"{0} {1}",values:{heading:"Heading",achievement:"Achievement",achievementTime:"Time",achievementDistance:"Distance"},messages:{rotating:{title:"Rotating"},waiting:{title:"Waiting"}}},HomeLocationDroneCommand:{name:"Drone Home Location (Beta)",values:{coordinate:"Coordinate"}},InspectionComponent:{name:"Inspection",description:"Fly the drone to a series of points to capture data.",values:{achievement:"Achievement",achievementTime:"Time",achievementDistance:"Distance",orientation:"Orientation",orientationDistance:"Distance",altitudeRange:"Altitude Range",cameraMode:"Capture Mode",inspectionPoints:"Inspection Points"},messages:{setup:{title:"Configuring camera..."},moving:{details:{distance:"D {0}",altitude:"A {0}",heading:"H {0}"}}}},InspectionComponentAction:{name:"Action",multiple:"Actions",values:{component:"Component",droneOrientation:"Drone Heading",gimbalOrientations:"Gimbal Orientation"}},InspectionComponentInspectionPoint:{name:"Inspection Point",multiple:"Inspection Points",values:{actions:"Actions",passthrough:"Passthrough"}},InterpolationFunction:{name:"Interpolation",values:{none:{name:"None"},linear:{name:"Linear"},sigmoid:{name:"Curved"}}},ISOCameraCommand:{name:"Camera ISO",values:{iso:"ISO"}},MechanicalShutterCameraCommand:{name:"Camera Mechanical Shutter",values:{enabled:"Enabled"}},LandingGearAutomaticMovementDroneCommand:{name:"Drone Landing Gear Automatic Movement",values:{enabled:"Enabled"}},LandingGearDeployDroneCommand:{name:"Drone Landing Gear Deploy"},LandingGearRetractDroneCommand:{name:"Drone Landing Gear Retract"},LandingProtectionDroneCommand:{name:"Drone Landing Protection",values:{enabled:"Enabled"}},LightbridgeChannelDroneCommand:{name:"Drone Lightbridge Channel",values:{lightbridgeChannel:"Channel"}},LightbridgeChannelSelectionModeDroneCommand:{name:"Drone Lightbridge Channel Selection Mode",values:{lightbridgeChannelSelectionMode:"Channel Selection Mode"}},LightbridgeFrequencyBandDroneCommand:{name:"Drone Lightbridge Frequency Band",values:{lightbridgeFrequencyBand:"Frequency Band"}},Limits:{name:"Limits",toString:{same:"{0}",different:"{0}, +{1}"},values:{min:"Min",max:"Max"}},Line2:{name:"Line"},ListComponent:{name:"List",description:"Group components and create component hierarchies.",subtitle:"{0} + {1} more...",messages:{running:{title:{single:"Component {0} of {1}",multiple:"{0} of {1} Components Complete"}}}},LowBatteryWarningThresholdDroneCommand:{name:"Drone Low Battery Warning",values:{lowBatteryWarningThreshold:"Threshold"}},MapComponent:{name:"Map",description:"Fly the drone inside a boundary to create an orthomosaic or point cloud.",values:{pattern:"Pattern",direction:"Direction",cameraMode:"Capture Mode",boundaryPoints:"Boundary Points",frontOverlap:"Front Overlap",sideOverlap:"Side Overlap",minCaptureInterval:"Min Capture Interval",targetDistance:"Target Distance",droneOrientation:"Drone Heading",gimbalOrientation:"Capture Angle"},messages:{setup:{title:"Configuring camera..."}}},MapComponentBoundaryPoint:{name:"Boundary Point",multiple:"Boundary Points"},MapPattern:{name:"Map Pattern",values:{normal:{name:"Normal"},grid:{name:"Grid"}}},MaxAltitudeDroneCommand:{name:"Drone Max Altitude",values:{maxAltitude:"Altitude"}},MaxDistanceDroneCommand:{name:"Drone Max Distance",values:{maxDistance:"Distance"}},MaxDistanceLimitationDroneCommand:{name:"Drone Max Distance Limitation",values:{enabled:"Enabled"}},MeasurementType:{name:"Measurement",values:{distance:{name:"Distance"},velocityHorizontal:{name:"Velocity - Horizontal"},velocityVertical:{name:"Velocity - Vertical"},velocityRotational:{name:"Velocity - Rotational"},accelerationHorizontal:{name:"Acceleration Horizontal"},accelerationVertical:{name:"Acceleration - Vertical"},accelerationRotational:{name:"Acceleration - Rotational"},angle:{name:"Angle"},angleMod:{name:"Angle (360)"},percent:{name:"Percent"}}},Mission:{name:"Mission",multiple:"Missions",messages:{reengaging:"Resuming",reengagementFailed:"Unable to Resume",reengagementUserID:"User Changed",reengagementDeviceID:"Device Changed",reengagementDroneID:"Drone Changed",succeeded:"Mission Accomplished",failed:"Mission Failed",complete:"Mission Complete",engageDisallowed:{complete:"Mission Already Complete",requiredTakeoffUnavailable:{title:"Drone Takeoff Location Unavailable"},requiredTakeoffInvalid:{title:"Invalid Drone Takeoff Location",details:"Drone takeoff location is {0} outside the required takeoff area."}}},values:{reengagement:"Resuming Mission"}},MissionIssue:{name:"Issue",multiple:"Issues",messages:{elevation:{requiredTakeoff:{title:"Ground elevations used without a takeoff takeoff restriction. Taking off from a different location could result in an unsafe altitude offset.",details:"Recommendation: Set the Plan Takeoff Restriction to a specific area."}},map:{largeTerrainFollow:{title:"We are still working on performance optimizations for large maps with terrain follow.",details:"Recommendation: Use a high performance mobile device when running this mission, or split the plan into smaller segments."}},cameraCommand:{requiredNotCapturingUnknown:{title:"{0} attempted before camera stop capture.",details:"Recommendation: Add a camera stop capture command before this command."},requiredNotCapturingInvalid:{title:"{0} attempted while camera capturing. This command will always fail.",details:"Recommendation: Add a camera stop capture command before this command."},requiredModeUnknown:{title:"{0} attempted while camera in unknown mode.",details:"Recommendation: Add a camera mode command before this command."},requiredModeInvalid:{title:"{0} attempted while camera in {1} mode. This command may fail.",details:"Recommendation: Add a camera mode command before this command."}},photoIntervalCommand:{beforePhotoFileFormat:{title:"Camera photo interval at or below two seconds attempted before setting camera photo file format to JPEG.",details:"Recommendation: Add a camera photo file format command set to JPEG before this command."},fastPhotoInterval:{title:"Camera photo interval at or below two seconds attempted while camera photo file format not set to JPEG.",details:"Recommendation: Add a camera photo file format command set to JPEG before this command."}},stopCaptureCameraCommand:{stoppedAlready:{title:"Camera stop capture attempted while camera already stopped.",details:"Recommendation: Remove this command."}},startCaptureCameraCommand:{beforeStopped:{title:"Camera start capture attempted before camera stop capture.",details:"Recommendation: Add a camera stop capture command before this command in case the camera is already capturing before the Mission starts."},startedAlready:{title:"Camera start capture attempted while camera already capturing.",details:"Recommendation: Remove this command."},beforeMode:{title:"Camera start capture attempted before setting camera mode.",details:"Recommendation: Add a camera mode command before this command."},invalidMode:{title:"Camera start capture attempted while camera in {0} mode. This command will always fail.",details:"Recommendation: Add a camera mode command before this command."},beforePhotoMode:{title:"Camera start capture in {0} mode attempted before setting camera photo type.",details:"Recommendation: Add a camera photo type command before this command."},beforePhotoInterval:{title:"Camera start capture in {0} {1} mode attempted before setting camera photo interval time.",details:"Recommendation: Add a camera photo interval command before this command."},videoNotStopped:{title:"Camera start capture in {0} mode never stopped.",details:"Add a camera stop capture command before the end of the mission."}}}},Message:{name:"Message",values:{title:"Title",details:"Details",level:"Level"}},MessageLevel:{name:"Message Level",values:{info:{name:"Info"},warning:{name:"Warning"},danger:{name:"Danger"},error:{name:"Error"}}},MeteringModeCameraCommand:{name:"Camera Metering Mode",values:{meteringMode:"Metering Mode"}},Mode:{name:"Mode",multiple:"Modes",messages:{reengaging:"Resuming"},values:{coordinate:"Location",inputs:"Inputs",executable:"Executable"}},ModeCameraCommand:{name:"Camera Mode",values:{mode:"Mode"}},ModeGimbalCommand:{name:"Gimbal Mode",values:{mode:"Mode"}},MotionLimits:{name:"Motion Limits",values:{velocity:"Speed",acceleration:"Acceleration"}},MotionLimits6:{name:"Motion Limits (6D)",values:{horizontal:"Horizontal",vertical:"Vertical",rotational:"Rotational"}},OcuSyncChannelDroneCommand:{name:"Drone OcuSync Channel",values:{ocuSyncChannel:"Channel"}},OcuSyncChannelSelectionModeDroneCommand:{name:"Drone OcuSync Channel Selection Mode",values:{ocuSyncChannelSelectionMode:"Channel Selection Mode"}},OcuSyncFrequencyBandDroneCommand:{name:"Drone OcuSync Frequency Band",values:{ocuSyncFrequencyBand:"Frequency Band"}},OrbitComponent:{name:"Orbit",description:"Fly the drone in a circle around a point of interest.",subtitle:"{0} {1}  {2}",values:{centerOffset:"Orbit Center",radius:"Radius",finalRadius:"Final Radius",direction:"Direction",circumference:"Circumference",rotations:"Rotations",finalAltitude:"Final Altitude",droneOrientation:"Drone Heading",gimbalOrientations:"Gimbal Orientation"}},OrbitDirection:{name:"Orbit Direction",values:{clockwise:{name:"Clockwise"},counterclockwise:{name:"Counterclockwise"}}},Orientation3:{name:"Orientation",values:{x:"Pitch",xReference:"Reference",y:"Roll",z:"Heading",zReference:"Reference"}},OrientationGimbalCommand:{name:"Gimbal Orientation"},OrientationXReference:{name:"Pitch Reference",values:{horizon:{name:"Horizon"},path:{name:"Path"}}},OrientationZReference:{name:"Heading Reference",values:{north:{name:"North"},course:{name:"Course"},heading:{name:"Heading"},path:{name:"Path"}}},PathMarkerPositioning:{name:"Marker Positioning",values:{absolute:{name:"Distance from Start"},coordinate:{name:"Nearest Coordinate"}}},PayloadCommand:{name:"Payload Command",values:{channel:"Channel"}},PlanCompleteAction:{name:"Plan Complete Action",values:{none:{name:"None"},returnHome:{name:"Return Home"},autoLand:{name:"Auto Land"}}},PhotoAspectRatioCameraCommand:{name:"Camera Photo Aspect Ratio",values:{photoAspectRatio:"Photo Aspect Ratio"}},PhotoFileFormatCameraCommand:{name:"Camera Photo File Format",values:{photoFileFormat:"Photo File Format"}},PhotoIntervalCameraCommand:{name:"Camera Photo Interval",values:{photoInterval:"Photo Interval"}},PhotoModeCameraCommand:{name:"Camera Photo Type",values:{photoMode:"Photo Type"}},PathComponent:{name:"Path",description:"Fly the drone along a path defined by a series of waypoints.",values:{cornering:"Pathing",cornerRadius:"Corner Radius",waypoints:"Waypoints",markers:"Markers"}},PathComponentMarker:{name:"Marker",multiple:"Markers",values:{positioning:"Positioning",interpolation:"Interpolation",component:"Component",altitude:"Altitude",pointOfInterestID:"Point of Interest",droneMotionLimits:"Drone Motion Limits",droneOrientation:"Drone Heading",gimbalOrientations:"Gimbal Orientation"}},PathComponentWaypoint:{name:"Waypoint",multiple:"Waypoints"},PathCornering:{name:"Path Cornering",values:{intersect:{name:"Curved"},rounded:{name:"Straight"}}},PlanComponent:{name:"Plan",multiple:"Plans",values:{completeAction:"Action on Finish",droneMotionLimits:"Motion Limits",droneMotionErrorTolerance:"Motion Error Tolerance",rootComponent:"Root",restrictionZones:"Restriction Zones",takeoffOffset:"Restricted Takeoff",altitudeContinuity:"Altitude Continuity"}},PlanRestrictionZone:{name:"Restriction Zone",multiple:"Restriction Zones",values:{droneMotionLimits:"Motion Limits",droneMotionErrorTolerance:"Motion Error Tolerance"}},Point2:{name:"Point"},PointOfInterest:{name:"Point of Interest",multiple:"Points of Interest"},PrecisionLandingDroneCommand:{name:"Drone Precision Landing",values:{enabled:"Enabled"}},RemoteControllerSticksDroneCommand:{name:"Drone Remote Controller Sticks",values:{leftStick:"Left Stick",rightStick:"Right Stick"},messages:{controls:{title:"Drone",details:{pitch:"P {0}",roll:"R {0}",yaw:"Y {0}",vertical:"V {0}",heading:"H {0}"}}}},ReturnHomeAltitudeDroneCommand:{name:"Drone Return Home Altitude",values:{returnHomeAltitude:"Altitude"}},ReturnHomeObstacleAvoidanceDroneCommand:{name:"Drone Return Home Obstacle Avoidance",values:{enabled:"Enabled"}},ReturnHomeRemoteObstacleAvoidanceDroneCommand:{name:"Drone Return Home Remote Obstacle Avoidance",values:{enabled:"Enabled"}},RotationComponent:{name:"Rotation",description:"Rotate the drone for specific amount of time or degrees.",values:{direction:"Direction",limit:"Limit",time:"Time",distance:"Distance"}},RotationDirection:{name:"Rotation Direction",values:{clockwise:{name:"Clockwise"},counterclockwise:{name:"Counterclockwise"}}},SaturationCameraCommand:{name:"Camera Saturation",values:{saturation:"Saturation"}},SeriousLowBatteryWarningThresholdDroneCommand:{name:"Drone Serious Low Battery Warning Threshold",values:{seriousLowBatteryWarningThreshold:"Threshold"}},SharpnessCameraCommand:{name:"Camera Sharpness",values:{sharpness:"Sharpness"}},ShutterSpeedCameraCommand:{name:"Camera Shutter Speed",values:{shutterSpeed:"Shutter Speed"}},Simulation:{name:"Simulation",messages:{disengageStop:"Simulation Stopped"}},SmartReturnHomeDroneCommand:{name:"Drone Smart Return Home",values:{enabled:"Enabled"}},SourcedGeoSpatial:{name:"Sourced Geo Spatial"},SpotMeteringTargetCameraCommand:{name:"Camera Spot Metering Target",values:{spotMeteringTarget:"Target",spotMeteringTargetX:"Horizontal",spotMeteringTargetY:"Vertical"}},StartCaptureCameraCommand:{name:"Camera Start Capture"},StopCaptureCameraCommand:{name:"Camera Stop Capture"},StorageLocationCameraCommand:{name:"Camera Storage Location",values:{storageLocation:"Storage Location"}},SubComponent:{name:"Component",multiple:"Components",values:{required:"Required",exclusive:"Exclusive",pointsOfInterest:"Points of Interest"},messages:{failedElevationsPending:{title:"Ground Elevations Unavailable"}}},Unit:{name:"Unit",values:{kilometersPerHour:{name:"Kilometers per Hour",abbreviation:"km/h"},milesPerHour:{name:"Miles per Hour",abbreviation:"mph"},metersPerSecond:{name:"Meters per Second",abbreviation:"m/s"},metersPerSecondSquared:{name:"Meters per Second Squared",abbreviation:"m/s"},feetPerSecond:{name:"Feet per Second",abbreviation:"fps"},feetPerSecondSquared:{name:"Feet per Second Squared",abbreviation:"ft/s"},kilometers:{name:"Kilometers",abbreviation:"km"},miles:{name:"Miles",abbreviation:"mi"},meters:{name:"Meters",abbreviation:"m"},millimeters:{name:"Millimeters",abbreviation:"mm"},feet:{name:"Feet",abbreviation:"ft"},acres:{name:"Acres",abbreviation:"ac"},hectare:{name:"Hectare",abbreviation:"ha"},degrees:{name:"Degrees",abbreviation:""},degreesPerSecond:{name:"Degrees per Second",abbreviation:"/s"},degreesPerSecondSquared:{name:"Degrees per Second Squared",abbreviation:"/s"},radians:{name:"Radians",abbreviation:"c"},radiansPerSecond:{name:"Radians per Second",abbreviation:"c/s"},radiansPerSecondSquared:{name:"Radians per Second Squared",abbreviation:"c/s"},geoMinutes:{name:"Minutes",abbreviation:"'"},geoSeconds:{name:"Seconds",abbreviation:'"'},geoNorth:{name:"North",abbreviation:"N"},geoSouth:{name:"South",abbreviation:"S"},geoEast:{name:"East",abbreviation:"E"},geoWest:{name:"West",abbreviation:"W"},hours:{name:"Hours",abbreviation:"h"},minutes:{name:"Minutes",abbreviation:"m"},seconds:{name:"Seconds",abbreviation:"s"},percent:{name:"Percent",abbreviation:"%"},kelvin:{name:"Kelvin",abbreviation:"K"},pixels:{name:"Pixels",abbreviation:"px"},centimetersPerPixel:{name:"Centimeters per Pixel",abbreviation:"cm/px"},inchesPerPixel:{name:"Inches per Pixel",abbreviation:"in/px"},bytes:{name:"Bytes",abbreviation:"B"},kilobytes:{name:"Kilobytes",abbreviation:"KB"},megabytes:{name:"Megabytes",abbreviation:"MB"},gigabytes:{name:"Gigabytes",abbreviation:"GB"}}},UnitSystem:{name:"Unit System",values:{metric:{name:"Metric"},imperial:{name:"Imperial"}}},UpwardsAvoidanceDroneCommand:{name:"Drone Upwards Avoidance",values:{enabled:"Enabled"}},User:{name:"User",multiple:"Users"},UserInterfaceSettings:{name:"User Interface Settings",values:{reticleImageUrl:"Reticle Image URL",droneOffsetsVisible:"Drone Offsets Visible",missionDetailsExpanded:"Mission Details Expanded"}},Variable:{name:"Variable",multiple:"Variables",nullValue:"No Input",viewed:"Viewed",values:{variableType:"Variable Type",valueArray:"Array",value:"Value",values:"Values"}},VariableValueType:{name:"Value Type",values:{null:{name:"Null"},boolean:{name:"Boolean"},number:{name:"Number"},string:{name:"String"},Drone:{name:"Drone"}}},Vector2:{name:"Vector"},Velocity3:{name:"Velocity"},Velocity6:{name:"Velocity",toString:{horizontal:"H/S {0}  {1}",vertical:"V/S {0}",rotational:"R/S {0}"}},VelocityDroneCommand:{name:"Drone Motion",messages:{controls:{title:"Drone",details:{horizontal:"H {0}  {1}",vertical:"V {0}",rotational:"R {0}",yaw:"Y {0}",heading:"H {0}"}}}},VelocityGimbalCommand:{name:"Gimbal Motion",messages:{controls:{title:"Gimbal",details:{pitch:"P {0}",roll:"R {0}",yaw:"Y {0}"}}}},VideoCaptionCameraCommand:{name:"Camera Video Caption",values:{enabled:"Enabled"}},VideoFileCompressionStandardCameraCommand:{name:"Camera Video File Compression Standard",values:{videoFileCompressionStandard:"Video File Compression Standard"}},VideoFileFormatCameraCommand:{name:"Camera Video File Format",values:{videoFileFormat:"Video File Format"}},VideoModeCameraCommand:{name:"Camera Video Type",values:{videoMode:"Video Type"}},VideoResolutionFrameRateCameraCommand:{name:"Camera Video Resolution & Frame Rate",values:{videoResolution:"Video Resolution",videoFrameRate:"Video Frame Rate",videoFieldOfView:"Video Field of View"}},VideoStandardCameraCommand:{name:"Camera Video Standard",values:{videoStandard:"Video Standard"}},VisionAssistedPositioningDroneCommand:{name:"Drone Vision Assisted Positioning",values:{enabled:"Enabled"}},WaitComponent:{name:"Wait",description:"Wait for a specified time before executing more components.",values:{time:"Time"},messages:{waiting:{title:"Waiting"}}},WhiteBalanceCustomCameraCommand:{name:"Camera White Balance Custom",values:{whiteBalanceCustom:"Temperature"}},WhiteBalancePresetCameraCommand:{name:"Camera White Balance Preset",values:{whiteBalancePreset:"White Balance Preset"}},YawSimultaneousFollowGimbalCommand:{name:"Gimbal Yaw Simultaneous Follow",values:{enabled:"Enabled"}},Zone:{name:"Zone",values:{shape:"Shape",motionPriority:"Enter & Exit Motion Priority",avoidanceMotionPriority:"Go-Around Motion Priority",minAltitude:"Min Altitude",maxAltitude:"Max Altitude",minHorizontalExitAltitude:"Min Exit Alt.",boundaryPoints:"Boundary Points"}},ZoneBoundaryPoint:{name:"Boundary Point",multiple:"Boundary Points"},ZoneMotionPriority:{name:"Zone Motion Priority",values:{horizontal:{name:"Horizontal"},vertical:{name:"Vertical"}}},ZoneShape:{name:"Zone Shape",values:{circle:{name:"Circle"},polygon:{name:"Polygon"}}}}})},4187:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineCameraCapture=t.TimelineCommand=t.TimelineFrame=t.Timeline=void 0;const o=n(5088),a=n(750),r=n(5974),s=n(9645),l=n(3405),c=n(1985),u=n(5760),m=n(8510),d=n(8002),p=n(5251),h=n(4147),f=i(n(5532)),g=n(1747),y=n(916),C=n(1412);t.Timeline=class{constructor(){this.type=a.TypeName.Timeline,this.frames=[],this.commands={},this.captures=[]}applyJSON(e){if(r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.frames=[],Array.isArray(e.frames))for(let t of e.frames)this.frames.push(r.Serialization.deserialize(t,v,!1))}addFrame(e,t,n){const i=new v(n);if(i.device=r.Serialization.clone(t.device),i.drone=r.Serialization.clone(t.drone),t instanceof C.ComponentExecuteContext)for(const e in t.execution.componentStates){const n=t.execution.componentStates[e];if(n.status===a.ComponentExecutionStatus.Executing){const t=new d.ComponentExecutionState;Object.assign(t,n.toJSON()),i.executingComponentStates[e]=t}}const s=o.Common.lastSafe(e.engagements);let l=this.lastFrame;return null===l?(s&&(i.datetime=r.Serialization.clone(s.engaged),this.frames.push(i)),i):(i.distanceTravelledHorizontal=l.distanceTravelledHorizontal+i.drone.spatial.coordinate.distance(l.drone.spatial.coordinate),s&&(i.datetime=r.Serialization.clone(s.currentDatetime)),this.frames.push(i),i)}get firstFrame(){return this.frames.length>0?this.frames[0]:null}get lastFrame(){return this.frames.length>0?o.Common.last(this.frames):null}get duration(){const e=this.lastFrame,t=this.firstFrame;return e&&t?e.datetime.elapsedTime(t.datetime):0}getFrame(e){const t=this.getFrameIndex(e);return t?this.frames[t]:null}getFrameIndex(e){if(this.lastFrame){const t=this.lastFrame.elapsedTime;for(let n=0;n<this.frames.length;n++)if(this.frames[n].elapsedTime/t>=e)return n}return null}addCapture(e,t,n=0){let i=0;for(let e=this.frames.length-1;e>0;e--)if(this.frames[e].datetime.value.getTime()<=t.created.value.getTime()){i=e;break}const o=new S(i,e.channel,e.settings.mode,e.settings.photoMode,t.created,new c.Datetime(new Date(t.created.value.getTime()+1e3*n)),t);return this.captures.push(o),o}updateCommandExecutionState(e,t){let n=this.commands[e.id];return n||(n=new b(e,t),this.commands[e.id]=n),n.executionState=t,n}toKML(e,t=0){const n=e=>[`${e.drone.spatial.coordinate.longitude}`,`${e.drone.spatial.coordinate.latitude}`,`${t+e.drone.spatial.altitude.value}`].join(","),i=f.default.begin().e("kml",{xmlns:"http://www.opengis.net/kml/2.2","xmlns:gx":"http://www.google.com/kml/ext/2.2"}),o=i.e("Document");o.e("name",e.name),o.e("description",e.description);const a=o.e("Style",{id:"dronePath"}),r=a.e("LineStyle");r.e("color","ffffe500"),r.e("width","4");const s=a.e("PolyStyle");s.e("color","ffffe500"),s.e("width","4");const l=o.e("Placemark");l.e("name","Flight Path"),l.e("styleUrl","#dronePath");const c=l.e("LineString");c.e("altitudeMode","absolute"),c.e("coordinates",this.frames.map((e=>n(e))).join("\n"));const u=o.e("gx:Tour");u.e("name","Flight Motion");const m=u.e("gx:Playlist");let d=null;if(this.frames.forEach((e=>{const n=m.e("gx:FlyTo");n.e("gx:duration",d?e.elapsedTime-d.elapsedTime:.1),n.e("gx:flyToMode","smooth");const i=n.e("Camera");i.e("longitude",`${e.drone.spatial.coordinate.longitude}`),i.e("latitude",`${e.drone.spatial.coordinate.latitude}`),i.e("altitude",`${t+e.drone.spatial.altitude.value}`),i.e("altitudeMode","absolute"),i.e("heading",`${g.Convert.radiansToDegrees(e.drone.gimbalOrientation().yaw,!0)}`),i.e("tilt",`${g.Convert.radiansToDegrees(e.drone.gimbalOrientation().pitch)+90}`),d=e})),this.captures.length>0){o.e("Style",{id:"capture"}).e("IconStyle").e("Icon").e("href","http://maps.google.com/mapfiles/kml/shapes/placemark_circle_highlight.png");const e=o.e("Folder");e.e("name","Captures"),this.captures.forEach(((t,i)=>{const o=this.frames[t.frameIndex],a=e.e("Placemark");a.e("name",`${i+1}`),a.e("description",t.title),a.e("styleUrl","#capture");const r=a.e("Point");r.e("altitudeMode","absolute"),r.e("coordinates",n(o))}))}return i.end({pretty:!0})}};class v{constructor(e=0,t=0,n=new c.Datetime,i=new u.Device,o=new m.Drone,r={}){this.type=a.TypeName.TimelineFrame,this.elapsedTime=e,this.distanceTravelledHorizontal=t,this.datetime=n,this.device=i,this.drone=o,this.executingComponentStates=r}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.elapsedTime=o.Common.parseFloat(e.elapsedTime,this.elapsedTime),this.distanceTravelledHorizontal=o.Common.parseFloat(e.distanceTravelledHorizontal,this.distanceTravelledHorizontal),this.datetime.applyJSON(e.datetime),this.device.applyJSON(e.device),this.drone.applyJSON(e.drone),this.executingComponentStates={};for(let t of Object.keys(e.executingComponentStates)){const n=new d.ComponentExecutionState(t);n.applyJSON(e.executingComponentStates[t]),this.executingComponentStates[t]=n}}}t.TimelineFrame=v;class b{constructor(e=new p.DefaultCommand,t=new l.CommandExecutionState){this.type=a.TypeName.TimelineFrame,this.command=e,this.executionState=t}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.command=r.Serialization.deserialize(e.command,s.Command,!1),this.executionState.applyJSON(e.executionState)}}t.TimelineCommand=b;class S{constructor(e=0,t=0,n=a.CameraMode.Photo,i=a.CameraPhotoMode.Single,o=new c.Datetime,r=null,s=new y.CameraFile){this.type=a.TypeName.TimelineCameraCapture,this.frameIndex=e,this.channel=t,this.mode=n,this.photoMode=i,this.started=o,this.finished=r,this.file=s}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.frameIndex=o.Common.parseInt(e.frameIndex,this.frameIndex),this.channel=o.Common.parseInt(e.channel,this.channel),this.mode=o.Common.parseString(e.mode,this.mode),this.photoMode=o.Common.parseString(e.photoMode,this.photoMode),this.started.applyJSON(e.started),this.finished=r.Serialization.deserialize(e.finished,c.Datetime),this.file.applyJSON(e.file)}get title(){let e=h.Strings.CameraMode.values[this.mode].name;return this.mode===a.CameraMode.Photo&&(e=`${h.Strings.CameraPhotoMode.values[this.photoMode].name} ${e}`),e}get subtitle(){return this.file.name}}t.TimelineCameraCapture=S},4567:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;const i=n(7722),o=n(750),a=n(5974);class r extends i.Identifiable{constructor(){super(...arguments),this.type=o.TypeName.User}applyJSON(e){super.applyJSON(e),a.Serialization.validateType(e,this.type)}}t.User=r},5167:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInterfaceSettings=void 0;const i=n(750),o=n(5974),a=n(5088);t.UserInterfaceSettings=class{constructor(){this.type=i.TypeName.UserInterfaceSettings,this.reticleImageUrl=null,this.droneOffsetsVisible=null,this.missionDetailsExpanded=null}applyJSON(e){o.Serialization.validateJson(e),o.Serialization.validateType(e,this.type),this.reticleImageUrl=a.Common.parseString(e.reticleImageUrl,null),e.reticalImageUrl&&(this.reticleImageUrl=a.Common.parseString(e.reticalImageUrl,null)),this.droneOffsetsVisible=a.Common.parseBoolean(e.droneOffsetsVisible,null),this.missionDetailsExpanded=a.Common.parseBoolean(e.missionDetailsExpanded,null)}get reticalImageUrl(){return this.reticleImageUrl}set reticalImageUrl(e){this.reticleImageUrl=e}}},9993:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0;const i=n(750),o=n(5664),a=n(5974),r=n(5088),s=n(2838),l=n(8510),c=n(4147),u=n(1747);t.Variable=class{constructor(e=null,t=null){this.type=i.TypeName.Variable,this.descriptors=new o.Descriptors,this.valueNumberMeasurementType=null,e?(this.valueArray=Array.isArray(e),this.valueType=this.valueArray&&e.length>0?typeof e[0]:t,this.value=e):(this.value=null,this.valueArray=!1,this.valueType=t||i.VariableValueType.Drone)}applyJSON(e){if(a.Serialization.validateJson(e),a.Serialization.validateType(e,this.type),this.descriptors.applyJSON(e.descriptors),this.valueType=r.Common.parseString(e.valueType,this.valueType),this.valueArray=r.Common.parseBoolean(e.valueArray,this.valueArray),this.valueNumberMeasurementType=r.Common.parseString(e.valueNumberMeasurementType),void 0!==e.value){if(this.valueArray&&!Array.isArray(e.value))return void(this.value=null);switch(this.valueType){case i.VariableValueType.Null:case i.VariableValueType.Boolean:case i.VariableValueType.String:case i.VariableValueType.Number:return this.value=e.value,void(this.valueArray&&!Array.isArray(this.value)&&(this.value=null));default:if(this.valueArray){this.value=[];for(let t of e.value){const e=a.Serialization.deserialize(t);if(!e||e.type!==this.valueType)return void(this.value=null);this.value.push(e)}}else if(this.value=a.Serialization.read(e.value),this.value&&this.value.type!==this.valueType)return void(this.value=null);return}}this.value=null}get title(){return r.Common.joinNotEmpty([this.descriptors.name,`${s.Format.enum("VariableValueType",this.valueType)}${this.valueArray?"[]":""}`,this.valueNumberMeasurementTypeDisplay])}get subtitle(){return this.valueFormatted}get valueModelToUser(){if(null!==this.value&&this.valueType===i.VariableValueType.Number&&this.valueNumberMeasurementType){const e=u.Convert.converters(this.valueNumberMeasurementType);return Array.isArray(this.value)?this.value.map((t=>parseFloat(e.modelToUser.display(t)))):parseFloat(e.modelToUser.display(this.value))}return this.value}set valueUserToModel(e){if(null!==e){if(this.valueType===i.VariableValueType.Number&&this.valueNumberMeasurementType&&(e=u.Convert.converters(this.valueNumberMeasurementType).userToModel.convert(e)),this.valueArray)return null===this.value&&(this.value=[]),void this.value.push(e);this.value=e}else this.value=null}clearValue(e=!1,t=null){this.value&&Array.isArray(this.value)?this.clearArrayValue(e,t):this.value=null}clearArrayValue(e=!1,t=null){e?this.value=null:this.value&&Array.isArray(this.value)&&(1===this.value.length?this.value=null:null===t?this.value.pop():this.value.splice(t,1))}get valueFormatted(){let e=this.value;if(null===e)return this.valueType===i.VariableValueType.Null?c.Strings.Variable.viewed:c.Strings.Variable.nullValue;Array.isArray(e)&&(e=e[0]);let t="";switch(this.valueType){case i.VariableValueType.Null:break;case i.VariableValueType.Boolean:t=e?c.Strings.Common.yes:c.Strings.Common.no;break;case i.VariableValueType.Number:t=this.valueNumberMeasurementType?u.Convert.converters(this.valueNumberMeasurementType).format(e).toString():s.Format.number(e);break;case i.VariableValueType.String:t=e;break;case i.VariableValueType.Drone:e instanceof l.Drone&&(t=r.Common.joinNotEmpty([s.Format.geoCoordinatePair(e.spatial.coordinate,!0),e.spatial.altitude.toString()]))}return t?(Array.isArray(this.value)&&this.value.length>1&&(t=`${t} + ${s.Format.integer(this.value.length-1)} ${c.Strings.Common.more}`),t):c.Strings.Variable.nullValue}valueFormattedArray(e){if(this.value&&this.valueArray&&Array.isArray(this.value)&&this.valueType===i.VariableValueType.Drone&&e<this.value.length){const t=this.value[e];if(t instanceof l.Drone)return r.Common.joinNotEmpty([s.Format.geoCoordinatePair(t.spatial.coordinate,!0),t.spatial.altitude.toString()])}return this.valueFormatted}get valueNumberMeasurementTypeDisplay(){return this.valueNumberMeasurementType?u.Convert.converters(this.valueNumberMeasurementType).modelToUser.unit.abbreviation:""}defaultValue(e=null){let t=null;switch(this.valueType){case i.VariableValueType.Null:break;case i.VariableValueType.Boolean:t=!1;break;case i.VariableValueType.Number:t=0;break;case i.VariableValueType.String:t="test";break;case i.VariableValueType.Drone:t=e?a.Serialization.clone(e):new l.Drone}return this.valueArray?[t]:t}compatible(e){return this.valueType===e.valueType&&this.valueArray===e.valueArray&&this.valueNumberMeasurementType===e.valueNumberMeasurementType}}},5807:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vector2=void 0;const i=n(6875),o=n(750),a=n(5088),r=n(5974);class s{constructor(e=0,t=0){this.type=o.TypeName.Vector2,this.direction=e,this.magnitude=t}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.direction=a.Common.parseFloat(e.direction,this.direction),this.magnitude=a.Common.parseFloat(e.magnitude,this.magnitude)}copy(){return new s(this.direction,this.magnitude)}get x(){return this.magnitude*Math.cos(this.direction)}get y(){return this.magnitude*Math.sin(this.direction)}toPoint2(){return new i.Point2(this.x,this.y)}inverse(){return new s(this.direction+Math.PI,this.magnitude)}add(e){return new i.Point2(this.x+e.x,this.y+e.y).toVector2()}addToSelf(e){const t=this.add(e);this.direction=t.direction,this.magnitude=t.magnitude}subtract(e){return new i.Point2(this.x-e.x,this.y-e.y).toVector2()}subtractFromSelf(e){const t=this.subtract(e);this.direction=t.direction,this.magnitude=t.magnitude}static center(e){return i.Point2.center(e.map((e=>e.toPoint2()))).toVector2()}}t.Vector2=s},5589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Velocity3=void 0;const i=n(750),o=n(6875),a=n(5088),r=n(5974);class s{constructor(e=0,t=0,n=0){this.type=i.TypeName.Velocity3,this.x=e,this.y=t,this.z=n}applyJSON(e){r.Serialization.validateJson(e),r.Serialization.validateType(e,this.type),this.x=a.Common.parseFloat(e.x,this.x),this.y=a.Common.parseFloat(e.y,this.y),this.z=a.Common.parseFloat(e.z,this.z)}interpolate(e,t){return new s(t(this.x,e.x),t(this.y,e.y),t(this.z,e.z))}get horizontal(){return new o.Point2(this.x,this.y).toVector2()}set horizontal(e){this.x=e.x,this.y=e.y}get vertical(){return this.z}set vertical(e){this.z=e}get pitch(){return this.x}set pitch(e){this.x=e}get roll(){return this.y}set roll(e){this.y=e}get yaw(){return this.z}set yaw(e){this.z=e}}t.Velocity3=s},9123:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Velocity6=void 0;const i=n(750),o=n(5589),a=n(5088),r=n(4147),s=n(2838),l=n(5974);class c{constructor(e=new o.Velocity3,t=new o.Velocity3){this.type=i.TypeName.Velocity6,this.toString=()=>a.Common.joinNotEmpty([0===this.horizontal.magnitude?"":r.Strings.formatString(r.Strings.Velocity6.toString.horizontal,s.Format.velocityHorizontal(this.horizontal.magnitude).toString(),s.Format.angle(this.horizontal.direction).toString()),0===this.vertical?"":r.Strings.formatString(r.Strings.Velocity6.toString.vertical,s.Format.velocityVertical(this.vertical).toString()),0===this.rotational?"":r.Strings.formatString(r.Strings.Velocity6.toString.rotational,s.Format.velocityRotational(this.rotational).toString())]),this.position=e,this.orientation=t}applyJSON(e){l.Serialization.validateJson(e),l.Serialization.validateType(e,this.type),this.position.applyJSON(e.position),this.orientation.applyJSON(e.orientation)}interpolate(e,t){return new c(this.position.interpolate(e.position,t),this.orientation.interpolate(e.orientation,t))}get horizontal(){return this.position.horizontal}set horizontal(e){this.position.horizontal=e}get vertical(){return this.position.vertical}set vertical(e){this.position.vertical=e}get rotational(){return this.orientation.z}set rotational(e){this.orientation.z=e}}t.Velocity6=c},8569:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZonePathPoint=t.ZonePathSegment=t.ZonePath=t.Zone=void 0;const i=n(7722),o=n(750),a=n(9871),r=n(5974),s=n(5226),l=n(5445),c=n(141),u=n(5807),m=n(176),d=n(4830),p=n(5088),h=n(8111),f=n(7247),g=n(3854),y=n(6875),C=n(1747),v=n(9657);class b extends i.Identifiable{constructor(){super(...arguments),this.type=o.TypeName.Zone,this.reference=new l.SourcedGeoSpatial,this.shape=o.ZoneShape.Circle,this.motionPriority=o.ZoneMotionPriority.Horizontal,this.avoidanceMotionPriority=o.ZoneMotionPriority.Horizontal,this.minAltitude=new a.Altitude,this.maxAltitude=new a.Altitude(f.Constants.ZoneMaxAltitude),this.minHorizontalExitAltitude=new a.Altitude((this.maxAltitude.value+this.minAltitude.value)/2),this.excludedComponentTypes=[],this.boundaryPoints=[]}applyJSON(e){if(super.applyJSON(e),r.Serialization.validateType(e,this.type),this.reference.applyJSON(e.reference),this.shape=p.Common.parseString(e.shape,this.shape),this.motionPriority=p.Common.parseString(e.motionPriority,this.motionPriority),this.avoidanceMotionPriority=p.Common.parseString(e.avoidanceMotionPriority,this.avoidanceMotionPriority),this.minAltitude.applyJSON(e.minAltitude),this.maxAltitude.applyJSON(e.maxAltitude),this.minHorizontalExitAltitude=r.Serialization.deserialize(e.minHorizontalExitAltitude,a.Altitude),this.excludedComponentTypes=p.Common.parseArray(e.excludedComponentTypes),this.boundaryPoints=[],Array.isArray(e.boundaryPoints))for(let t of e.boundaryPoints)this.boundaryPoints.push(r.Serialization.deserialize(t,m.ZoneBoundaryPoint,!1))}referenceSpatial(e){return this.reference.value(e.spatialSources)}referenceCoordinate(e,t=null){return this.referenceSpatial(e).coordinate.geoCoordinate(t||new u.Vector2)}get boundaryPointOffsets(){return this.boundaryPoints.map((e=>e.offset))}get boundarySegments(){return this.shape===o.ZoneShape.Polygon?h.Geometry.polygonSegements(this.boundaryPoints.map((e=>e.offset.toPoint2()))):[]}addBoundaryPoint(e,t=null,n=null){return null===n?this.boundaryPoints.push(e):this.boundaryPoints.splice(n,0,e),e}updateBoundaryPointCoordinate(e,t,n){const i=this.boundaryPoints[e].offset,o=this.referenceCoordinate(n).offset(t);this.boundaryPoints[e].offset=o;let a=this.boundarySegments,r=e,s=0;for(const t of a){if(s!==r&&s!==p.Common.modSafe(r+1,a.length)&&s!==p.Common.modSafe(r-1,a.length)&&null!==h.Geometry.lineIntersectionLine(a[r],t))return void(this.boundaryPoints[e].offset=i);s++}r=p.Common.modSafe(e-1,a.length),s=0;for(const t of a){if(s!==r&&s!==p.Common.modSafe(r+1,a.length)&&s!==p.Common.modSafe(r-1,a.length)&&null!==h.Geometry.lineIntersectionLine(a[r],t))return void(this.boundaryPoints[e].offset=i);s++}}removeBoundaryPoint(e,t){return this.boundaryPoints=this.boundaryPoints.filter((t=>t!==e)),e}boundaryPointCoordinates(e){return this.boundaryPointOffsets.map((t=>this.referenceCoordinate(e,t)))}boundaryPointCoordinate(e,t){return this.referenceCoordinate(e,this.boundaryPoints[t].offset)}updateShape(e,t,n,i){this.shape=t,this.boundaryPoints=[];let a=this.referenceCoordinate(e).offset(n),r=new m.ZoneBoundaryPoint;switch(t){case o.ZoneShape.Circle:r.offset=a,this.addBoundaryPoint(r,e),r=new m.ZoneBoundaryPoint,r.offset=a.add(new u.Vector2(0,i)),this.addBoundaryPoint(r,e);break;case o.ZoneShape.Polygon:r.offset=a.add(new u.Vector2(-Math.PI/4,i)),this.addBoundaryPoint(r,e),r=new m.ZoneBoundaryPoint,r.offset=a.add(new u.Vector2(Math.PI/4,i)),this.addBoundaryPoint(r,e),r=new m.ZoneBoundaryPoint,r.offset=a.add(new u.Vector2(3*Math.PI/4,i)),this.addBoundaryPoint(r,e),r=new m.ZoneBoundaryPoint,r.offset=a.add(new u.Vector2(-3*Math.PI/4,i)),this.addBoundaryPoint(r,e)}}centerCoordinate(e){switch(this.shape){case o.ZoneShape.Circle:return this.boundaryPointCoordinate(e,0);case o.ZoneShape.Polygon:const t=y.Point2.boundingBox(this.boundaryPointOffsets.map((e=>e.toPoint2())));return this.referenceCoordinate(e,t.topLeft.midPoint(t.bottomRight).toVector2())}}get radius(){switch(this.shape){case o.ZoneShape.Circle:return this.boundaryPoints.length<2?0:this.boundaryPoints[0].offset.toPoint2().distance(this.boundaryPoints[1].offset.toPoint2());case o.ZoneShape.Polygon:const e=y.Point2.boundingBox(this.boundaryPointOffsets.map((e=>e.toPoint2())));return e.topLeft.distance(e.bottomRight)/2}}altitudeInRange(e){return!!new g.Limits(this.maxAltitude.value,this.minAltitude.value).valid(e)}altitudesInRange(e){const t=new g.Limits(Math.max(e.start,e.end),Math.min(e.start,e.end)),n=new g.Limits(this.maxAltitude.value,this.minAltitude.value);return!(!n.valid(e.start)&&!n.valid(e.end))||t.min<=this.minAltitude.value&&t.max>=this.maxAltitude.value}coordinateInside(e,t){const n=this.boundaryPointOffsets.map((e=>e.toPoint2()));if(n.length<2)return!1;const i=this.referenceSpatial(e).coordinate.offset(t).toPoint2();switch(this.shape){case o.ZoneShape.Circle:const e={center:n[0],radius:this.radius};return h.Geometry.circlePointInside(e,i);case o.ZoneShape.Polygon:return h.Geometry.polygonPointInside(i,n)}}edgeSpatial(e,t,n,i){if(n){if(!this.altitudesInRange({start:t.altitude.value,end:n.altitude.value}))return null}else if(!this.altitudeInRange(t.altitude.value))return null;const a=this.boundaryPointOffsets.map((e=>e.toPoint2()));if(a.length<2)return null;const s=e=>{const t=e.toGeoSpatial();return t.altitude=r.Serialization.clone(this.maxAltitude),t.altitude.value+=f.Constants.ZoneEdgeBufferDistance,t},l=e=>{const n=e.toGeoSpatial();return n.altitude=r.Serialization.clone(t.altitude),i&&this.minHorizontalExitAltitude&&(n.altitude.value=Math.max(n.altitude.value,this.minHorizontalExitAltitude.value)),n},c=this.referenceSpatial(e).coordinate,m=c.offset(t.coordinate).toPoint2();switch(this.shape){case o.ZoneShape.Circle:const e={center:a[0],radius:this.radius};if(h.Geometry.circlePointInside(e,m))switch(this.motionPriority){case o.ZoneMotionPriority.Vertical:return s(t.coordinate);case o.ZoneMotionPriority.Horizontal:const n=c.geoCoordinate(a[0].toVector2());return l(n.geoCoordinate(new u.Vector2(n.bearing(t.coordinate),e.radius+f.Constants.ZoneEdgeBufferDistance)))}break;case o.ZoneShape.Polygon:if(h.Geometry.polygonPointInside(m,a))switch(this.motionPriority){case o.ZoneMotionPriority.Vertical:return s(t.coordinate);case o.ZoneMotionPriority.Horizontal:const e=h.Geometry.polygonClosestPoint(a,m).point.toVector2().subtract(m.toVector2());return e.magnitude+=f.Constants.ZoneEdgeBufferDistance,l(c.geoCoordinate(m.toVector2().add(e)))}}return null}intersections(e,t,n,i){var a,r;if(i&&!this.altitudesInRange({start:t.altitude.value,end:n.altitude.value}))return null;const s=this.boundaryPointOffsets.map((e=>e.toPoint2()));if(s.length<2)return null;const l=this.referenceSpatial(e).coordinate,u=new c.Line2(l.offset(t.coordinate).toPoint2(),l.offset(n.coordinate).toPoint2()),m=[];switch(this.shape){case o.ZoneShape.Circle:null===(a=h.Geometry.lineIntersectionsCircle(u,{center:s[0],radius:this.radius}))||void 0===a||a.forEach((e=>{m.push({coordinate:l.geoCoordinate(e.toVector2()),segmentIndex:0})}));break;case o.ZoneShape.Polygon:null===(r=h.Geometry.lineIntersectionsPolygon(u,s))||void 0===r||r.forEach((e=>{m.push({coordinate:l.geoCoordinate(e.point.toVector2()),segmentIndex:e.segmentIndex})}))}return m&&m.length>0?m:null}static path(e,t,n,i){var o,a,s,l,c;if(0===e.length)return null;const u=(n,i)=>{const o=new S,a=()=>o.currentSpatial||n;let s=e.slice();for(;s.length>0;){let e=s.map((e=>({zone:e,spatial:e.edgeSpatial(t,a(),null,null!==i)}))).filter((e=>e.spatial));if(0===e.length&&i&&!o.currentAltitudeEquivalent(i)){const n=r.Serialization.clone(a());n.altitude=i,e=s.map((e=>{const i=e.edgeSpatial(t,a(),n,!0);return i&&(i.altitude.value=a().altitude.value<=e.minAltitude.value?e.minAltitude.value:e.maxAltitude.value),{zone:e,spatial:i}})).filter((e=>e.spatial))}if(0===e.length)break;const n=e.sort(((e,t)=>a().distance(e.spatial)-a().distance(t.spatial)))[0];o.currentSegment||o.add(a(),n.zone),o.add(n.spatial,n.zone),s=s.filter((e=>e!==n.zone))}return o};let m=!1;const p=u(i,null),h=u(n,(null===(o=p.currentSegment)||void 0===o?void 0:o.altitude)||i.altitude);p.currentSpatial?m=!0:p.add(i,null),h.currentSpatial?m=!0:h.add(n,null);let f=(null===(a=p.currentSpatial)||void 0===a?void 0:a.altitude)||i.altitude;if(!h.currentAltitudeEquivalent(f)){const e=r.Serialization.clone(h.currentSpatial);e.altitude=f,h.add(e,(null===(l=null===(s=h.currentPoint)||void 0===s?void 0:s.zone)||void 0===l?void 0:l.altitudeInRange(f.value))&&(null===(c=h.currentPoint)||void 0===c?void 0:c.zone)||null)}let g=b.addCruiseSegment(t,e,h,p);return g||(g=b.addCruisePathOriginal(e,t,h,p,f)),m||g?(p.segments.reverse().forEach((e=>{e.points.reverse().forEach((t=>{const n=new d.GeoSpatial;n.coordinate=t.coordinate,n.altitude=e.altitude,h.add(n,t.zone)}))})),h):null}static addCruiseSegment(e,t,n,i){var a,s,l,c,u;let m=[];const d=[];t.filter((e=>e.avoidanceMotionPriority===o.ZoneMotionPriority.Horizontal)).forEach((t=>{t.intersections(e,n.currentSpatial,i.currentSpatial,!0)?d.push(t):m.push(t)}));let p=[];if(d.length>0)for(;0===p.length;){const t=b.shortestPath(e,d,null===(a=n.currentSpatial)||void 0===a?void 0:a.coordinate,null===(s=i.currentSpatial)||void 0===s?void 0:s.coordinate);if(!t)return!1;let o=n.currentSpatial;for(const i of t){const t=i.toGeoSpatial();t.altitude=r.Serialization.clone(null===(l=n.currentSegment)||void 0===l?void 0:l.altitude);const a=m.map((i=>{var a;const r=i.intersections(e,o,t,!0);if(r){const e=r[0].coordinate.distance(null===(a=n.currentSpatial)||void 0===a?void 0:a.coordinate);return{zone:i,intersections:r,distance:e}}return{zone:i,intersections:r,distance:0}})).filter((e=>e.intersections));if(a.length>0){const e=a.sort(((e,t)=>e.distance-t.distance))[0];m=m.filter((t=>t!==e.zone)),d.push(e.zone),p=[];break}p.push(t),o=t}}let h=t.filter((e=>e.avoidanceMotionPriority===o.ZoneMotionPriority.Vertical)),g=[],y=n.currentSpatial;const C=[];C.push(...p),C.push(i.currentSpatial);for(const t of C){if(0===h.length)break;for(const n of h.filter((n=>n.intersections(e,y,t,!0))))h=h.filter((e=>e===n)),g.push(n)}let v=(null===(c=n.currentSegment)||void 0===c?void 0:c.altitude).value;return g.forEach((e=>{v=Math.max(v,e.maxAltitude.value+f.Constants.ZoneEdgeBufferDistance)})),v!==(null===(u=n.currentSegment)||void 0===u?void 0:u.altitude).value?(n.add((()=>{const e=r.Serialization.clone(n.currentSpatial);return e.altitude.value=v,e})(),null),i.add((()=>{const e=r.Serialization.clone(i.currentSpatial);return e.altitude.value=v,e})(),null),b.addCruiseSegment(e,t,n,i),!0):p.length>0&&(p.forEach((e=>{e.altitude.value=v,n.add(e,null)})),!0)}static shortestPath(e,t,n,i){if(0===t.length)return null;const a=n,r=(()=>{const r=[a.offset(n).toPoint2(),a.offset(i).toPoint2()];return t.forEach((t=>{switch(t.shape){case o.ZoneShape.Circle:const n=a.offset(t.centerCoordinate(e));r.push(n.add(new u.Vector2(0,t.radius)).toPoint2()),r.push(n.add(new u.Vector2(Math.PI/2,t.radius)).toPoint2()),r.push(n.add(new u.Vector2(Math.PI,t.radius)).toPoint2()),r.push(n.add(new u.Vector2(1.5*Math.PI,t.radius)).toPoint2());break;case o.ZoneShape.Polygon:r.push(...t.boundaryPointCoordinates(e).map((e=>a.offset(e).toPoint2())))}})),y.Point2.boundingBox(r,0,1.1)})(),s=new y.Point2(r.topLeft.distance(r.bottomLeft),r.topLeft.distance(r.topRight)),l=Math.min(1,4e4/(s.x*s.y)),c=Math.ceil(s.x*l),m=Math.ceil(s.y*l),d=s.x/c,p=s.y/m,h=e=>a.geoCoordinate(new y.Point2(r.bottomLeft.x+e.x*d+d/2,r.bottomLeft.y+e.y*p+p/2).toVector2()),f=e=>{const t=a.offset(e);return new y.Point2(Math.floor((t.x-r.bottomLeft.x)*l),Math.floor((t.y-r.bottomLeft.y)*l))},g=new v.Grid(c,m);for(var C=1;C<c-1;C++)for(var b=1;b<m-1;b++){const n=h(new y.Point2(C,b));t.forEach((t=>{g.isWalkableAt(C,b)&&g.setWalkableAt(C,b,!t.coordinateInside(e,n))}))}const S=new v.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0}),w=f(n),M=f(i);g.setWalkableAt(w.x,w.y,!0),g.setWalkableAt(M.x,M.y,!0);const x=S.findPath(w.x,w.y,M.x,M.y,g);if(x&&x.length>0){const e=v.Util.smoothenPath(g,x);if(e&&e.length>0)return e.map(((t,o)=>0===o?n:o===e.length-1?i:h(new y.Point2(t[0],t[1]))))}return null}static addCruisePathOriginal(e,t,n,i,a){var l;let c=!1;const m=e.filter((e=>e.avoidanceMotionPriority===o.ZoneMotionPriority.Vertical)),d=r.Serialization.clone(n.currentSpatial),f=r.Serialization.clone(i.currentSpatial);m.forEach((e=>{e.intersections(t,d,f,!0)&&(c=!0,d.altitude.value=Math.max(d.altitude.value,e.maxAltitude.value),f.altitude.value=d.altitude.value)})),d.altitude.value!==(null===(l=n.currentSpatial)||void 0===l?void 0:l.altitude.value)&&(n.add(d,null),i.add(f,null),a=d.altitude);let g=e.filter((e=>e.avoidanceMotionPriority===o.ZoneMotionPriority.Horizontal)).slice();for(;g.length>0;){let e=g.map((e=>{var o;const a=e.intersections(t,n.currentSpatial,i.currentSpatial,!0);if(a){const t=a[0].coordinate.distance(null===(o=n.currentSpatial)||void 0===o?void 0:o.coordinate);return{zone:e,intersections:a,distance:t}}return{zone:e,intersections:a,distance:0}})).filter((e=>e.intersections));if(0===e.length)break;c=!0;const r=e.sort(((e,t)=>e.distance-t.distance))[0],l=r.zone,m=r.intersections;if(1===m.length){const e=m[0].coordinate.toGeoSpatial();e.altitude=a,n.add(e,null)}else switch(l.shape){case o.ZoneShape.Circle:const e=l.centerCoordinate(t),i=l.radius,r=e.bearing(m[0].coordinate),c=e.bearing(m[1].coordinate),d=h.Geometry.angleDifferenceSigned(r,c),f=Math.ceil(Math.abs(d)/C.Convert.degreesToRadians(5));for(var y=0;y<=f;y++){let t=r-y/f*d;const o=e.geoCoordinate(new u.Vector2(t,i)).toGeoSpatial();o.altitude=a,n.add(o,y===f?null:l)}break;case o.ZoneShape.Polygon:const g=l.boundaryPoints.map((e=>e.offset.toPoint2())),v=C.Convert.feetToMeters(5),b=h.Geometry.polygonSegements(g),S=m[0].segmentIndex,w=e=>{const n=[],i=p.Common.last(m).segmentIndex;if(S===i)return[];n.push(l.referenceCoordinate(t).offset(m[0].coordinate).toPoint2());for(var o=1;o<g.length;o++){const a=p.Common.modSafe((e?o:-o)+S,g.length),r=b[a];if(n.push(e?r.a:r.b),a===i){n.push(l.referenceCoordinate(t).offset(p.Common.last(m).coordinate).toPoint2());break}r.length>3*v&&(n.push(r.interpolate(e?v:r.length-v)),n.push(r.interpolate(e?r.length-v:v)))}return n.map((e=>l.referenceCoordinate(t,e.toVector2())))},M=w(!0),x=w(!1),O=s.GeoCoordinate.totalDistance(M)<=s.GeoCoordinate.totalDistance(x)?M:x;O.forEach(((e,t)=>{const i=e.toGeoSpatial();i.altitude=a,n.add(i,t<O.length-1?l:null)}))}g=g.filter((e=>e!==l))}return c}}t.Zone=b;class S{constructor(){this.segments=[]}get currentSegment(){return p.Common.lastSafe(this.segments)}get currentPoint(){var e;return(null===(e=this.currentSegment)||void 0===e?void 0:e.currentPoint)||null}get currentSpatial(){const e=this.currentSegment;return e?e.currentSpatial:null}get spatials(){return this.segments.map((e=>e.spatials))}currentAltitudeEquivalent(e){return!!this.currentSegment&&Math.abs(this.currentSegment.altitude.value-e.value)<.01}add(e,t){var n;if(!this.currentSegment)return this.segments.push(new w([new M(e.coordinate,t)],e.altitude)),this;if(!this.currentAltitudeEquivalent(e.altitude)){const t=this.currentPoint;t&&this.segments.push(new w([new M(t.coordinate,t.zone)],e.altitude))}return null===(n=this.currentSegment)||void 0===n||n.points.push(new M(e.coordinate,t)),this}}t.ZonePath=S;class w{constructor(e,t){this.points=e,this.altitude=t}get currentPoint(){return p.Common.lastSafe(this.points)}get currentSpatial(){const e=p.Common.lastSafe(this.points);if(!e)return null;const t=new d.GeoSpatial;return t.coordinate=e.coordinate,t.altitude=this.altitude,t}get spatials(){return this.points.map((e=>{const t=new d.GeoSpatial;return t.coordinate=e.coordinate,t.altitude=r.Serialization.clone(this.altitude),t}))}}t.ZonePathSegment=w;class M{constructor(e,t=null){this.coordinate=e,this.zone=t}}t.ZonePathPoint=M},176:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZoneBoundaryPointNode=t.ZoneBoundaryPoint=void 0;const i=n(5807),o=n(750),a=n(7722),r=n(4147),s=n(2838),l=n(6718),c=n(5974);class u extends a.Identifiable{constructor(){super(...arguments),this.type=o.TypeName.ZoneBoundaryPoint,this.offset=new i.Vector2}applyJSON(e){super.applyJSON(e),c.Serialization.validateType(e,this.type),this.offset.applyJSON(e.offset)}title(e){return s.Format.icaoWords(e).join(" ")}abbreviation(e){return s.Format.icaoLetters(e)}}t.ZoneBoundaryPoint=u;class m extends l.ListElementNode{constructor(e,t,n,i){super(i.id,e,n,r.Strings.ZoneBoundaryPoint.name,!0),this.zone=t,this.boundaryPoint=i}}t.ZoneBoundaryPointNode=m},3607:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageLevel=t.MeasurementType=t.MapPattern=t.InterpolationFunction=t.GimbalMode=t.GeoSpatialSource=t.FacadeCapturePriority=t.FacadeBoundaryFace=t.FacadePattern=t.DroneOcuSyncFrequencyBand=t.DroneOcuSyncChannelSelectionMode=t.DroneLightbridgeFrequencyBand=t.DroneLightbridgeChannelSelectionMode=t.DroneConnectionFailSafeBehavior=t.ComponentExecutionStatus=t.CommandReengagementTiming=t.CommandExecutionStatus=t.CameraWhiteBalancePreset=t.CameraVideoStandard=t.CameraVideoResolution=t.CameraVideoMode=t.CameraVideoFrameRate=t.CameraVideoFileFormat=t.CameraVideoFieldOfView=t.CameraVideoFileCompressionStandard=t.CameraStorageLocation=t.CameraShutterSpeed=t.CameraPhotoMode=t.CameraPhotoFileFormat=t.CameraPhotoAspectRatio=t.CameraMode=t.CameraMeteringMode=t.CameraISO=t.CameraFocusMode=t.CameraFileIndexMode=t.CameraExposureMode=t.CameraExposureCompensation=t.CameraColor=t.CameraCaptureType=t.CameraAperture=t.CameraAEBCount=t.AltitudeSystem=t.Kinematic=t.Geometry=t.FormattedValue=t.Format=t.Converters=t.Converter=t.Convert=t.Common=void 0,t.ListNode=t.ListElementNode=t.Line2=t.Limits=t.Interpolation=t.Identifiable=t.Gimbal=t.GeoSpatialSources=t.GeoSpatial=t.GeoReferencedOffset=t.GeoLocation=t.GeoCoordinateFilter=t.GeoCoordinate=t.FuncInputExtensions=t.FuncInput=t.Func=t.FieldOfView=t.Execution=t.Executable=t.Engagement=t.Drone=t.Device=t.DistanceTolerance=t.Descriptors=t.Datetime=t.Constants=t.CameraSpecification=t.CameraSensorSpecification=t.CameraLensSpecification=t.CameraImageSpecification=t.CameraFile=t.CameraCaptureConfiguration=t.Camera=t.AssetSource=t.AssetManifest=t.Asset=t.AltitudeRange=t.Altitude=t.ZoneShape=t.ZoneMotionPriority=t.VariableValueType=t.UnitSystem=t.TypeName=t.RotationDirection=t.PlanCompleteAction=t.PathMarkerPositioning=t.PathCornering=t.OrientationZReference=t.OrientationXReference=t.OrbitDirection=void 0,t.LandingGearRetractDroneCommand=t.LandingGearDeployDroneCommand=t.LandingGearAutomaticMovementDroneCommand=t.HomeLocationDroneCommand=t.ConnectionFailSafeBehaviorDroneCommand=t.CollisionAvoidanceDroneCommand=t.GimbalCommand=t.CameraCommand=t.DroneCommand=t.PayloadCommand=t.DefaultCommand=t.CommandExecutionState=t.Command=t.ZoneBoundaryPointNode=t.ZoneBoundaryPoint=t.Zone=t.Velocity6=t.Velocity3=t.Vector2=t.Variable=t.UserInterfaceSettings=t.User=t.TimelineFrame=t.TimelineCommand=t.TimelineCameraCapture=t.Timeline=t.Strings=t.SourcedGeoSpatial=t.Simulation=t.Serialization=t.RemoteController=t.PointsOfInterestNode=t.PointOfInterestNode=t.PointOfInterest=t.Point2=t.Path=t.Orientation3Optional=t.Orientation3=t.Node=t.MotionLimits6Optional=t.MotionLimits6=t.MotionLimits3Optional=t.MotionLimits3=t.MotionLimitsOptional=t.MotionLimits=t.ModeInput=t.Mode=t.Mission=t.MessageGroup=t.Message=void 0,t.VideoFileCompressionStandardCameraCommand=t.VideoCaptionCameraCommand=t.StorageLocationCameraCommand=t.StopCaptureCameraCommand=t.StartCaptureCameraCommand=t.SpotMeteringTargetCameraCommand=t.ShutterSpeedCameraCommand=t.SharpnessCameraCommand=t.SaturationCameraCommand=t.ModeCameraCommand=t.PhotoModeCameraCommand=t.PhotoIntervalCameraCommand=t.PhotoFileFormatCameraCommand=t.PhotoAspectRatioCameraCommand=t.MeteringModeCameraCommand=t.MechanicalShutterCameraCommand=t.ISOCameraCommand=t.FocusModeCameraCommand=t.FocusCameraCommand=t.FileIndexModeCameraCommand=t.ExposureModeCameraCommand=t.ExposureCompensationStepCameraCommand=t.ExposureCompensationCameraCommand=t.ContrastCameraCommand=t.ColorCameraCommand=t.AutoLockGimbalCameraCommand=t.AutoExposureLockCameraCommand=t.ApertureCameraCommand=t.AEBCountCameraCommand=t.VisionAssistedPositioningDroneCommand=t.VelocityDroneCommand=t.UpwardsAvoidanceDroneCommand=t.SmartReturnHomeDroneCommand=t.SeriousLowBatteryWarningThresholdDroneCommand=t.ReturnHomeRemoteObstacleAvoidanceDroneCommand=t.ReturnHomeObstacleAvoidanceDroneCommand=t.ReturnHomeAltitudeDroneCommand=t.RemoteControllerSticksDroneCommand=t.PrecisionLandingDroneCommand=t.OcuSyncFrequencyBandDroneCommand=t.OcuSyncChannelSelectionModeDroneCommand=t.OcuSyncChannelDroneCommand=t.MaxDistanceLimitationDroneCommand=t.MaxDistanceDroneCommand=t.MaxAltitudeDroneCommand=t.LowBatteryWarningThresholdDroneCommand=t.LightbridgeFrequencyBandDroneCommand=t.LightbridgeChannelSelectionModeDroneCommand=t.LightbridgeChannelDroneCommand=t.LandingProtectionDroneCommand=void 0,t.PathComponentWaypointsNode=t.PathComponentWaypointNode=t.PathComponentWaypoint=t.PathComponentMarkersNode=t.PathComponentMarkerNode=t.PathComponentMarker=t.PathComponentElementNode=t.PathComponent=t.OrbitComponent=t.MapComponentBoundaryPointsNode=t.MapComponentBoundaryPointNode=t.MapComponentBoundaryPoint=t.MapComponent=t.ListComponent=t.InspectionComponentInspectionPointNode=t.InspectionComponentInspectionPointsNode=t.InspectionComponentInspectionPoint=t.InspectionComponentActionNode=t.InspectionComponentActionsNode=t.InspectionComponentAction=t.InspectionComponent=t.HeadingComponent=t.FacadeComponentBoundaryPointsNode=t.FacadeComponentBoundaryPointNode=t.FacadeComponentBoundaryPoint=t.FacadeComponent=t.CourseComponent=t.DroneMotionComponent=t.DisengageComponent=t.DestinationComponent=t.AchievableDroneMotionComponent=t.ComponentSource=t.ComponentNodeExecutionState=t.ComponentNode=t.CommandComponent=t.ComponentExecutionState=t.ComponentExecuteContext=t.ComponentEstimateContext=t.ComponentEstimate=t.Component=t.YawSimultaneousFollowGimbalCommand=t.VelocityGimbalCommand=t.OrientationGimbalCommand=t.ModeGimbalCommand=t.WhiteBalancePresetCameraCommand=t.WhiteBalanceCustomCameraCommand=t.VideoStandardCameraCommand=t.VideoResolutionFrameRateCameraCommand=t.VideoModeCameraCommand=t.VideoFileFormatCameraCommand=void 0,t.ComponentContext=t.Context=t.WaitComponent=t.ApproachableComponent=t.SubComponent=t.RotationComponent=t.PlanRestrictionZoneNode=t.PlanRestrictionZonesNode=t.PlanRestrictionZone=t.PlanReengagementRules=t.PlanComponent=void 0;var i=n(5088);Object.defineProperty(t,"Common",{enumerable:!0,get:function(){return i.Common}});var o=n(1747);Object.defineProperty(t,"Convert",{enumerable:!0,get:function(){return o.Convert}});var a=n(1747);Object.defineProperty(t,"Converter",{enumerable:!0,get:function(){return a.Converter}});var r=n(1747);Object.defineProperty(t,"Converters",{enumerable:!0,get:function(){return r.Converters}});var s=n(2838);Object.defineProperty(t,"Format",{enumerable:!0,get:function(){return s.Format}});var l=n(2838);Object.defineProperty(t,"FormattedValue",{enumerable:!0,get:function(){return l.FormattedValue}});var c=n(8111);Object.defineProperty(t,"Geometry",{enumerable:!0,get:function(){return c.Geometry}});var u=n(1154);Object.defineProperty(t,"Kinematic",{enumerable:!0,get:function(){return u.Kinematic}});var m=n(750);Object.defineProperty(t,"AltitudeSystem",{enumerable:!0,get:function(){return m.AltitudeSystem}});var d=n(750);Object.defineProperty(t,"CameraAEBCount",{enumerable:!0,get:function(){return d.CameraAEBCount}});var p=n(750);Object.defineProperty(t,"CameraAperture",{enumerable:!0,get:function(){return p.CameraAperture}});var h=n(750);Object.defineProperty(t,"CameraCaptureType",{enumerable:!0,get:function(){return h.CameraCaptureType}});var f=n(750);Object.defineProperty(t,"CameraColor",{enumerable:!0,get:function(){return f.CameraColor}});var g=n(750);Object.defineProperty(t,"CameraExposureCompensation",{enumerable:!0,get:function(){return g.CameraExposureCompensation}});var y=n(750);Object.defineProperty(t,"CameraExposureMode",{enumerable:!0,get:function(){return y.CameraExposureMode}});var C=n(750);Object.defineProperty(t,"CameraFileIndexMode",{enumerable:!0,get:function(){return C.CameraFileIndexMode}});var v=n(750);Object.defineProperty(t,"CameraFocusMode",{enumerable:!0,get:function(){return v.CameraFocusMode}});var b=n(750);Object.defineProperty(t,"CameraISO",{enumerable:!0,get:function(){return b.CameraISO}});var S=n(750);Object.defineProperty(t,"CameraMeteringMode",{enumerable:!0,get:function(){return S.CameraMeteringMode}});var w=n(750);Object.defineProperty(t,"CameraMode",{enumerable:!0,get:function(){return w.CameraMode}});var M=n(750);Object.defineProperty(t,"CameraPhotoAspectRatio",{enumerable:!0,get:function(){return M.CameraPhotoAspectRatio}});var x=n(750);Object.defineProperty(t,"CameraPhotoFileFormat",{enumerable:!0,get:function(){return x.CameraPhotoFileFormat}});var O=n(750);Object.defineProperty(t,"CameraPhotoMode",{enumerable:!0,get:function(){return O.CameraPhotoMode}});var P=n(750);Object.defineProperty(t,"CameraShutterSpeed",{enumerable:!0,get:function(){return P.CameraShutterSpeed}});var T=n(750);Object.defineProperty(t,"CameraStorageLocation",{enumerable:!0,get:function(){return T.CameraStorageLocation}});var D=n(750);Object.defineProperty(t,"CameraVideoFileCompressionStandard",{enumerable:!0,get:function(){return D.CameraVideoFileCompressionStandard}});var E=n(750);Object.defineProperty(t,"CameraVideoFieldOfView",{enumerable:!0,get:function(){return E.CameraVideoFieldOfView}});var A=n(750);Object.defineProperty(t,"CameraVideoFileFormat",{enumerable:!0,get:function(){return A.CameraVideoFileFormat}});var F=n(750);Object.defineProperty(t,"CameraVideoFrameRate",{enumerable:!0,get:function(){return F.CameraVideoFrameRate}});var N=n(750);Object.defineProperty(t,"CameraVideoMode",{enumerable:!0,get:function(){return N.CameraVideoMode}});var I=n(750);Object.defineProperty(t,"CameraVideoResolution",{enumerable:!0,get:function(){return I.CameraVideoResolution}});var _=n(750);Object.defineProperty(t,"CameraVideoStandard",{enumerable:!0,get:function(){return _.CameraVideoStandard}});var R=n(750);Object.defineProperty(t,"CameraWhiteBalancePreset",{enumerable:!0,get:function(){return R.CameraWhiteBalancePreset}});var L=n(750);Object.defineProperty(t,"CommandExecutionStatus",{enumerable:!0,get:function(){return L.CommandExecutionStatus}});var k=n(750);Object.defineProperty(t,"CommandReengagementTiming",{enumerable:!0,get:function(){return k.CommandReengagementTiming}});var z=n(750);Object.defineProperty(t,"ComponentExecutionStatus",{enumerable:!0,get:function(){return z.ComponentExecutionStatus}});var B=n(750);Object.defineProperty(t,"DroneConnectionFailSafeBehavior",{enumerable:!0,get:function(){return B.DroneConnectionFailSafeBehavior}});var j=n(750);Object.defineProperty(t,"DroneLightbridgeChannelSelectionMode",{enumerable:!0,get:function(){return j.DroneLightbridgeChannelSelectionMode}});var V=n(750);Object.defineProperty(t,"DroneLightbridgeFrequencyBand",{enumerable:!0,get:function(){return V.DroneLightbridgeFrequencyBand}});var G=n(750);Object.defineProperty(t,"DroneOcuSyncChannelSelectionMode",{enumerable:!0,get:function(){return G.DroneOcuSyncChannelSelectionMode}});var U=n(750);Object.defineProperty(t,"DroneOcuSyncFrequencyBand",{enumerable:!0,get:function(){return U.DroneOcuSyncFrequencyBand}});var J=n(750);Object.defineProperty(t,"FacadePattern",{enumerable:!0,get:function(){return J.FacadePattern}});var W=n(750);Object.defineProperty(t,"FacadeBoundaryFace",{enumerable:!0,get:function(){return W.FacadeBoundaryFace}});var H=n(750);Object.defineProperty(t,"FacadeCapturePriority",{enumerable:!0,get:function(){return H.FacadeCapturePriority}});var q=n(750);Object.defineProperty(t,"GeoSpatialSource",{enumerable:!0,get:function(){return q.GeoSpatialSource}});var Z=n(750);Object.defineProperty(t,"GimbalMode",{enumerable:!0,get:function(){return Z.GimbalMode}});var K=n(750);Object.defineProperty(t,"InterpolationFunction",{enumerable:!0,get:function(){return K.InterpolationFunction}});var $=n(750);Object.defineProperty(t,"MapPattern",{enumerable:!0,get:function(){return $.MapPattern}});var X=n(750);Object.defineProperty(t,"MeasurementType",{enumerable:!0,get:function(){return X.MeasurementType}});var Y=n(750);Object.defineProperty(t,"MessageLevel",{enumerable:!0,get:function(){return Y.MessageLevel}});var Q=n(750);Object.defineProperty(t,"OrbitDirection",{enumerable:!0,get:function(){return Q.OrbitDirection}});var ee=n(750);Object.defineProperty(t,"OrientationXReference",{enumerable:!0,get:function(){return ee.OrientationXReference}});var te=n(750);Object.defineProperty(t,"OrientationZReference",{enumerable:!0,get:function(){return te.OrientationZReference}});var ne=n(750);Object.defineProperty(t,"PathCornering",{enumerable:!0,get:function(){return ne.PathCornering}});var ie=n(750);Object.defineProperty(t,"PathMarkerPositioning",{enumerable:!0,get:function(){return ie.PathMarkerPositioning}});var oe=n(750);Object.defineProperty(t,"PlanCompleteAction",{enumerable:!0,get:function(){return oe.PlanCompleteAction}});var ae=n(750);Object.defineProperty(t,"RotationDirection",{enumerable:!0,get:function(){return ae.RotationDirection}});var re=n(750);Object.defineProperty(t,"TypeName",{enumerable:!0,get:function(){return re.TypeName}});var se=n(750);Object.defineProperty(t,"UnitSystem",{enumerable:!0,get:function(){return se.UnitSystem}});var le=n(750);Object.defineProperty(t,"VariableValueType",{enumerable:!0,get:function(){return le.VariableValueType}});var ce=n(750);Object.defineProperty(t,"ZoneMotionPriority",{enumerable:!0,get:function(){return ce.ZoneMotionPriority}});var ue=n(750);Object.defineProperty(t,"ZoneShape",{enumerable:!0,get:function(){return ue.ZoneShape}});var me=n(9871);Object.defineProperty(t,"Altitude",{enumerable:!0,get:function(){return me.Altitude}});var de=n(6776);Object.defineProperty(t,"AltitudeRange",{enumerable:!0,get:function(){return de.AltitudeRange}});var pe=n(7436);Object.defineProperty(t,"Asset",{enumerable:!0,get:function(){return pe.Asset}});var he=n(5154);Object.defineProperty(t,"AssetManifest",{enumerable:!0,get:function(){return he.AssetManifest}});var fe=n(4110);Object.defineProperty(t,"AssetSource",{enumerable:!0,get:function(){return fe.AssetSource}});var ge=n(1111);Object.defineProperty(t,"Camera",{enumerable:!0,get:function(){return ge.Camera}});var ye=n(1678);Object.defineProperty(t,"CameraCaptureConfiguration",{enumerable:!0,get:function(){return ye.CameraCaptureConfiguration}});var Ce=n(916);Object.defineProperty(t,"CameraFile",{enumerable:!0,get:function(){return Ce.CameraFile}});var ve=n(7525);Object.defineProperty(t,"CameraImageSpecification",{enumerable:!0,get:function(){return ve.CameraImageSpecification}});var be=n(8925);Object.defineProperty(t,"CameraLensSpecification",{enumerable:!0,get:function(){return be.CameraLensSpecification}});var Se=n(9122);Object.defineProperty(t,"CameraSensorSpecification",{enumerable:!0,get:function(){return Se.CameraSensorSpecification}});var we=n(924);Object.defineProperty(t,"CameraSpecification",{enumerable:!0,get:function(){return we.CameraSpecification}});var Me=n(7247);Object.defineProperty(t,"Constants",{enumerable:!0,get:function(){return Me.Constants}});var xe=n(1985);Object.defineProperty(t,"Datetime",{enumerable:!0,get:function(){return xe.Datetime}});var Oe=n(5664);Object.defineProperty(t,"Descriptors",{enumerable:!0,get:function(){return Oe.Descriptors}});var Pe=n(4545);Object.defineProperty(t,"DistanceTolerance",{enumerable:!0,get:function(){return Pe.DistanceTolerance}});var Te=n(5760);Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return Te.Device}});var De=n(8510);Object.defineProperty(t,"Drone",{enumerable:!0,get:function(){return De.Drone}});var Ee=n(4137);Object.defineProperty(t,"Engagement",{enumerable:!0,get:function(){return Ee.Engagement}});var Ae=n(8777);Object.defineProperty(t,"Executable",{enumerable:!0,get:function(){return Ae.Executable}});var Fe=n(360);Object.defineProperty(t,"Execution",{enumerable:!0,get:function(){return Fe.Execution}});var Ne=n(745);Object.defineProperty(t,"FieldOfView",{enumerable:!0,get:function(){return Ne.FieldOfView}});var Ie=n(7343);Object.defineProperty(t,"Func",{enumerable:!0,get:function(){return Ie.Func}});var _e=n(7343);Object.defineProperty(t,"FuncInput",{enumerable:!0,get:function(){return _e.FuncInput}});var Re=n(7343);Object.defineProperty(t,"FuncInputExtensions",{enumerable:!0,get:function(){return Re.FuncInputExtensions}});var Le=n(5226);Object.defineProperty(t,"GeoCoordinate",{enumerable:!0,get:function(){return Le.GeoCoordinate}});var ke=n(7411);Object.defineProperty(t,"GeoCoordinateFilter",{enumerable:!0,get:function(){return ke.GeoCoordinateFilter}});var ze=n(6241);Object.defineProperty(t,"GeoLocation",{enumerable:!0,get:function(){return ze.GeoLocation}});var Be=n(6142);Object.defineProperty(t,"GeoReferencedOffset",{enumerable:!0,get:function(){return Be.GeoReferencedOffset}});var je=n(4830);Object.defineProperty(t,"GeoSpatial",{enumerable:!0,get:function(){return je.GeoSpatial}});var Ve=n(4754);Object.defineProperty(t,"GeoSpatialSources",{enumerable:!0,get:function(){return Ve.GeoSpatialSources}});var Ge=n(4457);Object.defineProperty(t,"Gimbal",{enumerable:!0,get:function(){return Ge.Gimbal}});var Ue=n(7722);Object.defineProperty(t,"Identifiable",{enumerable:!0,get:function(){return Ue.Identifiable}});var Je=n(2545);Object.defineProperty(t,"Interpolation",{enumerable:!0,get:function(){return Je.Interpolation}});var We=n(3854);Object.defineProperty(t,"Limits",{enumerable:!0,get:function(){return We.Limits}});var He=n(141);Object.defineProperty(t,"Line2",{enumerable:!0,get:function(){return He.Line2}});var qe=n(6718);Object.defineProperty(t,"ListElementNode",{enumerable:!0,get:function(){return qe.ListElementNode}});var Ze=n(79);Object.defineProperty(t,"ListNode",{enumerable:!0,get:function(){return Ze.ListNode}});var Ke=n(7787);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return Ke.Message}});var $e=n(8299);Object.defineProperty(t,"MessageGroup",{enumerable:!0,get:function(){return $e.MessageGroup}});var Xe=n(4334);Object.defineProperty(t,"Mission",{enumerable:!0,get:function(){return Xe.Mission}});var Ye=n(4174);Object.defineProperty(t,"Mode",{enumerable:!0,get:function(){return Ye.Mode}});var Qe=n(4174);Object.defineProperty(t,"ModeInput",{enumerable:!0,get:function(){return Qe.ModeInput}});var et=n(6202);Object.defineProperty(t,"MotionLimits",{enumerable:!0,get:function(){return et.MotionLimits}});var tt=n(5486);Object.defineProperty(t,"MotionLimitsOptional",{enumerable:!0,get:function(){return tt.MotionLimitsOptional}});var nt=n(3509);Object.defineProperty(t,"MotionLimits3",{enumerable:!0,get:function(){return nt.MotionLimits3}});var it=n(2064);Object.defineProperty(t,"MotionLimits3Optional",{enumerable:!0,get:function(){return it.MotionLimits3Optional}});var ot=n(5051);Object.defineProperty(t,"MotionLimits6",{enumerable:!0,get:function(){return ot.MotionLimits6}});var at=n(9477);Object.defineProperty(t,"MotionLimits6Optional",{enumerable:!0,get:function(){return at.MotionLimits6Optional}});var rt=n(9674);Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return rt.Node}});var st=n(2573);Object.defineProperty(t,"Orientation3",{enumerable:!0,get:function(){return st.Orientation3}});var lt=n(4612);Object.defineProperty(t,"Orientation3Optional",{enumerable:!0,get:function(){return lt.Orientation3Optional}});var ct=n(8656);Object.defineProperty(t,"Path",{enumerable:!0,get:function(){return ct.Path}});var ut=n(6875);Object.defineProperty(t,"Point2",{enumerable:!0,get:function(){return ut.Point2}});var mt=n(1504);Object.defineProperty(t,"PointOfInterest",{enumerable:!0,get:function(){return mt.PointOfInterest}});var dt=n(1504);Object.defineProperty(t,"PointOfInterestNode",{enumerable:!0,get:function(){return dt.PointOfInterestNode}});var pt=n(1504);Object.defineProperty(t,"PointsOfInterestNode",{enumerable:!0,get:function(){return pt.PointsOfInterestNode}});var ht=n(7470);Object.defineProperty(t,"RemoteController",{enumerable:!0,get:function(){return ht.RemoteController}});var ft=n(5974);Object.defineProperty(t,"Serialization",{enumerable:!0,get:function(){return ft.Serialization}});var gt=n(9514);Object.defineProperty(t,"Simulation",{enumerable:!0,get:function(){return gt.Simulation}});var yt=n(5445);Object.defineProperty(t,"SourcedGeoSpatial",{enumerable:!0,get:function(){return yt.SourcedGeoSpatial}});var Ct=n(4147);Object.defineProperty(t,"Strings",{enumerable:!0,get:function(){return Ct.Strings}});var vt=n(4187);Object.defineProperty(t,"Timeline",{enumerable:!0,get:function(){return vt.Timeline}});var bt=n(4187);Object.defineProperty(t,"TimelineCameraCapture",{enumerable:!0,get:function(){return bt.TimelineCameraCapture}});var St=n(4187);Object.defineProperty(t,"TimelineCommand",{enumerable:!0,get:function(){return St.TimelineCommand}});var wt=n(4187);Object.defineProperty(t,"TimelineFrame",{enumerable:!0,get:function(){return wt.TimelineFrame}});var Mt=n(4567);Object.defineProperty(t,"User",{enumerable:!0,get:function(){return Mt.User}});var xt=n(5167);Object.defineProperty(t,"UserInterfaceSettings",{enumerable:!0,get:function(){return xt.UserInterfaceSettings}});var Ot=n(9993);Object.defineProperty(t,"Variable",{enumerable:!0,get:function(){return Ot.Variable}});var Pt=n(5807);Object.defineProperty(t,"Vector2",{enumerable:!0,get:function(){return Pt.Vector2}});var Tt=n(5589);Object.defineProperty(t,"Velocity3",{enumerable:!0,get:function(){return Tt.Velocity3}});var Dt=n(9123);Object.defineProperty(t,"Velocity6",{enumerable:!0,get:function(){return Dt.Velocity6}});var Et=n(8569);Object.defineProperty(t,"Zone",{enumerable:!0,get:function(){return Et.Zone}});var At=n(176);Object.defineProperty(t,"ZoneBoundaryPoint",{enumerable:!0,get:function(){return At.ZoneBoundaryPoint}});var Ft=n(176);Object.defineProperty(t,"ZoneBoundaryPointNode",{enumerable:!0,get:function(){return Ft.ZoneBoundaryPointNode}});var Nt=n(9645);Object.defineProperty(t,"Command",{enumerable:!0,get:function(){return Nt.Command}});var It=n(3405);Object.defineProperty(t,"CommandExecutionState",{enumerable:!0,get:function(){return It.CommandExecutionState}});var _t=n(5251);Object.defineProperty(t,"DefaultCommand",{enumerable:!0,get:function(){return _t.DefaultCommand}});var Rt=n(5311);Object.defineProperty(t,"PayloadCommand",{enumerable:!0,get:function(){return Rt.PayloadCommand}});var Lt=n(2681);Object.defineProperty(t,"DroneCommand",{enumerable:!0,get:function(){return Lt.DroneCommand}});var kt=n(8179);Object.defineProperty(t,"CameraCommand",{enumerable:!0,get:function(){return kt.CameraCommand}});var zt=n(7553);Object.defineProperty(t,"GimbalCommand",{enumerable:!0,get:function(){return zt.GimbalCommand}});var Bt=n(2154);Object.defineProperty(t,"CollisionAvoidanceDroneCommand",{enumerable:!0,get:function(){return Bt.CollisionAvoidanceDroneCommand}});var jt=n(7278);Object.defineProperty(t,"ConnectionFailSafeBehaviorDroneCommand",{enumerable:!0,get:function(){return jt.ConnectionFailSafeBehaviorDroneCommand}});var Vt=n(3215);Object.defineProperty(t,"HomeLocationDroneCommand",{enumerable:!0,get:function(){return Vt.HomeLocationDroneCommand}});var Gt=n(7432);Object.defineProperty(t,"LandingGearAutomaticMovementDroneCommand",{enumerable:!0,get:function(){return Gt.LandingGearAutomaticMovementDroneCommand}});var Ut=n(6275);Object.defineProperty(t,"LandingGearDeployDroneCommand",{enumerable:!0,get:function(){return Ut.LandingGearDeployDroneCommand}});var Jt=n(1791);Object.defineProperty(t,"LandingGearRetractDroneCommand",{enumerable:!0,get:function(){return Jt.LandingGearRetractDroneCommand}});var Wt=n(4682);Object.defineProperty(t,"LandingProtectionDroneCommand",{enumerable:!0,get:function(){return Wt.LandingProtectionDroneCommand}});var Ht=n(7212);Object.defineProperty(t,"LightbridgeChannelDroneCommand",{enumerable:!0,get:function(){return Ht.LightbridgeChannelDroneCommand}});var qt=n(9626);Object.defineProperty(t,"LightbridgeChannelSelectionModeDroneCommand",{enumerable:!0,get:function(){return qt.LightbridgeChannelSelectionModeDroneCommand}});var Zt=n(4976);Object.defineProperty(t,"LightbridgeFrequencyBandDroneCommand",{enumerable:!0,get:function(){return Zt.LightbridgeFrequencyBandDroneCommand}});var Kt=n(7658);Object.defineProperty(t,"LowBatteryWarningThresholdDroneCommand",{enumerable:!0,get:function(){return Kt.LowBatteryWarningThresholdDroneCommand}});var $t=n(6091);Object.defineProperty(t,"MaxAltitudeDroneCommand",{enumerable:!0,get:function(){return $t.MaxAltitudeDroneCommand}});var Xt=n(609);Object.defineProperty(t,"MaxDistanceDroneCommand",{enumerable:!0,get:function(){return Xt.MaxDistanceDroneCommand}});var Yt=n(3893);Object.defineProperty(t,"MaxDistanceLimitationDroneCommand",{enumerable:!0,get:function(){return Yt.MaxDistanceLimitationDroneCommand}});var Qt=n(6589);Object.defineProperty(t,"OcuSyncChannelDroneCommand",{enumerable:!0,get:function(){return Qt.OcuSyncChannelDroneCommand}});var en=n(5850);Object.defineProperty(t,"OcuSyncChannelSelectionModeDroneCommand",{enumerable:!0,get:function(){return en.OcuSyncChannelSelectionModeDroneCommand}});var tn=n(6207);Object.defineProperty(t,"OcuSyncFrequencyBandDroneCommand",{enumerable:!0,get:function(){return tn.OcuSyncFrequencyBandDroneCommand}});var nn=n(499);Object.defineProperty(t,"PrecisionLandingDroneCommand",{enumerable:!0,get:function(){return nn.PrecisionLandingDroneCommand}});var on=n(948);Object.defineProperty(t,"RemoteControllerSticksDroneCommand",{enumerable:!0,get:function(){return on.RemoteControllerSticksDroneCommand}});var an=n(709);Object.defineProperty(t,"ReturnHomeAltitudeDroneCommand",{enumerable:!0,get:function(){return an.ReturnHomeAltitudeDroneCommand}});var rn=n(2322);Object.defineProperty(t,"ReturnHomeObstacleAvoidanceDroneCommand",{enumerable:!0,get:function(){return rn.ReturnHomeObstacleAvoidanceDroneCommand}});var sn=n(9226);Object.defineProperty(t,"ReturnHomeRemoteObstacleAvoidanceDroneCommand",{enumerable:!0,get:function(){return sn.ReturnHomeRemoteObstacleAvoidanceDroneCommand}});var ln=n(1612);Object.defineProperty(t,"SeriousLowBatteryWarningThresholdDroneCommand",{enumerable:!0,get:function(){return ln.SeriousLowBatteryWarningThresholdDroneCommand}});var cn=n(7885);Object.defineProperty(t,"SmartReturnHomeDroneCommand",{enumerable:!0,get:function(){return cn.SmartReturnHomeDroneCommand}});var un=n(3795);Object.defineProperty(t,"UpwardsAvoidanceDroneCommand",{enumerable:!0,get:function(){return un.UpwardsAvoidanceDroneCommand}});var mn=n(5437);Object.defineProperty(t,"VelocityDroneCommand",{enumerable:!0,get:function(){return mn.VelocityDroneCommand}});var dn=n(9866);Object.defineProperty(t,"VisionAssistedPositioningDroneCommand",{enumerable:!0,get:function(){return dn.VisionAssistedPositioningDroneCommand}});var pn=n(5967);Object.defineProperty(t,"AEBCountCameraCommand",{enumerable:!0,get:function(){return pn.AEBCountCameraCommand}});var hn=n(1639);Object.defineProperty(t,"ApertureCameraCommand",{enumerable:!0,get:function(){return hn.ApertureCameraCommand}});var fn=n(5094);Object.defineProperty(t,"AutoExposureLockCameraCommand",{enumerable:!0,get:function(){return fn.AutoExposureLockCameraCommand}});var gn=n(245);Object.defineProperty(t,"AutoLockGimbalCameraCommand",{enumerable:!0,get:function(){return gn.AutoLockGimbalCameraCommand}});var yn=n(1044);Object.defineProperty(t,"ColorCameraCommand",{enumerable:!0,get:function(){return yn.ColorCameraCommand}});var Cn=n(6382);Object.defineProperty(t,"ContrastCameraCommand",{enumerable:!0,get:function(){return Cn.ContrastCameraCommand}});var vn=n(3014);Object.defineProperty(t,"ExposureCompensationCameraCommand",{enumerable:!0,get:function(){return vn.ExposureCompensationCameraCommand}});var bn=n(9935);Object.defineProperty(t,"ExposureCompensationStepCameraCommand",{enumerable:!0,get:function(){return bn.ExposureCompensationStepCameraCommand}});var Sn=n(6802);Object.defineProperty(t,"ExposureModeCameraCommand",{enumerable:!0,get:function(){return Sn.ExposureModeCameraCommand}});var wn=n(3999);Object.defineProperty(t,"FileIndexModeCameraCommand",{enumerable:!0,get:function(){return wn.FileIndexModeCameraCommand}});var Mn=n(5630);Object.defineProperty(t,"FocusCameraCommand",{enumerable:!0,get:function(){return Mn.FocusCameraCommand}});var xn=n(5694);Object.defineProperty(t,"FocusModeCameraCommand",{enumerable:!0,get:function(){return xn.FocusModeCameraCommand}});var On=n(5739);Object.defineProperty(t,"ISOCameraCommand",{enumerable:!0,get:function(){return On.ISOCameraCommand}});var Pn=n(7416);Object.defineProperty(t,"MechanicalShutterCameraCommand",{enumerable:!0,get:function(){return Pn.MechanicalShutterCameraCommand}});var Tn=n(6953);Object.defineProperty(t,"MeteringModeCameraCommand",{enumerable:!0,get:function(){return Tn.MeteringModeCameraCommand}});var Dn=n(9185);Object.defineProperty(t,"PhotoAspectRatioCameraCommand",{enumerable:!0,get:function(){return Dn.PhotoAspectRatioCameraCommand}});var En=n(2e3);Object.defineProperty(t,"PhotoFileFormatCameraCommand",{enumerable:!0,get:function(){return En.PhotoFileFormatCameraCommand}});var An=n(3957);Object.defineProperty(t,"PhotoIntervalCameraCommand",{enumerable:!0,get:function(){return An.PhotoIntervalCameraCommand}});var Fn=n(908);Object.defineProperty(t,"PhotoModeCameraCommand",{enumerable:!0,get:function(){return Fn.PhotoModeCameraCommand}});var Nn=n(9983);Object.defineProperty(t,"ModeCameraCommand",{enumerable:!0,get:function(){return Nn.ModeCameraCommand}});var In=n(7754);Object.defineProperty(t,"SaturationCameraCommand",{enumerable:!0,get:function(){return In.SaturationCameraCommand}});var _n=n(9986);Object.defineProperty(t,"SharpnessCameraCommand",{enumerable:!0,get:function(){return _n.SharpnessCameraCommand}});var Rn=n(4065);Object.defineProperty(t,"ShutterSpeedCameraCommand",{enumerable:!0,get:function(){return Rn.ShutterSpeedCameraCommand}});var Ln=n(5327);Object.defineProperty(t,"SpotMeteringTargetCameraCommand",{enumerable:!0,get:function(){return Ln.SpotMeteringTargetCameraCommand}});var kn=n(8283);Object.defineProperty(t,"StartCaptureCameraCommand",{enumerable:!0,get:function(){return kn.StartCaptureCameraCommand}});var zn=n(9271);Object.defineProperty(t,"StopCaptureCameraCommand",{enumerable:!0,get:function(){return zn.StopCaptureCameraCommand}});var Bn=n(1445);Object.defineProperty(t,"StorageLocationCameraCommand",{enumerable:!0,get:function(){return Bn.StorageLocationCameraCommand}});var jn=n(7152);Object.defineProperty(t,"VideoCaptionCameraCommand",{enumerable:!0,get:function(){return jn.VideoCaptionCameraCommand}});var Vn=n(8218);Object.defineProperty(t,"VideoFileCompressionStandardCameraCommand",{enumerable:!0,get:function(){return Vn.VideoFileCompressionStandardCameraCommand}});var Gn=n(1041);Object.defineProperty(t,"VideoFileFormatCameraCommand",{enumerable:!0,get:function(){return Gn.VideoFileFormatCameraCommand}});var Un=n(9343);Object.defineProperty(t,"VideoModeCameraCommand",{enumerable:!0,get:function(){return Un.VideoModeCameraCommand}});var Jn=n(4107);Object.defineProperty(t,"VideoResolutionFrameRateCameraCommand",{enumerable:!0,get:function(){return Jn.VideoResolutionFrameRateCameraCommand}});var Wn=n(4153);Object.defineProperty(t,"VideoStandardCameraCommand",{enumerable:!0,get:function(){return Wn.VideoStandardCameraCommand}});var Hn=n(8354);Object.defineProperty(t,"WhiteBalanceCustomCameraCommand",{enumerable:!0,get:function(){return Hn.WhiteBalanceCustomCameraCommand}});var qn=n(466);Object.defineProperty(t,"WhiteBalancePresetCameraCommand",{enumerable:!0,get:function(){return qn.WhiteBalancePresetCameraCommand}});var Zn=n(5861);Object.defineProperty(t,"ModeGimbalCommand",{enumerable:!0,get:function(){return Zn.ModeGimbalCommand}});var Kn=n(946);Object.defineProperty(t,"OrientationGimbalCommand",{enumerable:!0,get:function(){return Kn.OrientationGimbalCommand}});var $n=n(1906);Object.defineProperty(t,"VelocityGimbalCommand",{enumerable:!0,get:function(){return $n.VelocityGimbalCommand}});var Xn=n(1201);Object.defineProperty(t,"YawSimultaneousFollowGimbalCommand",{enumerable:!0,get:function(){return Xn.YawSimultaneousFollowGimbalCommand}});var Yn=n(737);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return Yn.Component}});var Qn=n(9620);Object.defineProperty(t,"ComponentEstimate",{enumerable:!0,get:function(){return Qn.ComponentEstimate}});var ei=n(8368);Object.defineProperty(t,"ComponentEstimateContext",{enumerable:!0,get:function(){return ei.ComponentEstimateContext}});var ti=n(1412);Object.defineProperty(t,"ComponentExecuteContext",{enumerable:!0,get:function(){return ti.ComponentExecuteContext}});var ni=n(8002);Object.defineProperty(t,"ComponentExecutionState",{enumerable:!0,get:function(){return ni.ComponentExecutionState}});var ii=n(8210);Object.defineProperty(t,"CommandComponent",{enumerable:!0,get:function(){return ii.CommandComponent}});var oi=n(1159);Object.defineProperty(t,"ComponentNode",{enumerable:!0,get:function(){return oi.ComponentNode}});var ai=n(8952);Object.defineProperty(t,"ComponentNodeExecutionState",{enumerable:!0,get:function(){return ai.ComponentNodeExecutionState}});var ri=n(4321);Object.defineProperty(t,"ComponentSource",{enumerable:!0,get:function(){return ri.ComponentSource}});var si=n(4032);Object.defineProperty(t,"AchievableDroneMotionComponent",{enumerable:!0,get:function(){return si.AchievableDroneMotionComponent}});var li=n(2962);Object.defineProperty(t,"DestinationComponent",{enumerable:!0,get:function(){return li.DestinationComponent}});var ci=n(3750);Object.defineProperty(t,"DisengageComponent",{enumerable:!0,get:function(){return ci.DisengageComponent}});var ui=n(5718);Object.defineProperty(t,"DroneMotionComponent",{enumerable:!0,get:function(){return ui.DroneMotionComponent}});var mi=n(4200);Object.defineProperty(t,"CourseComponent",{enumerable:!0,get:function(){return mi.CourseComponent}});var di=n(4049);Object.defineProperty(t,"FacadeComponent",{enumerable:!0,get:function(){return di.FacadeComponent}});var pi=n(4808);Object.defineProperty(t,"FacadeComponentBoundaryPoint",{enumerable:!0,get:function(){return pi.FacadeComponentBoundaryPoint}});var hi=n(4808);Object.defineProperty(t,"FacadeComponentBoundaryPointNode",{enumerable:!0,get:function(){return hi.FacadeComponentBoundaryPointNode}});var fi=n(4808);Object.defineProperty(t,"FacadeComponentBoundaryPointsNode",{enumerable:!0,get:function(){return fi.FacadeComponentBoundaryPointsNode}});var gi=n(8731);Object.defineProperty(t,"HeadingComponent",{enumerable:!0,get:function(){return gi.HeadingComponent}});var yi=n(6030);Object.defineProperty(t,"InspectionComponent",{enumerable:!0,get:function(){return yi.InspectionComponent}});var Ci=n(1194);Object.defineProperty(t,"InspectionComponentAction",{enumerable:!0,get:function(){return Ci.InspectionComponentAction}});var vi=n(1194);Object.defineProperty(t,"InspectionComponentActionsNode",{enumerable:!0,get:function(){return vi.InspectionComponentActionsNode}});var bi=n(1194);Object.defineProperty(t,"InspectionComponentActionNode",{enumerable:!0,get:function(){return bi.InspectionComponentActionNode}});var Si=n(6484);Object.defineProperty(t,"InspectionComponentInspectionPoint",{enumerable:!0,get:function(){return Si.InspectionComponentInspectionPoint}});var wi=n(6484);Object.defineProperty(t,"InspectionComponentInspectionPointsNode",{enumerable:!0,get:function(){return wi.InspectionComponentInspectionPointsNode}});var Mi=n(6484);Object.defineProperty(t,"InspectionComponentInspectionPointNode",{enumerable:!0,get:function(){return Mi.InspectionComponentInspectionPointNode}});var xi=n(3447);Object.defineProperty(t,"ListComponent",{enumerable:!0,get:function(){return xi.ListComponent}});var Oi=n(8954);Object.defineProperty(t,"MapComponent",{enumerable:!0,get:function(){return Oi.MapComponent}});var Pi=n(5406);Object.defineProperty(t,"MapComponentBoundaryPoint",{enumerable:!0,get:function(){return Pi.MapComponentBoundaryPoint}});var Ti=n(5406);Object.defineProperty(t,"MapComponentBoundaryPointNode",{enumerable:!0,get:function(){return Ti.MapComponentBoundaryPointNode}});var Di=n(5406);Object.defineProperty(t,"MapComponentBoundaryPointsNode",{enumerable:!0,get:function(){return Di.MapComponentBoundaryPointsNode}});var Ei=n(3948);Object.defineProperty(t,"OrbitComponent",{enumerable:!0,get:function(){return Ei.OrbitComponent}});var Ai=n(864);Object.defineProperty(t,"PathComponent",{enumerable:!0,get:function(){return Ai.PathComponent}});var Fi=n(7794);Object.defineProperty(t,"PathComponentElementNode",{enumerable:!0,get:function(){return Fi.PathComponentElementNode}});var Ni=n(527);Object.defineProperty(t,"PathComponentMarker",{enumerable:!0,get:function(){return Ni.PathComponentMarker}});var Ii=n(527);Object.defineProperty(t,"PathComponentMarkerNode",{enumerable:!0,get:function(){return Ii.PathComponentMarkerNode}});var _i=n(527);Object.defineProperty(t,"PathComponentMarkersNode",{enumerable:!0,get:function(){return _i.PathComponentMarkersNode}});var Ri=n(1707);Object.defineProperty(t,"PathComponentWaypoint",{enumerable:!0,get:function(){return Ri.PathComponentWaypoint}});var Li=n(1707);Object.defineProperty(t,"PathComponentWaypointNode",{enumerable:!0,get:function(){return Li.PathComponentWaypointNode}});var ki=n(1707);Object.defineProperty(t,"PathComponentWaypointsNode",{enumerable:!0,get:function(){return ki.PathComponentWaypointsNode}});var zi=n(6437);Object.defineProperty(t,"PlanComponent",{enumerable:!0,get:function(){return zi.PlanComponent}});var Bi=n(8328);Object.defineProperty(t,"PlanReengagementRules",{enumerable:!0,get:function(){return Bi.PlanReengagementRules}});var ji=n(3071);Object.defineProperty(t,"PlanRestrictionZone",{enumerable:!0,get:function(){return ji.PlanRestrictionZone}});var Vi=n(3071);Object.defineProperty(t,"PlanRestrictionZonesNode",{enumerable:!0,get:function(){return Vi.PlanRestrictionZonesNode}});var Gi=n(3071);Object.defineProperty(t,"PlanRestrictionZoneNode",{enumerable:!0,get:function(){return Gi.PlanRestrictionZoneNode}});var Ui=n(6191);Object.defineProperty(t,"RotationComponent",{enumerable:!0,get:function(){return Ui.RotationComponent}});var Ji=n(5293);Object.defineProperty(t,"SubComponent",{enumerable:!0,get:function(){return Ji.SubComponent}});var Wi=n(9411);Object.defineProperty(t,"ApproachableComponent",{enumerable:!0,get:function(){return Wi.ApproachableComponent}});var Hi=n(4259);Object.defineProperty(t,"WaitComponent",{enumerable:!0,get:function(){return Hi.WaitComponent}});var qi=n(3593);Object.defineProperty(t,"Context",{enumerable:!0,get:function(){return qi.Context}});var Zi=n(3310);Object.defineProperty(t,"ComponentContext",{enumerable:!0,get:function(){return Zi.ComponentContext}})},5088:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Common=void 0;const i=n(4147),o=n(3913);class a{static sleep(e){return new Promise((t=>setTimeout(t,e)))}static uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}static parseBoolean(e,t=!1){return null==e?t:!0===e}static parseFloat(e,t=0){const n=parseFloat(e);return Number.isNaN(n)?t:n}static parseInt(e,t=0){const n=parseInt(e);return Number.isNaN(n)?t:n}static parseString(e,t=null){return null==e||"string"!=typeof e?t:e}static parseArray(e,t=[]){return Array.isArray(e)?e:t}static kalmanFilter(e){return new o(e)}static sigmoidBase(e,t){return 1/(1+Math.exp(-t*e))-.5}static sigmoid(e,t=Math.E){return.5/a.sigmoidBase(1,t)*a.sigmoidBase(2*Math.max(Math.min(e,1),0)-1,t)+.5}static modSafe(e,t){return(e%t+t)%t}static matchSign(e,t){return t<0?-1*e:e}static movingAverage(e,t=1){const n=t/(e.length+1);return e.reduce(((e,t)=>t*n+e*(1-n)),0)}static debugLog(e){const t=new Date;console.debug(`[${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()} ${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}:${t.getMilliseconds()}] ${e}`)}static last(e){return e[e.length-1]}static lastSafe(e){return e.length>0?a.last(e):null}static remove(e,t){return e.filter((e=>!(e===t||t.id&&e.id&&t.id===e.id)))}static joinNotEmpty(e,t=i.Strings.Common.delimeter){return e.filter((e=>e)).join(t)}static descendantsMatching(e,t){if(!e)return[];const n=[];return t(e)&&n.push(e),Array.isArray(e)?n.push(...a.descendantsMatchingIterable(e,t)):e instanceof Object&&n.push(...a.descendantsMatchingIterable(Object.keys(e).map((t=>e[t])),t)),n}static descendantsMatchingIterable(e,t){if(!e||0===e.length)return[];const n=[];return e.forEach((e=>{n.push(...a.descendantsMatching(e,t))})),n.length>0?n:[]}}t.Common=a},1747:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Converters=t.Converter=t.Convert=void 0;const i=n(750),o=n(4147),a=n(2838);class r{static feetToMeters(e){return.3048*e}static metersToFeet(e){return 3.28084*e}static metersToInches(e){return 39.3701*e}static milesPerHourToMetersPerSecond(e){return.44704*e}static metersPerSecondToMilesPerHour(e){return 2.23694*e}static metersPerSecondToKilometersPerHour(e){return 3.6*e}static kilometersPerHourToMetersPerSecond(e){return.277778*e}static acresToSquareMeters(e){return 4046.86*e}static squareMetersToAcres(e){return 247105e-9*e}static squareMetersToHectares(e){return 1e-4*e}static radiansMod(e){return e>2*Math.PI?r.radiansMod(e-2*Math.PI):e<0?r.radiansMod(e+2*Math.PI):e}static radiansToDegrees(e,t=!1){if(t){if(e>2*Math.PI)return r.radiansToDegrees(e-2*Math.PI,t);if(e<0)return r.radiansToDegrees(e+2*Math.PI,t)}return 57.2958*e}static degreesToRadians(e,t=!1){if(t){if(e>360)return r.degreesToRadians(e-360,t);if(e<0)return r.degreesToRadians(e+360,t)}return.0174533*e}static distance(){switch(a.Format.UnitSystem){case i.UnitSystem.Metric:return new l(a.Format.distance,new s({name:o.Strings.Unit.values.meters.name,abbreviation:o.Strings.Unit.values.meters.abbreviation},1));case i.UnitSystem.Imperial:return new l(a.Format.distance,new s({name:o.Strings.Unit.values.feet.name,abbreviation:o.Strings.Unit.values.feet.abbreviation},0,r.metersToFeet),new s({name:o.Strings.Unit.values.meters.name,abbreviation:o.Strings.Unit.values.meters.abbreviation},1,r.feetToMeters))}}static angle(e=!1){return new l((t=>a.Format.angle(t,e)),new s({name:o.Strings.Unit.values.degrees.name,abbreviation:o.Strings.Unit.values.degrees.abbreviation},0,(t=>r.radiansToDegrees(t,e))),new s({name:o.Strings.Unit.values.radians.name,abbreviation:o.Strings.Unit.values.radians.abbreviation},0,(t=>r.degreesToRadians(t,e))))}static percent(){return new l(a.Format.percent,new s({name:o.Strings.Unit.values.percent.name,abbreviation:o.Strings.Unit.values.percent.abbreviation},0,(e=>100*e)),new s({name:o.Strings.Unit.values.percent.name,abbreviation:o.Strings.Unit.values.percent.abbreviation},2,(e=>e/100)))}static velocityHorizontal(){switch(a.Format.UnitSystem){case i.UnitSystem.Metric:return new l(a.Format.velocityHorizontal,new s({name:o.Strings.Unit.values.kilometersPerHour.name,abbreviation:o.Strings.Unit.values.kilometersPerHour.abbreviation},1,r.metersPerSecondToKilometersPerHour),new s({name:o.Strings.Unit.values.metersPerSecond.name,abbreviation:o.Strings.Unit.values.metersPerSecond.abbreviation},1,r.kilometersPerHourToMetersPerSecond));case i.UnitSystem.Imperial:return new l(a.Format.velocityHorizontal,new s({name:o.Strings.Unit.values.milesPerHour.name,abbreviation:o.Strings.Unit.values.milesPerHour.abbreviation},1,r.metersPerSecondToMilesPerHour),new s({name:o.Strings.Unit.values.metersPerSecond.name,abbreviation:o.Strings.Unit.values.metersPerSecond.abbreviation},1,r.milesPerHourToMetersPerSecond))}}static velocityVertical(){switch(a.Format.UnitSystem){case i.UnitSystem.Metric:return new l(a.Format.velocityVertical,new s({name:o.Strings.Unit.values.metersPerSecond.name,abbreviation:o.Strings.Unit.values.metersPerSecond.abbreviation},1));case i.UnitSystem.Imperial:return new l(a.Format.velocityVertical,new s({name:o.Strings.Unit.values.feetPerSecond.name,abbreviation:o.Strings.Unit.values.feetPerSecond.abbreviation},1,r.metersToFeet),new s({name:o.Strings.Unit.values.metersPerSecond.name,abbreviation:o.Strings.Unit.values.metersPerSecond.abbreviation},1,r.feetToMeters))}}static velocityRotational(){return new l(a.Format.velocityRotational,new s({name:o.Strings.Unit.values.degreesPerSecond.name,abbreviation:o.Strings.Unit.values.degreesPerSecond.abbreviation},1,r.radiansToDegrees),new s({name:o.Strings.Unit.values.radiansPerSecond.name,abbreviation:o.Strings.Unit.values.radiansPerSecond.abbreviation},1,r.degreesToRadians))}static accelerationHorizontal(){switch(a.Format.UnitSystem){case i.UnitSystem.Metric:return new l(a.Format.accelerationHorizontal,new s({name:o.Strings.Unit.values.metersPerSecondSquared.name,abbreviation:o.Strings.Unit.values.metersPerSecondSquared.abbreviation},1));case i.UnitSystem.Imperial:return new l(a.Format.accelerationHorizontal,new s({name:o.Strings.Unit.values.feetPerSecondSquared.name,abbreviation:o.Strings.Unit.values.feetPerSecondSquared.abbreviation},1,r.metersToFeet),new s({name:o.Strings.Unit.values.metersPerSecondSquared.name,abbreviation:o.Strings.Unit.values.metersPerSecondSquared.abbreviation},1,r.feetToMeters))}}static accelerationVertical(){return r.accelerationHorizontal()}static accelerationRotational(){return new l(a.Format.accelerationRotational,new s({name:o.Strings.Unit.values.degreesPerSecondSquared.name,abbreviation:o.Strings.Unit.values.degreesPerSecondSquared.abbreviation},1,r.radiansToDegrees),new s({name:o.Strings.Unit.values.radiansPerSecondSquared.name,abbreviation:o.Strings.Unit.values.radiansPerSecondSquared.abbreviation},1,r.degreesToRadians))}static converters(e){switch(e){case i.MeasurementType.Distance:return r.distance();case i.MeasurementType.VelocityHorizontal:return r.velocityHorizontal();case i.MeasurementType.VelocityVertical:return r.velocityVertical();case i.MeasurementType.VelocityRotational:return r.velocityRotational();case i.MeasurementType.AccelerationHorizontal:return r.accelerationHorizontal();case i.MeasurementType.AccelerationVertical:return r.accelerationVertical();case i.MeasurementType.AccelerationRotational:return r.accelerationRotational();case i.MeasurementType.Angle:return r.angle();case i.MeasurementType.AngleMod:return r.angle(!0);case i.MeasurementType.Percent:return r.percent()}}static findStrings(e,t){const n=[];let i,o=/".*?"/g;for(;i=o.exec(e);){const e=i[0].replace(/"/g,"");t(e)&&n.push(e)}return n}}t.Convert=r;class s{constructor(e,t,n=null){this.unit=e,this.precision=t,this.convert=n||(e=>e)}get increment(){return 1/Math.pow(10,this.precision)}get incrementConverted(){return this.convert(this.increment)}display(e){return this.convert(e).toFixed(this.precision)}}t.Converter=s;class l{constructor(e,t,n=null){this.format=e,this.modelToUser=t,this.userToModel=n||t}}t.Converters=l},2838:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FormattedValue=t.Format=void 0;const o=n(750),a=n(4147),r=i(n(2077)),s=n(1747),l=n(5088);class c{static string(e){return a.Strings.getString(e,a.Strings.getLanguage(),!0)}static velocityHorizontal(e=0){switch(Math.abs(e)<.1&&(e=0),c.UnitSystem){case o.UnitSystem.Metric:return new u(c.number(s.Convert.metersPerSecondToKilometersPerHour(e)),{name:a.Strings.Unit.values.kilometersPerHour.name,abbreviation:a.Strings.Unit.values.kilometersPerHour.abbreviation});case o.UnitSystem.Imperial:return new u(c.number(s.Convert.metersPerSecondToMilesPerHour(e)),{name:a.Strings.Unit.values.milesPerHour.name,abbreviation:a.Strings.Unit.values.milesPerHour.abbreviation})}}static velocityVertical(e=0){switch(Math.abs(e)<.1&&(e=0),c.UnitSystem){case o.UnitSystem.Metric:return new u(c.number(e),{name:a.Strings.Unit.values.metersPerSecond.name,abbreviation:a.Strings.Unit.values.metersPerSecond.abbreviation});case o.UnitSystem.Imperial:return new u(c.number(s.Convert.metersToFeet(e)),{name:a.Strings.Unit.values.feetPerSecond.name,abbreviation:a.Strings.Unit.values.feetPerSecond.abbreviation})}}static velocityRotational(e=0){return new u(c.angle(e,!1,!0).value,{name:a.Strings.Unit.values.degreesPerSecond.name,abbreviation:a.Strings.Unit.values.degreesPerSecond.abbreviation})}static accelerationHorizontal(e=0){return new u(c.number(s.Convert.metersPerSecondToKilometersPerHour(e)),{name:a.Strings.Unit.values.metersPerSecondSquared.name,abbreviation:a.Strings.Unit.values.metersPerSecondSquared.abbreviation})}static accelerationVertical(e=0){return c.accelerationHorizontal(e)}static accelerationRotational(e=0){return new u(c.number(s.Convert.metersPerSecondToKilometersPerHour(e)),{name:a.Strings.Unit.values.degreesPerSecondSquared.name,abbreviation:a.Strings.Unit.values.degreesPerSecondSquared.abbreviation})}static timeElapsed(e=0){if(e>0&&e<1)return r.default(e).format("0.00");const t=c.time(e),n=[];return"0"!==t.hours.value&&n.push(t.hours.value),n.push(t.minutes.value.length<2?"0"+t.minutes.value:t.minutes.value),n.push(t.seconds.value.length<2?"0"+t.seconds.value:t.seconds.value),n.join(":")}static time(e=0){const t=Math.floor(e/3600),n=Math.floor((e-3600*t)/60),i=Math.floor(e-3600*t-60*n);return{hours:new u(String(t),{name:a.Strings.Unit.values.hours.name,abbreviation:a.Strings.Unit.values.hours.abbreviation}),minutes:new u(String(n),{name:a.Strings.Unit.values.minutes.name,abbreviation:a.Strings.Unit.values.minutes.abbreviation}),seconds:new u(String(i),{name:a.Strings.Unit.values.seconds.name,abbreviation:a.Strings.Unit.values.seconds.abbreviation})}}static distance(e=0,t=.1){switch(Math.abs(e)<t&&(e=0),c.UnitSystem){case o.UnitSystem.Metric:return e>1e3?new u(c.number(e/1e3),{name:a.Strings.Unit.values.kilometers.name,abbreviation:a.Strings.Unit.values.kilometers.abbreviation}):new u(c.number(e),{name:a.Strings.Unit.values.meters.name,abbreviation:a.Strings.Unit.values.meters.abbreviation});case o.UnitSystem.Imperial:return e>1609.34?new u(c.number(e/1609.34),{name:a.Strings.Unit.values.miles.name,abbreviation:a.Strings.Unit.values.miles.abbreviation}):new u(c.number(s.Convert.metersToFeet(e)),{name:a.Strings.Unit.values.feet.name,abbreviation:a.Strings.Unit.values.feet.abbreviation})}}static distanceOffset(e){return`${c.distance(e.magnitude,.01).toString()}  ${c.angle(e.direction,!0).toString()}`}static altitude(e=0){switch(Math.abs(e)<.1&&(e=0),c.UnitSystem){case o.UnitSystem.Metric:return new u(c.number(e),{name:a.Strings.Unit.values.meters.name,abbreviation:a.Strings.Unit.values.meters.abbreviation});case o.UnitSystem.Imperial:return new u(c.number(s.Convert.metersToFeet(e)),{name:a.Strings.Unit.values.feet.name,abbreviation:a.Strings.Unit.values.feet.abbreviation})}}static angle(e=0,t=!0,n=!1){if(Math.abs(e)<.01&&(e=0),t){if(e>2*Math.PI)return c.angle(e-2*Math.PI,t);if(e<0)return c.angle(e+2*Math.PI,t)}const i=s.Convert.radiansToDegrees(e);return new u(n&&i<10?r.default(i).format("0,0.0"):r.default(Math.round(i)).format("0,0"),{name:a.Strings.Unit.values.degrees.name,abbreviation:a.Strings.Unit.values.degrees.abbreviation},"")}static area(e=0){switch(c.UnitSystem){case o.UnitSystem.Metric:return new u(r.default(s.Convert.squareMetersToHectares(e)).format("0,0.0"),{name:a.Strings.Unit.values.hectare.name,abbreviation:a.Strings.Unit.values.hectare.abbreviation});case o.UnitSystem.Imperial:return new u(r.default(s.Convert.squareMetersToAcres(e)).format("0,0.0"),{name:a.Strings.Unit.values.acres.name,abbreviation:a.Strings.Unit.values.acres.abbreviation})}}static cameraSpecificationLength(e=0){return new u(r.default(e).format(Math.round(e)===e?"0,0":"0,0.00"),{name:a.Strings.Unit.values.millimeters.name,abbreviation:a.Strings.Unit.values.millimeters.abbreviation})}static cameraSpecificationPixels(e=0){return new u(r.default(Math.round(e)).format("0,0"),{name:a.Strings.Unit.values.pixels.name,abbreviation:a.Strings.Unit.values.pixels.abbreviation})}static groundSampleDistance(e){const t=Math.max(e.width,e.height);switch(c.UnitSystem){case o.UnitSystem.Metric:return new u(r.default(100*t).format("0,0.00"),{name:a.Strings.Unit.values.centimetersPerPixel.name,abbreviation:a.Strings.Unit.values.centimetersPerPixel.abbreviation});case o.UnitSystem.Imperial:return new u(r.default(s.Convert.metersToInches(t)).format("0,0.00"),{name:a.Strings.Unit.values.inchesPerPixel.name,abbreviation:a.Strings.Unit.values.inchesPerPixel.abbreviation})}}static groundSampleDistanceCombined(e){const t=Math.max(e.width,e.height),n=new u(r.default(s.Convert.metersToInches(t)).format("0,0.00"),{name:a.Strings.Unit.values.inchesPerPixel.name,abbreviation:a.Strings.Unit.values.inchesPerPixel.abbreviation}).toString(),i=new u(r.default(100*t).format("0,0.00"),{name:a.Strings.Unit.values.centimetersPerPixel.name,abbreviation:a.Strings.Unit.values.centimetersPerPixel.abbreviation}).toString();switch(c.UnitSystem){case o.UnitSystem.Metric:return l.Common.joinNotEmpty([i,n]);case o.UnitSystem.Imperial:return l.Common.joinNotEmpty([n,i])}}static absoluteTemperature(e=0){return`${c.integer(e)} ${a.Strings.Unit.values.kelvin.abbreviation}`}static percent(e=0){return new u(e<1e-5?"0":r.default(100*e).format(e<.01?"0,0.0":"0,0"),{name:a.Strings.Unit.values.percent.name,abbreviation:a.Strings.Unit.values.percent.abbreviation},"")}static number(e){return Math.abs(e)<10?Math.abs(e)<.01?"0":r.default(e).format("0,0.0"):c.integer(e)}static integer(e,t=null){const n=r.default(Math.round(e)).format("0,0");return t?1===Math.abs(e)?`${n} ${t.singular}`:`${n} ${t.plural}`:n}static degreesMinutesAndSeconds(e){const t=Math.abs(e),n=Math.floor(t),i=60*(t-n),o=Math.floor(i),r=Math.floor(60*(i-o));return n+a.Strings.Unit.values.degrees.abbreviation+o+a.Strings.Unit.values.geoMinutes.abbreviation+r+a.Strings.Unit.values.geoSeconds.abbreviation}static geoCoordinate(e,t=!1){if(t)return{latitude:new u(r.default(e.latitude).format("0,0.000000"),a.Strings.Unit.values.degrees),longitude:new u(r.default(e.longitude).format("0,0.000000"),a.Strings.Unit.values.degrees)};const n=Math.sign(e.latitude)>=0?{name:a.Strings.Unit.values.geoNorth.name,abbreviation:a.Strings.Unit.values.geoNorth.abbreviation}:{name:a.Strings.Unit.values.geoSouth.name,abbreviation:a.Strings.Unit.values.geoSouth.abbreviation},i=Math.sign(e.longitude)>=0?{name:a.Strings.Unit.values.geoEast.name,abbreviation:a.Strings.Unit.values.geoEast.abbreviation}:{name:a.Strings.Unit.values.geoWest.name,abbreviation:a.Strings.Unit.values.geoWest.abbreviation};return{latitude:new u(c.degreesMinutesAndSeconds(e.latitude),n),longitude:new u(c.degreesMinutesAndSeconds(e.longitude),i)}}static geoCoordinatePair(e,t=!0){const n=c.geoCoordinate(e,t);return l.Common.joinNotEmpty([n.latitude.toString(),n.longitude.toString()],", ")}static enum(e,t,n=!1){return c.string(`${e}.values.${t}.${n?"abbreviation":"name"}`)}static fileSize(e,t=1){if(0===e)return new u("0",a.Strings.Unit.values.bytes);const n=t<0?0:t,i=[a.Strings.Unit.values.bytes,a.Strings.Unit.values.kilobytes,a.Strings.Unit.values.megabytes,a.Strings.Unit.values.gigabytes];let o=Math.floor(Math.log(e)/Math.log(1024));return o>i.length-1&&(o=i.length-1),new u(String((e/Math.pow(1024,o)).toFixed(n)),i[o])}static icaoWords(e){const t=[];if(e<0)return t;let n,i=e+1;for(;0!==i;){let e=i-1;i=Math.floor(e/c.icaoAlphabet.length),n=e%c.icaoAlphabet.length,t.push(c.icaoAlphabet[n])}return t.reverse()}static icaoLetters(e){return c.icaoWords(e).map((e=>e.charAt(0))).join("")}}t.Format=c,c.UnitSystem=o.UnitSystem.Imperial,c.icaoAlphabet=["Alfa","Bravo","Charlie","Delta","Echo","Foxtrot","Golf","Hotel","India","Juliett","Kilo","Lima","Mike","November","Oscar","Papa","Quebec","Romeo","Sierra","Tango","Uniform","Victor","Whiskey","Xray","Yankee","Zulu"];class u{constructor(e,t,n=" "){this.toString=()=>`${this.value}${this.spacer}${this.unit.abbreviation}`,this.value=e,this.unit=t,this.spacer=n}}t.FormattedValue=u},8111:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Geometry=void 0;const i=n(6875),o=n(141),a=n(5088),r=n(2941),s=n(5732);class l{static angleDifferenceSigned(e,t){return Math.atan2(Math.sin(e-t),Math.cos(e-t))}static roundedCorners(e,t,n=!1){if(e.length<2)return[e];if(e.length<3)return[[e[0],e[1]]];n&&e.push(e[0]);const o=[[e[0]]];for(let n=1;n<e.length-1;n++){const a=e[n-1],s=e[n],l=e[n+1],c=new i.Point2(a.x-s.x,a.y-s.y).toVector2(),u=s.toVector2(),m=new i.Point2(l.x-s.x,l.y-s.y).toVector2();let d=10;t&&(d=Array.isArray(t)?t[n]:t),c.magnitude=Math.min(c.magnitude/2,d),m.magnitude=Math.min(m.magnitude/2,d);const p=new r.Bezier(u.add(c).toPoint2(),s,u.add(m).toPoint2());let h=Math.max(10,Math.floor(2*p.length()));h%2==1&&h++,p.getLUT(h).forEach(((e,t)=>{t===h/2&&o.push([]),o[o.length-1].push(new i.Point2(e.x,e.y))}))}if(n){const n=e[e.length-2],a=e[0],s=e[1],l=new i.Point2(n.x-a.x,n.y-a.y).toVector2(),c=a.toVector2(),u=new i.Point2(s.x-a.x,s.y-a.y).toVector2();let m=10;t&&(m=Array.isArray(t)?t[0]:t),l.magnitude=Math.min(l.magnitude/2,m),u.magnitude=Math.min(u.magnitude/2,m);const d=new r.Bezier(c.add(l).toPoint2(),a,c.add(u).toPoint2());let p=Math.max(10,Math.floor(2*d.length()));p%2==1&&p++;const h=d.getLUT(p).map((e=>new i.Point2(e.x,e.y)));o[o.length-1].push(...h.filter(((e,t)=>t<=p/2))),o[0].splice(0,1,...h.filter(((e,t)=>t>=p/2)))}else o[o.length-1].push(a.Common.last(e));return o}static cardinalSplinePoint2(e,t=!1,n=.5,o=100){if(e.length<2)return[e];if(e.length<3)return[[e[0],e[1]]];const a=[];e.forEach((e=>{a.push(e.x),a.push(e.y)}));const r=[[]],s=l.cardinalSpline(a,n,o,t);let c=0;for(let e=0;e<s.length;e+=2)1===r.length?r[c].length===o+1&&(r[++c]=[]):r[c].length===o&&e<s.length-2&&(r[++c]=[]),r[c].push(new i.Point2(s[e],s[e+1]));return r}static cardinalSpline(e,t=.5,n=100,i=!1){let o,a=1,r=e.length,s=0,l=new Float32Array((r-2)*n+2+(i?2*n:0)),c=new Float32Array(4*(n+2)),u=4;for(o=e.slice(0),i?(o.unshift(e[r-1]),o.unshift(e[r-2]),o.push(e[0],e[1])):(o.unshift(e[1]),o.unshift(e[0]),o.push(e[r-2],e[r-1])),c[0]=1;a<n;a++){let e=a/n,t=e*e,i=t*e,o=2*i,r=3*t;c[u++]=o-r+1,c[u++]=r-o,c[u++]=i-2*t+e,c[u++]=i-t}c[++u]=1;const m=(e,i,o)=>{for(let a,r=2;r<o;r+=2){let o=e[r],c=e[r+1],u=e[r+2],m=e[r+3],d=(u-e[r-2])*t,p=(m-e[r-1])*t,h=(e[r+4]-o)*t,f=(e[r+5]-c)*t;for(a=0;a<n;a++){let e=a<<2,t=i[e],n=i[e+1],r=i[e+2],g=i[e+3];l[s++]=t*o+n*u+r*d+g*h,l[s++]=t*c+n*m+r*p+g*f}}};return m(o,c,r),i&&(o=[],o.push(e[r-4],e[r-3],e[r-2],e[r-1]),o.push(e[0],e[1],e[2],e[3]),m(o,c,4)),r=i?0:e.length-2,l[s++]=e[r],l[s]=e[r+1],l}static polygonSegements(e){return e.length<2?[]:e.map(((t,n)=>new o.Line2(t,e[a.Common.modSafe(n+1,e.length)])))}static polygonArea(e){let t=0,n=e.length-1;for(let i=0;i<e.length;i++)t+=(e[n].x+e[i].x)*(e[n].y-e[i].y),n=i;return Math.abs(t/2)}static polygonPointInside(e,t){const{x:n,y:i}=e;let o=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let r=t[e].x,s=t[e].y,l=t[a].x,c=t[a].y;s>i!=c>i&&n<(l-r)*(i-s)/(c-s)+r&&(o=!o)}return o}static circlePointInside(e,t){return t.distance(e.center)<e.radius}static lineClosestPoint(e,t=new i.Point2){var n=e.b.x-e.a.x,o=e.b.y-e.a.y,a=n*n+o*o,r=(t.x-e.a.x)*n+(t.y-e.a.y)*o,s=Math.min(1,Math.max(0,0===a?0:r/a));return r=(e.b.x-e.a.x)*(t.y-e.a.y)-(e.b.y-e.a.y)*(t.x-e.a.x),new i.Point2(e.a.x+n*s,e.a.y+o*s)}static polygonClosestPoint(e,t){const n=[];return l.polygonSegements(e).forEach(((e,i)=>{const o=l.lineClosestPoint(e,t);o&&n.push({point:o,segmentIndex:i})})),0===n.length?{point:t,segmentIndex:0}:(n.sort(((e,n)=>t.distance(e.point)-t.distance(n.point))),n[0])}static lineIntersectionLine(e,t){if(e.a.x===e.b.x&&e.a.y===e.b.y||t.a.x===t.b.x&&t.a.y===t.b.y)return null;const n=(t.b.y-t.a.y)*(e.b.x-e.a.x)-(t.b.x-t.a.x)*(e.b.y-e.a.y);if(0===n)return null;let o=((t.b.x-t.a.x)*(e.a.y-t.a.y)-(t.b.y-t.a.y)*(e.a.x-t.a.x))/n,a=((e.b.x-e.a.x)*(e.a.y-t.a.y)-(e.b.y-e.a.y)*(e.a.x-t.a.x))/n;return o<0||o>1||a<0||a>1?null:new i.Point2(e.a.x+o*(e.b.x-e.a.x),e.a.y+o*(e.b.y-e.a.y))}static lineIntersectionsCircle(e,t){var n,o,a,r,s,l,c;if(c={x:0,y:0},(l={x:0,y:0}).x=e.b.x-e.a.x,l.y=e.b.y-e.a.y,c.x=e.a.x-t.center.x,c.y=e.a.y-t.center.y,n=l.x*c.x+l.y*c.y,o=2*(l.x*l.x+l.y*l.y),n*=-2,a=Math.sqrt(n*n-2*o*(c.x*c.x+c.y*c.y-t.radius*t.radius)),isNaN(a))return null;r=(n-a)/o,s=(n+a)/o;const u=new i.Point2,m=new i.Point2,d=[];return r<=1&&r>=0&&(u.x=e.a.x+l.x*r,u.y=e.a.y+l.y*r,d[0]=u),s<=1&&s>=0&&(m.x=e.a.x+l.x*s,m.y=e.a.y+l.y*s,d[d.length]=m),d.length>0?d:null}static lineIntersectionsPolygon(e,t){const n=[];return l.polygonSegements(t).forEach(((t,i)=>{const o=l.lineIntersectionLine(e,t);o&&n.push({point:o,segmentIndex:i})})),n.sort(((t,n)=>e.a.distance(t.point)-e.a.distance(n.point))),n.length>0?n:null}static convexHull(e){return s(e).map((e=>new i.Point2(e.x,e.y))).reverse()}}t.Geometry=l},1154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Kinematic=void 0;class n{static t1(e,t){return 0===e?0:t/e}static t2(e,t,n){if(0===t)return 0;const i=e+2*t*n;return i<=0?0:(-e+Math.sqrt(i))/t}static d1(e,t){return e*t}static d2(e,t,n){return(e+t)/2*n}static d3(e,t,n){return e*n+.5*t*Math.pow(n,2)}static d4(e,t,n){return(Math.pow(t,2)-Math.pow(e,2))/(2*n)}static v1(e,t){return n.v2(0,e,t)}static v2(e,t,n){return e+t*n}static v3(e,t,n){return Math.sqrt(Math.pow(e,2)+2*t*n)}static v4(e,t){return 0===t?0:e/t}static tLine(e,t,i,o,a=0){if(o<=0)return 0;(a<=0||a>o)&&(a=o);const r=n.d4(0,e,i),s=n.d4(0,e,-t),l=o-r-s;if(l>0){const c=n.t2(0,i,r),u=n.t1(e,l),m=n.t2(0,-t,s);return a===o?c+u+m:a>r+l?c+u+(m-n.t2(0,-t,s-(a-l-r))):a>r?c+n.t1(e,a-r):n.t2(0,i,a)}const c=o*(r/(r+s)),u=o-c,m=n.t2(0,i,c),d=n.t2(0,-t,u);return a===o?m+d:a>c?m+(d-n.t2(0,-t,u-(a-c))):n.t2(0,i,a)}static vLine(e,t,i,o,a){return a<=0||a>=o?0:a<n.d4(0,e,i)?n.v3(0,i,a):o-a<n.d4(0,e,-t)?n.v3(0,-t,o-a):e}static dampen(e,t,n=2){return Math.abs(e)<t?t*Math.pow(Math.abs(e)/t,n):e}}t.Kinematic=n},4927:(e,t,n)=>{function i(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},9881:e=>{e.exports={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}}},7888:(e,t,n)=>{var i=n(1229),o=n(1388),a=n(6501),r=n(4673);e.exports={xml2js:i,xml2json:o,js2xml:a,json2xml:r}},6501:(e,t,n)=>{var i,o,a=n(4740),r=n(9881).isArray;function s(e,t,n){return(!n&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function l(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,o,i));var a,r,l,c,u=[];for(a in e)e.hasOwnProperty(a)&&null!==e[a]&&void 0!==e[a]&&(c=t.noQuotesForNativeAttributes&&"string"!=typeof e[a]?"":'"',r=(r=""+e[a]).replace(/"/g,"&quot;"),l="attributeNameFn"in t?t.attributeNameFn(a,r,o,i):a,u.push(t.spaces&&t.indentAttributes?s(t,n+1,!1):" "),u.push(l+"="+c+("attributeValueFn"in t?t.attributeValueFn(r,a,o,i):r)+c));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&u.push(s(t,n,!1)),u.join("")}function c(e,t,n){return i=e,o="xml",t.ignoreDeclaration?"":"<?xml"+l(e[t.attributesKey],t,n)+"?>"}function u(e,t,n){if(t.ignoreInstruction)return"";var a;for(a in e)if(e.hasOwnProperty(a))break;var r="instructionNameFn"in t?t.instructionNameFn(a,e[a],o,i):a;if("object"==typeof e[a])return i=e,o=r,"<?"+r+l(e[a][t.attributesKey],t,n)+"?>";var s=e[a]?e[a]:"";return"instructionFn"in t&&(s=t.instructionFn(s,a,o,i)),"<?"+r+(s?" "+s:"")+"?>"}function m(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,o,i):e)+"--\x3e"}function d(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,o,i):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function p(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,o,i):e)+">"}function h(e,t){return t.ignoreText?"":(e=(e=(e=""+e).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,o,i):e)}function f(e,t,n,a){return e.reduce((function(e,r){var c=s(t,n,a&&!e);switch(r.type){case"element":return e+c+function(e,t,n){i=e,o=e.name;var a=[],r="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;a.push("<"+r),e[t.attributesKey]&&a.push(l(e[t.attributesKey],t,n));var s=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&"preserve"===e[t.attributesKey]["xml:space"];return s||(s="fullTagEmptyElementFn"in t?t.fullTagEmptyElementFn(e.name,e):t.fullTagEmptyElement),s?(a.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(a.push(f(e[t.elementsKey],t,n+1)),i=e,o=e.name),a.push(t.spaces&&function(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;case"doctype":case"comment":case"element":default:return!0}return!1}(e,t)?"\n"+Array(n+1).join(t.spaces):""),a.push("</"+r+">")):a.push("/>"),a.join("")}(r,t,n);case"comment":return e+c+m(r[t.commentKey],t);case"doctype":return e+c+p(r[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?c:"")+d(r[t.cdataKey],t);case"text":return e+(t.indentText?c:"")+h(r[t.textKey],t);case"instruction":var g={};return g[r[t.nameKey]]=r[t.attributesKey]?r:r[t.instructionKey],e+(t.indentInstruction?c:"")+u(g,t,n)}}),"")}function g(e,t,n){var i;for(i in e)if(e.hasOwnProperty(i))switch(i){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:default:return!0}return!1}function y(e,t,n,a,r){i=e,o=t;var c="elementNameFn"in n?n.elementNameFn(t,e):t;if(null==e||""===e)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+c+"></"+c+">":"<"+c+"/>";var u=[];if(t){if(u.push("<"+c),"object"!=typeof e)return u.push(">"+h(e,n)+"</"+c+">"),u.join("");e[n.attributesKey]&&u.push(l(e[n.attributesKey],n,a));var m=g(e,n,!0)||e[n.attributesKey]&&"preserve"===e[n.attributesKey]["xml:space"];if(m||(m="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(t,e):n.fullTagEmptyElement),!m)return u.push("/>"),u.join("");u.push(">")}return u.push(C(e,n,a+1,!1)),i=e,o=t,t&&u.push((r?s(n,a,!1):"")+"</"+c+">"),u.join("")}function C(e,t,n,i){var o,a,l,f=[];for(a in e)if(e.hasOwnProperty(a))for(l=r(e[a])?e[a]:[e[a]],o=0;o<l.length;++o){switch(a){case t.declarationKey:f.push(c(l[o],t,n));break;case t.instructionKey:f.push((t.indentInstruction?s(t,n,i):"")+u(l[o],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:f.push((t.indentText?s(t,n,i):"")+h(l[o],t));break;case t.cdataKey:f.push((t.indentCdata?s(t,n,i):"")+d(l[o],t));break;case t.doctypeKey:f.push(s(t,n,i)+p(l[o],t));break;case t.commentKey:f.push(s(t,n,i)+m(l[o],t));break;default:f.push(s(t,n,i)+y(l[o],a,t,n,g(l[o],t)))}i=i&&!f.length}return f.join("")}e.exports=function(e,t){t=function(e){var t=a.copyOptions(e);return a.ensureFlagExists("ignoreDeclaration",t),a.ensureFlagExists("ignoreInstruction",t),a.ensureFlagExists("ignoreAttributes",t),a.ensureFlagExists("ignoreText",t),a.ensureFlagExists("ignoreComment",t),a.ensureFlagExists("ignoreCdata",t),a.ensureFlagExists("ignoreDoctype",t),a.ensureFlagExists("compact",t),a.ensureFlagExists("indentText",t),a.ensureFlagExists("indentCdata",t),a.ensureFlagExists("indentAttributes",t),a.ensureFlagExists("indentInstruction",t),a.ensureFlagExists("fullTagEmptyElement",t),a.ensureFlagExists("noQuotesForNativeAttributes",t),a.ensureSpacesExists(t),"number"==typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),a.ensureKeyExists("declaration",t),a.ensureKeyExists("instruction",t),a.ensureKeyExists("attributes",t),a.ensureKeyExists("text",t),a.ensureKeyExists("comment",t),a.ensureKeyExists("cdata",t),a.ensureKeyExists("doctype",t),a.ensureKeyExists("type",t),a.ensureKeyExists("name",t),a.ensureKeyExists("elements",t),a.checkFnExists("doctype",t),a.checkFnExists("instruction",t),a.checkFnExists("cdata",t),a.checkFnExists("comment",t),a.checkFnExists("text",t),a.checkFnExists("instructionName",t),a.checkFnExists("elementName",t),a.checkFnExists("attributeName",t),a.checkFnExists("attributeValue",t),a.checkFnExists("attributes",t),a.checkFnExists("fullTagEmptyElement",t),t}(t);var n=[];return i=e,o="_root_",t.compact?n.push(C(e,t,0,!0)):(e[t.declarationKey]&&n.push(c(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(f(e[t.elementsKey],t,0,!n.length))),n.join("")}},4673:(e,t,n)=>{var i=n(6501);e.exports=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw new Error("The JSON structure is invalid")}else n=e;return i(n,t)}},4740:(e,t,n)=>{var i=n(9881).isArray;e.exports={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){e in t&&"boolean"==typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!=typeof e.spaces&&"string"!=typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){"alwaysArray"in e&&("boolean"==typeof e.alwaysArray||i(e.alwaysArray))||(e.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"==typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}}},1229:(e,t,n)=>{var i,o,a=n(6099),r=n(4740),s=n(9881).isArray;function l(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}function c(e,t){var n;if(i.compact){if(!o[i[e+"Key"]]&&(s(i.alwaysArray)?-1!==i.alwaysArray.indexOf(i[e+"Key"]):i.alwaysArray)&&(o[i[e+"Key"]]=[]),o[i[e+"Key"]]&&!s(o[i[e+"Key"]])&&(o[i[e+"Key"]]=[o[i[e+"Key"]]]),e+"Fn"in i&&"string"==typeof t&&(t=i[e+"Fn"](t,o)),"instruction"===e&&("instructionFn"in i||"instructionNameFn"in i))for(n in t)if(t.hasOwnProperty(n))if("instructionFn"in i)t[n]=i.instructionFn(t[n],n,o);else{var a=t[n];delete t[n],t[i.instructionNameFn(n,a,o)]=a}s(o[i[e+"Key"]])?o[i[e+"Key"]].push(t):o[i[e+"Key"]]=t}else{o[i.elementsKey]||(o[i.elementsKey]=[]);var r={};if(r[i.typeKey]=e,"instruction"===e){for(n in t)if(t.hasOwnProperty(n))break;r[i.nameKey]="instructionNameFn"in i?i.instructionNameFn(n,t,o):n,i.instructionHasAttributes?(r[i.attributesKey]=t[n][i.attributesKey],"instructionFn"in i&&(r[i.attributesKey]=i.instructionFn(r[i.attributesKey],n,o))):("instructionFn"in i&&(t[n]=i.instructionFn(t[n],n,o)),r[i.instructionKey]=t[n])}else e+"Fn"in i&&(t=i[e+"Fn"](t,o)),r[i[e+"Key"]]=t;i.addParent&&(r[i.parentKey]=o),o[i.elementsKey].push(r)}}function u(e){var t;if("attributesFn"in i&&e&&(e=i.attributesFn(e,o)),(i.trim||"attributeValueFn"in i||"attributeNameFn"in i||i.nativeTypeAttributes)&&e)for(t in e)if(e.hasOwnProperty(t)&&(i.trim&&(e[t]=e[t].trim()),i.nativeTypeAttributes&&(e[t]=l(e[t])),"attributeValueFn"in i&&(e[t]=i.attributeValueFn(e[t],t,o)),"attributeNameFn"in i)){var n=e[t];delete e[t],e[i.attributeNameFn(t,e[t],o)]=n}return e}function m(e){var t={};if(e.body&&("xml"===e.name.toLowerCase()||i.instructionHasAttributes)){for(var n,a=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(n=a.exec(e.body));)t[n[1]]=n[2]||n[3]||n[4];t=u(t)}if("xml"===e.name.toLowerCase()){if(i.ignoreDeclaration)return;o[i.declarationKey]={},Object.keys(t).length&&(o[i.declarationKey][i.attributesKey]=t),i.addParent&&(o[i.declarationKey][i.parentKey]=o)}else{if(i.ignoreInstruction)return;i.trim&&(e.body=e.body.trim());var r={};i.instructionHasAttributes&&Object.keys(t).length?(r[e.name]={},r[e.name][i.attributesKey]=t):r[e.name]=e.body,c("instruction",r)}}function d(e,t){var n;if("object"==typeof e&&(t=e.attributes,e=e.name),t=u(t),"elementNameFn"in i&&(e=i.elementNameFn(e,o)),i.compact){var a;if(n={},!i.ignoreAttributes&&t&&Object.keys(t).length)for(a in n[i.attributesKey]={},t)t.hasOwnProperty(a)&&(n[i.attributesKey][a]=t[a]);!(e in o)&&(s(i.alwaysArray)?-1!==i.alwaysArray.indexOf(e):i.alwaysArray)&&(o[e]=[]),o[e]&&!s(o[e])&&(o[e]=[o[e]]),s(o[e])?o[e].push(n):o[e]=n}else o[i.elementsKey]||(o[i.elementsKey]=[]),(n={})[i.typeKey]="element",n[i.nameKey]=e,!i.ignoreAttributes&&t&&Object.keys(t).length&&(n[i.attributesKey]=t),i.alwaysChildren&&(n[i.elementsKey]=[]),o[i.elementsKey].push(n);n[i.parentKey]=o,o=n}function p(e){i.ignoreText||(e.trim()||i.captureSpacesBetweenElements)&&(i.trim&&(e=e.trim()),i.nativeType&&(e=l(e)),i.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),c("text",e))}function h(e){i.ignoreComment||(i.trim&&(e=e.trim()),c("comment",e))}function f(e){var t=o[i.parentKey];i.addParent||delete o[i.parentKey],o=t}function g(e){i.ignoreCdata||(i.trim&&(e=e.trim()),c("cdata",e))}function y(e){i.ignoreDoctype||(e=e.replace(/^ /,""),i.trim&&(e=e.trim()),c("doctype",e))}function C(e){e.note=e}e.exports=function(e,t){var n=a.parser(!0,{}),s={};if(o=s,i=function(e){return i=r.copyOptions(e),r.ensureFlagExists("ignoreDeclaration",i),r.ensureFlagExists("ignoreInstruction",i),r.ensureFlagExists("ignoreAttributes",i),r.ensureFlagExists("ignoreText",i),r.ensureFlagExists("ignoreComment",i),r.ensureFlagExists("ignoreCdata",i),r.ensureFlagExists("ignoreDoctype",i),r.ensureFlagExists("compact",i),r.ensureFlagExists("alwaysChildren",i),r.ensureFlagExists("addParent",i),r.ensureFlagExists("trim",i),r.ensureFlagExists("nativeType",i),r.ensureFlagExists("nativeTypeAttributes",i),r.ensureFlagExists("sanitize",i),r.ensureFlagExists("instructionHasAttributes",i),r.ensureFlagExists("captureSpacesBetweenElements",i),r.ensureAlwaysArrayExists(i),r.ensureKeyExists("declaration",i),r.ensureKeyExists("instruction",i),r.ensureKeyExists("attributes",i),r.ensureKeyExists("text",i),r.ensureKeyExists("comment",i),r.ensureKeyExists("cdata",i),r.ensureKeyExists("doctype",i),r.ensureKeyExists("type",i),r.ensureKeyExists("name",i),r.ensureKeyExists("elements",i),r.ensureKeyExists("parent",i),r.checkFnExists("doctype",i),r.checkFnExists("instruction",i),r.checkFnExists("cdata",i),r.checkFnExists("comment",i),r.checkFnExists("text",i),r.checkFnExists("instructionName",i),r.checkFnExists("elementName",i),r.checkFnExists("attributeName",i),r.checkFnExists("attributeValue",i),r.checkFnExists("attributes",i),i}(t),n.opt={strictEntities:!0},n.onopentag=d,n.ontext=p,n.oncomment=h,n.onclosetag=f,n.onerror=C,n.oncdata=g,n.ondoctype=y,n.onprocessinginstruction=m,n.write(e).close(),s[i.elementsKey]){var l=s[i.elementsKey];delete s[i.elementsKey],s[i.elementsKey]=l,delete s.text}return s}},1388:(e,t,n)=>{var i=n(4740),o=n(1229);e.exports=function(e,t){var n,a,r;return n=function(e){var t=i.copyOptions(e);return i.ensureSpacesExists(t),t}(t),a=o(e,n),r="compact"in n&&n.compact?"_parent":"parent",("addParent"in n&&n.addParent?JSON.stringify(a,(function(e,t){return e===r?"_":t}),n.spaces):JSON.stringify(a,null,n.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},7557:function(e){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},9335:function(e){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},8369:function(e){(function(){var t,n,i,o,a,r,s,l={}.hasOwnProperty;t=function(e,...t){var n,i,o,r;if(a(Object.assign))Object.assign.apply(null,arguments);else for(n=0,o=t.length;n<o;n++)if(null!=(r=t[n]))for(i in r)l.call(r,i)&&(e[i]=r[i]);return e},a=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},r=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},i=function(e){return a(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},o=function(e){var t;if(i(e))return!e.length;for(t in e)if(l.call(e,t))return!1;return!0},s=function(e){var t,n;return r(e)&&(n=Object.getPrototypeOf(e))&&(t=n.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},n=function(e){return a(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=a,e.exports.isObject=r,e.exports.isArray=i,e.exports.isEmpty=o,e.exports.isPlainObject=s,e.exports.getValue=n}).call(this)},594:function(e){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},2750:function(e,t,n){(function(){var t;t=n(9335),n(2026),e.exports=function(){class e{constructor(e,n,i){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==n)throw new Error("Missing attribute name. "+this.debugInfo(n));this.name=this.stringify.name(n),this.value=this.stringify.attValue(i),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}clone(){return Object.create(this)}toString(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))}debugInfo(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"}isEqualNode(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value}}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e}.call(this)}).call(this)},6170:function(e,t,n){(function(){var t,i;t=n(9335),i=n(6488),e.exports=class extends i{constructor(e,n){if(super(e),null==n)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(n)}clone(){return Object.create(this)}toString(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))}}}).call(this)},6488:function(e,t,n){(function(){var t;t=n(2026),e.exports=function(){class e extends t{constructor(e){super(e),this.value=""}clone(){return Object.create(this)}substringData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendData(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}insertData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}deleteData(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceData(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){return!!super.isEqualNode(e)&&e.data===this.data}}return Object.defineProperty(e.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),e}.call(this)}).call(this)},2096:function(e,t,n){(function(){var t,i;t=n(9335),i=n(6488),e.exports=class extends i{constructor(e,n){if(super(e),null==n)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(n)}clone(){return Object.create(this)}toString(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))}}}).call(this)},383:function(e,t,n){(function(){var t,i;t=n(3933),i=n(6210),e.exports=function(){class e{constructor(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}getParameter(e){return this.params.hasOwnProperty(e)?this.params[e]:null}canSetParameter(e,t){return!0}setParameter(e,t){return null!=t?this.params[e]=t:delete this.params[e]}}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new i(Object.keys(this.defaultParams))}}),e}.call(this)}).call(this)},3933:function(e){(function(){e.exports=class{constructor(){}handleError(e){throw new Error(e)}}}).call(this)},1770:function(e){(function(){e.exports=class{hasFeature(e,t){return!0}createDocumentType(e,t,n){throw new Error("This DOM method is not implemented.")}createDocument(e,t,n){throw new Error("This DOM method is not implemented.")}createHTMLDocument(e){throw new Error("This DOM method is not implemented.")}getFeature(e,t){throw new Error("This DOM method is not implemented.")}}}).call(this)},6210:function(e){(function(){e.exports=function(){class e{constructor(e){this.arr=e||[]}item(e){return this.arr[e]||null}contains(e){return-1!==this.arr.indexOf(e)}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e}.call(this)}).call(this)},1179:function(e,t,n){(function(){var t,i;i=n(2026),t=n(9335),e.exports=class extends i{constructor(e,n,i,o,a,r){if(super(e),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==i)throw new Error("Missing DTD attribute name. "+this.debugInfo(n));if(!o)throw new Error("Missing DTD attribute type. "+this.debugInfo(n));if(!a)throw new Error("Missing DTD attribute default. "+this.debugInfo(n));if(0!==a.indexOf("#")&&(a="#"+a),!a.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(n));if(r&&!a.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(n));this.elementName=this.stringify.name(n),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(i),this.attributeType=this.stringify.dtdAttType(o),r&&(this.defaultValue=this.stringify.dtdAttDefault(r)),this.defaultValueType=a}toString(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))}}}).call(this)},6347:function(e,t,n){(function(){var t,i;i=n(2026),t=n(9335),e.exports=class extends i{constructor(e,n,i){if(super(e),null==n)throw new Error("Missing DTD element name. "+this.debugInfo());i||(i="(#PCDATA)"),Array.isArray(i)&&(i="("+i.join(",")+")"),this.name=this.stringify.name(n),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(i)}toString(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))}}}).call(this)},9078:function(e,t,n){(function(){var t,i,o;({isObject:o}=n(8369)),i=n(2026),t=n(9335),e.exports=function(){class e extends i{constructor(e,n,i,a){if(super(e),null==i)throw new Error("Missing DTD entity name. "+this.debugInfo(i));if(null==a)throw new Error("Missing DTD entity value. "+this.debugInfo(i));if(this.pe=!!n,this.name=this.stringify.name(i),this.type=t.EntityDeclaration,o(a)){if(!a.pubID&&!a.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(i));if(a.pubID&&!a.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(i));if(this.internal=!1,null!=a.pubID&&(this.pubID=this.stringify.dtdPubID(a.pubID)),null!=a.sysID&&(this.sysID=this.stringify.dtdSysID(a.sysID)),null!=a.nData&&(this.nData=this.stringify.dtdNData(a.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(i))}else this.value=this.stringify.dtdEntityValue(a),this.internal=!0}toString(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return null}}),e}.call(this)}).call(this)},4777:function(e,t,n){(function(){var t,i;i=n(2026),t=n(9335),e.exports=function(){class e extends i{constructor(e,n,i){if(super(e),null==n)throw new Error("Missing DTD notation name. "+this.debugInfo(n));if(!i.pubID&&!i.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(n));this.name=this.stringify.name(n),this.type=t.NotationDeclaration,null!=i.pubID&&(this.pubID=this.stringify.dtdPubID(i.pubID)),null!=i.sysID&&(this.sysID=this.stringify.dtdSysID(i.sysID))}toString(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),e}.call(this)}).call(this)},9077:function(e,t,n){(function(){var t,i,o;({isObject:o}=n(8369)),i=n(2026),t=n(9335),e.exports=class extends i{constructor(e,n,i,a){super(e),o(n)&&({version:n,encoding:i,standalone:a}=n),n||(n="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(n),null!=i&&(this.encoding=this.stringify.xmlEncoding(i)),null!=a&&(this.standalone=this.stringify.xmlStandalone(a))}toString(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))}}}).call(this)},6544:function(e,t,n){(function(){var t,i,o,a,r,s,l,c;({isObject:c}=n(8369)),l=n(2026),t=n(9335),i=n(1179),a=n(9078),o=n(6347),r=n(4777),s=n(663),e.exports=function(){class e extends l{constructor(e,n,i){var o,a,r,s;if(super(e),this.type=t.DocType,e.children)for(a=0,r=(s=e.children).length;a<r;a++)if((o=s[a]).type===t.Element){this.name=o.name;break}this.documentObject=e,c(n)&&({pubID:n,sysID:i}=n),null==i&&([i,n]=[n,i]),null!=n&&(this.pubID=this.stringify.dtdPubID(n)),null!=i&&(this.sysID=this.stringify.dtdSysID(i))}element(e,t){var n;return n=new o(this,e,t),this.children.push(n),this}attList(e,t,n,o,a){var r;return r=new i(this,e,t,n,o,a),this.children.push(r),this}entity(e,t){var n;return n=new a(this,!1,e,t),this.children.push(n),this}pEntity(e,t){var n;return n=new a(this,!0,e,t),this.children.push(n),this}notation(e,t){var n;return n=new r(this,e,t),this.children.push(n),this}toString(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))}ele(e,t){return this.element(e,t)}att(e,t,n,i,o){return this.attList(e,t,n,i,o)}ent(e,t){return this.entity(e,t)}pent(e,t){return this.pEntity(e,t)}not(e,t){return this.notation(e,t)}up(){return this.root()||this.documentObject}isEqualNode(e){return!!super.isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId}}return Object.defineProperty(e.prototype,"entities",{get:function(){var e,n,i,o,a;for(o={},n=0,i=(a=this.children).length;n<i;n++)(e=a[n]).type!==t.EntityDeclaration||e.pe||(o[e.name]=e);return new s(o)}}),Object.defineProperty(e.prototype,"notations",{get:function(){var e,n,i,o,a;for(o={},n=0,i=(a=this.children).length;n<i;n++)(e=a[n]).type===t.NotationDeclaration&&(o[e.name]=e);return new s(o)}}),Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e}.call(this)}).call(this)},6934:function(e,t,n){(function(){var t,i,o,a,r,s,l;({isPlainObject:l}=n(8369)),o=n(1770),i=n(383),a=n(2026),t=n(9335),s=n(5549),r=n(6434),e.exports=function(){class e extends a{constructor(e){super(null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new i,e||(e={}),e.writer||(e.writer=new r),this.options=e,this.stringify=new s(e)}end(e){var t;return t={},e?l(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))}toString(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))}createElement(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createDocumentFragment(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTextNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createComment(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createCDATASection(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createProcessingInstruction(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttribute(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEntityReference(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}importNode(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createElementNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}createAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementById(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}adoptNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalizeDocument(){throw new Error("This DOM method is not implemented."+this.debugInfo())}renameNode(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createEvent(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}createRange(){throw new Error("This DOM method is not implemented."+this.debugInfo())}createNodeIterator(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}createTreeWalker(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(e.prototype,"implementation",{value:new o}),Object.defineProperty(e.prototype,"doctype",{get:function(){var e,n,i,o;for(n=0,i=(o=this.children).length;n<i;n++)if((e=o[n]).type===t.DocType)return e;return null}}),Object.defineProperty(e.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(e.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(e.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(e.prototype,"origin",{get:function(){return null}}),Object.defineProperty(e.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(e.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(e.prototype,"contentType",{get:function(){return null}}),e}.call(this)}).call(this)},9227:function(e,t,n){(function(){var t,i,o,a,r,s,l,c,u,m,d,p,h,f,g,y,C,v,b,S,w,M,x={}.hasOwnProperty;({isObject:w,isFunction:S,isPlainObject:M,getValue:b}=n(8369)),t=n(9335),p=n(6934),h=n(2161),a=n(6170),r=n(2096),g=n(9406),v=n(3595),f=n(9181),m=n(9077),d=n(6544),s=n(1179),c=n(9078),l=n(6347),u=n(4777),o=n(2750),C=n(5549),y=n(6434),i=n(594),e.exports=class{constructor(e,n,i){var o;this.name="?xml",this.type=t.Document,e||(e={}),o={},e.writer?M(e.writer)&&(o=e.writer,e.writer=new y):e.writer=new y,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(o),this.stringify=new C(e),this.onDataCallback=n||function(){},this.onEndCallback=i||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}createChildNode(e){var n,i,o,a,r,s,l,c;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(i in o={},l=e.attribs)x.call(l,i)&&(n=l[i],o[i]=n.value);this.node(e.name,o);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(r=0,s=(c=e.children).length;r<s;r++)a=c[r],this.createChildNode(a),a.type===t.Element&&this.up();return this}dummy(){return this}node(e,t,n){if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=b(e),null==t&&(t={}),t=b(t),w(t)||([n,t]=[t,n]),this.currentNode=new h(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=n&&this.text(n),this}element(e,n,i){var o,a,r,s,l,c;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement(...arguments);else if(Array.isArray(e)||w(e)||S(e))for(s=this.options.noValidation,this.options.noValidation=!0,(c=new p(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=s,a=0,r=(l=c.children).length;a<r;a++)o=l[a],this.createChildNode(o),o.type===t.Element&&this.up();else this.node(e,n,i);return this}attribute(e,t){var n,i;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=b(e)),w(e))for(n in e)x.call(e,n)&&(i=e[n],this.attribute(n,i));else S(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new o(this,e,""):null!=t&&(this.currentNode.attribs[e]=new o(this,e,t));return this}text(e){var t;return this.openCurrent(),t=new v(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}cdata(e){var t;return this.openCurrent(),t=new a(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}comment(e){var t;return this.openCurrent(),t=new r(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}raw(e){var t;return this.openCurrent(),t=new g(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}instruction(e,t){var n,i,o,a,r;if(this.openCurrent(),null!=e&&(e=b(e)),null!=t&&(t=b(t)),Array.isArray(e))for(n=0,a=e.length;n<a;n++)i=e[n],this.instruction(i);else if(w(e))for(i in e)x.call(e,i)&&(o=e[i],this.instruction(i,o));else S(t)&&(t=t.apply()),r=new f(this,e,t),this.onData(this.writer.processingInstruction(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this}declaration(e,t,n){var i;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return i=new m(this,e,t,n),this.onData(this.writer.declaration(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}doctype(e,t,n){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new d(this,t,n),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this}dtdElement(e,t){var n;return this.openCurrent(),n=new l(this,e,t),this.onData(this.writer.dtdElement(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}attList(e,t,n,i,o){var a;return this.openCurrent(),a=new s(this,e,t,n,i,o),this.onData(this.writer.dtdAttList(a,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}entity(e,t){var n;return this.openCurrent(),n=new c(this,!1,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}pEntity(e,t){var n;return this.openCurrent(),n=new c(this,!0,e,t),this.onData(this.writer.dtdEntity(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}notation(e,t){var n;return this.openCurrent(),n=new u(this,e,t),this.onData(this.writer.dtdNotation(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this}up(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this}end(){for(;this.currentLevel>=0;)this.up();return this.onEnd()}openCurrent(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)}openNode(e){var n,o,a,r;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),o="",e.type===t.Element){for(a in this.writerOptions.state=i.OpenTag,o=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,r=e.attribs)x.call(r,a)&&(n=r[a],o+=this.writer.attribute(n,this.writerOptions,this.currentLevel));o+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=i.InsideTag}else this.writerOptions.state=i.OpenTag,o=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.children?(o+=" [",this.writerOptions.state=i.InsideTag):(this.writerOptions.state=i.CloseTag,o+=">"),o+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(o,this.currentLevel),e.isOpen=!0}}closeNode(e){var n;if(!e.isClosed)return"",this.writerOptions.state=i.CloseTag,n=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=i.None,this.onData(n,this.currentLevel),e.isClosed=!0}onData(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)}onEnd(){return this.documentCompleted=!0,this.onEndCallback()}debugInfo(e){return null==e?"":"node: <"+e+">"}ele(){return this.element(...arguments)}nod(e,t,n){return this.node(e,t,n)}txt(e){return this.text(e)}dat(e){return this.cdata(e)}com(e){return this.comment(e)}ins(e,t){return this.instruction(e,t)}dec(e,t,n){return this.declaration(e,t,n)}dtd(e,t,n){return this.doctype(e,t,n)}e(e,t,n){return this.element(e,t,n)}n(e,t,n){return this.node(e,t,n)}t(e){return this.text(e)}d(e){return this.cdata(e)}c(e){return this.comment(e)}r(e){return this.raw(e)}i(e,t){return this.instruction(e,t)}att(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}a(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList(...arguments):this.attribute(...arguments)}ent(e,t){return this.entity(e,t)}pent(e,t){return this.pEntity(e,t)}not(e,t){return this.notation(e,t)}}}).call(this)},8833:function(e,t,n){(function(){var t,i;i=n(2026),t=n(9335),e.exports=class extends i{constructor(e){super(e),this.type=t.Dummy}clone(){return Object.create(this)}toString(e){return""}}}).call(this)},2161:function(e,t,n){(function(){var t,i,o,a,r,s,l,c={}.hasOwnProperty;({isObject:l,isFunction:s,getValue:r}=n(8369)),a=n(2026),t=n(9335),i=n(2750),o=n(663),e.exports=function(){class e extends a{constructor(e,n,i){var o,a,r,s;if(super(e),null==n)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(n),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=i&&this.attribute(i),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(a=0,r=(s=e.children).length;a<r;a++)if((o=s[a]).type===t.DocType){o.name=this.name;break}}clone(){var e,t,n,i;for(t in(n=Object.create(this)).isRoot&&(n.documentObject=null),n.attribs={},i=this.attribs)c.call(i,t)&&(e=i[t],n.attribs[t]=e.clone());return n.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=n,n.children.push(t)})),n}attribute(e,t){var n,o;if(null!=e&&(e=r(e)),l(e))for(n in e)c.call(e,n)&&(o=e[n],this.attribute(n,o));else s(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new i(this,e,""):null!=t&&(this.attribs[e]=new i(this,e,t));return this}removeAttribute(e){var t,n,i;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=r(e),Array.isArray(e))for(n=0,i=e.length;n<i;n++)t=e[n],delete this.attribs[t];else delete this.attribs[e];return this}toString(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))}att(e,t){return this.attribute(e,t)}a(e,t){return this.attribute(e,t)}getAttribute(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null}setAttribute(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNode(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null}setAttributeNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNS(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getAttributeNodeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setAttributeNodeNS(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasAttribute(e){return this.attribs.hasOwnProperty(e)}hasAttributeNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttribute(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t}setIdAttributeNS(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}setIdAttributeNode(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByTagNameNS(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}getElementsByClassName(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){var t,n,i;if(!super.isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=n=0,i=this.attribs.length-1;0<=i?n<=i:n>=i;t=0<=i?++n:--n)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0}}return Object.defineProperty(e.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new o(this.attribs)),this.attributeMap}}),e}.call(this)}).call(this)},663:function(e){(function(){e.exports=function(){class e{constructor(e){this.nodes=e}clone(){return this.nodes=null}getNamedItem(e){return this.nodes[e]}setNamedItem(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null}removeNamedItem(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null}item(e){return this.nodes[Object.keys(this.nodes)[e]]||null}getNamedItemNS(e,t){throw new Error("This DOM method is not implemented.")}setNamedItemNS(e){throw new Error("This DOM method is not implemented.")}removeNamedItemNS(e,t){throw new Error("This DOM method is not implemented.")}}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e}.call(this)}).call(this)},2026:function(e,t,n){(function(){var t,i,o,a,r,s,l,c,u,m,d,p,h,f,g,y,C={}.hasOwnProperty,v=[].splice;({isObject:y,isFunction:g,isEmpty:f,getValue:h}=n(8369)),c=null,o=null,a=null,r=null,s=null,d=null,p=null,m=null,l=null,i=null,u=null,t=null,e.exports=function(){class e{constructor(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,c||(c=n(2161),o=n(6170),a=n(2096),r=n(9077),s=n(6544),d=n(9406),p=n(3595),m=n(9181),l=n(8833),i=n(9335),u=n(2390),n(663),t=n(7557))}setParent(e){var t,n,i,o,a;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),a=[],n=0,i=(o=this.children).length;n<i;n++)t=o[n],a.push(t.setParent(this));return a}element(e,t,n){var i,o,a,r,s,l,c,u,m;if(l=null,null===t&&null==n&&([t,n]=[{},null]),null==t&&(t={}),t=h(t),y(t)||([n,t]=[t,n]),null!=e&&(e=h(e)),Array.isArray(e))for(a=0,c=e.length;a<c;a++)o=e[a],l=this.element(o);else if(g(e))l=this.element(e.apply());else if(y(e)){for(s in e)if(C.call(e,s))if(m=e[s],g(m)&&(m=m.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===s.indexOf(this.stringify.convertAttKey))l=this.attribute(s.substr(this.stringify.convertAttKey.length),m);else if(!this.options.separateArrayItems&&Array.isArray(m)&&f(m))l=this.dummy();else if(y(m)&&f(m))l=this.element(s);else if(this.options.keepNullNodes||null!=m)if(!this.options.separateArrayItems&&Array.isArray(m))for(r=0,u=m.length;r<u;r++)o=m[r],(i={})[s]=o,l=this.element(i);else y(m)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===s.indexOf(this.stringify.convertTextKey)?l=this.element(m):(l=this.element(s)).element(m):l=this.element(s,m);else l=this.dummy()}else l=this.options.keepNullNodes||null!==n?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),n):this.node(e,t,n):this.dummy();if(null==l)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return l}insertBefore(e,t,n){var i,o,a,r,s;if(null!=e?e.type:void 0)return r=t,(a=e).setParent(this),r?(o=children.indexOf(r),s=children.splice(o),children.push(a),Array.prototype.push.apply(children,s)):children.push(a),a;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),s=this.parent.children.splice(o),i=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,s),i}insertAfter(e,t,n){var i,o,a;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return o=this.parent.children.indexOf(this),a=this.parent.children.splice(o+1),i=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,a),i}remove(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),v.apply(this.parent.children,[e,e-e+1].concat([])),this.parent}node(e,t,n){var i;return null!=e&&(e=h(e)),t||(t={}),t=h(t),y(t)||([n,t]=[t,n]),i=new c(this,e,t),null!=n&&i.text(n),this.children.push(i),i}text(e){var t;return y(e)&&this.element(e),t=new p(this,e),this.children.push(t),this}cdata(e){var t;return t=new o(this,e),this.children.push(t),this}comment(e){var t;return t=new a(this,e),this.children.push(t),this}commentBefore(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this}commentAfter(e){var t,n;return t=this.parent.children.indexOf(this),n=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,n),this}raw(e){var t;return t=new d(this,e),this.children.push(t),this}dummy(){return new l(this)}instruction(e,t){var n,i,o,a,r;if(null!=e&&(e=h(e)),null!=t&&(t=h(t)),Array.isArray(e))for(a=0,r=e.length;a<r;a++)n=e[a],this.instruction(n);else if(y(e))for(n in e)C.call(e,n)&&(i=e[n],this.instruction(n,i));else g(t)&&(t=t.apply()),o=new m(this,e,t),this.children.push(o);return this}instructionBefore(e,t){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,i),this}instructionAfter(e,t){var n,i;return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,i),this}declaration(e,t,n){var o,a;return o=this.document(),a=new r(o,e,t,n),0===o.children.length?o.children.unshift(a):o.children[0].type===i.Declaration?o.children[0]=a:o.children.unshift(a),o.root()||o}dtd(e,t){var n,o,a,r,l,c,u,m,d;for(n=this.document(),o=new s(n,e,t),a=r=0,c=(m=n.children).length;r<c;a=++r)if(m[a].type===i.DocType)return n.children[a]=o,o;for(a=l=0,u=(d=n.children).length;l<u;a=++l)if(d[a].isRoot)return n.children.splice(a,0,o),o;return n.children.push(o),o}up(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent}root(){var e;for(e=this;e;){if(e.type===i.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}}document(){var e;for(e=this;e;){if(e.type===i.Document)return e;e=e.parent}}end(e){return this.document().end(e)}prev(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]}next(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]}importDocument(e){var t,n,o,a,r;if((n=e.root().clone()).parent=this,n.isRoot=!1,this.children.push(n),this.type===i.Document&&(n.isRoot=!0,n.documentObject=this,this.rootObject=n,this.children))for(o=0,a=(r=this.children).length;o<a;o++)if((t=r[o]).type===i.DocType){t.name=n.name;break}return this}debugInfo(e){var t,n;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(n=this.parent)?n.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""}ele(e,t,n){return this.element(e,t,n)}nod(e,t,n){return this.node(e,t,n)}txt(e){return this.text(e)}dat(e){return this.cdata(e)}com(e){return this.comment(e)}ins(e,t){return this.instruction(e,t)}doc(){return this.document()}dec(e,t,n){return this.declaration(e,t,n)}e(e,t,n){return this.element(e,t,n)}n(e,t,n){return this.node(e,t,n)}t(e){return this.text(e)}d(e){return this.cdata(e)}c(e){return this.comment(e)}r(e){return this.raw(e)}i(e,t){return this.instruction(e,t)}u(){return this.up()}importXMLBuilder(e){return this.importDocument(e)}attribute(e,t){throw new Error("attribute() applies to element nodes only.")}att(e,t){return this.attribute(e,t)}a(e,t){return this.attribute(e,t)}removeAttribute(e){throw new Error("attribute() applies to element nodes only.")}replaceChild(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}removeChild(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}appendChild(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}hasChildNodes(){return 0!==this.children.length}cloneNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}normalize(){throw new Error("This DOM method is not implemented."+this.debugInfo())}isSupported(e,t){return!0}hasAttributes(){return 0!==this.attribs.length}compareDocumentPosition(e){var n,i;return(n=this)===e?0:this.document()!==e.document()?(i=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?i|=t.Preceding:i|=t.Following,i):n.isAncestor(e)?t.Contains|t.Preceding:n.isDescendant(e)?t.Contains|t.Following:n.isPreceding(e)?t.Preceding:t.Following}isSameNode(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupPrefix(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isDefaultNamespace(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}lookupNamespaceURI(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}isEqualNode(e){var t,n,i;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=n=0,i=this.children.length-1;0<=i?n<=i:n>=i;t=0<=i?++n:--n)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0}getFeature(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())}setUserData(e,t,n){throw new Error("This DOM method is not implemented."+this.debugInfo())}getUserData(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}contains(e){return!!e&&(e===this||this.isDescendant(e))}isDescendant(e){var t,n,i,o;for(n=0,i=(o=this.children).length;n<i;n++){if(e===(t=o[n]))return!0;if(t.isDescendant(e))return!0}return!1}isAncestor(e){return e.isDescendant(this)}isPreceding(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t<n}isFollowing(e){var t,n;return t=this.treePosition(e),n=this.treePosition(this),-1!==t&&-1!==n&&t>n}treePosition(e){var t,n;return n=0,t=!1,this.foreachTreeNode(this.document(),(function(i){if(n++,!t&&i===e)return t=!0})),t?n:-1}foreachTreeNode(e,t){var n,i,o,a,r;for(e||(e=this.document()),i=0,o=(a=e.children).length;i<o;i++){if(r=t(n=a[i]))return r;if(r=this.foreachTreeNode(n,t))return r}}}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new u(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,n,o,a;if(this.nodeType===i.Element||this.nodeType===i.DocumentFragment){for(a="",t=0,n=(o=this.children).length;t<n;t++)(e=o[t]).textContent&&(a+=e.textContent);return a}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e}.call(this)}).call(this)},2390:function(e){(function(){e.exports=function(){class e{constructor(e){this.nodes=e}clone(){return this.nodes=null}item(e){return this.nodes[e]||null}}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e}.call(this)}).call(this)},9181:function(e,t,n){(function(){var t,i;t=n(9335),i=n(6488),e.exports=class extends i{constructor(e,n,i){if(super(e),null==n)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(n),this.name=this.target,i&&(this.value=this.stringify.insValue(i))}clone(){return Object.create(this)}toString(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))}isEqualNode(e){return!!super.isEqualNode(e)&&e.target===this.target}}}).call(this)},9406:function(e,t,n){(function(){var t,i;t=n(9335),i=n(2026),e.exports=class extends i{constructor(e,n){if(super(e),null==n)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(n)}clone(){return Object.create(this)}toString(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))}}}).call(this)},1996:function(e,t,n){(function(){var t,i,o,a={}.hasOwnProperty;t=n(9335),o=n(751),i=n(594),e.exports=class extends o{constructor(e,t){super(t),this.stream=e}endline(e,t,n){return e.isLastRootNode&&t.state===i.CloseTag?"":super.endline(e,t,n)}document(e,t){var n,i,o,a,r,s,l,c,u;for(i=o=0,r=(l=e.children).length;o<r;i=++o)(n=l[i]).isLastRootNode=i===e.children.length-1;for(t=this.filterOptions(t),u=[],a=0,s=(c=e.children).length;a<s;a++)n=c[a],u.push(this.writeChildNode(n,t,0));return u}cdata(e,t,n){return this.stream.write(super.cdata(e,t,n))}comment(e,t,n){return this.stream.write(super.comment(e,t,n))}declaration(e,t,n){return this.stream.write(super.declaration(e,t,n))}docType(e,t,n){var o,a,r,s;if(n||(n=0),this.openNode(e,t,n),t.state=i.OpenTag,this.stream.write(this.indent(e,t,n)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,n)),t.state=i.InsideTag,a=0,r=(s=e.children).length;a<r;a++)o=s[a],this.writeChildNode(o,t,n+1);t.state=i.CloseTag,this.stream.write("]")}return t.state=i.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,n)),t.state=i.None,this.closeNode(e,t,n)}element(e,n,o){var r,s,l,c,u,m,d,p,h,f,g,y,C,v;if(o||(o=0),this.openNode(e,n,o),n.state=i.OpenTag,h=this.indent(e,n,o)+"<"+e.name,n.pretty&&n.width>0)for(p in m=h.length,g=e.attribs)a.call(g,p)&&(r=g[p],m+(f=this.attribute(r,n,o)).length>n.width?(v=this.indent(e,n,o+1)+f,h+=this.endline(e,n,o)+v,m=v.length):(h+=v=" "+f,m+=v.length));else for(p in y=e.attribs)a.call(y,p)&&(r=y[p],h+=this.attribute(r,n,o));if(this.stream.write(h),c=0===(l=e.children.length)?null:e.children[0],0===l||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw||e.type===t.CData)&&""===e.value})))n.allowEmpty?(this.stream.write(">"),n.state=i.CloseTag,this.stream.write("</"+e.name+">")):(n.state=i.CloseTag,this.stream.write(n.spaceBeforeSlash+"/>"));else if(!n.pretty||1!==l||c.type!==t.Text&&c.type!==t.Raw&&c.type!==t.CData||null==c.value){for(this.stream.write(">"+this.endline(e,n,o)),n.state=i.InsideTag,u=0,d=(C=e.children).length;u<d;u++)s=C[u],this.writeChildNode(s,n,o+1);n.state=i.CloseTag,this.stream.write(this.indent(e,n,o)+"</"+e.name+">")}else this.stream.write(">"),n.state=i.InsideTag,n.suppressPrettyCount++,this.writeChildNode(c,n,o+1),n.suppressPrettyCount--,n.state=i.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,n,o)),n.state=i.None,this.closeNode(e,n,o)}processingInstruction(e,t,n){return this.stream.write(super.processingInstruction(e,t,n))}raw(e,t,n){return this.stream.write(super.raw(e,t,n))}text(e,t,n){return this.stream.write(super.text(e,t,n))}dtdAttList(e,t,n){return this.stream.write(super.dtdAttList(e,t,n))}dtdElement(e,t,n){return this.stream.write(super.dtdElement(e,t,n))}dtdEntity(e,t,n){return this.stream.write(super.dtdEntity(e,t,n))}dtdNotation(e,t,n){return this.stream.write(super.dtdNotation(e,t,n))}}}).call(this)},6434:function(e,t,n){(function(){var t;t=n(751),e.exports=class extends t{constructor(e){super(e)}document(e,t){var n,i,o,a,r;for(t=this.filterOptions(t),a="",i=0,o=(r=e.children).length;i<o;i++)n=r[i],a+=this.writeChildNode(n,t,0);return t.pretty&&a.slice(-t.newline.length)===t.newline&&(a=a.slice(0,-t.newline.length)),a}}}).call(this)},5549:function(e){(function(){var t={}.hasOwnProperty;e.exports=function(){class e{constructor(e){var n,i,o;for(n in this.assertLegalChar=this.assertLegalChar.bind(this),this.assertLegalName=this.assertLegalName.bind(this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),i=e.stringify||{})t.call(i,n)&&(o=i[n],this[n]=o)}name(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")}text(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))}cdata(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))}comment(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)}raw(e){return this.options.noValidation?e:""+e||""}attValue(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))}insTarget(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}insValue(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)}xmlVersion(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e}xmlEncoding(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)}xmlStandalone(e){return this.options.noValidation?e:e?"yes":"no"}dtdPubID(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdSysID(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdElementValue(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdAttType(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdAttDefault(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdEntityValue(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}dtdNData(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")}assertLegalChar(e){var t,n;if(this.options.noValidation)return e;if("1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,void 0!==this.options.invalidCharReplacement)e=e.replace(t,this.options.invalidCharReplacement);else if(n=e.match(t))throw new Error(`Invalid character in string: ${e} at index ${n.index}`)}else if("1.1"===this.options.version)if(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,void 0!==this.options.invalidCharReplacement)e=e.replace(t,this.options.invalidCharReplacement);else if(n=e.match(t))throw new Error(`Invalid character in string: ${e} at index ${n.index}`);return e}assertLegalName(e){var t;if(this.options.noValidation)return e;if(t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!(e=this.assertLegalChar(e)).match(t))throw new Error(`Invalid character in name: ${e}`);return e}textEscape(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&(lt|gt|amp|apos|quot);)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))}attEscape(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&(lt|gt|amp|apos|quot);)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))}}return e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e}.call(this)}).call(this)},3595:function(e,t,n){(function(){var t,i;t=n(9335),i=n(6488),e.exports=function(){class e extends i{constructor(e,n){if(super(e),null==n)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(n)}clone(){return Object.create(this)}toString(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))}splitText(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}replaceWholeText(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}return Object.defineProperty(e.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(e.prototype,"wholeText",{get:function(){var e,t,n;for(n="",t=this.previousSibling;t;)n=t.data+n,t=t.previousSibling;for(n+=this.data,e=this.nextSibling;e;)n+=e.data,e=e.nextSibling;return n}}),e}.call(this)}).call(this)},751:function(e,t,n){(function(){var t,i,o,a={}.hasOwnProperty;({assign:o}=n(8369)),t=n(9335),n(9077),n(6544),n(6170),n(2096),n(2161),n(9406),n(3595),n(9181),n(8833),n(1179),n(6347),n(9078),n(4777),i=n(594),e.exports=class{constructor(e){var t,n,i;for(t in e||(e={}),this.options=e,n=e.writer||{})a.call(n,t)&&(i=n[t],this["_"+t]=this[t],this[t]=i)}filterOptions(e){var t,n,a,r,s,l,c,u,m;return e||(e={}),e=o({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(n=e.indent)?n:"  ",t.newline=null!=(a=e.newline)?a:"\n",t.offset=null!=(r=e.offset)?r:0,t.width=null!=(s=e.width)?s:0,t.dontPrettyTextNodes=null!=(l=null!=(c=e.dontPrettyTextNodes)?c:e.dontprettytextnodes)?l:0,t.spaceBeforeSlash=null!=(u=null!=(m=e.spaceBeforeSlash)?m:e.spacebeforeslash)?u:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=i.None,t}indent(e,t,n){var i;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(i=(n||0)+t.offset+1)>0?new Array(i).join(t.indent):""}endline(e,t,n){return!t.pretty||t.suppressPrettyCount?"":t.newline}attribute(e,t,n){var i;return this.openAttribute(e,t,n),i=t.pretty&&t.width>0?e.name+'="'+e.value+'"':" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,n),i}cdata(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<![CDATA[",t.state=i.InsideTag,o+=e.value,t.state=i.CloseTag,o+="]]>"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}comment(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"\x3c!-- ",t.state=i.InsideTag,o+=e.value,t.state=i.CloseTag,o+=" --\x3e"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}declaration(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<?xml",t.state=i.InsideTag,o+=' version="'+e.version+'"',null!=e.encoding&&(o+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(o+=' standalone="'+e.standalone+'"'),t.state=i.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}docType(e,t,n){var o,a,r,s,l;if(n||(n=0),this.openNode(e,t,n),t.state=i.OpenTag,s=this.indent(e,t,n),s+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?s+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(s+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(s+=" [",s+=this.endline(e,t,n),t.state=i.InsideTag,a=0,r=(l=e.children).length;a<r;a++)o=l[a],s+=this.writeChildNode(o,t,n+1);t.state=i.CloseTag,s+="]"}return t.state=i.CloseTag,s+=t.spaceBeforeSlash+">",s+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),s}element(e,n,o){var r,s,l,c,u,m,d,p,h,f,g,y,C,v,b,S,w,M;if(o||(o=0),g=!1,this.openNode(e,n,o),n.state=i.OpenTag,y=this.indent(e,n,o)+"<"+e.name,n.pretty&&n.width>0)for(f in d=y.length,v=e.attribs)a.call(v,f)&&(r=v[f],d+(C=this.attribute(r,n,o)).length>n.width?(M=this.indent(e,n,o+1)+C,y+=this.endline(e,n,o)+M,d=M.length):(y+=M=" "+C,d+=M.length));else for(f in b=e.attribs)a.call(b,f)&&(r=b[f],y+=this.attribute(r,n,o));if(c=0===(l=e.children.length)?null:e.children[0],0===l||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw||e.type===t.CData)&&""===e.value})))n.allowEmpty?(y+=">",n.state=i.CloseTag,y+="</"+e.name+">"+this.endline(e,n,o)):(n.state=i.CloseTag,y+=n.spaceBeforeSlash+"/>"+this.endline(e,n,o));else if(!n.pretty||1!==l||c.type!==t.Text&&c.type!==t.Raw&&c.type!==t.CData||null==c.value){if(n.dontPrettyTextNodes)for(u=0,p=(S=e.children).length;u<p;u++)if(((s=S[u]).type===t.Text||s.type===t.Raw||s.type===t.CData)&&null!=s.value){n.suppressPrettyCount++,g=!0;break}for(y+=">"+this.endline(e,n,o),n.state=i.InsideTag,m=0,h=(w=e.children).length;m<h;m++)s=w[m],y+=this.writeChildNode(s,n,o+1);n.state=i.CloseTag,y+=this.indent(e,n,o)+"</"+e.name+">",g&&n.suppressPrettyCount--,y+=this.endline(e,n,o),n.state=i.None}else y+=">",n.state=i.InsideTag,n.suppressPrettyCount++,g=!0,y+=this.writeChildNode(c,n,o+1),n.suppressPrettyCount--,g=!1,n.state=i.CloseTag,y+="</"+e.name+">"+this.endline(e,n,o);return this.closeNode(e,n,o),y}writeChildNode(e,n,i){switch(e.type){case t.CData:return this.cdata(e,n,i);case t.Comment:return this.comment(e,n,i);case t.Element:return this.element(e,n,i);case t.Raw:return this.raw(e,n,i);case t.Text:return this.text(e,n,i);case t.ProcessingInstruction:return this.processingInstruction(e,n,i);case t.Dummy:return"";case t.Declaration:return this.declaration(e,n,i);case t.DocType:return this.docType(e,n,i);case t.AttributeDeclaration:return this.dtdAttList(e,n,i);case t.ElementDeclaration:return this.dtdElement(e,n,i);case t.EntityDeclaration:return this.dtdEntity(e,n,i);case t.NotationDeclaration:return this.dtdNotation(e,n,i);default:throw new Error("Unknown XML node type: "+e.constructor.name)}}processingInstruction(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<?",t.state=i.InsideTag,o+=e.target,e.value&&(o+=" "+e.value),t.state=i.CloseTag,o+=t.spaceBeforeSlash+"?>",o+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}raw(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n),t.state=i.InsideTag,o+=e.value,t.state=i.CloseTag,o+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}text(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n),t.state=i.InsideTag,o+=e.value,t.state=i.CloseTag,o+=this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}dtdAttList(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<!ATTLIST",t.state=i.InsideTag,o+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(o+=" "+e.defaultValueType),e.defaultValue&&(o+=' "'+e.defaultValue+'"'),t.state=i.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}dtdElement(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<!ELEMENT",t.state=i.InsideTag,o+=" "+e.name+" "+e.value,t.state=i.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}dtdEntity(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<!ENTITY",t.state=i.InsideTag,e.pe&&(o+=" %"),o+=" "+e.name,e.value?o+=' "'+e.value+'"':(e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),e.nData&&(o+=" NDATA "+e.nData)),t.state=i.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}dtdNotation(e,t,n){var o;return this.openNode(e,t,n),t.state=i.OpenTag,o=this.indent(e,t,n)+"<!NOTATION",t.state=i.InsideTag,o+=" "+e.name,e.pubID&&e.sysID?o+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?o+=' PUBLIC "'+e.pubID+'"':e.sysID&&(o+=' SYSTEM "'+e.sysID+'"'),t.state=i.CloseTag,o+=t.spaceBeforeSlash+">"+this.endline(e,t,n),t.state=i.None,this.closeNode(e,t,n),o}openNode(e,t,n){}closeNode(e,t,n){}openAttribute(e,t,n){}closeAttribute(e,t,n){}}}).call(this)},5532:function(e,t,n){(function(){var t,i,o,a,r,s,l,c,u;({assign:c,isFunction:u}=n(8369)),o=n(1770),a=n(6934),r=n(9227),l=n(6434),s=n(1996),t=n(9335),i=n(594),e.exports.create=function(e,t,n,i){var o,r;if(null==e)throw new Error("Root element needs a name.");return i=c({},t,n,i),r=(o=new a(i)).element(e),i.headless||(o.declaration(i),null==i.pubID&&null==i.sysID||o.dtd(i)),r},e.exports.begin=function(e,t,n){return u(e)&&([t,n]=[e,t],e={}),t?new r(e,t,n):new a(e)},e.exports.stringWriter=function(e){return new l(e)},e.exports.streamWriter=function(e,t){return new s(e,t)},e.exports.implementation=new o,e.exports.nodeType=t,e.exports.writerState=i}).call(this)},1758:()=>{}},n={};function i(t){if(n[t])return n[t].exports;var o=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}return i.c=n,i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i(i.s=3607)})();